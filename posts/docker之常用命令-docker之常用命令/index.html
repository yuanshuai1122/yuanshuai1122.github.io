<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Docker之常用命令 - CN.yuanshuai</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="Docker常用命令 1、帮助命令 docker versiondocker infodocker --help2、镜像命令 2.1、docker images docker images 列出本地主机上的镜像 各个选项说明: REPOSITOR" /><meta name="keywords" content='docker' /><meta itemprop="name" content="Docker之常用命令">
<meta itemprop="description" content="Docker常用命令 1、帮助命令 docker versiondocker infodocker --help2、镜像命令 2.1、docker images docker images 列出本地主机上的镜像 各个选项说明: REPOSITOR"><meta itemprop="datePublished" content="2021-03-23T23:04:09+00:00" />
<meta itemprop="dateModified" content="2021-03-23T23:04:09+00:00" />
<meta itemprop="wordCount" content="2366">
<meta itemprop="keywords" content="docker," /><meta property="og:title" content="Docker之常用命令" />
<meta property="og:description" content="Docker常用命令 1、帮助命令 docker versiondocker infodocker --help2、镜像命令 2.1、docker images docker images 列出本地主机上的镜像 各个选项说明: REPOSITOR" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-23T23:04:09+00:00" />
<meta property="article:modified_time" content="2021-03-23T23:04:09+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker之常用命令"/>
<meta name="twitter:description" content="Docker常用命令 1、帮助命令 docker versiondocker infodocker --help2、镜像命令 2.1、docker images docker images 列出本地主机上的镜像 各个选项说明: REPOSITOR"/>
<meta name="application-name" content="CN.yuanshuai">
<meta name="apple-mobile-web-app-title" content="CN.yuanshuai"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" /><link rel="prev" href="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E7%AE%80%E4%BB%8B-docker%E4%B9%8B%E7%AE%80%E4%BB%8B/" /><link rel="next" href="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%AE%89%E8%A3%85-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%AE%89%E8%A3%85/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Docker之常用命令",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/blog.yuanshuaicn.com\/posts\/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\/"
    },"genre": "posts","keywords": "docker","wordcount":  2366 ,
    "url": "http:\/\/blog.yuanshuaicn.com\/posts\/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\/","datePublished": "2021-03-23T23:04:09+00:00","dateModified": "2021-03-23T23:04:09+00:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "yuanshuai"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="CN.yuanshuai"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="CN.yuanshuai" data-alt="CN.yuanshuai" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">CN.yuanshuai</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="CN.yuanshuai"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="/fixit.min.svg" data-alt="/fixit.min.svg" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">CN.yuanshuai</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><main class="container"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom">
    </aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Docker之常用命令</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><a href="https://cloud.tencent.com/developer/user/8180692" title="作者"target="_blank" rel="external nofollow noopener noreferrer author" class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
    yuanshuai</a></span></div>
      <div class="post-meta-line"><span title="发布于 2021-03-23 23:04:09"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden="true"></i><time datetime="2021-03-23">2021-03-23</time></span>&nbsp;<span title="更新于 2021-03-23 23:04:09"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden="true"></i><time datetime="2021-03-23">2021-03-23</time></span>&nbsp;<span title="2366 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 2400 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 5 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1帮助命令">1、<strong>帮助命令</strong></a></li>
    <li><a href="#2镜像命令">2、镜像命令</a>
      <ul>
        <li><a href="#21docker-images">2.1、docker images</a></li>
        <li><a href="#22docker-search-某个xxx镜像名字">2.2、docker search 某个XXX镜像名字</a></li>
        <li><a href="#23docker-pull-某个xxx镜像名字">2.3、docker pull 某个XXX镜像名字</a></li>
        <li><a href="#24docker-rmi-某个xxx镜像名字id">2.4、docker rmi 某个XXX镜像名字ID</a></li>
      </ul>
    </li>
    <li><a href="#3容器命令">3、<strong>容器命令</strong></a>
      <ul>
        <li><a href="#31有镜像才能创建容器这是根本前提下载一个centos镜像演示">3.1、有镜像才能创建容器，这是根本前提(下载一个CentOS镜像演示)</a></li>
        <li><a href="#32新建并启动容器">3.2、新建并启动容器</a></li>
        <li><a href="#33列出当前所有正在运行的容器">3.3、列出当前所有正在运行的容器</a></li>
        <li><a href="#34退出容器">3.4、退出容器</a></li>
        <li><a href="#35启动容器">3.5、启动容器</a></li>
        <li><a href="#36重启容器">3.6、重启容器</a></li>
        <li><a href="#37停止容器">3.7、停止容器</a></li>
        <li><a href="#38强制停止容器">3.8、强制停止容器</a></li>
        <li><a href="#39删除已停止的容器">3.9、删除已停止的容器</a></li>
        <li><a href="#310重要">3.10、<strong>重要</strong></a></li>
      </ul>
    </li>
    <li><a href="#4小总结">4、<strong>小总结</strong></a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><h1 id="docker常用命令"><strong>Docker</strong>常用命令</h1>
<h2 id="1帮助命令">1、<strong>帮助命令</strong></h2>
<div class="highlight" id="id-1"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker version</span></span></code></pre></div><div class="highlight" id="id-2"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker info</span></span></code></pre></div><div class="highlight" id="id-3"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker --help</span></span></code></pre></div><h2 id="2镜像命令">2、镜像命令</h2>
<h3 id="21docker-images">2.1、docker images</h3>
<div class="highlight" id="id-4"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker images</span></span></code></pre></div><ul>
<li>列出本地主机上的镜像</li>
</ul>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/18.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/18.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/18.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/18.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/18.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/18.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>各个选项说明:</p>
<blockquote>
<p>REPOSITORY：表示镜像的仓库源</p>
<p>TAG：镜像的标签</p>
<p>IMAGE ID：镜像ID</p>
<p>CREATED：镜像创建时间</p>
<p>SIZE：镜像大小</p>
</blockquote>
<p>同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本，我们使用 REPOSITORY:TAG 来定义不同的镜像。</p>
<p>如果你不指定一个镜像的版本标签，例如你只使用 ubuntu，docker 将默认使用 ubuntu:latest 镜像</p>
<ul>
<li>OPTIONS说明：</li>
</ul>
<p>-a :列出本地所有的镜像（含中间映像层）</p>
<p>-q :只显示镜像ID。</p>
<p>&ndash;digests :显示镜像的摘要信息</p>
<p>&ndash;no-trunc :显示完整的镜像信息</p>
<h3 id="22docker-search-某个xxx镜像名字">2.2、docker search 某个XXX镜像名字</h3>
<ul>
<li>网站</li>
</ul>
<p><a href="https://hub.docker.com"target="_blank" rel="external nofollow noopener noreferrer">https://hub.docker.com</a></p>
<ul>
<li>命令</li>
</ul>
<div class="highlight" id="id-5"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker search <span class="o">[</span>OPTIONS<span class="o">]</span> 镜像名字</span></span></code></pre></div><p>OPTIONS说明：</p>
<div class="highlight" id="id-6"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">--no-trunc : 显示完整的镜像描述</span></span></code></pre></div><div class="highlight" id="id-7"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">-s : 列出收藏数不小于指定值的镜像。</span></span></code></pre></div><div class="highlight" id="id-8"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">--automated : 只列出 automated build类型的镜像；</span></span></code></pre></div><h3 id="23docker-pull-某个xxx镜像名字">2.3、docker pull 某个XXX镜像名字</h3>
<ul>
<li>下载镜像</li>
</ul>
<div class="highlight" id="id-9"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull 镜像名字<span class="o">[</span>:TAG<span class="o">]</span></span></span></code></pre></div><h3 id="24docker-rmi-某个xxx镜像名字id">2.4、docker rmi 某个XXX镜像名字ID</h3>
<ul>
<li>
<p>删除镜像</p>
</li>
<li>
<p>删除单个</p>
</li>
</ul>
<div class="highlight" id="id-10"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rmi  -f 镜像ID</span></span></code></pre></div><ul>
<li>删除多个</li>
</ul>
<div class="highlight" id="id-11"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rmi -f 镜像名1:TAG 镜像名2:TAG </span></span></code></pre></div><ul>
<li>删除全部</li>
</ul>
<div class="highlight" id="id-12"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rmi -f <span class="k">$(</span>docker images -qa<span class="k">)</span></span></span></code></pre></div><h2 id="3容器命令">3、<strong>容器命令</strong></h2>
<h3 id="31有镜像才能创建容器这是根本前提下载一个centos镜像演示">3.1、有镜像才能创建容器，这是根本前提(下载一个CentOS镜像演示)</h3>
<div class="highlight" id="id-13"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker pull centos</span></span></code></pre></div><h3 id="32新建并启动容器">3.2、新建并启动容器</h3>
<div class="highlight" id="id-14"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run <span class="o">[</span>OPTIONS<span class="o">]</span> IMAGE <span class="o">[</span>COMMAND<span class="o">]</span> <span class="o">[</span>ARG...<span class="o">]</span></span></span></code></pre></div><ul>
<li>OPTIONS说明</li>
</ul>
<blockquote>
<p>OPTIONS说明（常用）：有些是一个减号，有些是两个减号</p>
<p>&ndash;name=&ldquo;容器新名字&rdquo;: 为容器指定一个名称；</p>
<p>-d: 后台运行容器，并返回容器ID，也即启动守护式容器；</p>
<p>-i：以交互模式运行容器，通常与 -t 同时使用；</p>
<p>-t：为容器重新分配一个伪输入终端，通常与 -i 同时使用；</p>
<p>-P: 随机端口映射；</p>
<p>-p: 指定端口映射，有以下四种格式</p>
<p>ip:hostPort:containerPort</p>
<p>ip::containerPort</p>
<p>​    hostPort:containerPort</p>
<p>containerPort</p>
</blockquote>
<ul>
<li>启动交互式容器</li>
</ul>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/19.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/19.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/19.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/19.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/19.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/19.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>#使用镜像centos:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。</p>
<div class="highlight" id="id-15"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -it centos /bin/bash </span></span></code></pre></div><h3 id="33列出当前所有正在运行的容器">3.3、列出当前所有正在运行的容器</h3>
<div class="highlight" id="id-16"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ps <span class="o">[</span>OPTIONS<span class="o">]</span></span></span></code></pre></div><ul>
<li>OPTIONS说明</li>
</ul>
<blockquote>
<p>OPTIONS说明（常用）：</p>
<p>-a : 列出当前所有 正在运行 的容器 + 历史上运行过 的</p>
<p>-l :显示最近创建的容器。</p>
<p>-n：显示最近n个创建的容器。</p>
<p>-q :静默模式，只显示容器编号。</p>
<p>&ndash;no-trunc :不截断输出。</p>
</blockquote>
<h3 id="34退出容器">3.4、退出容器</h3>
<p>两种退出方式:</p>
<ul>
<li>容器停止退出</li>
</ul>
<div class="highlight" id="id-17"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">exit</span></span></code></pre></div><p>容器不停止退出</p>
<p>ctrl+P+Q</p>
<h3 id="35启动容器">3.5、启动容器</h3>
<div class="highlight" id="id-18"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker start 容器ID或者容器名</span></span></code></pre></div><h3 id="36重启容器">3.6、重启容器</h3>
<div class="highlight" id="id-19"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker restart 容器ID或者容器名</span></span></code></pre></div><h3 id="37停止容器">3.7、停止容器</h3>
<div class="highlight" id="id-20"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker stop 容器ID或者容器名</span></span></code></pre></div><h3 id="38强制停止容器">3.8、强制停止容器</h3>
<div class="highlight" id="id-21"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">kill</span> 容器ID或者容器名</span></span></code></pre></div><h3 id="39删除已停止的容器">3.9、删除已停止的容器</h3>
<div class="highlight" id="id-22"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rm 容器ID</span></span></code></pre></div><p>一次性删除多个容器</p>
<div class="highlight" id="id-23"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker rm -f <span class="k">$(</span>docker ps -a -q<span class="k">)</span></span></span></code></pre></div><div class="highlight" id="id-24"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ps -a -q <span class="p">|</span> xargs docker rm</span></span></code></pre></div><h3 id="310重要">3.10、<strong>重要</strong></h3>
<ul>
<li>启动守护式容器</li>
</ul>
<div class="highlight" id="id-25"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d 容器名</span></span></code></pre></div><ul>
<li>使用镜像centos:latest以后台模式启动一个容器</li>
</ul>
<div class="highlight" id="id-26"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d centos </span></span></code></pre></div><p>问题：然后</p>
<div class="highlight" id="id-27"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker ps -a </span></span></code></pre></div><p>进行查看, 会发现容器已经退出</p>
<p>很重要的要说明的一点: Docker容器后台运行,就必须有一个前台进程.</p>
<p>容器运行的命令如果不是那些 一直挂起的命令 （比如运行top，tail），就是会自动退出的。</p>
<p>这个是docker的机制问题,比如你的web容器,我们以nginx为例，正常情况下,我们配置启动服务只需要启动响应的service即可。例如</p>
<div class="highlight" id="id-28"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">service nginx start </span></span></code></pre></div><p>但是,这样做,nginx为后台进程模式运行,就导致docker前台没有运行的应用, 这样的容器后台启动后,会立即自杀因为他觉得他没事可做了.</p>
<p>所以，最佳的解决方案是,将你要运行的程序以前台进程的形式运行</p>
<ul>
<li>查看容器日志</li>
</ul>
<div class="highlight" id="id-29"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker logs -f -t --tail 容器ID</span></span></code></pre></div><p>例：</p>
<div class="highlight" id="id-30"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker run -d centos /bin/sh -c <span class="s2">&#34;while true;do echo hello zzyy;sleep 2;done&#34;</span> </span></span></code></pre></div><p>*  -t 是加入时间戳</p>
<p>*  -f 跟随最新的日志打印</p>
<p>*  &ndash;tail 数字 显示最后多少条</p>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/20.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/20.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/20.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/20.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/20.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/20.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<ul>
<li>查看容器内运行的进程</li>
</ul>
<div class="highlight" id="id-31"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker top 容器ID</span></span></code></pre></div><ul>
<li>查看容器内部细节</li>
</ul>
<div class="highlight" id="id-32"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker inspect 容器ID</span></span></code></pre></div><ul>
<li>进入正在运行的容器并以命令行交互</li>
</ul>
<div class="highlight" id="id-33"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it 容器ID bashShell</span></span></code></pre></div><p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/21.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/21.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/21.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/21.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/21.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/21.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<ul>
<li>重新进入</li>
</ul>
<div class="highlight" id="id-34"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker attach 容器ID</span></span></code></pre></div><ul>
<li>
<p>上述两个区别</p>
<ul>
<li>attach 直接进入容器启动命令的终端，不会启动新的进程</li>
<li>exec 是在容器中打开新的终端，并且可以启动新的进程</li>
</ul>
</li>
<li>
<p>从容器内拷贝文件到主机上</p>
</li>
</ul>
<div class="highlight" id="id-35"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker cp  容器ID:容器内路径 目的主机路径</span></span></code></pre></div><p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/22.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/22.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/22.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/22.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/22.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/22.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h2 id="4小总结">4、<strong>小总结</strong></h2>
<ul>
<li>常用命令</li>
</ul>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/23.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/23.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/23.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/23.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/23.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/docker/23.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<div class="highlight" id="id-36"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">attach    Attach to a running container                 <span class="c1"># 当前 shell 下 attach 连接指定运行镜像 </span>
</span></span><span class="line"><span class="cl">build     Build an image from a Dockerfile              <span class="c1"># 通过 Dockerfile 定制镜像 </span>
</span></span><span class="line"><span class="cl">commit    Create a new image from a container changes   <span class="c1"># 提交当前容器为新的镜像 </span>
</span></span><span class="line"><span class="cl">cp        Copy files/folders from the containers filesystem to the host path   <span class="c1">#从容器中拷贝指定文件或者目录到宿主机中 </span>
</span></span><span class="line"><span class="cl">create    Create a new container                        <span class="c1"># 创建一个新的容器，同 run，但不启动容器 </span>
</span></span><span class="line"><span class="cl">diff      Inspect changes on a container<span class="err">&#39;</span>s filesystem   <span class="c1"># 查看 docker 容器变化 </span>
</span></span><span class="line"><span class="cl">events    Get real <span class="nb">time</span> events from the server          <span class="c1"># 从 docker 服务获取容器实时事件 </span>
</span></span><span class="line"><span class="cl"><span class="nb">exec</span>      Run a <span class="nb">command</span> in an existing container        <span class="c1"># 在已存在的容器上运行命令 </span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span>    Stream the contents of a container as a tar archive   <span class="c1"># 导出容器的内容流作为一个 tar 归档文件[对应 import ] </span>
</span></span><span class="line"><span class="cl"><span class="nb">history</span>   Show the <span class="nb">history</span> of an image                  <span class="c1"># 展示一个镜像形成历史 </span>
</span></span><span class="line"><span class="cl">images    List images                                   <span class="c1"># 列出系统当前镜像 </span>
</span></span><span class="line"><span class="cl">import    Create a new filesystem image from the contents of a tarball <span class="c1"># 从tar包中的内容创建一个新的文件系统映像[对应export] </span>
</span></span><span class="line"><span class="cl">info      Display system-wide information               <span class="c1"># 显示系统相关信息 </span>
</span></span><span class="line"><span class="cl">inspect   Return low-level information on a container   <span class="c1"># 查看容器详细信息 </span>
</span></span><span class="line"><span class="cl"><span class="nb">kill</span>      Kill a running container                      <span class="c1"># kill 指定 docker 容器 </span>
</span></span><span class="line"><span class="cl">load      Load an image from a tar archive              <span class="c1"># 从一个 tar 包中加载一个镜像[对应 save] </span>
</span></span><span class="line"><span class="cl">login     Register or Login to the docker registry server    <span class="c1"># 注册或者登陆一个 docker 源服务器 </span>
</span></span><span class="line"><span class="cl"><span class="nb">logout</span>    Log out from a Docker registry server          <span class="c1"># 从当前 Docker registry 退出 </span>
</span></span><span class="line"><span class="cl">logs      Fetch the logs of a container                 <span class="c1"># 输出当前容器日志信息 </span>
</span></span><span class="line"><span class="cl">port      Lookup the public-facing port which is NAT-ed to PRIVATE_PORT    <span class="c1"># 查看映射端口对应的容器内部源端口 </span>
</span></span><span class="line"><span class="cl">pause     Pause all processes within a container        <span class="c1"># 暂停容器 </span>
</span></span><span class="line"><span class="cl">ps        List containers                               <span class="c1"># 列出容器列表 </span>
</span></span><span class="line"><span class="cl">pull      Pull an image or a repository from the docker registry server   <span class="c1"># 从docker镜像源服务器拉取指定镜像或者库镜像 </span>
</span></span><span class="line"><span class="cl">push      Push an image or a repository to the docker registry server    <span class="c1"># 推送指定镜像或者库镜像至docker源服务器 </span>
</span></span><span class="line"><span class="cl">restart   Restart a running container                   <span class="c1"># 重启运行的容器 </span>
</span></span><span class="line"><span class="cl">rm        Remove one or more containers                 <span class="c1"># 移除一个或者多个容器 </span>
</span></span><span class="line"><span class="cl">rmi       Remove one or more images             <span class="c1"># 移除一个或多个镜像[无容器使用该镜像才可删除，否则需删除相关容器才可继续或 -f 强制删除] </span>
</span></span><span class="line"><span class="cl">run       Run a <span class="nb">command</span> in a new container              <span class="c1"># 创建一个新的容器并运行一个命令 </span>
</span></span><span class="line"><span class="cl">save      Save an image to a tar archive                <span class="c1"># 保存一个镜像为一个 tar 包[对应 load] </span>
</span></span><span class="line"><span class="cl">search    Search <span class="k">for</span> an image on the Docker Hub         <span class="c1"># 在 docker hub 中搜索镜像 </span>
</span></span><span class="line"><span class="cl">start     Start a stopped containers                    <span class="c1"># 启动容器 </span>
</span></span><span class="line"><span class="cl">stop      Stop a running containers                     <span class="c1"># 停止容器 </span>
</span></span><span class="line"><span class="cl">tag       Tag an image into a repository                <span class="c1"># 给源中镜像打标签 </span>
</span></span><span class="line"><span class="cl">top       Lookup the running processes of a container   <span class="c1"># 查看容器中运行的进程信息 </span>
</span></span><span class="line"><span class="cl">unpause   Unpause a paused container                    <span class="c1"># 取消暂停容器 </span>
</span></span><span class="line"><span class="cl">version   Show the docker version information           <span class="c1"># 查看 docker 版本号 </span>
</span></span><span class="line"><span class="cl"><span class="nb">wait</span>      Block <span class="k">until</span> a container stops, <span class="k">then</span> print its <span class="nb">exit</span> code   <span class="c1"># 截取容器停止时的退出状态值 </span></span></span></code></pre></div></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2021-03-23 23:04:09">更新于 2021-03-23&nbsp;</span>
      </div><div class="post-info-license">
          <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
        </div></div>
    <div class="post-info-line">
      <div class="post-info-md"></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-title="Docker之常用命令" data-hashtags="docker"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-hashtag="docker"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="http://blog.yuanshuaicn.com/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-title="Docker之常用命令"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href='/tags/docker/' class="post-tag">docker</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/docker%E4%B9%8B%E7%AE%80%E4%BB%8B-docker%E4%B9%8B%E7%AE%80%E4%BB%8B/" class="post-nav-item" rel="prev" title="Docker之简介"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Docker之简介</a>
      <a href="/posts/docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%AE%89%E8%A3%85-docker%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%AE%89%E8%A3%85/" class="post-nav-item" rel="next" title="Docker之常用安装">Docker之常用安装<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.119.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.18-lts.2"><img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div><div class="footer-line statistics"></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
