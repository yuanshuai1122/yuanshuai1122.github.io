<!DOCTYPE html>
<html class="js no-touch  progressive-image  no-reduced-motion progressive" lang="zh-hans">
  <head>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="keyword" content=""><meta property="og:title" content="JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº" />
<meta property="og:description" content="ç¬¬ 9 ç«  æ–¹æ³•åŒº 1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³» ä»å†…å­˜ç»“æ„æ¥çœ‹ è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ† ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹ ThreadLocalï¼šå¦‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.io/posts/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-30T10:58:50+00:00" />
<meta property="article:modified_time" content="2021-11-30T10:58:50+00:00" />
<title>JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº</title>

    <link rel="canonical" href="/posts/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA/">

    <link rel="stylesheet" href="/css/global.css">

    <link rel="stylesheet" href="/css/custom.css">

    <link rel="stylesheet" href="/css/search.css" />

    
    

    
    

</head>
  </head>
  <body class=" page-article   ">
    <header>
      <nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/ " class="nav-title">ğŸ§€</a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            <a href="/posts " class="nav-item-content">ç›®å½•</a>
          </div><div class="nav-item-wrapper">
            <a href="/about" class="nav-item-content">å…³äº</a>
          </div><div class="nav-item-wrapper">
            <a href="/index.xml" class="nav-item-content" target="_blank">RSS</a>
          </div></div>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleSearchModal(){
    const template = `
    <div class="modal-body">
      <div id="autocomplete" onclick="event.stopPropagation();"></div>
    </div>
    `
    const modal = document.querySelector("#modal-wrapper")
    if(!modal){
      const div = document.createElement("div")
      document.body.setAttribute("style","overflow: hidden;")
      div.setAttribute("id", "modal-wrapper")
      div.setAttribute("onclick", "toggleSearchModal()")
      div.innerHTML = template
      const script = document.createElement("script");script.setAttribute("src", "https://yuanshuai1122.github.io/js/algolia.js")
      div.appendChild(script)
      document.body.append(div)
    } else {
      document.body.removeAttribute("style")
      document.body.removeChild(modal)
    }
  }
</script>
    </header>
    
  
  
  <main id="main" class="main">
      <section>
        <article class="article">
          
          <div class=" article-header ">
            <div class="category component">
              <div class="component-content">
                <div class="category-eyebrow">
                  <span class="category-eyebrow__category category_original">
                    
                      
                        Java
                      
                    
                  </span>
                  <span class="category-eyebrow__date">2021å¹´11æœˆ30æ—¥</span>
                </div>
              </div>
            </div>
            <div class="pagetitle component">
              <div class="component-content">
                <h1 class="hero-headline">JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº</h1>
              </div>
            </div>
            <div class="component  article-subhead ">
              <div class="component-content"></div>
            </div>

            <div class="tagssheet component">
              <div class="component-content">
                
                  
                  <a href="/tags/java" class="tag">
                    Java
                  </a>
                
                  
                  <a href="/tags/jvm" class="tag">
                    JVM
                  </a>
                
              </div>
            </div>
          </div>
          
          <div class="pagebody">
            
            
            
            
            
            
            
            
            
<div class="component-content pagebody component">
  <h1 id="ç¬¬-9-ç« -æ–¹æ³•åŒº" class="pagebody-header">
    ç¬¬ 9 ç«  æ–¹æ³•åŒº
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1æ ˆ-å †-æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»" class="pagebody-header">
    1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»
  </h2>
</div><blockquote>
<p class="component-content component"><strong>ä»å†…å­˜ç»“æ„æ¥çœ‹</strong></p>
</blockquote>
<p class="component-content component">è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ†</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-43311a6916e5e12b2892a92a3a082d41" id="lht43311a6916e5e12b2892a92a3a082d41">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/150.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹</strong></p>
</blockquote>
<p class="component-content component">ThreadLocalï¼šå¦‚ä½•ä¿è¯å¤šä¸ªçº¿ç¨‹åœ¨å¹¶å‘ç¯å¢ƒä¸‹çš„å®‰å…¨æ€§ï¼Ÿå…¸å‹åº”ç”¨å°±æ˜¯æ•°æ®åº“è¿æ¥ç®¡ç†ï¼Œä»¥åŠç‹¬ç«‹ä¼šè¯ç®¡ç†</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0141d81aa208a1fc6c86ae76bcda19b7" id="lht0141d81aa208a1fc6c86ae76bcda19b7">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/151.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>æ ˆã€å †ã€æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»</strong></p>
</blockquote>
<p class="component-content component"><strong>ä¸‹é¢å°±æ¶‰åŠäº†å¯¹è±¡çš„è®¿é—®å®šä½</strong></p>
<div class="component-content component"><ol>
<li>Person ç±»çš„ .class ä¿¡æ¯å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­</li>
<li>person å˜é‡å­˜æ”¾åœ¨ Java æ ˆçš„å±€éƒ¨å˜é‡è¡¨ä¸­</li>
<li>çœŸæ­£çš„ person å¯¹è±¡å­˜æ”¾åœ¨ Java å †ä¸­</li>
<li>åœ¨ person å¯¹è±¡ä¸­ï¼Œæœ‰ä¸ªæŒ‡é’ˆæŒ‡å‘æ–¹æ³•åŒºä¸­çš„ person ç±»å‹æ•°æ®ï¼Œè¡¨æ˜è¿™ä¸ª person å¯¹è±¡æ˜¯ç”¨æ–¹æ³•åŒºä¸­çš„ Person ç±» new å‡ºæ¥çš„</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-1187905e49aadfc229f962a0548b1bc4" id="lht1187905e49aadfc229f962a0548b1bc4">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/152.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="2æ–¹æ³•åŒºçš„ç†è§£" class="pagebody-header">
    2ã€æ–¹æ³•åŒºçš„ç†è§£
  </h2>
</div><blockquote>
<p class="component-content component"><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
</blockquote>
<p class="component-content component"><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.4">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.4</a></p>

<div class="component-content pagebody component">
  <h3 id="21æ–¹æ³•åŒºçš„ä½ç½®" class="pagebody-header">
    2.1ã€æ–¹æ³•åŒºçš„ä½ç½®
  </h3>
</div><blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºçš„ä½ç½®</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ˜ç¡®è¯´æ˜ï¼šå°½ç®¡æ‰€æœ‰çš„æ–¹æ³•åŒºåœ¨é€»è¾‘ä¸Šæ˜¯å±äºå †çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸€äº›ç®€å•çš„å®ç°å¯èƒ½ä¸ä¼šé€‰æ‹©å»è¿›è¡Œåƒåœ¾æ”¶é›†æˆ–è€…è¿›è¡Œå‹ç¼©ã€‚</li>
<li>ä½†å¯¹äºHotSpotJVMè€Œè¨€ï¼Œ<strong>æ–¹æ³•åŒºè¿˜æœ‰ä¸€ä¸ªåˆ«åå«åšNon-Heap</strong>ï¼ˆéå †ï¼‰ï¼Œç›®çš„å°±æ˜¯è¦å’Œå †åˆ†å¼€ã€‚</li>
<li>æ‰€ä»¥ï¼Œ<strong>æ–¹æ³•åŒºå¯ä»¥çœ‹ä½œæ˜¯ä¸€å—ç‹¬ç«‹äºJavaå †çš„å†…å­˜ç©ºé—´</strong>ã€‚</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-40554d3ce0bac3d9fa296ef24ac171d5" id="lht40554d3ce0bac3d9fa296ef24ac171d5">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/153.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="22æ–¹æ³•åŒºçš„ç†è§£" class="pagebody-header">
    2.2ã€æ–¹æ³•åŒºçš„ç†è§£
  </h3>
</div><blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºçš„åŸºæœ¬ç†è§£</strong></p>
</blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºä¸»è¦å­˜æ”¾çš„æ˜¯ Classï¼Œè€Œå †ä¸­ä¸»è¦å­˜æ”¾çš„æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡</strong></p>
<div class="component-content component"><ol>
<li>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¸Javaå †ä¸€æ ·ï¼Œæ˜¯<strong>å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸ</strong></li>
<li>å¤šä¸ªçº¿ç¨‹åŒæ—¶åŠ è½½ç»Ÿä¸€ä¸ªç±»æ—¶ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½åŠ è½½è¯¥ç±»ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰ç­‰å¾…è¯¥çº¿ç¨‹åŠ è½½å®Œæ¯•ï¼Œç„¶åç›´æ¥ä½¿ç”¨è¯¥ç±»ï¼Œå³<strong>ç±»åªèƒ½åŠ è½½ä¸€æ¬¡</strong>ã€‚</li>
<li>æ–¹æ³•åŒºåœ¨JVMå¯åŠ¨çš„æ—¶å€™è¢«åˆ›å»ºï¼Œå¹¶ä¸”å®ƒçš„å®é™…çš„ç‰©ç†å†…å­˜ç©ºé—´ä¸­å’ŒJavaå †åŒºä¸€æ ·éƒ½å¯ä»¥æ˜¯ä¸è¿ç»­çš„ã€‚</li>
<li>æ–¹æ³•åŒºçš„å¤§å°ï¼Œè·Ÿå †ç©ºé—´ä¸€æ ·ï¼Œå¯ä»¥é€‰æ‹©<strong>å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•</strong>ã€‚</li>
<li>æ–¹æ³•åŒºçš„å¤§å°å†³å®šäº†ç³»ç»Ÿå¯ä»¥ä¿å­˜å¤šå°‘ä¸ªç±»ï¼Œå¦‚æœç³»ç»Ÿå®šä¹‰äº†å¤ªå¤šçš„ç±»ï¼Œå¯¼è‡´æ–¹æ³•åŒºæº¢å‡ºï¼Œè™šæ‹ŸæœºåŒæ ·ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºé”™è¯¯ï¼š
<div class="component-content component"><ul>
<li>java.lang.OutofMemoryError:PermGen space</li>
<li>æˆ–è€…</li>
<li>java.lang.OutOfMemoryError:Metaspace</li>
</ul></div>
</li>
<li>ä¸¾ä¾‹è¯´æ˜æ–¹æ³•åŒº OOM
<div class="component-content component"><ul>
<li>åŠ è½½å¤§é‡çš„ç¬¬ä¸‰æ–¹çš„jaråŒ…</li>
<li>Tomcatéƒ¨ç½²çš„å·¥ç¨‹è¿‡å¤šï¼ˆ30~50ä¸ªï¼‰</li>
<li>å¤§é‡åŠ¨æ€çš„ç”Ÿæˆåå°„ç±»</li>
</ul></div>
</li>
<li>å…³é—­JVMå°±ä¼šé‡Šæ”¾è¿™ä¸ªåŒºåŸŸçš„å†…å­˜ã€‚</li>
</ol></div>
<hr>
<p class="component-content component"><strong>ä»£ç ä¸¾ä¾‹</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EdenSurvivorTest</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;æˆ‘åªæ˜¯æ¥æ‰“ä¸ªé…±æ²¹~&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">sleep</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1000000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>InterruptedException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ç®€å•çš„ç¨‹åºï¼ŒåŠ è½½äº†å¥½å¤šç±»</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-176fd6c8ff6545dc4aca3f9ee34cabee" id="lht176fd6c8ff6545dc4aca3f9ee34cabee">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/154.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="23æ–¹æ³•åŒºæ¼”è¿›è¿‡ç¨‹" class="pagebody-header">
    2.3ã€æ–¹æ³•åŒºæ¼”è¿›è¿‡ç¨‹
  </h3>
</div><blockquote>
<p class="component-content component"><strong>Hotspot æ–¹æ³•åŒºçš„æ¼”è¿›è¿‡ç¨‹</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li><strong>åœ¨ JDK7 åŠä»¥å‰ï¼Œä¹ æƒ¯ä¸ŠæŠŠæ–¹æ³•åŒºï¼Œç§°ä¸ºæ°¸ä¹…ä»£ã€‚JDK8å¼€å§‹ï¼Œä½¿ç”¨å…ƒç©ºé—´å–ä»£äº†æ°¸ä¹…ä»£</strong>ã€‚JDK 1.8åï¼Œå…ƒç©ºé—´å­˜æ”¾åœ¨<strong>å †å¤–å†…å­˜ä¸­</strong></li>
<li>æˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•åŒºç±»æ¯”ä¸ºJavaä¸­çš„æ¥å£ï¼Œå°†æ°¸ä¹…ä»£æˆ–å…ƒç©ºé—´ç±»æ¯”ä¸ºJavaä¸­å…·ä½“çš„å®ç°ç±»</li>
<li>æœ¬è´¨ä¸Šï¼Œæ–¹æ³•åŒºå’Œæ°¸ä¹…ä»£å¹¶ä¸ç­‰ä»·ã€‚ä»…æ˜¯å¯¹Hotspotè€Œè¨€çš„å¯ä»¥çœ‹ä½œç­‰ä»·ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹å¦‚ä½•å®ç°æ–¹æ³•åŒºï¼Œä¸åšç»Ÿä¸€è¦æ±‚ã€‚ä¾‹å¦‚ï¼šBEAJRockit / IBM J9 ä¸­ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µã€‚</li>
<li>ç°åœ¨æ¥çœ‹ï¼Œå½“å¹´ä½¿ç”¨æ°¸ä¹…ä»£ï¼Œä¸æ˜¯å¥½çš„ideaã€‚å¯¼è‡´Javaç¨‹åºæ›´å®¹æ˜“OOmï¼ˆè¶…è¿‡-XX:MaxPermsizeä¸Šé™ï¼‰</li>
<li>è€Œåˆ°äº†JDK8ï¼Œç»ˆäºå®Œå…¨åºŸå¼ƒäº†æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼Œæ”¹ç”¨ä¸JRockitã€J9ä¸€æ ·åœ¨æœ¬åœ°å†…å­˜ä¸­å®ç°çš„å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰æ¥ä»£æ›¿</li>
<li>å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹JVMè§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š<strong>å…ƒç©ºé—´ä¸åœ¨è™šæ‹Ÿæœºè®¾ç½®çš„å†…å­˜ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜</strong></li>
<li>æ°¸ä¹…ä»£ã€å…ƒç©ºé—´äºŒè€…å¹¶ä¸åªæ˜¯åå­—å˜äº†ï¼Œ<strong>å†…éƒ¨ç»“æ„ä¹Ÿè°ƒæ•´äº†</strong></li>
<li>æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼Œå¦‚æœæ–¹æ³•åŒºæ— æ³•æ»¡è¶³æ–°çš„å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡ºOOMå¼‚å¸¸</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-8ee46e0813adcae81abfb1eed68142be" id="lht8ee46e0813adcae81abfb1eed68142be">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/155.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-a176931b3ba9c97b55734a06d3a01c88" id="lhta176931b3ba9c97b55734a06d3a01c88">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/156.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="3è®¾ç½®æ–¹æ³•åŒºå¤§å°ä¸-oom" class="pagebody-header">
    3ã€è®¾ç½®æ–¹æ³•åŒºå¤§å°ä¸ OOM
  </h2>
</div><p class="component-content component">æ–¹æ³•åŒºçš„å¤§å°ä¸å¿…æ˜¯å›ºå®šçš„ï¼ŒJVMå¯ä»¥æ ¹æ®åº”ç”¨çš„éœ€è¦åŠ¨æ€è°ƒæ•´ã€‚</p>

<div class="component-content pagebody component">
  <h3 id="31jdk7-æ°¸ä¹…ä»£" class="pagebody-header">
    3.1ã€JDK7 æ°¸ä¹…ä»£
  </h3>
</div><blockquote>
<p class="component-content component"><strong>JDK7 ä¹‹å‰ç‰ˆæœ¬è®¾ç½®æ°¸ä¹…ä»£å¤§å°</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>é€šè¿‡-XX:Permsizeæ¥è®¾ç½®æ°¸ä¹…ä»£åˆå§‹åˆ†é…ç©ºé—´ã€‚é»˜è®¤å€¼æ˜¯20.75M</li>
<li>-XX:MaxPermsizeæ¥è®¾å®šæ°¸ä¹…ä»£æœ€å¤§å¯åˆ†é…ç©ºé—´ã€‚32ä½æœºå™¨é»˜è®¤æ˜¯64Mï¼Œ64ä½æœºå™¨æ¨¡å¼æ˜¯82M</li>
<li>å½“JVMåŠ è½½çš„ç±»ä¿¡æ¯å®¹é‡è¶…è¿‡äº†è¿™ä¸ªå€¼ï¼Œä¼šæŠ¥å¼‚å¸¸OutofMemoryError:PermGen spaceã€‚</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-efd886dd6ae0c29b2f4e56a2c38f8662" id="lhtefd886dd6ae0c29b2f4e56a2c38f8662">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/157.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="32jdk8-å…ƒç©ºé—´" class="pagebody-header">
    3.2ã€JDK8 å…ƒç©ºé—´
  </h3>
</div><blockquote>
<p class="component-content component"><strong>JDK8 ç‰ˆæœ¬è®¾ç½®å…ƒç©ºé—´å¤§å°</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>å…ƒæ•°æ®åŒºå¤§å°å¯ä»¥ä½¿ç”¨å‚æ•° <strong>-XX:MetaspaceSize</strong> å’Œ <strong>-XX:MaxMetaspaceSize</strong> æŒ‡å®š</li>
<li>é»˜è®¤å€¼ä¾èµ–äºå¹³å°ï¼ŒWindowsä¸‹ï¼Œ-XX:MetaspaceSize çº¦ä¸º21Mï¼Œ<strong>-XX:MaxMetaspaceSizeçš„å€¼æ˜¯-1ï¼Œå³æ²¡æœ‰é™åˆ¶</strong>ã€‚</li>
<li>ä¸æ°¸ä¹…ä»£ä¸åŒï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰çš„å¯ç”¨ç³»ç»Ÿå†…å­˜ã€‚å¦‚æœå…ƒæ•°æ®åŒºå‘ç”Ÿæº¢å‡ºï¼Œè™šæ‹Ÿæœºä¸€æ ·ä¼šæŠ›å‡ºå¼‚å¸¸OutOfMemoryError:Metaspace</li>
<li>-XX:MetaspaceSizeï¼šè®¾ç½®åˆå§‹çš„å…ƒç©ºé—´å¤§å°ã€‚å¯¹äºä¸€ä¸ª 64ä½ çš„æœåŠ¡å™¨ç«¯ JVM æ¥è¯´ï¼Œå…¶é»˜è®¤çš„ -XX:MetaspaceSizeå€¼ä¸º21MBã€‚è¿™å°±æ˜¯åˆå§‹çš„é«˜æ°´ä½çº¿ï¼Œä¸€æ—¦è§¦åŠè¿™ä¸ªæ°´ä½çº¿ï¼ŒFull GCå°†ä¼šè¢«è§¦å‘å¹¶å¸è½½æ²¡ç”¨çš„ç±»ï¼ˆå³è¿™äº›ç±»å¯¹åº”çš„ç±»åŠ è½½å™¨ä¸å†å­˜æ´»ï¼‰ï¼Œ<strong>ç„¶åè¿™ä¸ªé«˜æ°´ä½çº¿å°†ä¼šé‡ç½®</strong>ã€‚æ–°çš„é«˜æ°´ä½çº¿çš„å€¼å–å†³äºGCåé‡Šæ”¾äº†å¤šå°‘å…ƒç©ºé—´ã€‚
<div class="component-content component"><ul>
<li>å¦‚æœé‡Šæ”¾çš„ç©ºé—´ä¸è¶³ï¼Œé‚£ä¹ˆåœ¨ä¸è¶…è¿‡MaxMetaspaceSizeæ—¶ï¼Œé€‚å½“æé«˜è¯¥å€¼ã€‚</li>
<li>å¦‚æœé‡Šæ”¾ç©ºé—´è¿‡å¤šï¼Œåˆ™é€‚å½“é™ä½è¯¥å€¼ã€‚</li>
</ul></div>
</li>
<li>å¦‚æœåˆå§‹åŒ–çš„é«˜æ°´ä½çº¿è®¾ç½®è¿‡ä½ï¼Œä¸Šè¿°é«˜æ°´ä½çº¿è°ƒæ•´æƒ…å†µä¼šå‘ç”Ÿå¾ˆå¤šæ¬¡ã€‚é€šè¿‡åƒåœ¾å›æ”¶å™¨çš„æ—¥å¿—å¯ä»¥è§‚å¯Ÿåˆ°Full GCå¤šæ¬¡è°ƒç”¨ã€‚<strong>ä¸ºäº†é¿å…é¢‘ç¹åœ°GCï¼Œå»ºè®®å°†-XX:MetaspaceSizeè®¾ç½®ä¸ºä¸€ä¸ªç›¸å¯¹è¾ƒé«˜çš„å€¼</strong>ã€‚</li>
</ol></div>
<hr>
<p class="component-content component"><strong>é…ç½®å…ƒç©ºé—´å¤§å°ç¤ºä¾‹</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * æµ‹è¯•è®¾ç½®æ–¹æ³•åŒºå¤§å°å‚æ•°çš„é»˜è®¤å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * jdk7åŠä»¥å‰ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * -XX:PermSize=100m -XX:MaxPermSize=100m
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * jdk8åŠä»¥åï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * -XX:MetaspaceSize=100m  -XX:MaxMetaspaceSize=100m
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @author shkstart  shkstart@126.com
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @create 2020  12:16
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodAreaDemo</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;start...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">sleep</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1000000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>InterruptedException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;end...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>JVM å‚æ•°</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">-XX:MetaspaceSize=100m  -XX:MaxMetaspaceSize=100m</code></pre>
  
</div><div class="component-content component"><ul>
<li>CMD å‘½ä»¤æŸ¥çœ‹è®¾ç½®çš„å…ƒç©ºé—´å¤§å°</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\H</span>eygo&gt;jps
</span></span><span style="display:flex;"><span>C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\H</span>eygo&gt;jinfo -flag MetaspaceSize pId
</span></span><span style="display:flex;"><span>C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\H</span>eygo&gt;jinfo -flag MaxMetaspaceSize pId</span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-8290ec2c1627b3e0ed11c3a566917443" id="lht8290ec2c1627b3e0ed11c3a566917443">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/158.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="33æ–¹æ³•åŒº-oom" class="pagebody-header">
    3.3ã€æ–¹æ³•åŒº OOM
  </h3>
</div><blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒº OOM ä¸¾ä¾‹</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç ï¼šOOMTest ç±»ç»§æ‰¿ ClassLoader ç±»ï¼Œè·å¾— defineClass() æ–¹æ³•ï¼Œå¯è‡ªå·±è¿›è¡Œç±»çš„åŠ è½½</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * jdk6/7ä¸­ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * -XX:PermSize=10m -XX:MaxPermSize=10m
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * jdk8ä¸­ï¼š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * -XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @author shkstart  shkstart@126.com
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * @create 2020  22:24
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OOMTest</span> <span style="color:#66d9ef">extends</span> ClassLoader <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            OOMTest test <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> OOMTest<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10000</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//åˆ›å»ºClassWriterå¯¹è±¡ï¼Œç”¨äºç”Ÿæˆç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                ClassWriter classWriter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassWriter<span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//æŒ‡æ˜ç‰ˆæœ¬å·ï¼Œä¿®é¥°ç¬¦ï¼Œç±»åï¼ŒåŒ…åï¼Œçˆ¶ç±»ï¼Œæ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                classWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">visit</span><span style="color:#f92672">(</span>Opcodes<span style="color:#f92672">.</span><span style="color:#a6e22e">V1_6</span><span style="color:#f92672">,</span> Opcodes<span style="color:#f92672">.</span><span style="color:#a6e22e">ACC_PUBLIC</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Class&#34;</span> <span style="color:#f92672">+</span> i<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;java/lang/Object&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//è¿”å›byte[]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> code <span style="color:#f92672">=</span> classWriter<span style="color:#f92672">.</span><span style="color:#a6e22e">toByteArray</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">//ç±»çš„åŠ è½½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                test<span style="color:#f92672">.</span><span style="color:#a6e22e">defineClass</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Class&#34;</span> <span style="color:#f92672">+</span> i<span style="color:#f92672">,</span> code<span style="color:#f92672">,</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">,</span> code<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span><span style="color:#75715e">//Classå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                j<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>j<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component"><strong>ä¸è®¾ç½®å…ƒç©ºé—´çš„ä¸Šé™</strong></p>
<div class="component-content component"><ul>
<li>ä½¿ç”¨é»˜è®¤çš„ JVM å‚æ•°ï¼Œå…ƒç©ºé—´ä¸è®¾ç½®ä¸Šé™</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">10000</code></pre>
  
</div><p class="component-content component"><strong>è®¾ç½®å…ƒç©ºé—´çš„ä¸Šé™</strong></p>
<div class="component-content component"><ul>
<li>JVM å‚æ•°</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">-XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m</code></pre>
  
</div><div class="component-content component"><ul>
<li>å…ƒç©ºé—´å‡ºç° OOM</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">com.atguigu.java.OOMTest
Exception in thread &#34;main&#34; java.lang.OutOfMemoryError: Metaspace
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:642)
	at com.atguigu.java.OOMTest.main(OOMTest.java:29)
8531</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h3 id="34è§£å†³-oom" class="pagebody-header">
    3.4ã€è§£å†³ OOM
  </h3>
</div><blockquote>
<p class="component-content component"><strong>å¦‚ä½•è§£å†³ OOMï¼Ÿ</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>è¦è§£å†³OOMå¼‚å¸¸æˆ–heap spaceçš„å¼‚å¸¸ï¼Œä¸€èˆ¬çš„æ‰‹æ®µæ˜¯é¦–å…ˆé€šè¿‡å†…å­˜æ˜ åƒåˆ†æå·¥å…·ï¼ˆå¦‚Ec1ipse Memory Analyzerï¼‰å¯¹dumpå‡ºæ¥çš„å †è½¬å‚¨å¿«ç…§è¿›è¡Œåˆ†æï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œä¹Ÿå°±æ˜¯è¦å…ˆåˆ†æ¸…æ¥šåˆ°åº•æ˜¯å‡ºç°äº†å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰è¿˜æ˜¯å†…å­˜æº¢å‡ºï¼ˆMemory Overflowï¼‰</li>
<li><strong>å†…å­˜æ³„æ¼å°±æ˜¯æœ‰å¤§é‡çš„å¼•ç”¨æŒ‡å‘æŸäº›å¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›å¯¹è±¡ä»¥åä¸ä¼šä½¿ç”¨äº†</strong>ï¼Œä½†æ˜¯å› ä¸ºå®ƒä»¬è¿˜å’ŒGC ROOTæœ‰å…³è”ï¼Œæ‰€ä»¥å¯¼è‡´ä»¥åè¿™äº›å¯¹è±¡ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œè¿™å°±æ˜¯å†…å­˜æ³„æ¼çš„é—®é¢˜</li>
<li>å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯è¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ°GC Rootsçš„å¼•ç”¨é“¾ã€‚äºæ˜¯å°±èƒ½<strong>æ‰¾åˆ°æ³„æ¼å¯¹è±¡æ˜¯é€šè¿‡æ€æ ·çš„è·¯å¾„ä¸GC Rootsç›¸å…³è”å¹¶å¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ— æ³•è‡ªåŠ¨å›æ”¶å®ƒä»¬çš„</strong>ã€‚æŒæ¡äº†æ³„æ¼å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠGC Rootså¼•ç”¨é“¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°å®šä½å‡ºæ³„æ¼ä»£ç çš„ä½ç½®ã€‚</li>
<li>å¦‚æœä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®éƒ½è¿˜å¿…é¡»å­˜æ´»ç€ï¼Œé‚£å°±åº”å½“æ£€æŸ¥è™šæ‹Ÿæœºçš„å †å‚æ•°ï¼ˆ-Xmxä¸-Xmsï¼‰ï¼Œä¸æœºå™¨ç‰©ç†å†…å­˜å¯¹æ¯”çœ‹æ˜¯å¦è¿˜å¯ä»¥è°ƒå¤§ï¼Œä»ä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰çŠ¶æ€æ—¶é—´è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—ã€‚</li>
</ol></div>

<div class="component-content pagebody component">
  <h2 id="4æ–¹æ³•åŒºçš„å†…éƒ¨ç»“æ„" class="pagebody-header">
    4ã€æ–¹æ³•åŒºçš„å†…éƒ¨ç»“æ„
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="41æ–¹æ³•åŒºç»“æ„" class="pagebody-header">
    4.1ã€æ–¹æ³•åŒºç»“æ„
  </h3>
</div><blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰å­˜å‚¨ä»€ä¹ˆï¼Ÿ</strong></p>
</blockquote>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-eba85b24cd49b1291757ccc47efbe832" id="lhteba85b24cd49b1291757ccc47efbe832">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/159.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¹¦ä¸­å¯¹æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰å­˜å‚¨å†…å®¹æè¿°å¦‚ä¸‹ï¼šå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹Ÿæœº<strong>åŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜</strong>ç­‰ã€‚</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-e1f7ea21f89112fec5f6b97485093370" id="lhte1f7ea21f89112fec5f6b97485093370">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/160.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>ç±»å‹ä¿¡æ¯</strong></p>
</blockquote>
<p class="component-content component">å¯¹æ¯ä¸ªåŠ è½½çš„ç±»å‹ï¼ˆç±»classã€æ¥å£interfaceã€æšä¸¾enumã€æ³¨è§£annotationï¼‰ï¼ŒJVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­å­˜å‚¨ä»¥ä¸‹ç±»å‹ä¿¡æ¯ï¼š</p>
<div class="component-content component"><ol>
<li>è¿™ä¸ªç±»å‹çš„å®Œæ•´æœ‰æ•ˆåç§°ï¼ˆå…¨å=åŒ…å.ç±»åï¼‰</li>
<li>è¿™ä¸ªç±»å‹ç›´æ¥çˆ¶ç±»çš„å®Œæ•´æœ‰æ•ˆåï¼ˆå¯¹äºinterfaceæˆ–æ˜¯java.lang.Objectï¼Œéƒ½æ²¡æœ‰çˆ¶ç±»ï¼‰</li>
<li>è¿™ä¸ªç±»å‹çš„ä¿®é¥°ç¬¦ï¼ˆpublicï¼Œabstractï¼Œfinalçš„æŸä¸ªå­é›†ï¼‰</li>
<li>è¿™ä¸ªç±»å‹ç›´æ¥æ¥å£çš„ä¸€ä¸ªæœ‰åºåˆ—è¡¨</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>åŸŸï¼ˆFieldï¼‰ä¿¡æ¯</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>JVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­ä¿å­˜ç±»å‹çš„æ‰€æœ‰åŸŸçš„ç›¸å…³ä¿¡æ¯ä»¥åŠåŸŸçš„å£°æ˜é¡ºåºã€‚</li>
<li>åŸŸçš„ç›¸å…³ä¿¡æ¯åŒ…æ‹¬ï¼š
<div class="component-content component"><ul>
<li>åŸŸåç§°</li>
<li>åŸŸç±»å‹</li>
<li>åŸŸä¿®é¥°ç¬¦ï¼ˆpublicï¼Œprivateï¼Œprotectedï¼Œstaticï¼Œfinalï¼Œvolatileï¼Œtransientçš„æŸä¸ªå­é›†ï¼‰</li>
</ul></div>
</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>æ–¹æ³•ï¼ˆMethodï¼‰ä¿¡æ¯</strong></p>
</blockquote>
<p class="component-content component">JVMå¿…é¡»ä¿å­˜æ‰€æœ‰æ–¹æ³•çš„ä»¥ä¸‹ä¿¡æ¯ï¼ŒåŒåŸŸä¿¡æ¯ä¸€æ ·åŒ…æ‹¬å£°æ˜é¡ºåºï¼š</p>
<div class="component-content component"><ol>
<li>æ–¹æ³•åç§°</li>
<li>æ–¹æ³•çš„è¿”å›ç±»å‹ï¼ˆåŒ…æ‹¬ void è¿”å›ç±»å‹ï¼‰ï¼Œvoid åœ¨ Java ä¸­å¯¹åº”çš„ç±»ä¸º void.class</li>
<li>æ–¹æ³•å‚æ•°çš„æ•°é‡å’Œç±»å‹ï¼ˆæŒ‰é¡ºåºï¼‰</li>
<li>æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼ˆpublicï¼Œprivateï¼Œprotectedï¼Œstaticï¼Œfinalï¼Œsynchronizedï¼Œnativeï¼Œabstractçš„ä¸€ä¸ªå­é›†ï¼‰</li>
<li>æ–¹æ³•çš„å­—èŠ‚ç ï¼ˆbytecodesï¼‰ã€æ“ä½œæ•°æ ˆã€å±€éƒ¨å˜é‡è¡¨åŠå¤§å°ï¼ˆabstractå’Œnativeæ–¹æ³•é™¤å¤–ï¼‰</li>
<li>å¼‚å¸¸è¡¨ï¼ˆabstractå’Œnativeæ–¹æ³•é™¤å¤–ï¼‰ï¼Œå¼‚å¸¸è¡¨è®°å½•æ¯ä¸ªå¼‚å¸¸å¤„ç†çš„å¼€å§‹ä½ç½®ã€ç»“æŸä½ç½®ã€ä»£ç å¤„ç†åœ¨ç¨‹åºè®¡æ•°å™¨ä¸­çš„åç§»åœ°å€ã€è¢«æ•è·çš„å¼‚å¸¸ç±»çš„å¸¸é‡æ± ç´¢å¼•</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * æµ‹è¯•æ–¹æ³•åŒºçš„å†…éƒ¨æ„æˆ * * @author shkstart  shkstart@126.com * @create 2020  23:39 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodInnerStrucTest</span> <span style="color:#66d9ef">extends</span> Object <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;,</span> Serializable <span style="color:#f92672">{</span>    <span style="color:#75715e">//å±æ€§    public int num = 10;    private static String str = &#34;æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„&#34;;    //æ„é€ å™¨æ²¡å†™    //æ–¹æ³•    public void test1() {        int count = 20;        System.out.println(&#34;count = &#34; + count);    }    public static int test2(int cal) {        int result = 0;        try {            int value = 30;            result = value / cal;        } catch (Exception e) {            e.printStackTrace();        }        return result;    }    @Override    public int compareTo(String o) {        return 0;    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºå€¼æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œä¾¿äºæŸ¥çœ‹</li>
<li>å‚æ•° -p ç¡®ä¿èƒ½æŸ¥çœ‹ private æƒé™ç±»å‹çš„å­—æ®µæˆ–æ–¹æ³•</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>javap -v -p MethodInnerStrucTest.class &gt; Text.txt</span></span></code></pre></div></div>
  
</div><hr>
<p class="component-content component"><strong>ç±»å‹ä¿¡æ¯</strong></p>
<div class="component-content component"><ul>
<li>æ’å¥å˜´ï¼šåœ¨è¿è¡Œæ—¶æ–¹æ³•åŒºä¸­ï¼Œç±»ä¿¡æ¯ä¸­è®°å½•äº†å“ªä¸ªåŠ è½½å™¨åŠ è½½äº†è¯¥ç±»ï¼ŒåŒæ—¶ç±»åŠ è½½å™¨ä¹Ÿè®°å½•äº†å®ƒåŠ è½½äº†å“ªäº›ç±»</li>
<li>ä»åç¼–è¯‘æ–‡ä»¶å¯ä»¥çœ‹å‡ºï¼Œå­—èŠ‚ç æ–‡ä»¶è®°å½•äº† MethodInnerStrucTest ç»§æ‰¿äº†å“ªäº›ç±»ï¼Œå®ç°äº†å“ªäº›æ–¹æ³•</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">public class com.atguigu.java.MethodInnerStrucTest 	extends java.lang.Object 	implements java.lang.Comparable&lt;java.lang.String&gt;, java.io.Serializable</code></pre>
  
</div><hr>
<p class="component-content component"><strong>åŸŸä¿¡æ¯</strong></p>
<div class="component-content component"><ol>
<li>descriptor: I è¡¨ç¤ºå­—æ®µç±»å‹ä¸º Integer</li>
<li>flags: ACC_PUBLIC è¡¨ç¤ºå­—æ®µæƒé™ä¿®é¥°ç¬¦ä¸º public</li>
</ol></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">  public int num;    descriptor: I    flags: ACC_PUBLIC  private static java.lang.String str;    descriptor: Ljava/lang/String;    flags: ACC_PRIVATE, ACC_STATIC</code></pre>
  
</div><hr>
<p class="component-content component"><strong>æ–¹æ³•ä¿¡æ¯</strong></p>
<div class="component-content component"><ol>
<li>descriptor: ()V è¡¨ç¤ºæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸º void</li>
<li>flags: ACC_PUBLIC è¡¨ç¤ºæ–¹æ³•æƒé™ä¿®é¥°ç¬¦ä¸º public</li>
<li>stack=3 è¡¨ç¤ºæ“ä½œæ•°æ ˆæ·±åº¦ä¸º 3</li>
<li>locals=2 è¡¨ç¤ºå±€éƒ¨å˜é‡ä¸ªæ•°ä¸º 2 ä¸ªï¼ˆå®åŠ›æ–¹æ³•åŒ…å« thisï¼‰</li>
<li>test1() æ–¹æ³•è™½ç„¶æ²¡æœ‰å‚æ•°ï¼Œä½†æ˜¯å…¶ args_size=1 ï¼Œè¿™æ—¶å› ä¸ºå°† this ä½œä¸ºäº†å‚æ•°</li>
</ol></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">  public void test1();    descriptor: ()V    flags: ACC_PUBLIC    Code:      stack=3, locals=2, args_size=1         0: bipush        20         2: istore_1         3: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;         6: new           #4                  // class java/lang/StringBuilder         9: dup        10: invokespecial #5                  // Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V        13: ldc           #6                  // String count =        15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;        18: iload_1        19: invokevirtual #8                  // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;        22: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;        25: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V        28: return      LineNumberTable:        line 17: 0        line 18: 3        line 19: 28      LocalVariableTable:        Start  Length  Slot  Name   Signature            0      29     0  this   Lcom/atguigu/java/MethodInnerStrucTest;            3      26     1 count   I</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h3 id="42åŸŸä¿¡æ¯ç‰¹æ®Šæƒ…å†µ" class="pagebody-header">
    4.2ã€åŸŸä¿¡æ¯ç‰¹æ®Šæƒ…å†µ
  </h3>
</div><blockquote>
<p class="component-content component"><strong>non-final ç±»å‹çš„ç±»å˜é‡</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li><strong>é™æ€å˜é‡å’Œç±»å…³è”åœ¨ä¸€èµ·ï¼Œéšç€ç±»çš„åŠ è½½è€ŒåŠ è½½</strong>ï¼Œä»–ä»¬æˆä¸ºç±»æ•°æ®åœ¨é€»è¾‘ä¸Šçš„ä¸€éƒ¨åˆ†</li>
<li>ç±»å˜é‡è¢«ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå³ä½¿æ²¡æœ‰ç±»å®ä¾‹æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¿é—®å®ƒ</li>
</ol></div>
<hr>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹</strong></p>
<div class="component-content component"><ol>
<li>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå³ä½¿æˆ‘ä»¬æŠŠorderè®¾ç½®ä¸ºnullï¼Œä¹Ÿä¸ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
<li>è¿™æ›´åŠ è¡¨æ˜äº† static ç±»å‹çš„å­—æ®µå’Œæ–¹æ³•éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¹¶ä¸å±äºç‰¹å®šçš„ç±»å®ä¾‹</li>
</ol></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * non-finalçš„ç±»å˜é‡ * @author shkstart  shkstart@126.com * @create 2020  20:37 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodAreaTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        Order order <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>        order<span style="color:#f92672">.</span><span style="color:#a6e22e">hello</span><span style="color:#f92672">();</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>order<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Order</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> number <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">hello</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello!&#34;</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span><span style="color:#75715e">// ç¨‹åºè¿è¡Œç»“æœhello!1
</span></span></span></code></pre></div></div>
  
</div><blockquote>
<p class="component-content component"><strong>å…¨å±€å¸¸é‡ï¼šstatic final</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>å…¨å±€å¸¸é‡å°±æ˜¯ä½¿ç”¨ static final è¿›è¡Œä¿®é¥°</li>
<li>è¢«å£°æ˜ä¸ºfinalçš„ç±»å˜é‡çš„å¤„ç†æ–¹æ³•åˆ™ä¸åŒï¼Œæ¯ä¸ªå…¨å±€å¸¸é‡åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šè¢«åˆ†é…äº†ã€‚</li>
</ol></div>
<hr>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * non-finalçš„ç±»å˜é‡ * @author shkstart  shkstart@126.com * @create 2020  20:37 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodAreaTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        Order order <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>        order<span style="color:#f92672">.</span><span style="color:#a6e22e">hello</span><span style="color:#f92672">();</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>order<span style="color:#f92672">.</span><span style="color:#a6e22e">count</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Order</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> number <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">hello</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello!&#34;</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>åç¼–è¯‘ï¼ŒæŸ¥çœ‹å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¯ä»¥å‘ç° number çš„å€¼å·²ç»å†™æ­»åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸­äº†</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">  public static int count;    descriptor: I    flags: ACC_PUBLIC, ACC_STATIC  public static final int number;    descriptor: I    flags: ACC_PUBLIC, ACC_STATIC, ACC_FINAL    ConstantValue: int 2</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h3 id="43è¿è¡Œæ—¶å¸¸é‡æ± " class="pagebody-header">
    4.3ã€è¿è¡Œæ—¶å¸¸é‡æ± 
  </h3>
</div><blockquote>
<p class="component-content component"><strong>è¿è¡Œæ—¶å¸¸é‡æ±  VS å¸¸é‡æ± </strong></p>
</blockquote>
<p class="component-content component"><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<p class="component-content component"><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html</a></p>
<hr>
<div class="component-content component"><ol>
<li><strong>æ–¹æ³•åŒºï¼Œå†…éƒ¨åŒ…å«äº†è¿è¡Œæ—¶å¸¸é‡æ± </strong></li>
<li><strong>å­—èŠ‚ç æ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«äº†å¸¸é‡æ± </strong></li>
<li>è¦å¼„æ¸…æ¥šæ–¹æ³•åŒºï¼Œéœ€è¦ç†è§£æ¸…æ¥šClassFileï¼Œå› ä¸ºåŠ è½½ç±»çš„ä¿¡æ¯éƒ½åœ¨æ–¹æ³•åŒºã€‚</li>
<li>è¦å¼„æ¸…æ¥šæ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œéœ€è¦ç†è§£æ¸…æ¥šClassFileä¸­çš„å¸¸é‡æ± ã€‚</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0dff5cd5731ca9b0cbd276a23fc1ec1b" id="lht0dff5cd5731ca9b0cbd276a23fc1ec1b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/161.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>å¸¸é‡æ± </strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>ä¸€ä¸ªæœ‰æ•ˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­é™¤äº†åŒ…å«ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ã€å­—æ®µã€æ–¹æ³•ä»¥åŠæ¥å£ç­‰æè¿°ç¬¦ä¿¡æ¯å¤–</li>
<li>è¿˜åŒ…å«ä¸€é¡¹ä¿¡æ¯å°±æ˜¯<strong>å¸¸é‡æ± è¡¨</strong>ï¼ˆ<strong>Constant Pool Table</strong>ï¼‰ï¼ŒåŒ…æ‹¬<strong>å„ç§å­—é¢é‡å’Œå¯¹ç±»å‹ã€åŸŸå’Œæ–¹æ³•çš„ç¬¦å·å¼•ç”¨</strong></li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-39d54ce421d4ecfd76faaf0e1f1d1563" id="lht39d54ce421d4ecfd76faaf0e1f1d1563">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/162.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>ä¸ºä»€ä¹ˆéœ€è¦å¸¸é‡æ± ï¼Ÿ</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>ä¸€ä¸ªjavaæºæ–‡ä»¶ä¸­çš„ç±»ã€æ¥å£ï¼Œç¼–è¯‘åäº§ç”Ÿä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ã€‚è€ŒJavaä¸­çš„å­—èŠ‚ç éœ€è¦æ•°æ®æ”¯æŒï¼Œé€šå¸¸è¿™ç§æ•°æ®ä¼šå¾ˆå¤§ä»¥è‡³äºä¸èƒ½ç›´æ¥å­˜åˆ°å­—èŠ‚ç é‡Œï¼Œæ¢å¦ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥å­˜åˆ°å¸¸é‡æ± </li>
<li>è¿™ä¸ªå­—èŠ‚ç åŒ…å«äº†æŒ‡å‘å¸¸é‡æ± çš„å¼•ç”¨ã€‚åœ¨åŠ¨æ€é“¾æ¥çš„æ—¶å€™ä¼šç”¨åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œä¹‹å‰æœ‰ä»‹ç»</li>
</ol></div>
<hr>
<p class="component-content component">æ¯”å¦‚ï¼šå¦‚ä¸‹çš„ä»£ç ï¼š</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SimpleClass</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sayHello</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello&#34;</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ol>
<li>è™½ç„¶ä¸Šè¿°ä»£ç åªæœ‰194å­—èŠ‚ï¼Œä½†æ˜¯é‡Œé¢å´ä½¿ç”¨äº†Stringã€Systemã€PrintStreamåŠObjectç­‰ç»“æ„ã€‚</li>
<li>å¦‚æœä¸ä½¿ç”¨å¸¸é‡æ± ï¼Œå°±éœ€è¦å°†ç”¨åˆ°çš„ç±»ä¿¡æ¯ã€æ–¹æ³•ä¿¡æ¯ç­‰è®°å½•åœ¨å½“å‰çš„å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œé€ æˆæ–‡ä»¶è‡ƒè‚¿</li>
<li>æ‰€ä»¥æˆ‘ä»¬å°†æ‰€éœ€ç”¨åˆ°çš„ç»“æ„ä¿¡æ¯è®°å½•åœ¨å¸¸é‡æ± ä¸­ï¼Œå¹¶é€šè¿‡<strong>å¼•ç”¨çš„æ–¹å¼</strong>ï¼Œæ¥åŠ è½½ã€è°ƒç”¨æ‰€éœ€çš„ç»“æ„</li>
<li>è¿™é‡Œçš„ä»£ç é‡å…¶å®å¾ˆå°‘äº†ï¼Œå¦‚æœä»£ç å¤šçš„è¯ï¼Œå¼•ç”¨çš„ç»“æ„å°†ä¼šæ›´å¤šï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°å¸¸é‡æ± äº†ã€‚</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f776f8d9637286a701e318cd87976ba6" id="lhtf776f8d9637286a701e318cd87976ba6">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/163.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>å¸¸é‡æ± ä¸­æœ‰å•¥ï¼Ÿ</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>æ•°é‡å€¼</li>
<li>å­—ç¬¦ä¸²å€¼</li>
<li>ç±»å¼•ç”¨</li>
<li>å­—æ®µå¼•ç”¨</li>
<li>æ–¹æ³•å¼•ç”¨</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>å¸¸é‡æ± ä»£ç ä¸¾ä¾‹</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * æµ‹è¯•æ–¹æ³•åŒºçš„å†…éƒ¨æ„æˆ * * @author shkstart  shkstart@126.com * @create 2020  23:39 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodInnerStrucTest</span> <span style="color:#66d9ef">extends</span> Object <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;,</span> Serializable <span style="color:#f92672">{</span>    <span style="color:#75715e">//å±æ€§    public int num = 10;    private static String str = &#34;æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„&#34;;    //æ„é€ å™¨æ²¡å†™    //æ–¹æ³•    public void test1() {        int count = 20;        System.out.println(&#34;count = &#34; + count);    }    public static int test2(int cal) {        int result = 0;        try {            int value = 30;            result = value / cal;        } catch (Exception e) {            e.printStackTrace();        }        return result;    }    @Override    public int compareTo(String o) {        return 0;    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>æ¥çœ‹ä¸‹æœ€ç®€å•çš„ test1() æ–¹æ³•ï¼Œå¸¦ # çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå°±ä½¿ç”¨äº†å¸¸é‡æ± çš„å¼•ç”¨</li>
<li>é€šè¿‡å­—èŠ‚ç æŒ‡ä»¤å¯ä»¥çœ‹å‡ºï¼Œ<strong>æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬é€ äº†ä¸ª StringBuilder å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å…¶ append() æ–¹æ³•å®Œæˆäº†å­—ç¬¦ä¸²çš„æ‹¼æ¥</strong></li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">  public void test1();    descriptor: ()V    flags: ACC_PUBLIC    Code:      stack=3, locals=2, args_size=1         0: bipush        20         2: istore_1         3: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;         6: new           #4                  // class java/lang/StringBuilder         9: dup        10: invokespecial #5                  // Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V        13: ldc           #6                  // String count =        15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;        18: iload_1        19: invokevirtual #8                  // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;        22: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;        25: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V        28: return      LineNumberTable:        line 20: 0        line 21: 3        line 22: 28      LocalVariableTable:        Start  Length  Slot  Name   Signature            0      29     0  this   Lcom/atguigu/java/MethodInnerStrucTest;            3      26     1 count   I</code></pre>
  
</div><div class="component-content component"><ul>
<li>å¸¸é‡æ± </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">Constant pool:   #1 = Methodref          #18.#52        // java/lang/Object.&#34;&lt;init&gt;&#34;:()V   #2 = Fieldref           #17.#53        // com/atguigu/java/MethodInnerStrucTest.num:I   #3 = Fieldref           #54.#55        // java/lang/System.out:Ljava/io/PrintStream;   #4 = Class              #56            // java/lang/StringBuilder   #5 = Methodref          #4.#52         // java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V   #6 = String             #57            // count =   #7 = Methodref          #4.#58         // java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;   #8 = Methodref          #4.#59         // java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;   #9 = Methodref          #4.#60         // java/lang/StringBuilder.toString:()Ljava/lang/String;  #10 = Methodref          #61.#62        // java/io/PrintStream.println:(Ljava/lang/String;)V  #11 = Class              #63            // java/lang/Exception  #12 = Methodref          #11.#64        // java/lang/Exception.printStackTrace:()V  #13 = Class              #65            // java/lang/String  #14 = Methodref          #17.#66        // com/atguigu/java/MethodInnerStrucTest.compareTo:(Ljava/lang/String;)I  #15 = String             #67            // æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„  #16 = Fieldref           #17.#68        // com/atguigu/java/MethodInnerStrucTest.str:Ljava/lang/String;  #17 = Class              #69            // com/atguigu/java/MethodInnerStrucTest  #18 = Class              #70            // java/lang/Object  #19 = Class              #71            // java/lang/Comparable  #20 = Class              #72            // java/io/Serializable  #21 = Utf8               num  #22 = Utf8               I  #23 = Utf8               str  #24 = Utf8               Ljava/lang/String;  #25 = Utf8               &lt;init&gt;  #26 = Utf8               ()V  #27 = Utf8               Code  #28 = Utf8               LineNumberTable  #29 = Utf8               LocalVariableTable  #30 = Utf8               this  #31 = Utf8               Lcom/atguigu/java/MethodInnerStrucTest;  #32 = Utf8               test1  #33 = Utf8               count  #34 = Utf8               test2  #35 = Utf8               (I)I  #36 = Utf8               value  #37 = Utf8               e  #38 = Utf8               Ljava/lang/Exception;  #39 = Utf8               cal  #40 = Utf8               result  #41 = Utf8               StackMapTable  #42 = Class              #63            // java/lang/Exception  #43 = Utf8               compareTo  #44 = Utf8               (Ljava/lang/String;)I  #45 = Utf8               o  #46 = Utf8               (Ljava/lang/Object;)I  #47 = Utf8               &lt;clinit&gt;  #48 = Utf8               Signature  #49 = Utf8               Ljava/lang/Object;Ljava/lang/Comparable&lt;Ljava/lang/String;&gt;;Ljava/io/Serializable;  #50 = Utf8               SourceFile  #51 = Utf8               MethodInnerStrucTest.java  #52 = NameAndType        #25:#26        // &#34;&lt;init&gt;&#34;:()V  #53 = NameAndType        #21:#22        // num:I  #54 = Class              #73            // java/lang/System  #55 = NameAndType        #74:#75        // out:Ljava/io/PrintStream;  #56 = Utf8               java/lang/StringBuilder  #57 = Utf8               count =  #58 = NameAndType        #76:#77        // append:(Ljava/lang/String;)Ljava/lang/StringBuilder;  #59 = NameAndType        #76:#78        // append:(I)Ljava/lang/StringBuilder;  #60 = NameAndType        #79:#80        // toString:()Ljava/lang/String;  #61 = Class              #81            // java/io/PrintStream  #62 = NameAndType        #82:#83        // println:(Ljava/lang/String;)V  #63 = Utf8               java/lang/Exception  #64 = NameAndType        #84:#26        // printStackTrace:()V  #65 = Utf8               java/lang/String  #66 = NameAndType        #43:#44        // compareTo:(Ljava/lang/String;)I  #67 = Utf8               æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„  #68 = NameAndType        #23:#24        // str:Ljava/lang/String;  #69 = Utf8               com/atguigu/java/MethodInnerStrucTest  #70 = Utf8               java/lang/Object  #71 = Utf8               java/lang/Comparable  #72 = Utf8               java/io/Serializable  #73 = Utf8               java/lang/System  #74 = Utf8               out  #75 = Utf8               Ljava/io/PrintStream;  #76 = Utf8               append  #77 = Utf8               (Ljava/lang/String;)Ljava/lang/StringBuilder;  #78 = Utf8               (I)Ljava/lang/StringBuilder;  #79 = Utf8               toString  #80 = Utf8               ()Ljava/lang/String;  #81 = Utf8               java/io/PrintStream  #82 = Utf8               println  #83 = Utf8               (Ljava/lang/String;)V  #84 = Utf8               printStackTrace</code></pre>
  
</div><blockquote>
<p class="component-content component"><strong>å¸¸é‡æ± æ€»ç»“</strong></p>
</blockquote>
<p class="component-content component">å¸¸é‡æ± ã€å¯ä»¥çœ‹åšæ˜¯ä¸€å¼ è¡¨ï¼Œè™šæ‹ŸæœºæŒ‡ä»¤æ ¹æ®è¿™å¼ å¸¸é‡è¡¨æ‰¾åˆ°è¦æ‰§è¡Œçš„ç±»åã€æ–¹æ³•åã€å‚æ•°ç±»å‹ã€å­—é¢é‡ç­‰ç±»å‹</p>
<blockquote>
<p class="component-content component"><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong></p>
</blockquote>
<div class="component-content component"><ol>
<li><strong>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†</strong>ã€‚</li>
<li><strong>å¸¸é‡æ± è¡¨ï¼ˆConstant Pool Tableï¼‰æ˜¯Classå­—èŠ‚ç æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­</strong>ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œåœ¨åŠ è½½ç±»å’Œæ¥å£åˆ°è™šæ‹Ÿæœºåï¼Œå°±ä¼šåˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶å¸¸é‡æ± ã€‚</li>
<li><strong>JVMä¸ºæ¯ä¸ªå·²åŠ è½½çš„ç±»å‹ï¼ˆç±»æˆ–æ¥å£ï¼‰éƒ½ç»´æŠ¤ä¸€ä¸ªå¸¸é‡æ± ã€‚æ± ä¸­çš„æ•°æ®é¡¹åƒæ•°ç»„é¡¹ä¸€æ ·ï¼Œæ˜¯é€šè¿‡ç´¢å¼•è®¿é—®çš„</strong>ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ä¸­åŒ…å«å¤šç§ä¸åŒçš„å¸¸é‡ï¼ŒåŒ…æ‹¬ç¼–è¯‘æœŸå°±å·²ç»æ˜ç¡®çš„æ•°å€¼å­—é¢é‡ï¼Œä¹ŸåŒ…æ‹¬åˆ°è¿è¡ŒæœŸè§£æåæ‰èƒ½å¤Ÿè·å¾—çš„æ–¹æ³•æˆ–è€…å­—æ®µå¼•ç”¨ã€‚<strong>æ­¤æ—¶ä¸å†æ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·åœ°å€äº†ï¼Œè¿™é‡Œæ¢ä¸ºçœŸå®åœ°å€</strong>ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦ä¸€é‡è¦ç‰¹å¾æ˜¯ï¼šå…·å¤‡åŠ¨æ€æ€§ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ç±»ä¼¼äºä¼ ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­çš„ç¬¦å·è¡¨ï¼ˆsymbol tableï¼‰ï¼Œä½†æ˜¯å®ƒæ‰€åŒ…å«çš„æ•°æ®å´æ¯”ç¬¦å·è¡¨è¦æ›´åŠ ä¸°å¯Œä¸€äº›ã€‚</li>
<li>å½“åˆ›å»ºç±»æˆ–æ¥å£çš„è¿è¡Œæ—¶å¸¸é‡æ± æ—¶ï¼Œå¦‚æœæ„é€ è¿è¡Œæ—¶å¸¸é‡æ± æ‰€éœ€çš„å†…å­˜ç©ºé—´è¶…è¿‡äº†æ–¹æ³•åŒºæ‰€èƒ½æä¾›çš„æœ€å¤§å€¼ï¼Œåˆ™JVMä¼šæŠ›OutofMemoryErrorå¼‚å¸¸ã€‚</li>
</ol></div>

<div class="component-content pagebody component">
  <h2 id="5æ–¹æ³•åŒºçš„ä½¿ç”¨ä¸¾ä¾‹" class="pagebody-header">
    5ã€æ–¹æ³•åŒºçš„ä½¿ç”¨ä¸¾ä¾‹
  </h2>
</div><blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºå›¾è§£ç¤ºä¾‹</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * @author shkstart  shkstart@126.com * @create 2020  14:28 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MethodAreaDemo</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span><span style="color:#f92672">;</span>        <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span><span style="color:#f92672">;</span>        <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> x <span style="color:#f92672">/</span> y<span style="color:#f92672">;</span>        <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span><span style="color:#f92672">;</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>a <span style="color:#f92672">+</span> b<span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><hr>
<p class="component-content component"><strong>å›¾è§£å­—èŠ‚ç æŒ‡ä»¤æ‰§è¡Œæµç¨‹</strong></p>
<div class="component-content component"><ul>
<li>å­—èŠ‚ç æ‰§è¡Œè¿‡ç¨‹å±•ç¤ºï¼šåˆå§‹çŠ¶æ€</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-6598c92fc849a5560081b067cfa28dd3" id="lht6598c92fc849a5560081b067cfa28dd3">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/164.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>é¦–å…ˆå°†æ“ä½œæ•°500å‹å…¥æ“ä½œæ•°æ ˆä¸­</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0c4eb9f0710c265d29ef26fb9372af3a" id="lht0c4eb9f0710c265d29ef26fb9372af3a">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/165.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>ç„¶åæ“ä½œæ•° 500 ä»æ“ä½œæ•°æ ˆä¸­å–å‡ºï¼Œå­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º 1 çš„ä½ç½®</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-d33c9fde0e2434115ff740bd1795fb9e" id="lhtd33c9fde0e2434115ff740bd1795fb9e">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/166.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>ç„¶åæ“ä½œæ•° 100 ä»æ“ä½œæ•°æ ˆä¸­å–å‡ºï¼Œå­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º 2 çš„ä½ç½®</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-4e1a7738bac0ff9c8f1ad1c1cf7be538" id="lht4e1a7738bac0ff9c8f1ad1c1cf7be538">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/167.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>å°†æ“ä½œæ•° 100 ä»</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-2c87216682da5fdb8bcb0a2cfb78cab1" id="lht2c87216682da5fdb8bcb0a2cfb78cab1">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/168.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>è¯»å–æœ¬åœ°å˜é‡ 1 ï¼Œå‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-80fbff44b6a3aee86ec5b4a04657617b" id="lht80fbff44b6a3aee86ec5b4a04657617b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/169.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>è¯»å–æœ¬åœ°å˜é‡ 2 ï¼Œå‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-2e142038b48e19cae4845350b2c5bcae" id="lht2e142038b48e19cae4845350b2c5bcae">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/170.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>ä¸¤æ•°ç›¸é™¤ï¼Œè®¡ç®—ç»“æœæ”¾åœ¨æ“ä½œæ•°æ ˆé¡¶ï¼Œä¹‹åæ‰§è¡Œ istore_3 æŒ‡ä»¤ï¼Œå°†è®¡ç®—ç»“æœä»æ“ä½œæ•°æ ˆä¸­å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡ 3 ä¸­</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-41b03809de32dcfd83b239ef37b755a0" id="lht41b03809de32dcfd83b239ef37b755a0">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/171.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>å°†æ“ä½œæ•° 50 å‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-5d088de013bfac7b9790799c5147d0e0" id="lht5d088de013bfac7b9790799c5147d0e0">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/172.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>å°†æ“ä½œæ•° 50 ä»æ ˆé¡¶å¼¹å‡ºï¼Œä¿å­˜åœ¨å±€éƒ¨å˜é‡ 4 ä¸­</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-23f334f5c06af1e4e50ed482696ef0af" id="lht23f334f5c06af1e4e50ed482696ef0af">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/173.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>è·å– System.out è¾“å‡ºæµçš„å¼•ç”¨ï¼ˆæˆ‘ä¸å¤ªç¡®å®šï¼‰</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-adc76c976c1be8e412f3288277c6b863" id="lhtadc76c976c1be8e412f3288277c6b863">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/174.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>å°†æœ¬åœ°å˜é‡ 3 çš„å€¼å–å‡ºï¼Œå‹å…¥æ“ä½œæ•°æ ˆä¸­ï¼Œå‡†å¤‡è¿›è¡ŒåŠ æ³•è¿ç®—</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-d92aa80de77e71b819c0b194b49e2205" id="lhtd92aa80de77e71b819c0b194b49e2205">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/175.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>æ‰§è¡ŒåŠ æ³•è¿ç®—åï¼Œå°†è®¡ç®—ç»“æœæ”¾åœ¨æ“ä½œæ•°æ ˆé¡¶</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f9a953bebf580d2e2a3106d1d565f19b" id="lhtf9a953bebf580d2e2a3106d1d565f19b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/176.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>è°ƒç”¨é™æ€æ–¹æ³• println() ï¼Œè¾“å‡ºåŠ æ³•ç»“æœ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-02a226c1e6ec8f90feceeba63145c0c1" id="lht02a226c1e6ec8f90feceeba63145c0c1">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/177.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>main() æ–¹æ³•æ‰§è¡Œç»“æŸ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-791e2f9bec74afc6db8ce3b42f087c68" id="lht791e2f9bec74afc6db8ce3b42f087c68">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/178.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>å…³äºã€ç¬¦å·å¼•ç”¨ &ndash;&gt; ç›´æ¥é¥®ç”¨ã€‘çš„ç†è§£</strong></p>
<div class="component-content component"><ol>
<li>ä¸Šé¢ä»£ç è°ƒç”¨ System.out.println() æ–¹æ³•æ—¶ï¼Œé¦–å…ˆéœ€è¦çœ‹çœ‹ System ç±»æœ‰æ²¡æœ‰åŠ è½½ï¼Œå†çœ‹çœ‹ PrintStream ç±»æœ‰æ²¡æœ‰åŠ è½½</li>
<li>å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œåˆ™æ‰§è¡ŒåŠ è½½ï¼Œ<strong>æ‰§è¡Œæ—¶ï¼Œå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨ï¼ˆå­—é¢é‡ï¼‰è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆçœŸæ­£çš„åœ°å€å€¼ï¼‰</strong></li>
</ol></div>
<hr>
<p class="component-content component"><strong>å…³äºç¨‹åºè®¡æ•°å™¨çš„è¯´æ˜</strong></p>
<p class="component-content component">ç¨‹åºè®¡æ•°å™¨å§‹ç»ˆè®¡ç®—çš„éƒ½æ˜¯å½“å‰ä»£ç è¿è¡Œçš„ä½ç½®ï¼Œç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿è®°å½•æ–¹æ³•è°ƒç”¨åèƒ½å¤Ÿæ­£å¸¸è¿”å›ï¼Œæˆ–è€…æ˜¯è¿›è¡Œäº†CPUåˆ‡æ¢åï¼Œä¹Ÿèƒ½å›æ¥åˆ°åŸæ¥çš„ä»£ç è¿›è¡Œæ‰§è¡Œã€‚</p>

<div class="component-content pagebody component">
  <h2 id="6æ–¹æ³•åŒºæ¼”è¿›ç»†èŠ‚" class="pagebody-header">
    6ã€æ–¹æ³•åŒºæ¼”è¿›ç»†èŠ‚
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="61æ°¸ä¹…ä»£æ¼”è¿›è¿‡ç¨‹" class="pagebody-header">
    6.1ã€æ°¸ä¹…ä»£æ¼”è¿›è¿‡ç¨‹
  </h3>
</div><blockquote>
<p class="component-content component"><strong>å…³äºæ°¸ä¹…ä»£çš„è¯´æ˜</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>é¦–å…ˆæ˜ç¡®ï¼šåªæœ‰Hotspotæ‰æœ‰æ°¸ä¹…ä»£ã€‚</li>
<li>BEA JRockitã€IBMJ9ç­‰æ¥è¯´ï¼Œæ˜¯ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µçš„ã€‚åŸåˆ™ä¸Šå¦‚ä½•å®ç°æ–¹æ³•åŒºå±äºè™šæ‹Ÿæœºå®ç°ç»†èŠ‚ï¼Œä¸å—ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ç®¡æŸï¼Œå¹¶ä¸è¦æ±‚ç»Ÿä¸€</li>
<li>Hotspotä¸­æ–¹æ³•åŒºçš„å˜åŒ–ï¼š</li>
</ol></div>
<div class="component-content component"><table>
<thead>
<tr>
<th>JDK ç‰ˆæœ¬</th>
<th>æ¼”å˜ç»†èŠ‚</th>
</tr>
</thead>
<tbody>
<tr>
<td>JDK1.6åŠä»¥å‰</td>
<td>æœ‰æ°¸ä¹…ä»£ï¼ˆpermanent generationï¼‰ï¼Œé™æ€å˜é‡å­˜å‚¨åœ¨æ°¸ä¹…ä»£ä¸Š</td>
</tr>
<tr>
<td>JDK1.7</td>
<td>æœ‰æ°¸ä¹…ä»£ï¼Œä½†å·²ç»é€æ­¥ â€œå»æ°¸ä¹…ä»£â€ï¼Œ<strong>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œé™æ€å˜é‡ç§»é™¤ï¼Œä¿å­˜åœ¨å †ä¸­</strong></td>
</tr>
<tr>
<td>JDK1.8</td>
<td>æ— æ°¸ä¹…ä»£ï¼Œç±»å‹ä¿¡æ¯ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼Œå¸¸é‡ä¿å­˜åœ¨æœ¬åœ°å†…å­˜çš„å…ƒç©ºé—´ï¼Œä½†å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ä»ç„¶åœ¨å †ä¸­ã€‚</td>
</tr>
</tbody>
</table></div>
<hr>
<p class="component-content component"><strong>JDK6</strong></p>
<p class="component-content component">æ–¹æ³•åŒºç”±æ°¸ä¹…ä»£å®ç°ï¼Œä½¿ç”¨ JVM è™šæ‹Ÿæœºå†…å­˜</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-a3531f5eebeb06aca59f9d6518965d6d" id="lhta3531f5eebeb06aca59f9d6518965d6d">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/179.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>JDK7</strong></p>
<p class="component-content component">æ–¹æ³•åŒºç”±æ°¸ä¹…ä»£å®ç°ï¼Œä½¿ç”¨ JVM è™šæ‹Ÿæœºå†…å­˜</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-2272d2bee125c2af9a5725a365e3c554" id="lht2272d2bee125c2af9a5725a365e3c554">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/180.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>JDK8</strong></p>
<p class="component-content component">æ–¹æ³•åŒºç”±å…ƒç©ºé—´å®ç°ï¼Œä½¿ç”¨ç‰©ç†æœºæœ¬åœ°å†…å­˜</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-42040ef97c156daa2cf33a7fcfeb4ef1" id="lht42040ef97c156daa2cf33a7fcfeb4ef1">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/181.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="62å…ƒç©ºé—´å‡ºç°åŸå› " class="pagebody-header">
    6.2ã€å…ƒç©ºé—´å‡ºç°åŸå› 
  </h3>
</div><blockquote>
<p class="component-content component"><strong>æ°¸ä¹…ä»£ä¸ºä»€ä¹ˆè¦è¢«å…ƒç©ºé—´æ›¿ä»£ï¼Ÿ</strong></p>
</blockquote>
<p class="component-content component"><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<p class="component-content component"><a href="http://openjdk.java.net/jeps/122">http://openjdk.java.net/jeps/122</a></p>
<hr>
<div class="component-content component"><ol>
<li>å®˜æ–¹çš„ç‰µå¼ºè§£é‡Šï¼šJRockitæ˜¯å’ŒHotSpotèåˆåçš„ç»“æœï¼Œå› ä¸ºJRockitæ²¡æœ‰æ°¸ä¹…ä»£ï¼Œæ‰€ä»¥ä»–ä»¬ä¸éœ€è¦é…ç½®æ°¸ä¹…ä»£</li>
<li>éšç€Java8çš„åˆ°æ¥ï¼ŒHotSpot VMä¸­å†ä¹Ÿè§ä¸åˆ°æ°¸ä¹…ä»£äº†ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ä¹Ÿæ¶ˆå¤±äº†ã€‚è¿™äº›æ•°æ®è¢«ç§»åˆ°äº†ä¸€ä¸ªä¸å †ä¸ç›¸è¿çš„æœ¬åœ°å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸå«åšå…ƒç©ºé—´ï¼ˆMetaspaceï¼‰ã€‚</li>
</ol></div>
<hr>
<p class="component-content component"><strong>ç”±äºç±»çš„å…ƒæ•°æ®åˆ†é…åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œå…ƒç©ºé—´çš„æœ€å¤§å¯åˆ†é…ç©ºé—´å°±æ˜¯ç³»ç»Ÿå¯ç”¨å†…å­˜ç©ºé—´ï¼Œè¿™é¡¹æ”¹åŠ¨æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼ŒåŸå› æœ‰ï¼š</strong></p>
<div class="component-content component"><ol>
<li>ä¸ºæ°¸ä¹…ä»£è®¾ç½®ç©ºé—´å¤§å°æ˜¯å¾ˆéš¾ç¡®å®šçš„ã€‚
<div class="component-content component"><ul>
<li>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœåŠ¨æ€åŠ è½½ç±»è¿‡å¤šï¼Œå®¹æ˜“äº§ç”ŸPermåŒºçš„OOMã€‚æ¯”å¦‚æŸä¸ªå®é™…Webå·¥
ç¨‹ä¸­ï¼Œå› ä¸ºåŠŸèƒ½ç‚¹æ¯”è¾ƒå¤šï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¦ä¸æ–­åŠ¨æ€åŠ è½½å¾ˆå¤šç±»ï¼Œç»å¸¸å‡ºç°è‡´å‘½é”™è¯¯ã€‚<code>Exception in thread 'dubbo client x.x connector' java.lang.OutOfMemoryError:PermGen space</code></li>
<li>è€Œå…ƒç©ºé—´å’Œæ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š<strong>å…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜</strong>ã€‚
å› æ­¤ï¼Œ<strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶</strong>ã€‚</li>
</ul></div>
</li>
<li>å¯¹æ°¸ä¹…ä»£è¿›è¡Œè°ƒä¼˜æ˜¯å¾ˆå›°éš¾çš„ã€‚
<div class="component-content component"><ul>
<li>æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šå¸¸é‡æ± ä¸­åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ç”¨çš„ç±»å‹ï¼Œæ–¹æ³•åŒºçš„è°ƒä¼˜ä¸»è¦æ˜¯ä¸ºäº†é™ä½Full GC</li>
<li>æœ‰äº›äººè®¤ä¸ºæ–¹æ³•åŒºï¼ˆå¦‚HotSpotè™šæ‹Ÿæœºä¸­çš„å…ƒç©ºé—´æˆ–è€…æ°¸ä¹…ä»£ï¼‰æ˜¯æ²¡æœ‰åƒåœ¾æ”¶é›†è¡Œä¸ºçš„ï¼Œå…¶å®ä¸ç„¶ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æ–¹æ³•åŒºçš„çº¦æŸæ˜¯éå¸¸å®½æ¾çš„ï¼Œæåˆ°è¿‡å¯ä»¥ä¸è¦æ±‚è™šæ‹Ÿæœºåœ¨æ–¹æ³•åŒºä¸­å®ç°åƒåœ¾æ”¶é›†ã€‚äº‹å®ä¸Šä¹Ÿç¡®å®æœ‰æœªå®ç°æˆ–æœªèƒ½å®Œæ•´å®ç°æ–¹æ³•åŒºç±»å‹å¸è½½çš„æ”¶é›†å™¨å­˜åœ¨ï¼ˆå¦‚JDK11æ—¶æœŸçš„ZGCæ”¶é›†å™¨å°±ä¸æ”¯æŒç±»å¸è½½ï¼‰ã€‚</li>
<li><strong>ä¸€èˆ¬æ¥è¯´è¿™ä¸ªåŒºåŸŸçš„å›æ”¶æ•ˆæœæ¯”è¾ƒéš¾ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»</strong>ã€‚ä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶æœ‰æ—¶åˆç¡®å®æ˜¯å¿…è¦çš„ã€‚ä»¥å‰Sunå…¬å¸çš„Bugåˆ—è¡¨ä¸­ï¼Œæ›¾å‡ºç°è¿‡çš„è‹¥å¹²ä¸ªä¸¥é‡çš„Bugå°±æ˜¯ç”±äºä½ç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºå¯¹æ­¤åŒºåŸŸæœªå®Œå…¨å›æ”¶è€Œå¯¼è‡´å†…å­˜æ³„æ¼</li>
</ul></div>
</li>
</ol></div>

<div class="component-content pagebody component">
  <h3 id="63å­—ç¬¦ä¸²å¸¸é‡æ± " class="pagebody-header">
    6.3ã€å­—ç¬¦ä¸²å¸¸é‡æ± 
  </h3>
</div><blockquote>
<p class="component-content component"><strong>å­—ç¬¦ä¸²å¸¸é‡æ±  StringTable ä¸ºä»€ä¹ˆè¦è°ƒæ•´ä½ç½®ï¼Ÿ</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li><strong>JDK7ä¸­å°†StringTableæ”¾åˆ°äº†å †ç©ºé—´ä¸­</strong>ã€‚å› ä¸ºæ°¸ä¹…ä»£çš„å›æ”¶æ•ˆç‡å¾ˆä½ï¼Œåœ¨Full GCçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œæ°¸ä¹…ä»£çš„åƒåœ¾å›æ”¶ï¼Œè€ŒFull GCæ˜¯è€å¹´ä»£çš„ç©ºé—´ä¸è¶³ã€æ°¸ä¹…ä»£ä¸è¶³æ—¶æ‰ä¼šè§¦å‘ã€‚</li>
<li>è¿™å°±<strong>å¯¼è‡´StringTableå›æ”¶æ•ˆç‡ä¸é«˜</strong>ï¼Œè€Œæˆ‘ä»¬å¼€å‘ä¸­ä¼šæœ‰å¤§é‡çš„å­—ç¬¦ä¸²è¢«åˆ›å»ºï¼Œå›æ”¶æ•ˆç‡ä½ï¼Œå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜ä¸è¶³ã€‚<strong>æ”¾åˆ°å †é‡Œï¼Œèƒ½åŠæ—¶å›æ”¶å†…å­˜</strong>ã€‚</li>
</ol></div>

<div class="component-content pagebody component">
  <h3 id="64é™æ€å˜é‡ä½ç½®" class="pagebody-header">
    6.4ã€é™æ€å˜é‡ä½ç½®
  </h3>
</div><blockquote>
<p class="component-content component"><strong>é™æ€å˜é‡å­˜æ”¾åœ¨é‚£é‡Œï¼Ÿ</strong></p>
</blockquote>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹ 1</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * ç»“è®ºï¼š *  é™æ€å˜é‡åœ¨jdk6/7å­˜åœ¨ä¸æ°¸ä¹…ä»£ä¸­ï¼Œåœ¨jdk8å­˜åœ¨äºå †ä¸­ *  é™æ€å¼•ç”¨å¯¹åº”çš„å¯¹è±¡å®ä½“å§‹ç»ˆéƒ½å­˜åœ¨å †ç©ºé—´ * * jdk7ï¼š * -Xms200m -Xmx200m -XX:PermSize=300m -XX:MaxPermSize=300m -XX:+PrintGCDetails * jdk 8ï¼š * -Xms200m -Xmx200m -XX:MetaspaceSize=300m -XX:MaxMetaspaceSize=300m -XX:+PrintGCDetails * @author shkstart  shkstart@126.com * @create 2020  21:20 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StaticFieldTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> arr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[</span><span style="color:#ae81ff">1024</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1024</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span><span style="color:#f92672">];</span><span style="color:#75715e">//100MB    public static void main(String[] args) {        System.out.println(StaticFieldTest.arr);    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>è¿è¡Œç¯å¢ƒ JDK8 ï¼ŒJVM å‚æ•°</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">-Xms200m -Xmx200m -XX:MetaspaceSize=300m -XX:MaxMetaspaceSize=300m -XX:&#43;PrintGCDetails</code></pre>
  
</div><div class="component-content component"><ul>
<li>é€šè¿‡ GC æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼š<strong>é™æ€å˜é‡å¼•ç”¨å¯¹åº”çš„å¯¹è±¡å®ä½“å§‹ç»ˆéƒ½å­˜åœ¨å †ç©ºé—´</strong>ï¼ˆarr æ•°ç»„å¯¹è±¡ç›´æ¥æ€¼åˆ°è€å¹´åŒºå»äº†ï¼‰</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">[B@4554617cHeap PSYoungGen      total 59904K, used 5171K [0x00000000fbd80000, 0x0000000100000000, 0x0000000100000000)  eden space 51712K, 10% used [0x00000000fbd80000,0x00000000fc28ceb0,0x00000000ff000000)  from space 8192K, 0% used [0x00000000ff800000,0x00000000ff800000,0x0000000100000000)  to   space 8192K, 0% used [0x00000000ff000000,0x00000000ff000000,0x00000000ff800000) ParOldGen       total 136704K, used 102400K [0x00000000f3800000, 0x00000000fbd80000, 0x00000000fbd80000)  object space 136704K, 74% used [0x00000000f3800000,0x00000000f9c00010,0x00000000fbd80000) Metaspace       used 3473K, capacity 4496K, committed 4864K, reserved 1056768K  class space    used 381K, capacity 388K, committed 512K, reserved 1048576K</code></pre>
  
</div><hr>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹ 2</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­çš„æ¡ˆä¾‹ï¼š * staticObjã€instanceObjã€localObjå­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ * * @author shkstart  shkstart@126.com * @create 2020  11:39 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StaticObjTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>        <span style="color:#66d9ef">static</span> ObjectHolder staticObj <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectHolder<span style="color:#f92672">();</span>        ObjectHolder instanceObj <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectHolder<span style="color:#f92672">();</span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>            ObjectHolder localObj <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectHolder<span style="color:#f92672">();</span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;done&#34;</span><span style="color:#f92672">);</span>        <span style="color:#f92672">}</span>    <span style="color:#f92672">}</span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ObjectHolder</span> <span style="color:#f92672">{</span>    <span style="color:#f92672">}</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        Test test <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StaticObjTest<span style="color:#f92672">.</span><span style="color:#a6e22e">Test</span><span style="color:#f92672">();</span>        test<span style="color:#f92672">.</span><span style="color:#a6e22e">foo</span><span style="color:#f92672">();</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å¯ä»¥ä½¿ç”¨ JHSDB.exeï¼Œåœ¨JDK9çš„æ—¶å€™æ‰å¼•å…¥çš„</li>
<li>åˆ†æï¼šstaticObjéšç€Testçš„ç±»å‹ä¿¡æ¯å­˜æ”¾åœ¨æ–¹æ³•åŒºï¼ŒinstanceObjéšç€Testçš„å¯¹è±¡å®ä¾‹å­˜æ”¾åœ¨Javaå †ï¼ŒlocalObjectåˆ™æ˜¯å­˜æ”¾åœ¨foo()æ–¹æ³•æ ˆå¸§çš„å±€éƒ¨å˜é‡è¡¨ä¸­ã€‚</li>
<li>æµ‹è¯•å‘ç°ï¼šä¸‰ä¸ªå¯¹è±¡çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„åœ°å€éƒ½è½åœ¨EdenåŒºèŒƒå›´å†…ï¼Œæ‰€ä»¥ç»“è®ºï¼š<strong>åªè¦æ˜¯å¯¹è±¡å®ä¾‹å¿…ç„¶ä¼šåœ¨Javaå †ä¸­åˆ†é…</strong>ã€‚</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-9295082ca6465d12dd5a14c175bb1a79" id="lht9295082ca6465d12dd5a14c175bb1a79">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/182.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>æ¥ç€ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå¼•ç”¨è¯¥staticObjå¯¹è±¡çš„åœ°æ–¹ï¼Œæ˜¯åœ¨ä¸€ä¸ªjava.lang.Classçš„å®ä¾‹é‡Œï¼Œå¹¶ä¸”ç»™å‡ºäº†è¿™ä¸ªå®ä¾‹çš„åœ°å€ï¼Œé€šè¿‡InspectoræŸ¥çœ‹è¯¥å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥æ¸…æ¥šçœ‹åˆ°è¿™ç¡®å®æ˜¯ä¸€ä¸ªjava.lang.Classç±»å‹çš„å¯¹è±¡å®ä¾‹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåä¸ºstaticobjçš„å®ä¾‹å­—æ®µï¼š</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-a300e9e96bfd18707cbfdffb06a90504" id="lhta300e9e96bfd18707cbfdffb06a90504">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/183.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>ä»ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹æ‰€å®šä¹‰çš„æ¦‚å¿µæ¨¡å‹æ¥çœ‹ï¼Œæ‰€æœ‰Classç›¸å…³çš„ä¿¡æ¯éƒ½åº”è¯¥å­˜æ”¾åœ¨æ–¹æ³•åŒºä¹‹ä¸­ï¼Œä½†æ–¹æ³•åŒºè¯¥å¦‚ä½•å®ç°ï¼Œã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æœªåšå‡ºè§„å®šï¼Œè¿™å°±æˆäº†ä¸€ä»¶å…è®¸ä¸åŒè™šæ‹Ÿæœºè‡ªå·±çµæ´»æŠŠæ¡çš„äº‹æƒ…ã€‚JDK7åŠå…¶ä»¥åç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºé€‰æ‹©æŠŠé™æ€å˜é‡ä¸ç±»å‹åœ¨Javaè¯­è¨€ä¸€ç«¯çš„æ˜ å°„Classå¯¹è±¡å­˜æ”¾åœ¨ä¸€èµ·ï¼Œ<strong>å­˜å‚¨äºJavaå †ä¹‹ä¸­</strong>ï¼Œä»æˆ‘ä»¬çš„å®éªŒä¸­ä¹Ÿæ˜ç¡®éªŒè¯äº†è¿™ä¸€ç‚¹</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="7æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶" class="pagebody-header">
    7ã€æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶
  </h2>
</div><blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºåƒåœ¾æ”¶é›†</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>æœ‰äº›äººè®¤ä¸ºæ–¹æ³•åŒºï¼ˆå¦‚Hotspotè™šæ‹Ÿæœºä¸­çš„å…ƒç©ºé—´æˆ–è€…æ°¸ä¹…ä»£ï¼‰æ˜¯æ²¡æœ‰åƒåœ¾æ”¶é›†è¡Œä¸ºçš„ï¼Œå…¶å®ä¸ç„¶ã€‚</li>
<li>ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æ–¹æ³•åŒºçš„çº¦æŸæ˜¯éå¸¸å®½æ¾çš„ï¼Œæåˆ°è¿‡å¯ä»¥ä¸è¦æ±‚è™šæ‹Ÿæœºåœ¨æ–¹æ³•åŒºä¸­å®ç°åƒåœ¾æ”¶é›†ã€‚äº‹å®ä¸Šä¹Ÿç¡®å®æœ‰æœªå®ç°æˆ–æœªèƒ½å®Œæ•´å®ç°æ–¹æ³•åŒºç±»å‹å¸è½½çš„æ”¶é›†å™¨å­˜åœ¨ï¼ˆå¦‚JDK11æ—¶æœŸçš„ZGCæ”¶é›†å™¨å°±ä¸æ”¯æŒç±»å¸è½½ï¼‰ã€‚</li>
<li>ä¸€èˆ¬æ¥è¯´è¿™ä¸ªåŒºåŸŸçš„å›æ”¶æ•ˆæœæ¯”è¾ƒéš¾ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»ã€‚ä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶æœ‰æ—¶åˆç¡®å®æ˜¯å¿…è¦çš„ã€‚ä»¥å‰sunå…¬å¸çš„Bugåˆ—è¡¨ä¸­ï¼Œæ›¾å‡ºç°è¿‡çš„è‹¥å¹²ä¸ªä¸¥é‡çš„Bugå°±æ˜¯ç”±äºä½ç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºå¯¹æ­¤åŒºåŸŸæœªå®Œå…¨å›æ”¶è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li>
<li>æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼š<strong>å¸¸é‡æ± ä¸­åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ä½¿ç”¨çš„ç±»å‹</strong>ã€‚</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºå¸¸é‡çš„å›æ”¶</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>å…ˆæ¥è¯´è¯´æ–¹æ³•åŒºå†…å¸¸é‡æ± ä¹‹ä¸­ä¸»è¦å­˜æ”¾çš„ä¸¤å¤§ç±»å¸¸é‡ï¼šå­—é¢é‡å’Œç¬¦å·å¼•ç”¨
<div class="component-content component"><ul>
<li>å­—é¢é‡æ¯”è¾ƒæ¥è¿‘Javaè¯­è¨€å±‚æ¬¡çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€è¢«å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰</li>
<li>è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š
<div class="component-content component"><ul>
<li>ç±»å’Œæ¥å£çš„å…¨é™å®šå</li>
<li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦</li>
<li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</li>
</ul></div>
</li>
</ul></div>
</li>
<li>HotSpotè™šæ‹Ÿæœºå¯¹å¸¸é‡æ± çš„å›æ”¶ç­–ç•¥æ˜¯å¾ˆæ˜ç¡®çš„ï¼Œåªè¦å¸¸é‡æ± ä¸­çš„å¸¸é‡æ²¡æœ‰è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨ï¼Œå°±å¯ä»¥è¢«å›æ”¶ã€‚</li>
<li>å›æ”¶åºŸå¼ƒå¸¸é‡ä¸å›æ”¶Javaå †ä¸­çš„å¯¹è±¡éå¸¸ç±»ä¼¼ã€‚ï¼ˆå…³äºå¸¸é‡çš„å›æ”¶æ¯”è¾ƒç®€å•ï¼Œé‡ç‚¹æ˜¯ç±»çš„å›æ”¶ï¼‰</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>æ–¹æ³•åŒºç±»çš„å›æ”¶</strong></p>
</blockquote>
<p class="component-content component">åˆ¤å®šä¸€ä¸ªå¸¸é‡æ˜¯å¦â€œåºŸå¼ƒâ€è¿˜æ˜¯ç›¸å¯¹ç®€å•ï¼Œè€Œè¦åˆ¤å®šä¸€ä¸ªç±»å‹æ˜¯å¦å±äºâ€œä¸å†è¢«ä½¿ç”¨çš„ç±»â€çš„æ¡ä»¶å°±æ¯”è¾ƒè‹›åˆ»äº†ã€‚éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<div class="component-content component"><ol>
<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚</li>
<li>åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚</li>
<li>è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚</li>
</ol></div>
<p class="component-content component">Javaè™šæ‹Ÿæœºè¢«å…è®¸å¯¹æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œè¢«å…è®¸â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ï¼Œæ²¡æœ‰å¼•ç”¨äº†å°±å¿…ç„¶ä¼šå›æ”¶ã€‚å…³äºæ˜¯å¦è¦å¯¹ç±»å‹è¿›è¡Œå›æ”¶ï¼ŒHotSpotè™šæ‹Ÿæœºæä¾›äº†<code>-Xnoclassgc</code>å‚æ•°è¿›è¡Œæ§åˆ¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>-verbose:class</code> ä»¥åŠ <code>-XXï¼š+TraceClass-Loading</code>ã€<code>-XXï¼š+TraceClassUnLoading</code>æŸ¥çœ‹ç±»åŠ è½½å’Œå¸è½½ä¿¡æ¯</p>
<p class="component-content component">åœ¨å¤§é‡ä½¿ç”¨åå°„ã€åŠ¨æ€ä»£ç†ã€CGLibç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒåŠ¨æ€ç”ŸæˆJSPä»¥åŠOSGiè¿™ç±»é¢‘ç¹è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„åœºæ™¯ä¸­ï¼Œé€šå¸¸éƒ½éœ€è¦Javaè™šæ‹Ÿæœºå…·å¤‡ç±»å‹å¸è½½çš„èƒ½åŠ›ï¼Œä»¥ä¿è¯ä¸ä¼šå¯¹æ–¹æ³•åŒºé€ æˆè¿‡å¤§çš„å†…å­˜å‹åŠ›ã€‚</p>

<div class="component-content pagebody component">
  <h2 id="8è¿è¡Œæ—¶æ•°æ®åŒºæ€»ç»“" class="pagebody-header">
    8ã€è¿è¡Œæ—¶æ•°æ®åŒºæ€»ç»“
  </h2>
</div><div class="component-content component"><ul>
<li>çº¿ç¨‹ç§æœ‰ç»“æ„ï¼šç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li>
<li>æ¯ä¸ªè™šæ‹Ÿæœºæ ˆç”±ç”±å…·ä½“çš„æ ˆå¸§ç»„æˆï¼Œåœ¨æ ˆå¸§çš„åŠ¨æ€é“¾æ¥ä¸­ï¼Œä¿å­˜è‡³å¯¹æ–¹æ³•çš„å¼•ç”¨</li>
<li>æ–¹æ³•åŒºåœ¨ JDK7 ä¹‹å‰ï¼Œä½¿ç”¨æ°¸ä¹…ä»£å®ç°ï¼Œåœ¨ JDK8 ä¹‹åï¼Œä½¿ç”¨å…ƒç©ºé—´å®ç°</li>
<li>Minor GC é’ˆå¯¹äºæ–°ç”ŸåŒºï¼ŒMajor GC é’ˆå¯¹äºè€å¹´åŒºï¼ŒFull GC é’ˆå¯¹äºæ•´ä¸ªå †ç©ºé—´å’Œæ–¹æ³•åŒº</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-e162472e517477e62fa5ca9a7b03c929" id="lhte162472e517477e62fa5ca9a7b03c929">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/184.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="9å¤§åœºé¢è¯•é¢˜" class="pagebody-header">
    9ã€å¤§åœºé¢è¯•é¢˜
  </h2>
</div><div class="component-content component"><ol>
<li>ç™¾åº¦
<div class="component-content component"><ul>
<li>ä¸‰é¢ï¼šè¯´ä¸€ä¸‹JVMå†…å­˜æ¨¡å‹å§ï¼Œæœ‰å“ªäº›åŒºï¼Ÿåˆ†åˆ«å¹²ä»€ä¹ˆçš„ï¼Ÿ</li>
</ul></div>
</li>
<li>èš‚èšé‡‘æœï¼š
<div class="component-content component"><ul>
<li>Java8çš„å†…å­˜åˆ†ä»£æ”¹è¿›</li>
<li>JVMå†…å­˜åˆ†å“ªå‡ ä¸ªåŒºï¼Œæ¯ä¸ªåŒºçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸€é¢ï¼šJVMå†…å­˜åˆ†å¸ƒ/å†…å­˜ç»“æ„ï¼Ÿæ ˆå’Œå †çš„åŒºåˆ«ï¼Ÿå †çš„ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆä¸¤ä¸ªsurvivoråŒºï¼Ÿ</li>
<li>äºŒé¢ï¼šEdenå’Œsurviorçš„æ¯”ä¾‹åˆ†é…</li>
</ul></div>
</li>
<li>å°ç±³ï¼š
<div class="component-content component"><ul>
<li>jvmå†…å­˜åˆ†åŒºï¼Œä¸ºä»€ä¹ˆè¦æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£</li>
</ul></div>
</li>
<li>å­—èŠ‚è·³åŠ¨ï¼š
<div class="component-content component"><ul>
<li>äºŒé¢ï¼šJavaçš„å†…å­˜åˆ†åŒº</li>
<li>äºŒé¢ï¼šè®²è®²vmè¿è¡Œæ—¶æ•°æ®åº“åŒº</li>
<li>ä»€ä¹ˆæ—¶å€™å¯¹è±¡ä¼šè¿›å…¥è€å¹´ä»£ï¼Ÿ</li>
</ul></div>
</li>
<li>äº¬ä¸œï¼š
<div class="component-content component"><ul>
<li>JVMçš„å†…å­˜ç»“æ„ï¼ŒEdenå’ŒSurvivoræ¯”ä¾‹ã€‚</li>
<li>JVMå†…å­˜ä¸ºä»€ä¹ˆè¦åˆ†æˆæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ï¼ŒæŒä¹…ä»£ã€‚æ–°ç”Ÿä»£ä¸­ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºEdenå’Œsurvivorã€‚</li>
</ul></div>
</li>
<li>å¤©çŒ«ï¼š
<div class="component-content component"><ul>
<li>ä¸€é¢ï¼šJvmå†…å­˜æ¨¡å‹ä»¥åŠåˆ†åŒºï¼Œéœ€è¦è¯¦ç»†åˆ°æ¯ä¸ªåŒºæ”¾ä»€ä¹ˆã€‚</li>
<li>ä¸€é¢ï¼šJVMçš„å†…å­˜æ¨¡å‹ï¼ŒJava8åšäº†ä»€ä¹ˆæ”¹</li>
</ul></div>
</li>
<li>æ‹¼å¤šå¤šï¼š
<div class="component-content component"><ul>
<li>JVMå†…å­˜åˆ†å“ªå‡ ä¸ªåŒºï¼Œæ¯ä¸ªåŒºçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul></div>
</li>
<li>ç¾å›¢ï¼š
<div class="component-content component"><ul>
<li>javaå†…å­˜åˆ†é…</li>
<li>jvmçš„æ°¸ä¹…ä»£ä¸­ä¼šå‘ç”Ÿåƒåœ¾å›æ”¶å—ï¼Ÿ</li>
<li>ä¸€é¢ï¼šjvmå†…å­˜åˆ†åŒºï¼Œä¸ºä»€ä¹ˆè¦æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Ÿ</li>
</ul></div>
</li>
</ol></div>

          </div><div class="component">
            <div class="component-content">
              <div class="article-copyright">
                <p class="content">
                  ç‰ˆæƒå£°æ˜: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">ç‰ˆæƒå£°æ˜ï¼šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a>
                </p>
                <p class="content">ä½œè€…:  yuanshuai </p>
                <p class="content">å‘è¡¨æ—¥æœŸ:  2021å¹´11æœˆ30æ—¥</p>
              </div>
            </div>
          </div></article>
      </section>
  </main>

  <script>
    var script = document.createElement("script");script.src = "https://yuanshuai1122.github.io/js/initPost.js";
    document.head.appendChild(script);
  </script>

    
    <div class="footer-main ">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="foot-nav">
        <div class="foot-nav-items">
          <div class="item">
            <div class="logo"></div>
            <div class="email">Email: <a href="mailto:shuaiyuan@gmail.com">shuaiyuan@gmail.com</a></div>
          </div>

          <div class="item community">
            <div class="item-title">ç¤¾äº¤åª’ä½“</div>
            
              <a href="https://github.com/yuanshuai1122" target="_blank">Github</a>
            
          </div>

          <div class="item resources">
            <div class="item-title">å‹é“¾</div>
            
              <a href="https://yuanshuaicn.com/" target="_blank">ğŸ‘‹</a>
            
          </div>
        </div>
      </div>
      <div class="bottom">
        <div class="item copyright">
          &copy; 2023
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://github.com/floyd-li/hugo-theme-itheme" target="_blank">iTheme</a>
        </div>
      </div>
    </div>
  </div>
</div>

  </body>
    
    

    
    
</html>
