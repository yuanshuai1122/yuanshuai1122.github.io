<!DOCTYPE html>
<html class="js no-touch  progressive-image  no-reduced-motion progressive" lang="zh-hans">
  <head>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="keyword" content=""><meta property="og:title" content="JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬13ç« StringTable" />
<meta property="og:description" content="ç¬¬ 13 ç«  StringTable 1ã€String çš„åŸºæœ¬ç‰¹æ€§ 1.1ã€String æ¦‚è¿° String çš„æ¦‚è¿° Stringï¼šå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ä¸€å¯¹ â€œâ€ å¼•èµ·æ¥è¡¨ç¤º String s1 = &#34;mogublog&#34; ; // å­—é¢é‡çš„å®šä¹‰æ–¹å¼ String" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.io/posts/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC13%E7%AB%A0stringtable-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC13%E7%AB%A0stringtable/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-30T10:59:04+00:00" />
<meta property="article:modified_time" content="2021-11-30T10:59:04+00:00" />
<title>JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬13ç« StringTable</title>

    <link rel="canonical" href="/posts/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC13%E7%AB%A0stringtable-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC13%E7%AB%A0stringtable/">

    <link rel="stylesheet" href="/css/global.css">

    <link rel="stylesheet" href="/css/custom.css">

    <link rel="stylesheet" href="/css/search.css" />

    
    

    
    

</head>
  </head>
  <body class=" page-article   ">
    <header>
      <nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/ " class="nav-title">ğŸ§€</a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            <a href="/posts " class="nav-item-content">ç›®å½•</a>
          </div><div class="nav-item-wrapper">
            <a href="/about" class="nav-item-content">å…³äº</a>
          </div><div class="nav-item-wrapper">
            <a href="/index.xml" class="nav-item-content" target="_blank">RSS</a>
          </div></div>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleSearchModal(){
    const template = `
    <div class="modal-body">
      <div id="autocomplete" onclick="event.stopPropagation();"></div>
    </div>
    `
    const modal = document.querySelector("#modal-wrapper")
    if(!modal){
      const div = document.createElement("div")
      document.body.setAttribute("style","overflow: hidden;")
      div.setAttribute("id", "modal-wrapper")
      div.setAttribute("onclick", "toggleSearchModal()")
      div.innerHTML = template
      const script = document.createElement("script");script.setAttribute("src", "https://yuanshuai1122.github.io/js/algolia.js")
      div.appendChild(script)
      document.body.append(div)
    } else {
      document.body.removeAttribute("style")
      document.body.removeChild(modal)
    }
  }
</script>
    </header>
    
  
  
  <main id="main" class="main">
      <section>
        <article class="article">
          
          <div class=" article-header ">
            <div class="category component">
              <div class="component-content">
                <div class="category-eyebrow">
                  <span class="category-eyebrow__category category_original">
                    
                      
                        Java
                      
                    
                  </span>
                  <span class="category-eyebrow__date">2021å¹´11æœˆ30æ—¥</span>
                </div>
              </div>
            </div>
            <div class="pagetitle component">
              <div class="component-content">
                <h1 class="hero-headline">JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬13ç« StringTable</h1>
              </div>
            </div>
            <div class="component  article-subhead ">
              <div class="component-content"></div>
            </div>

            <div class="tagssheet component">
              <div class="component-content">
                
                  
                  <a href="/tags/java" class="tag">
                    Java
                  </a>
                
                  
                  <a href="/tags/jvm" class="tag">
                    JVM
                  </a>
                
              </div>
            </div>
          </div>
          
          <div class="pagebody">
            
            
            
            
            
            
            
            
            
<div class="component-content pagebody component">
  <h1 id="ç¬¬-13-ç« -stringtable" class="pagebody-header">
    ç¬¬ 13 ç«  StringTable
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1string-çš„åŸºæœ¬ç‰¹æ€§" class="pagebody-header">
    1ã€String çš„åŸºæœ¬ç‰¹æ€§
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="11string-æ¦‚è¿°" class="pagebody-header">
    1.1ã€String æ¦‚è¿°
  </h3>
</div><blockquote>
<p class="component-content component"><strong>String çš„æ¦‚è¿°</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>
<p class="component-content component">Stringï¼šå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ä¸€å¯¹ â€œâ€ å¼•èµ·æ¥è¡¨ç¤º</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mogublog&#34;</span> <span style="color:#f92672">;</span>   			<span style="color:#75715e">// å­—é¢é‡çš„å®šä¹‰æ–¹å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>String s2 <span style="color:#f92672">=</span>  <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;moxi&#34;</span><span style="color:#f92672">);</span>     <span style="color:#75715e">// new å¯¹è±¡çš„æ–¹å¼
</span></span></span></code></pre></div></div>
  
</div></li>
<li>
<p class="component-content component">Stringå£°æ˜ä¸ºfinalçš„ï¼Œä¸å¯è¢«ç»§æ‰¿</p>
</li>
<li>
<p class="component-content component">Stringå®ç°äº†Serializableæ¥å£ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²æ˜¯æ”¯æŒåºåˆ—åŒ–çš„ã€‚å®ç°äº†Comparableæ¥å£ï¼šè¡¨ç¤ºStringå¯ä»¥æ¯”è¾ƒå¤§å°</p>
</li>
<li>
<p class="component-content component">stringåœ¨jdk8åŠä»¥å‰å†…éƒ¨å®šä¹‰äº†final char[] valueç”¨äºå­˜å‚¨å­—ç¬¦ä¸²æ•°æ®ã€‚JDK9æ—¶æ”¹ä¸ºbyte[]</p>
</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>ä¸ºä»€ä¹ˆ JDK9 æ”¹å˜äº† String çš„ç»“æ„</strong></p>
</blockquote>
<p class="component-content component"><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<p class="component-content component"><a href="http://openjdk.java.net/jeps/254">http://openjdk.java.net/jeps/254</a></p>
<hr>
<p class="component-content component"><strong>ä¸ºä»€ä¹ˆæ”¹ä¸º byte[] å­˜å‚¨ï¼Ÿ</strong></p>
<div class="component-content component"><ol>
<li>Stringç±»çš„å½“å‰å®ç°å°†å­—ç¬¦å­˜å‚¨åœ¨charæ•°ç»„ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚(16ä½)ã€‚</li>
<li>ä»è®¸å¤šä¸åŒçš„åº”ç”¨ç¨‹åºæ”¶é›†çš„æ•°æ®è¡¨æ˜ï¼Œå­—ç¬¦ä¸²æ˜¯å †ä½¿ç”¨çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œè€Œä¸”å¤§å¤šæ•°å­—ç¬¦ä¸²å¯¹è±¡åªåŒ…å«æ‹‰ä¸å­—ç¬¦ã€‚è¿™äº›å­—ç¬¦åªéœ€è¦ä¸€ä¸ªå­—èŠ‚çš„å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤è¿™äº›å­—ç¬¦ä¸²å¯¹è±¡çš„å†…éƒ¨charæ•°ç»„ä¸­æœ‰ä¸€åŠçš„ç©ºé—´å°†ä¸ä¼šä½¿ç”¨ã€‚</li>
<li>ä¹‹å‰ String ç±»ä½¿ç”¨ UTF-16 çš„ char[] æ•°ç»„å­˜å‚¨ï¼Œç°åœ¨æ”¹ä¸º byte[] æ•°ç»„ å¤–åŠ ä¸€ä¸ªç¼–ç æ ‡å¿—ä½å­˜å‚¨ï¼Œè¯¥ç¼–ç æ ‡å¿—å°†æŒ‡å®š String ç±»ä¸­ byte[] æ•°ç»„çš„ç¼–ç æ–¹å¼</li>
<li>ç»“è®ºï¼šStringå†ä¹Ÿä¸ç”¨char[] æ¥å­˜å‚¨äº†ï¼Œæ”¹æˆäº†byte [] åŠ ä¸Šç¼–ç æ ‡è®°ï¼ŒèŠ‚çº¦äº†ä¸€äº›ç©ºé—´</li>
<li>åŒæ—¶åŸºäºStringçš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚StringBufferå’ŒStringBuilderä¹ŸåŒæ ·åšäº†ä¿®æ”¹</li>
</ol></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// ä¹‹å‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">char</span> value<span style="color:#f92672">[];</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ä¹‹å
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">byte</span><span style="color:#f92672">[]</span> value</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="12string-çš„åŸºæœ¬ç‰¹å¾" class="pagebody-header">
    1.2ã€String çš„åŸºæœ¬ç‰¹å¾
  </h3>
</div><blockquote>
<p class="component-content component"><strong>String çš„åŸºæœ¬ç‰¹å¾</strong></p>
</blockquote>
<p class="component-content component"><strong>Stringï¼šä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—ã€‚ç®€ç§°ï¼šä¸å¯å˜æ€§ã€‚</strong></p>
<div class="component-content component"><ol>
<li>å½“å¯¹å­—ç¬¦ä¸²é‡æ–°èµ‹å€¼æ—¶ï¼Œéœ€è¦é‡å†™æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼ã€‚</li>
<li>å½“å¯¹ç°æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œè¿æ¥æ“ä½œæ—¶ï¼Œä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼ã€‚</li>
<li>å½“è°ƒç”¨Stringçš„replace()æ–¹æ³•ä¿®æ”¹æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²æ—¶ï¼Œä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼ã€‚</li>
</ol></div>
<p class="component-content component">é€šè¿‡å­—é¢é‡çš„æ–¹å¼ï¼ˆåŒºåˆ«äºnewï¼‰ç»™ä¸€ä¸ªå­—ç¬¦ä¸²èµ‹å€¼ï¼Œæ­¤æ—¶çš„å­—ç¬¦ä¸²å€¼å£°æ˜åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ã€‚</p>
<hr>
<p class="component-content component"><strong>å½“å¯¹å­—ç¬¦ä¸²é‡æ–°èµ‹å€¼æ—¶ï¼Œéœ€è¦é‡å†™æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test1</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abc&#34;</span><span style="color:#f92672">;</span><span style="color:#75715e">//å­—é¢é‡å®šä¹‰çš„æ–¹å¼ï¼Œ&#34;abc&#34;å­˜å‚¨åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    String s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abc&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s1 <span style="color:#f92672">==</span> s2<span style="color:#f92672">);</span><span style="color:#75715e">//åˆ¤æ–­åœ°å€ï¼šfalse
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s1<span style="color:#f92672">);</span><span style="color:#75715e">//hello
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s2<span style="color:#f92672">);</span><span style="color:#75715e">//abc
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">å­—èŠ‚ç æŒ‡ä»¤</p>
<div class="component-content component"><ul>
<li>å–å­—ç¬¦ä¸² â€œabcâ€ æ—¶ï¼Œä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªç¬¦å·å¼•ç”¨ï¼š#2</li>
<li>å–å­—ç¬¦ä¸² â€œhelloâ€ æ—¶ï¼Œä½¿ç”¨çš„æ˜¯å¦ä¸€ä¸ªç¬¦å·å¼•ç”¨ï¼š#3</li>
</ul></div>
</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #2 &lt;abc&gt;
 2 astore_1
 3 ldc #2 &lt;abc&gt;
 5 astore_2
 6 ldc #3 &lt;hello&gt;
 8 astore_1
 9 getstatic #4 &lt;java/lang/System.out&gt;
12 aload_1
13 aload_2
14 if_acmpne 21 (&#43;7)
17 iconst_1
18 goto 22 (&#43;4)
21 iconst_0
22 invokevirtual #5 &lt;java/io/PrintStream.println&gt;
25 getstatic #4 &lt;java/lang/System.out&gt;
28 aload_1
29 invokevirtual #6 &lt;java/io/PrintStream.println&gt;
32 getstatic #4 &lt;java/lang/System.out&gt;
35 aload_2
36 invokevirtual #6 &lt;java/io/PrintStream.println&gt;
39 return</code></pre>
  
</div><hr>
<p class="component-content component"><strong>å½“å¯¹ç°æœ‰çš„å­—ç¬¦ä¸²è¿›è¡Œè¿æ¥æ“ä½œæ—¶ï¼Œä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test2</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abc&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    String s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abc&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    s2 <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;def&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s2<span style="color:#f92672">);</span><span style="color:#75715e">//abcdef
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s1<span style="color:#f92672">);</span><span style="color:#75715e">//abc
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å­—èŠ‚ç æŒ‡ä»¤ï¼šæ‹¼æ¥æ“ä½œé€šè¿‡ StringBuilder çš„ append() æ–¹æ³•å®Œæˆ</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #2 &lt;abc&gt;
 2 astore_1
 3 ldc #2 &lt;abc&gt;
 5 astore_2
 6 new #7 &lt;java/lang/StringBuilder&gt;
 9 dup
10 invokespecial #8 &lt;java/lang/StringBuilder.&lt;init&gt;&gt;
13 aload_2
14 invokevirtual #9 &lt;java/lang/StringBuilder.append&gt;
17 ldc #10 &lt;def&gt;
19 invokevirtual #9 &lt;java/lang/StringBuilder.append&gt;
22 invokevirtual #11 &lt;java/lang/StringBuilder.toString&gt;
25 astore_2
26 getstatic #4 &lt;java/lang/System.out&gt;
29 aload_2
30 invokevirtual #6 &lt;java/io/PrintStream.println&gt;
33 getstatic #4 &lt;java/lang/System.out&gt;
36 aload_1
37 invokevirtual #6 &lt;java/io/PrintStream.println&gt;
40 return</code></pre>
  
</div><hr>
<p class="component-content component"><strong>å½“è°ƒç”¨stringçš„replace()æ–¹æ³•ä¿®æ”¹æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦ä¸²æ—¶ï¼Œä¹Ÿéœ€è¦é‡æ–°æŒ‡å®šå†…å­˜åŒºåŸŸèµ‹å€¼ï¼Œä¸èƒ½ä½¿ç”¨åŸæœ‰çš„valueè¿›è¡Œèµ‹å€¼</strong></p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test3</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;abc&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    String s2 <span style="color:#f92672">=</span> s1<span style="color:#f92672">.</span><span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#39;a&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;m&#39;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s1<span style="color:#f92672">);</span><span style="color:#75715e">//abc
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s2<span style="color:#f92672">);</span><span style="color:#75715e">//mbc
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><hr>
<p class="component-content component"><strong>æ¥çœ‹çœ‹ replace() æ–¹æ³•çš„æºç </strong></p>
<div class="component-content component"><ul>
<li>new String(buf, true); åï¼Œè¿”å›æ–°çš„ String å¯¹è±¡</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">replace</span><span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> oldChar<span style="color:#f92672">,</span> <span style="color:#66d9ef">char</span> newChar<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>oldChar <span style="color:#f92672">!=</span> newChar<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> len <span style="color:#f92672">=</span> value<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> val <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span> <span style="color:#75715e">/* avoid getfield opcode */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(++</span>i <span style="color:#f92672">&lt;</span> len<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>val<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">==</span> oldChar<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> len<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">char</span> buf<span style="color:#f92672">[]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">[</span>len<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;</span> i<span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                buf<span style="color:#f92672">[</span>j<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> val<span style="color:#f92672">[</span>j<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> len<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">char</span> c <span style="color:#f92672">=</span> val<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>                buf<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> oldChar<span style="color:#f92672">)</span> <span style="color:#f92672">?</span> newChar <span style="color:#f92672">:</span> c<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                i<span style="color:#f92672">++;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>buf<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><hr>
<p class="component-content component">è¯¾åç»ƒä¹ ï¼šString çš„ä¸å¯å˜æ€§</p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * @author shkstart  shkstart@126.com * @create 2020  23:44 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringExer</span> <span style="color:#f92672">{</span>    String str <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;good&#34;</span><span style="color:#f92672">);</span>    <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> ch <span style="color:#f92672">=</span> <span style="color:#f92672">{</span><span style="color:#e6db74">&#39;t&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;e&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;s&#39;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#39;t&#39;</span><span style="color:#f92672">};</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">change</span><span style="color:#f92672">(</span>String str<span style="color:#f92672">,</span> <span style="color:#66d9ef">char</span> ch<span style="color:#f92672">[])</span> <span style="color:#f92672">{</span>        str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;test ok&#34;</span><span style="color:#f92672">;</span>        ch<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;b&#39;</span><span style="color:#f92672">;</span>    <span style="color:#f92672">}</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        StringExer ex <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StringExer<span style="color:#f92672">();</span>        ex<span style="color:#f92672">.</span><span style="color:#a6e22e">change</span><span style="color:#f92672">(</span>ex<span style="color:#f92672">.</span><span style="color:#a6e22e">str</span><span style="color:#f92672">,</span> ex<span style="color:#f92672">.</span><span style="color:#a6e22e">ch</span><span style="color:#f92672">);</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>ex<span style="color:#f92672">.</span><span style="color:#a6e22e">str</span><span style="color:#f92672">);</span><span style="color:#75715e">//good        System.out.println(ex.ch);//best    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>str çš„å†…å®¹å¹¶æ²¡æœ‰å˜ï¼šâ€œtest okâ€ ä½äºå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å¦ä¸€ä¸ªåŒºåŸŸï¼ˆåœ°å€ï¼‰ï¼Œè¿›è¡Œèµ‹å€¼æ“ä½œå¹¶æ²¡æœ‰ä¿®æ”¹åŸæ¥ str æŒ‡å‘çš„å¼•ç”¨çš„å†…å®¹</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">goodbest</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h3 id="13string-çš„åº•å±‚ç»“æ„" class="pagebody-header">
    1.3ã€String çš„åº•å±‚ç»“æ„
  </h3>
</div><blockquote>
<p class="component-content component"><strong>String åº•å±‚ Hashtable ç»“æ„çš„è¯´æ˜</strong></p>
</blockquote>
<p class="component-content component"><strong>å­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯ä¸ä¼šå­˜å‚¨ç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²çš„</strong></p>
<div class="component-content component"><ol>
<li>Stringçš„String Poolæ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„Hashtableï¼Œé»˜è®¤å€¼å¤§å°é•¿åº¦æ˜¯1009ã€‚å¦‚æœæ”¾è¿›String Poolçš„Stringéå¸¸å¤šï¼Œå°±ä¼šé€ æˆHashå†²çªä¸¥é‡ï¼Œä»è€Œå¯¼è‡´é“¾è¡¨ä¼šå¾ˆé•¿ï¼Œè€Œé“¾è¡¨é•¿äº†åç›´æ¥ä¼šé€ æˆçš„å½±å“å°±æ˜¯å½“è°ƒç”¨String.intern()æ–¹æ³•æ—¶æ€§èƒ½ä¼šå¤§å¹…ä¸‹é™ã€‚</li>
<li>ä½¿ç”¨-XX:StringTablesizeå¯è®¾ç½®StringTableçš„é•¿åº¦</li>
<li>åœ¨JDK6ä¸­StringTableæ˜¯å›ºå®šçš„ï¼Œå°±æ˜¯1009çš„é•¿åº¦ï¼Œæ‰€ä»¥å¦‚æœå¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²è¿‡å¤šå°±ä¼šå¯¼è‡´æ•ˆç‡ä¸‹é™å¾ˆå¿«ï¼ŒStringTablesizeè®¾ç½®æ²¡æœ‰è¦æ±‚</li>
<li>åœ¨JDK7ä¸­ï¼ŒStringTableçš„é•¿åº¦é»˜è®¤å€¼æ˜¯60013ï¼ŒStringTablesizeè®¾ç½®æ²¡æœ‰è¦æ±‚</li>
<li>åœ¨JDK8ä¸­ï¼ŒStringTableçš„é•¿åº¦é»˜è®¤å€¼æ˜¯60013ï¼ŒStringTableå¯ä»¥è®¾ç½®çš„æœ€å°å€¼ä¸º1009</li>
</ol></div>
<hr>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹ï¼šè®¾ç½® StringTable çš„é•¿åº¦</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * -XX:StringTableSize=1009 * * @author shkstart  shkstart@126.com * @create 2020  23:53 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringTest2</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// æµ‹è¯•StringTableSizeå‚æ•°        System.out.println(&#34;æˆ‘æ¥æ‰“ä¸ªé…±æ²¹&#34;);        try {            Thread.sleep(1000000);        } catch (InterruptedException e) {            e.printStackTrace();        }    }}1234567891011121314151617
</span></span></span></code></pre></div></div>
  
</div><p class="component-content component"><strong>é€šè¿‡ -XX:StringTableSize è®¾ç½® StringTable é•¿åº¦</strong></p>
<div class="component-content component"><ul>
<li>JVM å‚æ•°</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">-XX:StringTableSize=6666</code></pre>
  
</div><div class="component-content component"><ul>
<li>jinfo æŸ¥çœ‹å˜é‡å€¼</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>jpsjinfo -flag StringTableSize è¿›ç¨‹id</span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b1644a559686488d455dc773b1a6b2f9" id="lhtb1644a559686488d455dc773b1a6b2f9">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/214.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>æµ‹è¯•ä¸åŒ StringTable é•¿åº¦ä¸‹ï¼Œç¨‹åºçš„æ€§èƒ½</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * -XX:StringTableSize=1009 * * @author shkstart  shkstart@126.com * @create 2020  23:53 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringTest2</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>               BufferedReader br <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>            br <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FileReader<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;words.txt&#34;</span><span style="color:#f92672">));</span>            <span style="color:#66d9ef">long</span> start <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>            String data<span style="color:#f92672">;</span>            <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>data <span style="color:#f92672">=</span> br<span style="color:#f92672">.</span><span style="color:#a6e22e">readLine</span><span style="color:#f92672">())</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>                <span style="color:#75715e">//å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰å¯¹åº”dataçš„å­—ç¬¦ä¸²çš„è¯ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­ç”Ÿæˆ                data.intern();            }            long end = System.currentTimeMillis();            System.out.println(&#34;èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š&#34; + (end - start));//1009:143ms  100009:47ms        } catch (IOException e) {            e.printStackTrace();        } finally {            if (br != null) {                try {                    br.close();                } catch (IOException e) {                    e.printStackTrace();                }            }        }    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>-XX:StringTableSize=1009 ï¼šç¨‹åºè€—æ—¶ 143ms</li>
<li>-XX:StringTableSize=100009 ï¼šç¨‹åºè€—æ—¶ 47ms</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="2string-çš„å†…å­˜åˆ†é…" class="pagebody-header">
    2ã€String çš„å†…å­˜åˆ†é…
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="21string-å†…å­˜åˆ†é…æ¼”è¿›è¿‡ç¨‹" class="pagebody-header">
    2.1ã€String å†…å­˜åˆ†é…æ¼”è¿›è¿‡ç¨‹
  </h3>
</div><blockquote>
<p class="component-content component"><strong>String ç±»å‹</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>åœ¨Javaè¯­è¨€ä¸­æœ‰8ç§åŸºæœ¬æ•°æ®ç±»å‹å’Œä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„ç±»å‹Stringã€‚è¿™äº›ç±»å‹ä¸ºäº†ä½¿å®ƒä»¬åœ¨è¿è¡Œè¿‡ç¨‹ä¸­é€Ÿåº¦æ›´å¿«ã€æ›´èŠ‚çœå†…å­˜ï¼Œéƒ½æä¾›äº†ä¸€ç§å¸¸é‡æ± çš„æ¦‚å¿µã€‚</li>
<li>å¸¸é‡æ± å°±ç±»ä¼¼ä¸€ä¸ªJavaç³»ç»Ÿçº§åˆ«æä¾›çš„ç¼“å­˜ã€‚8ç§åŸºæœ¬æ•°æ®ç±»å‹çš„å¸¸é‡æ± éƒ½æ˜¯ç³»ç»Ÿåè°ƒçš„ï¼ŒStringç±»å‹çš„å¸¸é‡æ± æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒçš„ä¸»è¦ä½¿ç”¨æ–¹æ³•æœ‰ä¸¤ç§ã€‚
<div class="component-content component"><ul>
<li>ç›´æ¥ä½¿ç”¨åŒå¼•å·å£°æ˜å‡ºæ¥çš„Stringå¯¹è±¡ä¼šç›´æ¥å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ã€‚æ¯”å¦‚ï¼š<code>String info=&quot;atguigu.com&quot;;</code></li>
<li>å¦‚æœä¸æ˜¯ç”¨åŒå¼•å·å£°æ˜çš„Stringå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨Stringæä¾›çš„intern()æ–¹æ³•ã€‚</li>
</ul></div>
</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>String å†…å­˜åˆ†é…çš„æ¼”è¿›è¿‡ç¨‹</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>Java 6åŠä»¥å‰ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± å­˜æ”¾åœ¨æ°¸ä¹…ä»£</li>
<li>Java 7ä¸­ Oracleçš„å·¥ç¨‹å¸ˆå¯¹å­—ç¬¦ä¸²æ± çš„é€»è¾‘åšäº†å¾ˆå¤§çš„æ”¹å˜ï¼Œå³å°†å­—ç¬¦ä¸²å¸¸é‡æ± çš„ä½ç½®è°ƒæ•´åˆ°Javaå †å†…
<div class="component-content component"><ul>
<li>æ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½ä¿å­˜åœ¨å †ï¼ˆHeapï¼‰ä¸­ï¼Œå’Œå…¶ä»–æ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œè¿™æ ·å¯ä»¥è®©ä½ åœ¨è¿›è¡Œè°ƒä¼˜åº”ç”¨æ—¶ä»…éœ€è¦è°ƒæ•´å †å¤§å°å°±å¯ä»¥äº†ã€‚</li>
<li>å­—ç¬¦ä¸²å¸¸é‡æ± æ¦‚å¿µåŸæœ¬ä½¿ç”¨å¾—æ¯”è¾ƒå¤šï¼Œä½†æ˜¯è¿™ä¸ªæ”¹åŠ¨ä½¿å¾—æˆ‘ä»¬æœ‰è¶³å¤Ÿçš„ç†ç”±è®©æˆ‘ä»¬é‡æ–°è€ƒè™‘åœ¨Java 7ä¸­ä½¿ç”¨String.intern()ã€‚</li>
</ul></div>
</li>
<li>Java8å…ƒç©ºé—´ï¼Œå­—ç¬¦ä¸²å¸¸é‡åœ¨å †</li>
</ol></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-cde0a8ce6d3a2f17cf78fd0db5770d65" id="lhtcde0a8ce6d3a2f17cf78fd0db5770d65">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/215.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-d4009fd4db8f6854528e211d3d2eeca0" id="lhtd4009fd4db8f6854528e211d3d2eeca0">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/216.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="22ä¸ºä»€ä¹ˆè¦è°ƒæ•´-string-ä½ç½®" class="pagebody-header">
    2.2ã€ä¸ºä»€ä¹ˆè¦è°ƒæ•´ String ä½ç½®
  </h3>
</div><blockquote>
<p class="component-content component"><strong>StringTable ä¸ºä»€ä¹ˆè¦è°ƒæ•´ï¼Ÿ</strong></p>
</blockquote>
<p class="component-content component"><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<p class="component-content component"><a href="https://www.oracle.com/java/technologies/javase/jdk7-relnotes.html#jdk7changes">https://www.oracle.com/java/technologies/javase/jdk7-relnotes.html#jdk7changes</a></p>
<hr>
<div class="component-content component"><ol>
<li>ä¸ºä»€ä¹ˆè¦è°ƒæ•´ä½ç½®ï¼Ÿ
<div class="component-content component"><ul>
<li>æ°¸ä¹…ä»£çš„é»˜è®¤æ¯”è¾ƒå°</li>
<li>æ°¸ä¹…ä»£åƒåœ¾å›æ”¶é¢‘ç‡ä½</li>
<li>å †ä¸­ç©ºé—´è¶³å¤Ÿå¤§ï¼Œå­—ç¬¦ä¸²å¯è¢«åŠæ—¶å›æ”¶</li>
</ul></div>
</li>
<li>åœ¨JDK 7ä¸­ï¼Œinternedå­—ç¬¦ä¸²ä¸å†åœ¨Javaå †çš„æ°¸ä¹…ä»£ä¸­åˆ†é…ï¼Œè€Œæ˜¯åœ¨Javaå †çš„ä¸»è¦éƒ¨åˆ†ï¼ˆç§°ä¸ºå¹´è½»ä»£å’Œå¹´è€ä»£ï¼‰ä¸­åˆ†é…ï¼Œä¸åº”ç”¨ç¨‹åºåˆ›å»ºçš„å…¶ä»–å¯¹è±¡ä¸€èµ·åˆ†é…ã€‚</li>
<li>æ­¤æ›´æ”¹å°†å¯¼è‡´é©»ç•™åœ¨ä¸»Javaå †ä¸­çš„æ•°æ®æ›´å¤šï¼Œé©»ç•™åœ¨æ°¸ä¹…ç”Ÿæˆä¸­çš„æ•°æ®æ›´å°‘ï¼Œå› æ­¤å¯èƒ½éœ€è¦è°ƒæ•´å †å¤§å°ã€‚</li>
</ol></div>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * jdk6ä¸­ï¼š * -XX:PermSize=6m -XX:MaxPermSize=6m -Xms6m -Xmx6m * * jdk8ä¸­ï¼š * -XX:MetaspaceSize=6m -XX:MaxMetaspaceSize=6m -Xms6m -Xmx6m * @author shkstart  shkstart@126.com * @create 2020  0:36 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringTest3</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">//ä½¿ç”¨Setä¿æŒç€å¸¸é‡æ± å¼•ç”¨ï¼Œé¿å…full gcå›æ”¶å¸¸é‡æ± è¡Œä¸º        Set&lt;String&gt; set = new HashSet&lt;String&gt;();        //åœ¨shortå¯ä»¥å–å€¼çš„èŒƒå›´å†…è¶³ä»¥è®©6MBçš„PermSizeæˆ–heapäº§ç”ŸOOMäº†ã€‚        short i = 0;        while(true){            set.add(String.valueOf(i++).intern());        }    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å¼‚å¸¸æ—¥å¿—è¯´ï¼šæˆ‘çœŸæ²¡éª—ä½ ï¼Œå­—ç¬¦ä¸²çœŸçš„åœ¨å †ä¸­ï¼ˆJDK8ï¼‰</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">&#34;C:\Program Files\Java\jdk1.8.0_144\bin\java&#34; -XX:MetaspaceSize=6m -XX:MaxMetaspaceSize=6m -Xms6m -Xmx6m &#34;-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2017.3.1\lib\idea_rt.jar=1799:C:\Program Files\JetBrains\IntelliJ IDEA 2017.3.1\bin&#34; -Dfile.encoding=UTF-8 -classpath &#34;C:\Program Files\Java\jdk1.8.0_144\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\rt.jar;C:\Users\Heygo\Desktop\JVMDemo\out\production\chapter13;D:\JavaTools\apache-maven-3.3.9\repository\junit\junit\4.12\junit-4.12.jar;D:\JavaTools\apache-maven-3.3.9\repository\org\hamcrest\hamcrest-core\1.3\hamcrest-core-1.3.jar&#34; com.atguigu.java.StringTest3Exception in thread &#34;main&#34; java.lang.OutOfMemoryError: Java heap space	at java.util.HashMap.resize(HashMap.java:703)	at java.util.HashMap.putVal(HashMap.java:662)	at java.util.HashMap.put(HashMap.java:611)	at java.util.HashSet.add(HashSet.java:219)	at com.atguigu.java.StringTest3.main(StringTest3.java:22)Process finished with exit code 1</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h2 id="3string-çš„åŸºæœ¬æ“ä½œ" class="pagebody-header">
    3ã€String çš„åŸºæœ¬æ“ä½œ
  </h2>
</div><blockquote>
<p class="component-content component"><strong>æ ¸å¿ƒæ€æƒ³</strong></p>
</blockquote>
<p class="component-content component">Javaè¯­è¨€è§„èŒƒé‡Œè¦æ±‚å®Œå…¨ç›¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œåº”è¯¥åŒ…å«åŒæ ·çš„Unicodeå­—ç¬¦åºåˆ—ï¼ˆåŒ…å«åŒä¸€ä»½ç ç‚¹åºåˆ—çš„å¸¸é‡ï¼‰ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯æŒ‡å‘åŒä¸€ä¸ªStringç±»å®ä¾‹ã€‚</p>
<blockquote>
<p class="component-content component"><strong>é¢˜ç›®ä¸€</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * @author shkstart  shkstart@126.com * @create 2020  0:49 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringTest4</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">();</span><span style="color:#75715e">//2330        System.out.println(&#34;1&#34;);//2331        System.out.println(&#34;2&#34;);        System.out.println(&#34;3&#34;);        System.out.println(&#34;4&#34;);        System.out.println(&#34;5&#34;);        System.out.println(&#34;6&#34;);        System.out.println(&#34;7&#34;);        System.out.println(&#34;8&#34;);        System.out.println(&#34;9&#34;);        System.out.println(&#34;10&#34;);//2340        //å¦‚ä¸‹çš„å­—ç¬¦ä¸²&#34;1&#34; åˆ° &#34;10&#34;ä¸ä¼šå†æ¬¡åŠ è½½        System.out.println(&#34;1&#34;);//2341        System.out.println(&#34;2&#34;);//2341        System.out.println(&#34;3&#34;);        System.out.println(&#34;4&#34;);        System.out.println(&#34;5&#34;);        System.out.println(&#34;6&#34;);        System.out.println(&#34;7&#34;);        System.out.println(&#34;8&#34;);        System.out.println(&#34;9&#34;);        System.out.println(&#34;10&#34;);//2341    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>åˆ†æå­—ç¬¦ä¸²å¸¸é‡æ± çš„å˜åŒ–
<div class="component-content component"><ul>
<li>ç¨‹åºå¯åŠ¨æ—¶å·²ç»åŠ è½½äº† 2330 ä¸ªå­—ç¬¦ä¸²å¸¸é‡</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-082b09f084acd4311c29f22bf686a936" id="lht082b09f084acd4311c29f22bf686a936">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/217.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>åŠ è½½ æ¢è¡Œç¬¦</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-491db94d1eb1353ecb483b779a2d81dd" id="lht491db94d1eb1353ecb483b779a2d81dd">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/218.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>åŠ è½½äº†å­—ç¬¦ä¸²å¸¸é‡ â€œ1â€~â€œ9â€</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-dfe3bc7c0384dc4f572605ed9dc49ff3" id="lhtdfe3bc7c0384dc4f572605ed9dc49ff3">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/219.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>åŠ è½½å­—ç¬¦ä¸²å¸¸é‡ â€œ10â€</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-8998aec36055d30f351d91aa32b23486" id="lht8998aec36055d30f351d91aa32b23486">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/220.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>ä¹‹åçš„å­—ç¬¦ä¸²&quot;1&quot; åˆ° &ldquo;10&quot;ä¸ä¼šå†æ¬¡åŠ è½½</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-33204912545a7a50b3981615c8e885c9" id="lht33204912545a7a50b3981615c8e885c9">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/221.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-bdc216177a025524f723394c33dfbdff" id="lhtbdc216177a025524f723394c33dfbdff">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/222.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>é¢˜ç›®äºŒ</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * @author shkstart  shkstart@126.com * @create 2020  0:51 */</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Memory</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span><span style="color:#75715e">//line 1        int i = 1;//line 2        Object obj = new Object();//line 3        Memory mem = new Memory();//line 4        mem.foo(obj);//line 5    }//line 9    private void foo(Object param) {//line 6        String str = param.toString();//line 7        System.out.println(str);    }//line 8}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>åˆ†æè¿è¡Œæ—¶å†…å­˜ï¼ˆfoo() æ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå…¶å®å›¾ä¸­å°‘äº†ä¸€ä¸ª this å±€éƒ¨å˜é‡ï¼‰</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-03ab60c9dea5f20afd11f8647e335b6c" id="lht03ab60c9dea5f20afd11f8647e335b6c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/223.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="4å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œ" class="pagebody-header">
    4ã€å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œ
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="41ç¬¦ä¸²æ‹¼æ¥æ“ä½œçš„ç»“è®º" class="pagebody-header">
    4.1ã€ç¬¦ä¸²æ‹¼æ¥æ“ä½œçš„ç»“è®º
  </h3>
</div><blockquote>
<p class="component-content component"><strong>å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œçš„ç»“è®º</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>å¸¸é‡ä¸å¸¸é‡çš„æ‹¼æ¥ç»“æœåœ¨å¸¸é‡æ± ï¼ŒåŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ–</li>
<li>å¸¸é‡æ± ä¸­ä¸ä¼šå­˜åœ¨ç›¸åŒå†…å®¹çš„å˜é‡</li>
<li>æ‹¼æ¥å‰åï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯å˜é‡ï¼Œç»“æœå°±åœ¨å †ä¸­ã€‚å˜é‡æ‹¼æ¥çš„åŸç†æ˜¯StringBuilder</li>
<li>å¦‚æœæ‹¼æ¥çš„ç»“æœè°ƒç”¨intern()æ–¹æ³•ï¼Œåˆ™ä¸»åŠ¨å°†å¸¸é‡æ± ä¸­è¿˜æ²¡æœ‰çš„å­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥æ± ä¸­ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡åœ°å€
<div class="component-content component"><ul>
<li>å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›å­—ç¬¦ä¸²åœ¨å¸¸é‡æ± ä¸­çš„åœ°å€</li>
<li>å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¸å­˜åœ¨è¯¥å­—ç¬¦ä¸²ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä»½ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡çš„åœ°å€</li>
</ul></div>
</li>
</ol></div>
<hr>
<p class="component-content component"><strong>å¸¸é‡ä¸å¸¸é‡çš„æ‹¼æ¥ç»“æœåœ¨å¸¸é‡æ± ï¼ŒåŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ–</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Testpublic</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test1</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;b&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;c&#34;</span><span style="color:#f92672">;</span><span style="color:#75715e">//ç¼–è¯‘æœŸä¼˜åŒ–ï¼šç­‰åŒäº&#34;abc&#34;    String s2 = &#34;abc&#34;; //&#34;abc&#34;ä¸€å®šæ˜¯æ”¾åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œå°†æ­¤åœ°å€èµ‹ç»™s2    /*     * æœ€ç»ˆ.javaç¼–è¯‘æˆ.class,å†æ‰§è¡Œ.class     * String s1 = &#34;abc&#34;;     * String s2 = &#34;abc&#34;     */    System.out.println(s1 == s2); //true    System.out.println(s1.equals(s2)); //true}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ä»å­—èŠ‚ç æŒ‡ä»¤çœ‹å‡ºï¼šç¼–è¯‘å™¨åšäº†ä¼˜åŒ–ï¼Œå°† â€œaâ€ + â€œbâ€ + â€œcâ€ ä¼˜åŒ–æˆäº† â€œabcâ€</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #2 &lt;abc&gt; 2 astore_1 3 ldc #2 &lt;abc&gt; 5 astore_2 6 getstatic #3 &lt;java/lang/System.out&gt; 9 aload_110 aload_211 if_acmpne 18 (&#43;7)14 iconst_115 goto 19 (&#43;4)18 iconst_019 invokevirtual #4 &lt;java/io/PrintStream.println&gt;22 getstatic #3 &lt;java/lang/System.out&gt;25 aload_126 aload_227 invokevirtual #5 &lt;java/lang/String.equals&gt;30 invokevirtual #4 &lt;java/io/PrintStream.println&gt;33 return</code></pre>
  
</div><div class="component-content component"><ul>
<li>IDEA åç¼–è¯‘ class æ–‡ä»¶åï¼Œæ¥çœ‹è¿™ä¸ªé—®é¢˜</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-23c95f1a31a3fe1e6de296a35c516e24" id="lht23c95f1a31a3fe1e6de296a35c516e24">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/224.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>æ‹¼æ¥å‰åï¼Œåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯å˜é‡ï¼Œç»“æœå°±åœ¨å †ä¸­</strong></p>
<p class="component-content component"><strong>è°ƒç”¨ intern() æ–¹æ³•ï¼Œåˆ™ä¸»åŠ¨å°†å­—ç¬¦ä¸²å¯¹è±¡å­˜å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œå¹¶å°†å…¶åœ°å€è¿”å›</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Testpublic</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test2</span><span style="color:#f92672">(){</span>    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;javaEE&#34;</span><span style="color:#f92672">;</span>    String s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hadoop&#34;</span><span style="color:#f92672">;</span>    String s3 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;javaEEhadoop&#34;</span><span style="color:#f92672">;</span>    String s4 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;javaEE&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;hadoop&#34;</span><span style="color:#f92672">;</span><span style="color:#75715e">//ç¼–è¯‘æœŸä¼˜åŒ–    //å¦‚æœæ‹¼æ¥ç¬¦å·çš„å‰åå‡ºç°äº†å˜é‡ï¼Œåˆ™ç›¸å½“äºåœ¨å †ç©ºé—´ä¸­new String()ï¼Œå…·ä½“çš„å†…å®¹ä¸ºæ‹¼æ¥çš„ç»“æœï¼šjavaEEhadoop    String s5 = s1 + &#34;hadoop&#34;;    String s6 = &#34;javaEE&#34; + s2;    String s7 = s1 + s2;    System.out.println(s3 == s4);//true    System.out.println(s3 == s5);//false    System.out.println(s3 == s6);//false    System.out.println(s3 == s7);//false    System.out.println(s5 == s6);//false    System.out.println(s5 == s7);//false    System.out.println(s6 == s7);//false    //intern():åˆ¤æ–­å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ˜¯å¦å­˜åœ¨javaEEhadoopå€¼ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›å¸¸é‡æ± ä¸­javaEEhadoopçš„åœ°å€ï¼›    //å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¸å­˜åœ¨javaEEhadoopï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­åŠ è½½ä¸€ä»½javaEEhadoopï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡çš„åœ°å€ã€‚    String s8 = s6.intern();    System.out.println(s3 == s8);//true}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ä»å­—èŠ‚ç è§’åº¦æ¥çœ‹ï¼šæ‹¼æ¥å‰åæœ‰å˜é‡ï¼Œéƒ½ä¼šä½¿ç”¨åˆ° StringBuilder ç±»</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">  0 ldc #6 &lt;javaEE&gt;  2 astore_1  3 ldc #7 &lt;hadoop&gt;  5 astore_2  6 ldc #8 &lt;javaEEhadoop&gt;  8 astore_3  9 ldc #8 &lt;javaEEhadoop&gt; 11 astore 4 13 new #9 &lt;java/lang/StringBuilder&gt; 16 dup 17 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt; 20 aload_1 21 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt; 24 ldc #7 &lt;hadoop&gt; 26 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt; 29 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt; 32 astore 5 34 new #9 &lt;java/lang/StringBuilder&gt; 37 dup 38 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt; 41 ldc #6 &lt;javaEE&gt; 43 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt; 46 aload_2 47 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt; 50 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt; 53 astore 6 55 new #9 &lt;java/lang/StringBuilder&gt; 58 dup 59 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt; 62 aload_1 63 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt; 66 aload_2 67 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt; 70 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt; 73 astore 7 75 getstatic #3 &lt;java/lang/System.out&gt; 78 aload_3 79 aload 4 81 if_acmpne 88 (&#43;7) 84 iconst_1 85 goto 89 (&#43;4) 88 iconst_0 89 invokevirtual #4 &lt;java/io/PrintStream.println&gt; 92 getstatic #3 &lt;java/lang/System.out&gt; 95 aload_3 96 aload 5 98 if_acmpne 105 (&#43;7)101 iconst_1102 goto 106 (&#43;4)105 iconst_0106 invokevirtual #4 &lt;java/io/PrintStream.println&gt;109 getstatic #3 &lt;java/lang/System.out&gt;112 aload_3113 aload 6115 if_acmpne 122 (&#43;7)118 iconst_1119 goto 123 (&#43;4)122 iconst_0123 invokevirtual #4 &lt;java/io/PrintStream.println&gt;126 getstatic #3 &lt;java/lang/System.out&gt;129 aload_3130 aload 7132 if_acmpne 139 (&#43;7)135 iconst_1136 goto 140 (&#43;4)139 iconst_0140 invokevirtual #4 &lt;java/io/PrintStream.println&gt;143 getstatic #3 &lt;java/lang/System.out&gt;146 aload 5148 aload 6150 if_acmpne 157 (&#43;7)153 iconst_1154 goto 158 (&#43;4)157 iconst_0158 invokevirtual #4 &lt;java/io/PrintStream.println&gt;161 getstatic #3 &lt;java/lang/System.out&gt;164 aload 5166 aload 7168 if_acmpne 175 (&#43;7)171 iconst_1172 goto 176 (&#43;4)175 iconst_0176 invokevirtual #4 &lt;java/io/PrintStream.println&gt;179 getstatic #3 &lt;java/lang/System.out&gt;182 aload 6184 aload 7186 if_acmpne 193 (&#43;7)189 iconst_1190 goto 194 (&#43;4)193 iconst_0194 invokevirtual #4 &lt;java/io/PrintStream.println&gt;197 aload 6199 invokevirtual #13 &lt;java/lang/String.intern&gt;202 astore 8204 getstatic #3 &lt;java/lang/System.out&gt;207 aload_3208 aload 8210 if_acmpne 217 (&#43;7)213 iconst_1214 goto 218 (&#43;4)217 iconst_0218 invokevirtual #4 &lt;java/io/PrintStream.println&gt;221 return</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h3 id="42å­—ç¬¦ä¸²æ‹¼æ¥çš„åº•å±‚ç»†èŠ‚" class="pagebody-header">
    4.2ã€å­—ç¬¦ä¸²æ‹¼æ¥çš„åº•å±‚ç»†èŠ‚
  </h3>
</div><blockquote>
<p class="component-content component"><strong>å­—ç¬¦ä¸²æ‹¼æ¥çš„åº•å±‚ç»†èŠ‚</strong></p>
</blockquote>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹ 1</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Testpublic</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test3</span><span style="color:#f92672">(){</span>    String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">;</span>    String s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">;</span>    String s3 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ab&#34;</span><span style="color:#f92672">;</span>    <span style="color:#75715e">/*    å¦‚ä¸‹çš„s1 + s2 çš„æ‰§è¡Œç»†èŠ‚ï¼š(å˜é‡sæ˜¯æˆ‘ä¸´æ—¶å®šä¹‰çš„ï¼‰    â‘  StringBuilder s = new StringBuilder();    â‘¡ s.append(&#34;a&#34;)    â‘¢ s.append(&#34;b&#34;)    â‘£ s.toString()  --&gt; çº¦ç­‰äº new String(&#34;ab&#34;)    è¡¥å……ï¼šåœ¨jdk5.0ä¹‹åä½¿ç”¨çš„æ˜¯StringBuilder,åœ¨jdk5.0ä¹‹å‰ä½¿ç”¨çš„æ˜¯StringBuffer     */</span>    String s4 <span style="color:#f92672">=</span> s1 <span style="color:#f92672">+</span> s2<span style="color:#f92672">;</span><span style="color:#75715e">//&#34;ab&#34;    System.out.println(s3 == s4);//false}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å­—èŠ‚ç æŒ‡ä»¤</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #14 &lt;a&gt; 2 astore_1 3 ldc #15 &lt;b&gt; 5 astore_2 6 ldc #16 &lt;ab&gt; 8 astore_3 9 new #9 &lt;java/lang/StringBuilder&gt;12 dup13 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt;16 aload_117 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;20 aload_221 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;24 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt;27 astore 429 getstatic #3 &lt;java/lang/System.out&gt;32 aload_333 aload 435 if_acmpne 42 (&#43;7)38 iconst_139 goto 43 (&#43;4)42 iconst_043 invokevirtual #4 &lt;java/io/PrintStream.println&gt;46 return</code></pre>
  
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">åˆ†ææ‹¼æ¥çš„æ­¥éª¤</p>
<div class="component-content component"><ul>
<li>new StringBuilder()</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 9 new #9 &lt;java/lang/StringBuilder&gt;12 dup13 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt;</code></pre>
  
</div><div class="component-content component"><ul>
<li>åŠ è½½å­—ç¬¦ä¸²å˜é‡ï¼Œè¿›è¡Œ append æ“ä½œ</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">16 aload_117 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;20 aload_221 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;24 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt;</code></pre>
  
</div><div class="component-content component"><ul>
<li>è°ƒç”¨ StringBuilder ç±»çš„ toString() æ–¹æ³•ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å­˜å‚¨åœ¨å±€éƒ¨å˜é‡ä¸­</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">24 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt;27 astore 4</code></pre>
  
</div></li>
</ul></div>
<hr>
<p class="component-content component"><strong>ä»£ç ç¤ºä¾‹ 2</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/*1. å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œä¸ä¸€å®šä½¿ç”¨çš„æ˜¯StringBuilder!   å¦‚æœæ‹¼æ¥ç¬¦å·å·¦å³ä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡æˆ–å¸¸é‡å¼•ç”¨ï¼Œåˆ™ä»ç„¶ä½¿ç”¨ç¼–è¯‘æœŸä¼˜åŒ–ï¼Œå³éStringBuilderçš„æ–¹å¼ã€‚2. é’ˆå¯¹äºfinalä¿®é¥°ç±»ã€æ–¹æ³•ã€åŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨æ•°æ®ç±»å‹çš„é‡çš„ç»“æ„æ—¶ï¼Œèƒ½ä½¿ç”¨ä¸Šfinalçš„æ—¶å€™å»ºè®®ä½¿ç”¨ä¸Šã€‚ */</span><span style="color:#a6e22e">@Testpublic</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test4</span><span style="color:#f92672">(){</span>    <span style="color:#66d9ef">final</span> String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">final</span> String s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">;</span>    String s3 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ab&#34;</span><span style="color:#f92672">;</span>    String s4 <span style="color:#f92672">=</span> s1 <span style="color:#f92672">+</span> s2<span style="color:#f92672">;</span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>s3 <span style="color:#f92672">==</span> s4<span style="color:#f92672">);</span><span style="color:#75715e">//true}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ä»å­—èŠ‚ç è§’åº¦æ¥çœ‹ï¼šä¸ºå˜é‡ s3 èµ‹å€¼æ—¶ï¼Œç›´æ¥ä½¿ç”¨ #16 ç¬¦å·å¼•ç”¨ï¼Œå³å­—ç¬¦ä¸²å¸¸é‡ â€œabâ€</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #14 &lt;a&gt; 2 astore_1 3 ldc #15 &lt;b&gt; 5 astore_2 6 ldc #16 &lt;ab&gt; 8 astore_3 9 ldc #16 &lt;ab&gt;11 astore 413 getstatic #3 &lt;java/lang/System.out&gt;16 aload_317 aload 419 if_acmpne 26 (&#43;7)22 iconst_123 goto 27 (&#43;4)26 iconst_027 invokevirtual #4 &lt;java/io/PrintStream.println&gt;30 return</code></pre>
  
</div><div class="component-content component"><ul>
<li>IDEA åç¼–è¯‘ç»“æœ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3bdb647aa87eb40ca68e9208ed41eb3c" id="lht3bdb647aa87eb40ca68e9208ed41eb3c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/225.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>è¯¾åç»ƒä¹ </strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//ç»ƒä¹ ï¼š@Testpublic void test5(){    String s1 = &#34;javaEEhadoop&#34;;    String s2 = &#34;javaEE&#34;;    String s3 = s2 + &#34;hadoop&#34;;    System.out.println(s1 == s3);//false    final String s4 = &#34;javaEE&#34;;//s4:å¸¸é‡    String s5 = s4 + &#34;hadoop&#34;;    System.out.println(s1 == s5);//true}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å­—èŠ‚ç æŒ‡ä»¤ï¼š<code>ldc #8 &lt;javaEEhadoop&gt;</code>ï¼ˆå¸¦ final çš„å˜é‡åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šäº†è¯¥å˜é‡çš„å€¼ï¼Œå½“åšå¸¸é‡æ¥å¤„ç†ï¼‰</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #8 &lt;javaEEhadoop&gt; 2 astore_1 3 ldc #6 &lt;javaEE&gt; 5 astore_2 6 new #9 &lt;java/lang/StringBuilder&gt; 9 dup10 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt;13 aload_214 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;17 ldc #7 &lt;hadoop&gt;19 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;22 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt;25 astore_326 getstatic #3 &lt;java/lang/System.out&gt;29 aload_130 aload_331 if_acmpne 38 (&#43;7)34 iconst_135 goto 39 (&#43;4)38 iconst_039 invokevirtual #4 &lt;java/io/PrintStream.println&gt;42 ldc #6 &lt;javaEE&gt;44 astore 446 ldc #8 &lt;javaEEhadoop&gt;48 astore 550 getstatic #3 &lt;java/lang/System.out&gt;53 aload_154 aload 556 if_acmpne 63 (&#43;7)59 iconst_160 goto 64 (&#43;4)63 iconst_064 invokevirtual #4 &lt;java/io/PrintStream.println&gt;67 return</code></pre>
  
</div><blockquote>
<p class="component-content component"><strong>æ‹¼æ¥æ“ä½œä¸ append æ“ä½œçš„æ•ˆç‡å¯¹æ¯”</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/*ä½“ä¼šæ‰§è¡Œæ•ˆç‡ï¼šé€šè¿‡StringBuilderçš„append()çš„æ–¹å¼æ·»åŠ å­—ç¬¦ä¸²çš„æ•ˆç‡è¦è¿œé«˜äºä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼åˆ†æåŸå› ï¼š    â‘  StringBuilderçš„append()çš„æ–¹å¼ï¼š        è‡ªå§‹è‡³ç»ˆä¸­åªåˆ›å»ºè¿‡ä¸€ä¸ªStringBuilderçš„å¯¹è±¡        ä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼šåˆ›å»ºè¿‡å¤šä¸ªStringBuilderå’ŒStringçš„å¯¹è±¡    â‘¡ ä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼š        å†…å­˜ä¸­ç”±äºåˆ›å»ºäº†è¾ƒå¤šçš„StringBuilderå’ŒStringçš„å¯¹è±¡ï¼Œå†…å­˜å ç”¨æ›´å¤§ï¼›        å¦‚æœè¿›è¡ŒGCï¼Œéœ€è¦èŠ±è´¹é¢å¤–çš„æ—¶é—´ã€‚ æ”¹è¿›çš„ç©ºé—´ï¼š    åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœåŸºæœ¬ç¡®å®šè¦å‰å‰ååæ·»åŠ çš„å­—ç¬¦ä¸²é•¿åº¦ä¸é«˜äºæŸä¸ªé™å®šå€¼highLevelçš„æƒ…å†µä¸‹,å»ºè®®ä½¿ç”¨æ„é€ å™¨å®ä¾‹åŒ–ï¼š    StringBuilder s = new StringBuilder(highLevel);//new char[highLevel] */</span><span style="color:#a6e22e">@Testpublic</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test6</span><span style="color:#f92672">(){</span>    <span style="color:#66d9ef">long</span> start <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>    <span style="color:#75715e">// method1(100000);//4014    method2(100000);//7    long end = System.currentTimeMillis();    System.out.println(&#34;èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š&#34; + (end - start));}public void method1(int highLevel){    String src = &#34;&#34;;    for(int i = 0;i &lt; highLevel;i++){        src = src + &#34;a&#34;;//æ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ªStringBuilderã€String    }}public void method2(int highLevel){    //åªéœ€è¦åˆ›å»ºä¸€ä¸ªStringBuilder    StringBuilder src = new StringBuilder();    for (int i = 0; i &lt; highLevel; i++) {        src.append(&#34;a&#34;);    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ol>
<li>
<p class="component-content component">ä½“ä¼šæ‰§è¡Œæ•ˆç‡ï¼šé€šè¿‡StringBuilderçš„append()çš„æ–¹å¼æ·»åŠ å­—ç¬¦ä¸²çš„æ•ˆç‡è¦è¿œé«˜äºä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼</p>
</li>
<li>
<p class="component-content component">åˆ†æåŸå› ï¼š</p>
<div class="component-content component"><ol>
<li>StringBuilderçš„append()çš„æ–¹å¼ï¼š</li>
</ol></div>
<div class="component-content component"><ul>
<li>è‡ªå§‹è‡³ç»ˆä¸­åªåˆ›å»ºè¿‡ä¸€ä¸ªStringBuilderçš„å¯¹è±¡</li>
<li>ä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼šåˆ›å»ºè¿‡å¤šä¸ªStringBuilderå’ŒStringçš„å¯¹è±¡</li>
</ul></div>
<div class="component-content component"><ol>
<li>ä½¿ç”¨Stringçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼š
<div class="component-content component"><ul>
<li>å†…å­˜ä¸­ç”±äºåˆ›å»ºäº†è¾ƒå¤šçš„StringBuilderå’ŒStringçš„å¯¹è±¡ï¼Œå†…å­˜å ç”¨æ›´å¤§ï¼›</li>
<li>å¦‚æœè¿›è¡ŒGCï¼Œéœ€è¦èŠ±è´¹é¢å¤–çš„æ—¶é—´ã€‚</li>
</ul></div>
</li>
</ol></div>
</li>
<li>
<p class="component-content component">æ”¹è¿›çš„ç©ºé—´ï¼š</p>
<div class="component-content component"><ul>
<li>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœåŸºæœ¬ç¡®å®šè¦å‰å‰ååæ·»åŠ çš„å­—ç¬¦ä¸²é•¿åº¦ä¸é«˜äºæŸä¸ªé™å®šå€¼highLevelçš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨æ„é€ å™¨å®ä¾‹åŒ–ï¼š</li>
<li><code>StringBuilder s = new StringBuilder(highLevel); //new char[highLevel]</code></li>
</ul></div>
</li>
</ol></div>
<hr>
<p class="component-content component"><strong>é€šè¿‡å­—èŠ‚ç åˆ†æ</strong></p>
<div class="component-content component"><ul>
<li>method1() æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ï¼š
<div class="component-content component"><ul>
<li>æ¯æ¬¡ for å¾ªç¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡</li>
<li>è°ƒç”¨ StringBuilder çš„ toString() æ–¹æ³•åˆä¼šåˆ›å»ºæ–°çš„ String å¯¹è±¡</li>
</ul></div>
</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 ldc #23 2 astore_2 3 iconst_0 4 istore_3 5 iload_3 6 iload_1 7 if_icmpge 36 (&#43;29)10 new #9 &lt;java/lang/StringBuilder&gt;13 dup14 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt;17 aload_218 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;21 ldc #14 &lt;a&gt;23 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;26 invokevirtual #12 &lt;java/lang/StringBuilder.toString&gt;29 astore_230 iinc 3 by 133 goto 5 (-28)36 return</code></pre>
  
</div><div class="component-content component"><ul>
<li>method2() æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤ï¼š</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 new #9 &lt;java/lang/StringBuilder&gt; 3 dup 4 invokespecial #10 &lt;java/lang/StringBuilder.&lt;init&gt;&gt; 7 astore_2 8 iconst_0 9 istore_310 iload_311 iload_112 if_icmpge 28 (&#43;16)15 aload_216 ldc #14 &lt;a&gt;18 invokevirtual #11 &lt;java/lang/StringBuilder.append&gt;21 pop22 iinc 3 by 125 goto 10 (-15)28 return</code></pre>
  
</div><hr>
<p class="component-content component"><strong>å…³äº StringBuilder æ„é€ å™¨</strong></p>
<div class="component-content component"><ul>
<li>StringBuilder æ„é€ å™¨ï¼šå¯ä¼ å…¥ä¸€ä¸ª int ç±»å‹çš„å˜é‡ï¼Œç”¨äºåˆå§‹åŒ–å†…éƒ¨çš„ char[] æ•°ç»„</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#a6e22e">StringBuilder</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>	<span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>capacity<span style="color:#f92672">);}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>AbstractStringBuilderï¼ˆStringBuilder çš„çˆ¶ç±»ï¼‰çš„æ„é€ å™¨</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>AbstractStringBuilder<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>    value <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">[</span>capacity<span style="color:#f92672">];}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="5intern-çš„ä½¿ç”¨" class="pagebody-header">
    5ã€intern() çš„ä½¿ç”¨
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="51intern-æ–¹æ³•çš„è¯´æ˜" class="pagebody-header">
    5.1ã€intern() æ–¹æ³•çš„è¯´æ˜
  </h3>
</div><blockquote>
<p class="component-content component"><strong>intern() æ–¹æ³•çš„è¯´æ˜</strong></p>
</blockquote>
<p class="component-content component"><strong>å…ˆæ¥ç‚¹é€¼æ ¼ï¼Œçœ‹çœ‹å®˜æ–¹æ–‡æ¡£</strong></p>
<p class="component-content component">When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals(Object) method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.</p>
<p class="component-content component">It follows that for any two strings s and t, s.intern() == t.intern() is true if and only if s.equals(t) is true.</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">native</span> String <span style="color:#a6e22e">intern</span><span style="color:#f92672">();</span></span></span></code></pre></div></div>
  
</div><hr>
<p class="component-content component"><strong>å…³äº intern() æ–¹æ³•çš„è¯´æ˜</strong></p>
<div class="component-content component"><ol>
<li>
<p class="component-content component">internæ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯åº•å±‚Cçš„æ–¹æ³•</p>
</li>
<li>
<p class="component-content component">å­—ç¬¦ä¸²æ± æœ€åˆæ˜¯ç©ºçš„ï¼Œç”±Stringç±»ç§æœ‰åœ°ç»´æŠ¤ã€‚åœ¨è°ƒç”¨internæ–¹æ³•æ—¶ï¼Œå¦‚æœæ± ä¸­å·²ç»åŒ…å«äº†ç”±equals(object)æ–¹æ³•ç¡®å®šçš„ä¸è¯¥å­—ç¬¦ä¸²å¯¹è±¡ç›¸ç­‰çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›æ± ä¸­çš„å­—ç¬¦ä¸²ã€‚å¦åˆ™ï¼Œè¯¥å­—ç¬¦ä¸²å¯¹è±¡å°†è¢«æ·»åŠ åˆ°æ± ä¸­ï¼Œå¹¶è¿”å›å¯¹è¯¥å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨ã€‚</p>
</li>
<li>
<p class="component-content component">å¦‚æœä¸æ˜¯ç”¨åŒå¼•å·å£°æ˜çš„Stringå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨Stringæä¾›çš„internæ–¹æ³•ï¼šinternæ–¹æ³•ä¼šä»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥è¯¢å½“å‰å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨å°±ä¼šå°†å½“å‰å­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± ä¸­ã€‚æ¯”å¦‚ï¼š</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String myInfo <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> string<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;I love atguigu&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">intern</span><span style="color:#f92672">();</span></span></span></code></pre></div></div>
  
</div></li>
<li>
<p class="component-content component">ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ä»»æ„å­—ç¬¦ä¸²ä¸Šè°ƒç”¨String.internæ–¹æ³•ï¼Œé‚£ä¹ˆå…¶è¿”å›ç»“æœæ‰€æŒ‡å‘çš„é‚£ä¸ªç±»å®ä¾‹ï¼Œå¿…é¡»å’Œç›´æ¥ä»¥å¸¸é‡å½¢å¼å‡ºç°çš„å­—ç¬¦ä¸²å®ä¾‹å®Œå…¨ç›¸åŒã€‚å› æ­¤ï¼Œä¸‹åˆ—è¡¨è¾¾å¼çš„å€¼å¿…å®šæ˜¯true</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;c&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">intern</span><span style="color:#f92672">()==</span><span style="color:#e6db74">&#34;abc&#34;</span></span></span></code></pre></div></div>
  
</div></li>
<li>
<p class="component-content component">é€šä¿—ç‚¹è®²ï¼ŒInterned Stringå°±æ˜¯ç¡®ä¿å­—ç¬¦ä¸²åœ¨å†…å­˜é‡Œåªæœ‰ä¸€ä»½æ‹·è´ï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦å†…å­˜ç©ºé—´ï¼ŒåŠ å¿«å­—ç¬¦ä¸²æ“ä½œä»»åŠ¡çš„æ‰§è¡Œé€Ÿåº¦ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå€¼ä¼šè¢«å­˜æ”¾åœ¨å­—ç¬¦ä¸²å†…éƒ¨æ± ï¼ˆString Intern Poolï¼‰</p>
</li>
</ol></div>

<div class="component-content pagebody component">
  <h3 id="52new-string-çš„è¯´æ˜" class="pagebody-header">
    5.2ã€new String() çš„è¯´æ˜
  </h3>
</div><blockquote>
<p class="component-content component"><strong>new String(â€œabâ€)ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * é¢˜ç›®ï¼š * new String(&#34;ab&#34;)ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿçœ‹å­—èŠ‚ç ï¼Œå°±çŸ¥é“æ˜¯ä¸¤ä¸ªã€‚ *     ä¸€ä¸ªå¯¹è±¡æ˜¯ï¼šnewå…³é”®å­—åœ¨å †ç©ºé—´åˆ›å»ºçš„ *     å¦ä¸€ä¸ªå¯¹è±¡æ˜¯ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å¯¹è±¡&#34;ab&#34;ã€‚ å­—èŠ‚ç æŒ‡ä»¤ï¼šldc * * @author shkstart  shkstart@126.com * @create 2020  20:38 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringNewTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        String str <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ab&#34;</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å­—èŠ‚ç æŒ‡ä»¤</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 new #2 &lt;java/lang/String&gt; 3 dup 4 ldc #3 &lt;ab&gt; 6 invokespecial #4 &lt;java/lang/String.&lt;init&gt;&gt; 9 astore_110 return</code></pre>
  
</div><div class="component-content component"><ul>
<li><code>0 new #2 &lt;java/lang/String&gt;</code>ï¼šåœ¨å †ä¸­åˆ›å»ºäº†ä¸€ä¸ª String å¯¹è±¡</li>
<li><code>4 ldc #3 &lt;ab&gt;</code> ï¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ”¾å…¥ â€œabâ€ï¼ˆå¦‚æœä¹‹å‰å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰ â€œabâ€ çš„è¯ï¼‰</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3b01a6eb6689968325f5264a9026c693" id="lht3b01a6eb6689968325f5264a9026c693">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/226.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>new String(â€œaâ€) + new String(â€œbâ€) ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * æ€è€ƒï¼š * new String(&#34;a&#34;) + new String(&#34;b&#34;)å‘¢ï¼Ÿ *  å¯¹è±¡1ï¼šnew StringBuilder() *  å¯¹è±¡2ï¼š new String(&#34;a&#34;) *  å¯¹è±¡3ï¼š å¸¸é‡æ± ä¸­çš„&#34;a&#34; *  å¯¹è±¡4ï¼š new String(&#34;b&#34;) *  å¯¹è±¡5ï¼š å¸¸é‡æ± ä¸­çš„&#34;b&#34; * *  æ·±å…¥å‰–æï¼š StringBuilderçš„toString(): *      å¯¹è±¡6 ï¼šnew String(&#34;ab&#34;) *      å¼ºè°ƒä¸€ä¸‹ï¼ŒtoString()çš„è°ƒç”¨ï¼Œåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ²¡æœ‰ç”Ÿæˆ&#34;ab&#34; * * @author shkstart  shkstart@126.com * @create 2020  20:38 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringNewTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        String str <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">);</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å­—èŠ‚ç æŒ‡ä»¤</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""> 0 new #2 &lt;java/lang/StringBuilder&gt; 3 dup 4 invokespecial #3 &lt;java/lang/StringBuilder.&lt;init&gt;&gt; 7 new #4 &lt;java/lang/String&gt;10 dup11 ldc #5 &lt;a&gt;13 invokespecial #6 &lt;java/lang/String.&lt;init&gt;&gt;16 invokevirtual #7 &lt;java/lang/StringBuilder.append&gt;19 new #4 &lt;java/lang/String&gt;22 dup23 ldc #8 &lt;b&gt;25 invokespecial #6 &lt;java/lang/String.&lt;init&gt;&gt;28 invokevirtual #7 &lt;java/lang/StringBuilder.append&gt;31 invokevirtual #9 &lt;java/lang/StringBuilder.toString&gt;34 astore_135 return</code></pre>
  
</div><div class="component-content component"><ul>
<li>å­—èŠ‚ç æŒ‡ä»¤åˆ†æï¼š
<div class="component-content component"><ol>
<li><code>0 new #2 &lt;java/lang/StringBuilder&gt;</code> ï¼šæ‹¼æ¥å­—ç¬¦ä¸²ä¼šåˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡</li>
<li><code>7 new #4 &lt;java/lang/String&gt;</code> ï¼šåˆ›å»º String å¯¹è±¡ï¼Œå¯¹åº”äº new String(â€œaâ€)</li>
<li><code>11 ldc #5 &lt;a&gt;</code> ï¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ”¾å…¥ â€œaâ€ï¼ˆå¦‚æœä¹‹å‰å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰ â€œaâ€ çš„è¯ï¼‰</li>
<li><code>19 new #4 &lt;java/lang/String&gt;</code> ï¼šåˆ›å»º String å¯¹è±¡ï¼Œå¯¹åº”äº new String(â€œbâ€)</li>
<li><code>23 ldc #8 &lt;b&gt;</code> ï¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ”¾å…¥ â€œbâ€ï¼ˆå¦‚æœä¹‹å‰å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æ²¡æœ‰ â€œbâ€ çš„è¯ï¼‰</li>
<li><code>31 invokevirtual #9 &lt;java/lang/StringBuilder.toString&gt;</code> ï¼šè°ƒç”¨ StringBuilder çš„ toString() æ–¹æ³•ï¼Œä¼šç”Ÿæˆä¸€ä¸ª String å¯¹è±¡</li>
</ol></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f3a803a43a44e1e748737c0e43019e0f" id="lhtf3a803a43a44e1e748737c0e43019e0f">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/227.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>æ·±å…¥å‰–æ StringBuilder çš„toString() æ–¹æ³•</strong></p>
<div class="component-content component"><ul>
<li>toString() æ–¹æ³•</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Overridepublic</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>    <span style="color:#75715e">// Create a copy, don&#39;t share the array    return new String(value, 0, count);}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>value æ˜¯ä¸ª char[] æ•°ç»„</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> value<span style="color:#f92672">;</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="53æœ‰ç‚¹éš¾çš„é¢è¯•é¢˜" class="pagebody-header">
    5.3ã€æœ‰ç‚¹éš¾çš„é¢è¯•é¢˜
  </h3>
</div><blockquote>
<p class="component-content component"><strong>æœ‰ç‚¹éš¾çš„é¢è¯•é¢˜</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * å¦‚ä½•ä¿è¯å˜é‡sæŒ‡å‘çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„æ•°æ®å‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š * æ–¹å¼ä¸€ï¼š String s = &#34;shkstart&#34;;//å­—é¢é‡å®šä¹‰çš„æ–¹å¼ * æ–¹å¼äºŒï¼š è°ƒç”¨intern() *         String s = new String(&#34;shkstart&#34;).intern(); *         String s = new StringBuilder(&#34;shkstart&#34;).toString().intern(); * * @author shkstart  shkstart@126.com * @create 2020  18:49 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringIntern</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        String s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;1&#34;</span><span style="color:#f92672">);</span>        s<span style="color:#f92672">.</span><span style="color:#a6e22e">intern</span><span style="color:#f92672">();</span><span style="color:#75715e">//è¿™æ–¹æ³•å…¶å®æ²¡å•¥å±Œç”¨ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä¹‹å‰ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨&#34;1&#34;        String s2 = &#34;1&#34;;        /*            jdk6ï¼šfalse   jdk7/8ï¼šfalse            å› ä¸º s æŒ‡å‘å †ç©ºé—´ä¸­çš„ &#34;1&#34; ï¼Œs2 æŒ‡å‘å­—ç¬¦åˆ›å¸¸é‡æ± ä¸­çš„ &#34;1&#34;         */        System.out.println(s == s2);        // æ‰§è¡Œå®Œä¸‹ä¸€è¡Œä»£ç ä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ˜¯å¦å­˜åœ¨&#34;11&#34;å‘¢ï¼Ÿç­”æ¡ˆï¼šä¸å­˜åœ¨ï¼ï¼        String s3 = new String(&#34;1&#34;) + new String(&#34;1&#34;);//s3å˜é‡è®°å½•çš„åœ°å€ä¸ºï¼šnew String(&#34;11&#34;)        /*            å¦‚ä½•ç†è§£ï¼šjdk6:åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡&#34;11&#34;,ä¹Ÿå°±æœ‰æ–°çš„åœ°å€ã€‚                     jdk7:æ­¤æ—¶å¸¸é‡ä¸­å¹¶æ²¡æœ‰åˆ›å»º&#34;11&#34;,è€Œæ˜¯åœ¨å¸¸é‡æ± ä¸­è®°å½•äº†æŒ‡å‘å †ç©ºé—´ä¸­new String(&#34;11&#34;)çš„åœ°å€ï¼ˆèŠ‚çœç©ºé—´ï¼‰         */        s3.intern(); // åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç”Ÿæˆ&#34;11&#34;ã€‚        String s4 = &#34;11&#34;;//s4å˜é‡è®°å½•çš„åœ°å€ï¼šä½¿ç”¨çš„æ˜¯ä¸Šä¸€è¡Œä»£ç ä»£ç æ‰§è¡Œæ—¶ï¼Œåœ¨å¸¸é‡æ± ä¸­ç”Ÿæˆçš„&#34;11&#34;çš„åœ°å€        // jdk6ï¼šfalse  jdk7/8ï¼štrue        System.out.println(s3 == s4);    }}
</span></span></span></code></pre></div></div>
  
</div><p class="component-content component"><strong>å†…å­˜åˆ†æ</strong></p>
<div class="component-content component"><ul>
<li>JDK6 ï¼šæ­£å¸¸çœ¼å…‰åˆ¤æ–­å³å¯
<div class="component-content component"><ul>
<li>new String() å³åœ¨å †ä¸­</li>
<li>str.intern() åˆ™æŠŠå­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± ä¸­</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b7dd14b9e63e8ba66354b5d1c75b168c" id="lhtb7dd14b9e63e8ba66354b5d1c75b168c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/228.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>JDK7/8 ï¼šè¿™å°±æœ‰ç‚¹ä¸ä¸€æ ·äº†
<div class="component-content component"><ul>
<li>new String() å³åœ¨å †ä¸­</li>
<li>str.intern() åˆ™æŠŠå­—ç¬¦ä¸²æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œå‡ºäºèŠ‚çœç©ºé—´çš„ç›®çš„ï¼Œå¦‚æœ str ä¸å­˜åœ¨äºå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œåˆ™å°† str åœ¨å †ä¸­çš„å¼•ç”¨å­˜å‚¨åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ²¡é”™ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å­˜çš„æ˜¯ str åœ¨å †ä¸­çš„å¼•ç”¨ï¼Œæ‰€ä»¥ s3 == s4 ä¸º true</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-64ebc93d051c801895561894cc778d19" id="lht64ebc93d051c801895561894cc778d19">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/229.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component"><strong>é¢è¯•é¢˜çš„æ‹“å±•</strong></p>
</blockquote>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * StringIntern.javaä¸­ç»ƒä¹ çš„æ‹“å±•ï¼š * * @author shkstart  shkstart@126.com * @create 2020  22:10 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringIntern1</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">//æ‰§è¡Œå®Œä¸‹ä¸€è¡Œä»£ç ä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ˜¯å¦å­˜åœ¨&#34;11&#34;å‘¢ï¼Ÿç­”æ¡ˆï¼šä¸å­˜åœ¨ï¼ï¼        String s3 = new String(&#34;1&#34;) + new String(&#34;1&#34;);//new String(&#34;11&#34;)        //åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç”Ÿæˆå¯¹è±¡&#34;11&#34;        String s4 = &#34;11&#34;;        String s5 = s3.intern();        // s3 æ˜¯å †ä¸­çš„ &#34;ab&#34; ï¼Œs4 æ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„ &#34;ab&#34;        System.out.println(s3 == s4);//false        // s5 æ˜¯ä»å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å–å›æ¥çš„å¼•ç”¨ï¼Œå½“ç„¶å’Œ s4 ç›¸ç­‰        System.out.println(s5 == s4);//true    }}
</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="54intern-æ–¹æ³•çš„æ€»ç»“" class="pagebody-header">
    5.4ã€intern() æ–¹æ³•çš„æ€»ç»“
  </h3>
</div><blockquote>
<p class="component-content component"><strong>å…³äº intern() çš„æ€»ç»“</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>JDK1.6ä¸­ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ã€‚
<div class="component-content component"><ol>
<li>å¦‚æœä¸²æ± ä¸­æœ‰ï¼Œåˆ™å¹¶ä¸ä¼šæ”¾å…¥ã€‚è¿”å›å·²æœ‰çš„ä¸²æ± ä¸­çš„å¯¹è±¡çš„åœ°å€</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œä¼š<strong>æŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½</strong>ï¼Œæ”¾å…¥ä¸²æ± ï¼Œå¹¶è¿”å›ä¸²æ± ä¸­çš„å¯¹è±¡åœ°å€</li>
</ol></div>
</li>
<li>JDK1.7èµ·ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ã€‚
<div class="component-content component"><ul>
<li>å¦‚æœä¸²æ± ä¸­æœ‰ï¼Œåˆ™å¹¶ä¸ä¼šæ”¾å…¥ã€‚è¿”å›å·²æœ‰çš„ä¸²æ± ä¸­çš„å¯¹è±¡çš„åœ°å€</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼š<strong>æŠŠå¯¹è±¡çš„å¼•ç”¨åœ°å€å¤åˆ¶ä¸€ä»½</strong>ï¼Œæ”¾å…¥ä¸²æ± ï¼Œå¹¶è¿”å›ä¸²æ± ä¸­çš„å¼•ç”¨åœ°å€</li>
</ul></div>
</li>
</ol></div>

<div class="component-content pagebody component">
  <h3 id="55intern-æ–¹æ³•çš„ç»ƒä¹ " class="pagebody-header">
    5.5ã€intern() æ–¹æ³•çš„ç»ƒä¹ 
  </h3>
</div><blockquote>
<p class="component-content component"><strong>intern() æ–¹æ³•çš„è¯¾åç»ƒä¹ </strong></p>
</blockquote>
<p class="component-content component"><strong>ç»ƒä¹  1</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * @author shkstart  shkstart@126.com * @create 2020  20:17 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringExer1</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">//åœ¨ä¸‹ä¸€è¡Œä»£ç æ‰§è¡Œå®Œä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰&#34;ab&#34;        String s = new String(&#34;a&#34;) + new String(&#34;b&#34;);//new String(&#34;ab&#34;)        /*            jdk6ä¸­ï¼šåœ¨ä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²&#34;ab&#34;            jdk8ä¸­ï¼šä¸²æ± ä¸­æ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²&#34;ab&#34;,è€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼ŒæŒ‡å‘new String(&#34;ab&#34;)ï¼Œå°†æ­¤å¼•ç”¨è¿”å›         */        String s2 = s.intern();        System.out.println(s2 == &#34;ab&#34;);//jdk6:true  jdk8:true        System.out.println(s == &#34;ab&#34;);//jdk6:false  jdk8:true    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>JDK 6 ä¸­ï¼šåœ¨ä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²&quot;ab&rdquo;</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-7eeed754c022a680020f45b99bf7bb6c" id="lht7eeed754c022a680020f45b99bf7bb6c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/230.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>JDK 7/8 ä¸­ï¼šä¸²æ± ä¸­æ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²&quot;ab&quot;ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼ŒæŒ‡å‘new String(â€œabâ€)ï¼Œå°†æ­¤å¼•ç”¨è¿”å›</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-ff75f202740f6d61205188e8f1724043" id="lhtff75f202740f6d61205188e8f1724043">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/231.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>ç»ƒä¹  2</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * @author shkstart  shkstart@126.com * @create 2020  20:17 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringExer1</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#75715e">// åœ¨è¿™å„¿åŠ ä¸€å¥        String x = &#34;ab&#34;;                //åœ¨ä¸‹ä¸€è¡Œä»£ç æ‰§è¡Œå®Œä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰&#34;ab&#34;        String s = new String(&#34;a&#34;) + new String(&#34;b&#34;);//new String(&#34;ab&#34;)        /*            jdk6ä¸­ï¼šåœ¨ä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²&#34;ab&#34;            jdk8ä¸­ï¼šä¸²æ± ä¸­æ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²&#34;ab&#34;,è€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼ŒæŒ‡å‘new String(&#34;ab&#34;)ï¼Œå°†æ­¤å¼•ç”¨è¿”å›         */        String s2 = s.intern();        System.out.println(s2 == &#34;ab&#34;);//jdk6:true  jdk8:true        System.out.println(s == &#34;ab&#34;);//jdk6:false  jdk8:false    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>å†…å­˜åˆ†æ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-07c6ba212335d772b3c5b8ac4bc7eafc" id="lht07c6ba212335d772b3c5b8ac4bc7eafc">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/232.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>ç»ƒä¹  3</strong></p>
<div class="component-content component"><ul>
<li>ä»£ç  1</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * * @author shkstart  shkstart@126.com * @create 2020  20:26 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringExer2</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        String s1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ab&#34;</span><span style="color:#f92672">);</span><span style="color:#75715e">//æ‰§è¡Œå®Œä»¥åï¼Œä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¼šç”Ÿæˆ&#34;ab&#34;        s1.intern();        String s2 = &#34;ab&#34;;        System.out.println(s1 == s2); // false    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ä»£ç  2</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * * @author shkstart  shkstart@126.com * @create 2020  20:26 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringExer2</span> <span style="color:#f92672">{</span>    <span style="color:#75715e">// å¯¹è±¡å†…å­˜åœ°å€å¯ä»¥ä½¿ç”¨System.identityHashCode(object)æ–¹æ³•è·å–    public static void main(String[] args) {        String s1 = new String(&#34;a&#34;) + new String(&#34;b&#34;);//æ‰§è¡Œå®Œä»¥åï¼Œä¸ä¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ä¼šç”Ÿæˆ&#34;ab&#34;        System.out.println(System.identityHashCode(s1));        s1.intern();        System.out.println(System.identityHashCode(s1));        String s2 = &#34;ab&#34;;        System.out.println(System.identityHashCode(s2));        System.out.println(s1 == s2); // true    }}/* ç¨‹åºè¿è¡Œç»“æœ    21685669    21685669    21685669    true*/
</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="56intern-æ–¹æ³•æ•ˆç‡æµ‹è¯•" class="pagebody-header">
    5.6ã€intern() æ–¹æ³•æ•ˆç‡æµ‹è¯•
  </h3>
</div><blockquote>
<p class="component-content component"><strong>intern() çš„æ•ˆç‡æµ‹è¯•</strong></p>
</blockquote>
<div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * ä½¿ç”¨intern()æµ‹è¯•æ‰§è¡Œæ•ˆç‡ï¼šç©ºé—´ä½¿ç”¨ä¸Š * ç»“è®ºï¼šå¯¹äºç¨‹åºä¸­å¤§é‡å­˜åœ¨å­˜åœ¨çš„å­—ç¬¦ä¸²ï¼Œå°¤å…¶å…¶ä¸­å­˜åœ¨å¾ˆå¤šé‡å¤å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨intern()å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ * * @author shkstart  shkstart@126.com * @create 2020  21:17 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringIntern2</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MAX_COUNT <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">10000</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String<span style="color:#f92672">[]</span> arr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">[</span>MAX_COUNT<span style="color:#f92672">];</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        Integer<span style="color:#f92672">[]</span> data <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Integer<span style="color:#f92672">[]{</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">2</span><span style="color:#f92672">,</span><span style="color:#ae81ff">3</span><span style="color:#f92672">,</span><span style="color:#ae81ff">4</span><span style="color:#f92672">,</span><span style="color:#ae81ff">5</span><span style="color:#f92672">,</span><span style="color:#ae81ff">6</span><span style="color:#f92672">,</span><span style="color:#ae81ff">7</span><span style="color:#f92672">,</span><span style="color:#ae81ff">8</span><span style="color:#f92672">,</span><span style="color:#ae81ff">9</span><span style="color:#f92672">,</span><span style="color:#ae81ff">10</span><span style="color:#f92672">};</span>        <span style="color:#66d9ef">long</span> start <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> MAX_COUNT<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>            <span style="color:#75715e">// arr[i] = new String(String.valueOf(data[i % data.length]));            arr[i] = new String(String.valueOf(data[i % data.length])).intern();        }        long end = System.currentTimeMillis();        System.out.println(&#34;èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š&#34; + (end - start));        try {            Thread.sleep(1000000);        } catch (InterruptedException e) {            e.printStackTrace();        }        System.gc();    }}
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ç›´æ¥ new String ï¼šç”±äºæ¯ä¸ª String å¯¹è±¡éƒ½æ˜¯ new å‡ºæ¥çš„ï¼Œæ‰€ä»¥ç¨‹åºéœ€è¦ç»´æŠ¤å¤§é‡å­˜æ”¾åœ¨å †ç©ºé—´ä¸­çš„ String å®ä¾‹ï¼Œç¨‹åºå†…å­˜å ç”¨ä¹Ÿä¼šå˜é«˜</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-ff12f175818bfad8282518e0007d4793" id="lhtff12f175818bfad8282518e0007d4793">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/233.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>ä½¿ç”¨ intern() æ–¹æ³•ï¼šç”±äºæ•°ç»„ä¸­å­—ç¬¦ä¸²çš„å¼•ç”¨éƒ½æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç¨‹åºéœ€è¦ç»´æŠ¤çš„ String å¯¹è±¡æ›´å°‘ï¼Œå†…å­˜å ç”¨ä¹Ÿæ›´ä½</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-c82b1e1b763dd2b36f22f8134ed7244b" id="lhtc82b1e1b763dd2b36f22f8134ed7244b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/234.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>ç»“è®º</strong>ï¼š</p>
<div class="component-content component"><ol>
<li>å¯¹äºç¨‹åºä¸­å¤§é‡ä½¿ç”¨å­˜åœ¨çš„å­—ç¬¦ä¸²æ—¶ï¼Œå°¤å…¶å­˜åœ¨å¾ˆå¤šå·²ç»é‡å¤çš„å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨intern()æ–¹æ³•èƒ½å¤ŸèŠ‚çœå†…å­˜ç©ºé—´ã€‚</li>
<li>å¤§çš„ç½‘ç«™å¹³å°ï¼Œéœ€è¦å†…å­˜ä¸­å­˜å‚¨å¤§é‡çš„å­—ç¬¦ä¸²ã€‚æ¯”å¦‚ç¤¾äº¤ç½‘ç«™ï¼Œå¾ˆå¤šäººéƒ½å­˜å‚¨ï¼šåŒ—äº¬å¸‚ã€æµ·æ·€åŒºç­‰ä¿¡æ¯ã€‚è¿™æ—¶å€™å¦‚æœå­—ç¬¦ä¸²éƒ½è°ƒç”¨intern() æ–¹æ³•ï¼Œå°±ä¼šå¾ˆæ˜æ˜¾é™ä½å†…å­˜çš„å¤§å°ã€‚</li>
</ol></div>

<div class="component-content pagebody component">
  <h2 id="6stringtable-çš„åƒåœ¾å›æ”¶" class="pagebody-header">
    6ã€StringTable çš„åƒåœ¾å›æ”¶
  </h2>
</div><div class="component-content component"><ul>
<li>ä»£ç </li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/** * Stringçš„åƒåœ¾å›æ”¶: * -Xms15m -Xmx15m -XX:+PrintStringTableStatistics -XX:+PrintGCDetails * * @author shkstart  shkstart@126.com * @create 2020  21:27 */</span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StringGCTest</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100000</span><span style="color:#f92672">;</span> j<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>            String<span style="color:#f92672">.</span><span style="color:#a6e22e">valueOf</span><span style="color:#f92672">(</span>j<span style="color:#f92672">).</span><span style="color:#a6e22e">intern</span><span style="color:#f92672">();</span>        <span style="color:#f92672">}</span>    <span style="color:#f92672">}}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>JVM å‚æ•°</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">-Xms15m -Xmx15m -XX:&#43;PrintStringTableStatistics -XX:&#43;PrintGCDetails</code></pre>
  
</div><div class="component-content component"><ul>
<li>ç¨‹åºæ—¥å¿—ï¼š
<div class="component-content component"><ul>
<li>åœ¨ PSYoungGen åŒºå‘ç”Ÿäº†åƒåœ¾å›æ”¶</li>
<li>Number of entries å’Œ Number of literals æ˜æ˜¾æ²¡æœ‰ 100000</li>
<li>ä»¥ä¸Šä¸¤ç‚¹å‡è¯´æ˜ StringTable åŒºå‘ç”Ÿäº†åƒåœ¾å›æ”¶</li>
</ul></div>
</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">&#34;C:\Program Files\Java\jdk1.8.0_144\bin\java&#34; -Xms15m -Xmx15m -XX:&#43;PrintStringTableStatistics -XX:&#43;PrintGCDetails &#34;-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2017.3.1\lib\idea_rt.jar=11487:C:\Program Files\JetBrains\IntelliJ IDEA 2017.3.1\bin&#34; -Dfile.encoding=UTF-8 -classpath &#34;C:\Program Files\Java\jdk1.8.0_144\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\cldrdata.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\jfxrt.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\nashorn.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\sunpkcs11.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\ext\zipfs.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jce.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jfxswt.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\resources.jar;C:\Program Files\Java\jdk1.8.0_144\jre\lib\rt.jar;C:\Users\Heygo\Desktop\JVMDemo\out\production\chapter13;D:\JavaTools\apache-maven-3.3.9\repository\junit\junit\4.12\junit-4.12.jar;D:\JavaTools\apache-maven-3.3.9\repository\org\hamcrest\hamcrest-core\1.3\hamcrest-core-1.3.jar&#34; com.atguigu.java3.StringGCTest[GC (Allocation Failure) [PSYoungGen: 4096K-&gt;488K(4608K)] 4096K-&gt;716K(15872K), 0.0024275 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] Heap PSYoungGen      total 4608K, used 3883K [0x00000000ffb00000, 0x0000000100000000, 0x0000000100000000)  eden space 4096K, 82% used [0x00000000ffb00000,0x00000000ffe50fb0,0x00000000fff00000)  from space 512K, 95% used [0x00000000fff00000,0x00000000fff7a020,0x00000000fff80000)  to   space 512K, 0% used [0x00000000fff80000,0x00000000fff80000,0x0000000100000000) ParOldGen       total 11264K, used 228K [0x00000000ff000000, 0x00000000ffb00000, 0x00000000ffb00000)  object space 11264K, 2% used [0x00000000ff000000,0x00000000ff039010,0x00000000ffb00000) Metaspace       used 3472K, capacity 4496K, committed 4864K, reserved 1056768K  class space    used 381K, capacity 388K, committed 512K, reserved 1048576KSymbolTable statistics:Number of buckets       :     20011 =    160088 bytes, avg   8.000Number of entries       :     14158 =    339792 bytes, avg  24.000Number of literals      :     14158 =    603200 bytes, avg  42.605Total footprint         :           =   1103080 bytesAverage bucket size     :     0.708Variance of bucket size :     0.711Std. dev. of bucket size:     0.843Maximum bucket size     :         6StringTable statistics:Number of buckets       :     60013 =    480104 bytes, avg   8.000Number of entries       :     62943 =   1510632 bytes, avg  24.000Number of literals      :     62943 =   3584040 bytes, avg  56.941Total footprint         :           =   5574776 bytesAverage bucket size     :     1.049Variance of bucket size :     0.824Std. dev. of bucket size:     0.908Maximum bucket size     :         5Process finished with exit code 0</code></pre>
  
</div><hr>
<p class="component-content component"><strong>String.valueOf() æ–¹æ³•æºç </strong></p>
<div class="component-content component"><ul>
<li>String ç±»çš„ valueOf() æ–¹æ³•</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">valueOf</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">return</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>Integer.toString() æ–¹æ³•ä¸­æ‰§è¡Œäº† new String() ï¼Œå³åœ¨å †ä¸­åˆ›å»ºäº†ä¸€ä¸ª String å¯¹è±¡</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">toString</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">==</span> Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">MIN_VALUE</span><span style="color:#f92672">)</span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;-2147483648&#34;</span><span style="color:#f92672">;</span>    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">?</span> stringSize<span style="color:#f92672">(-</span>i<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> stringSize<span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>    <span style="color:#66d9ef">char</span><span style="color:#f92672">[]</span> buf <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">[</span>size<span style="color:#f92672">];</span>    getChars<span style="color:#f92672">(</span>i<span style="color:#f92672">,</span> size<span style="color:#f92672">,</span> buf<span style="color:#f92672">);</span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>buf<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">);}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="7g1-ä¸­çš„-string-å»é‡æ“ä½œ" class="pagebody-header">
    7ã€G1 ä¸­çš„ String å»é‡æ“ä½œ
  </h2>
</div><blockquote>
<p class="component-content component"><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
</blockquote>
<p class="component-content component"><a href="http://openjdk.java.net/jeps/192">http://openjdk.java.net/jeps/192</a></p>
<blockquote>
<p class="component-content component"><strong>String å»é‡æ“ä½œçš„èƒŒæ™¯</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>èƒŒæ™¯ï¼šå¯¹è®¸å¤šJavaåº”ç”¨ï¼ˆæœ‰å¤§çš„ä¹Ÿæœ‰å°çš„ï¼‰åšçš„æµ‹è¯•å¾—å‡ºä»¥ä¸‹ç»“æœï¼š
<div class="component-content component"><ul>
<li>å †å­˜æ´»æ•°æ®é›†åˆé‡Œé¢Stringå¯¹è±¡å äº†25%</li>
<li>å †å­˜æ´»æ•°æ®é›†åˆé‡Œé¢é‡å¤çš„Stringå¯¹è±¡æœ‰13.5%</li>
<li>Stringå¯¹è±¡çš„å¹³å‡é•¿åº¦æ˜¯45</li>
</ul></div>
</li>
<li>è®¸å¤šå¤§è§„æ¨¡çš„Javaåº”ç”¨çš„ç“¶é¢ˆåœ¨äºå†…å­˜ï¼Œæµ‹è¯•è¡¨æ˜ï¼Œåœ¨è¿™äº›ç±»å‹çš„åº”ç”¨é‡Œé¢ï¼ŒJavaå †ä¸­å­˜æ´»çš„æ•°æ®é›†åˆå·®ä¸å¤š25%æ˜¯Stringå¯¹è±¡ã€‚æ›´è¿›ä¸€æ­¥ï¼Œè¿™é‡Œé¢å·®ä¸å¤šä¸€åŠStringå¯¹è±¡æ˜¯é‡å¤çš„ï¼Œé‡å¤çš„æ„æ€æ˜¯è¯´ï¼š</li>
<li>str1.equals(str2)= trueã€‚å †ä¸Šå­˜åœ¨é‡å¤çš„Stringå¯¹è±¡å¿…ç„¶æ˜¯ä¸€ç§å†…å­˜çš„æµªè´¹ã€‚è¿™ä¸ªé¡¹ç›®å°†åœ¨G1åƒåœ¾æ”¶é›†å™¨ä¸­å®ç°è‡ªåŠ¨æŒç»­å¯¹é‡å¤çš„Stringå¯¹è±¡è¿›è¡Œå»é‡ï¼Œè¿™æ ·å°±èƒ½é¿å…æµªè´¹å†…å­˜ã€‚</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>String å»é‡çš„çš„å…·ä½“å®ç°</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œçš„æ—¶å€™ï¼Œä¼šè®¿é—®å †ä¸Šå­˜æ´»çš„å¯¹è±¡ã€‚å¯¹æ¯ä¸€ä¸ªè®¿é—®çš„å¯¹è±¡éƒ½ä¼šæ£€æŸ¥æ˜¯å¦æ˜¯å€™é€‰çš„è¦å»é‡çš„Stringå¯¹è±¡ã€‚</li>
<li>å¦‚æœæ˜¯ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨æ’å…¥åˆ°é˜Ÿåˆ—ä¸­ç­‰å¾…åç»­çš„å¤„ç†ã€‚ä¸€ä¸ªå»é‡çš„çº¿ç¨‹åœ¨åå°è¿è¡Œï¼Œå¤„ç†è¿™ä¸ªé˜Ÿåˆ—ã€‚å¤„ç†é˜Ÿåˆ—çš„ä¸€ä¸ªå…ƒç´ æ„å‘³ç€ä»é˜Ÿåˆ—åˆ é™¤è¿™ä¸ªå…ƒç´ ï¼Œç„¶åå°è¯•å»é‡å®ƒå¼•ç”¨çš„Stringå¯¹è±¡ã€‚</li>
<li>ä½¿ç”¨ä¸€ä¸ªHashtableæ¥è®°å½•æ‰€æœ‰çš„è¢«Stringå¯¹è±¡ä½¿ç”¨çš„ä¸é‡å¤çš„charæ•°ç»„ã€‚å½“å»é‡çš„æ—¶å€™ï¼Œä¼šæŸ¥è¿™ä¸ªHashtableï¼Œæ¥çœ‹å †ä¸Šæ˜¯å¦å·²ç»å­˜åœ¨ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„charæ•°ç»„ã€‚</li>
<li>å¦‚æœå­˜åœ¨ï¼ŒStringå¯¹è±¡ä¼šè¢«è°ƒæ•´å¼•ç”¨é‚£ä¸ªæ•°ç»„ï¼Œé‡Šæ”¾å¯¹åŸæ¥çš„æ•°ç»„çš„å¼•ç”¨ï¼Œæœ€ç»ˆä¼šè¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶æ‰ã€‚</li>
<li>å¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œcharæ•°ç»„ä¼šè¢«æ’å…¥åˆ°Hashtableï¼Œè¿™æ ·ä»¥åçš„æ—¶å€™å°±å¯ä»¥å…±äº«è¿™ä¸ªæ•°ç»„äº†ã€‚</li>
</ol></div>
<blockquote>
<p class="component-content component"><strong>å‘½ä»¤è¡Œé€‰é¡¹</strong></p>
</blockquote>
<div class="component-content component"><ol>
<li>UseStringDeduplication(bool) ï¼šå¼€å¯Stringå»é‡ï¼Œé»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ã€‚</li>
<li>PrintStringDeduplicationStatistics(bool) ï¼šæ‰“å°è¯¦ç»†çš„å»é‡ç»Ÿè®¡ä¿¡æ¯</li>
<li>stringDeduplicationAgeThreshold(uintx) ï¼šè¾¾åˆ°è¿™ä¸ªå¹´é¾„çš„Stringå¯¹è±¡è¢«è®¤ä¸ºæ˜¯å»é‡çš„å€™é€‰å¯¹è±¡</li>
</ol></div>

          </div><div class="component">
            <div class="component-content">
              <div class="article-copyright">
                <p class="content">
                  ç‰ˆæƒå£°æ˜: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">ç‰ˆæƒå£°æ˜ï¼šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a>
                </p>
                <p class="content">ä½œè€…:  yuanshuai </p>
                <p class="content">å‘è¡¨æ—¥æœŸ:  2021å¹´11æœˆ30æ—¥</p>
              </div>
            </div>
          </div></article>
      </section>
  </main>

  <script>
    var script = document.createElement("script");script.src = "https://yuanshuai1122.github.io/js/initPost.js";
    document.head.appendChild(script);
  </script>

    
    <div class="footer-main ">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="foot-nav">
        <div class="foot-nav-items">
          <div class="item">
            <div class="logo"></div>
            <div class="email">Email: <a href="mailto:shuaiyuan@gmail.com">shuaiyuan@gmail.com</a></div>
          </div>

          <div class="item community">
            <div class="item-title">ç¤¾äº¤åª’ä½“</div>
            
              <a href="https://github.com/yuanshuai1122" target="_blank">Github</a>
            
          </div>

          <div class="item resources">
            <div class="item-title">å‹é“¾</div>
            
              <a href="https://yuanshuaicn.com/" target="_blank">ğŸ‘‹</a>
            
          </div>
        </div>
      </div>
      <div class="bottom">
        <div class="item copyright">
          &copy; 2023
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://github.com/floyd-li/hugo-theme-itheme" target="_blank">iTheme</a>
        </div>
      </div>
    </div>
  </div>
</div>

  </body>
    
    

    
    
</html>
