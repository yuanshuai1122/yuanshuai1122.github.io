<!DOCTYPE html>
<html class="js no-touch  progressive-image  no-reduced-motion progressive" lang="zh-hans">
  <head>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="keyword" content=""><meta property="og:title" content="ä¸€æ–‡é€šå…³ä¹‹MybatisPlus" />
<meta property="og:description" content="MyBatisPlus 1ã€MyBatisPlusæ¦‚è¿° éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyB" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.io/posts/%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus-%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-24T08:53:06+00:00" />
<meta property="article:modified_time" content="2021-11-24T08:53:06+00:00" />
<title>ä¸€æ–‡é€šå…³ä¹‹MybatisPlus</title>

    <link rel="canonical" href="/posts/%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus-%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus/">

    <link rel="stylesheet" href="/css/global.css">

    <link rel="stylesheet" href="/css/custom.css">

    <link rel="stylesheet" href="/css/search.css" />

    
    

    
    

</head>
  </head>
  <body class=" page-article   ">
    <header>
      <nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/ " class="nav-title">ğŸ§€</a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            <a href="/posts " class="nav-item-content">ç›®å½•</a>
          </div><div class="nav-item-wrapper">
            <a href="/about" class="nav-item-content">å…³äº</a>
          </div><div class="nav-item-wrapper">
            <a href="/index.xml" class="nav-item-content" target="_blank">RSS</a>
          </div></div>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleSearchModal(){
    const template = `
    <div class="modal-body">
      <div id="autocomplete" onclick="event.stopPropagation();"></div>
    </div>
    `
    const modal = document.querySelector("#modal-wrapper")
    if(!modal){
      const div = document.createElement("div")
      document.body.setAttribute("style","overflow: hidden;")
      div.setAttribute("id", "modal-wrapper")
      div.setAttribute("onclick", "toggleSearchModal()")
      div.innerHTML = template
      const script = document.createElement("script");script.setAttribute("src", "https://yuanshuai1122.github.io/js/algolia.js")
      div.appendChild(script)
      document.body.append(div)
    } else {
      document.body.removeAttribute("style")
      document.body.removeChild(modal)
    }
  }
</script>
    </header>
    
  
  
  <main id="main" class="main">
      <section>
        <article class="article">
          
          <div class=" article-header ">
            <div class="category component">
              <div class="component-content">
                <div class="category-eyebrow">
                  <span class="category-eyebrow__category category_original">
                    
                      
                        mybatisplus
                      
                    
                  </span>
                  <span class="category-eyebrow__date">2021å¹´11æœˆ24æ—¥</span>
                </div>
              </div>
            </div>
            <div class="pagetitle component">
              <div class="component-content">
                <h1 class="hero-headline">ä¸€æ–‡é€šå…³ä¹‹MybatisPlus</h1>
              </div>
            </div>
            <div class="component  article-subhead ">
              <div class="component-content"></div>
            </div>

            <div class="tagssheet component">
              <div class="component-content">
                
                  
                  <a href="/tags/mybatisplus" class="tag">
                    mybatisplus
                  </a>
                
              </div>
            </div>
          </div>
          
          <div class="pagebody">
            
            
            
            
            
            
            
            
            
<div class="component-content pagebody component">
  <h1 id="mybatisplus" class="pagebody-header">
    <strong>MyBatisPlus</strong>
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1mybatisplusæ¦‚è¿°" class="pagebody-header">
    <strong>1ã€MyBatisPlus</strong>æ¦‚è¿°
  </h2>
</div><p class="component-content component">éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyBatisPluså¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡å·¥ä½œæ—¶é—´ï¼Œæ‰€æœ‰çš„CRUDä»£ç å®ƒéƒ½å¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆ! JPA ã€ tk-mapperã€MyBatisPlus
å·æ‡’çš„!</p>
<blockquote>
<p class="component-content component">ç®€ä»‹</p>
</blockquote>
<p class="component-content component">æ˜¯ä»€ä¹ˆ? MyBatis æœ¬æ¥å°±æ˜¯ç®€åŒ– JDBC æ“ä½œçš„!</p>
<p class="component-content component">å®˜ç½‘:https://mp.baomidou.com/ MyBatis Plusï¼Œç®€åŒ– MyBatis !</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-9b175012ba0aea5e3db0fbf617dd2116" id="lht9b175012ba0aea5e3db0fbf617dd2116">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/1.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-e71fd06b7cd9bbb42aa6114847ad227f" id="lhte71fd06b7cd9bbb42aa6114847ad227f">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/2.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component">ç‰¹æ€§</p>
</blockquote>
<p class="component-content component"><strong>æ— ä¾µå…¥</strong>:åªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</p>
<p class="component-content component"><strong>æŸè€—å°</strong>:å¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œï¼Œ BaseMapper</p>
<p class="component-content component"><strong>å¼ºå¤§çš„</strong> <strong>CRUD</strong> <strong>æ“ä½œ</strong>:å†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚, ä»¥åç®€å•çš„CRUDæ“ä½œï¼Œå®ƒä¸ç”¨è‡ªå·±ç¼–å†™äº†!</p>
<p class="component-content component"><strong>æ”¯æŒ</strong> <strong>Lambda</strong> <strong>å½¢å¼è°ƒç”¨</strong>:é€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</p>
<p class="component-content component"><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>:æ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥(å†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequence)ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</p>
<p class="component-content component"><strong>æ”¯æŒ</strong> <strong>ActiveRecord</strong> <strong>æ¨¡å¼</strong>:æ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§ çš„ CRUD æ“ä½œ</p>
<p class="component-content component"><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>:æ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥( Write once, use anywhere )</p>
<p class="component-content component"><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>:é‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨(è‡ªåŠ¨å¸®ä½ ç”Ÿæˆä»£ç )</p>
<p class="component-content component"><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>:åŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒ äºæ™®é€š List æŸ¥è¯¢</p>
<p class="component-content component"><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>:æ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€ Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</p>
<p class="component-content component"><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>:å¯è¾“å‡º Sql è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢ æŸ¥è¯¢</p>
<p class="component-content component"><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>:æä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯ æ“ä½œ</p>

<div class="component-content pagebody component">
  <h2 id="2å¿«é€Ÿå…¥é—¨" class="pagebody-header">
    2ã€<strong>å¿«é€Ÿå…¥é—¨</strong>
  </h2>
</div><p class="component-content component">åœ°å€:https://mp.baomidou.com/guide/quick-start.html#åˆå§‹åŒ–å·¥ç¨‹</p>
<p class="component-content component">ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶:</p>
<p class="component-content component">1ã€å¯¼å…¥å¯¹åº”çš„ä¾èµ–</p>
<p class="component-content component">2ã€ç ”ç©¶ä¾èµ–å¦‚ä½•é…ç½®</p>
<p class="component-content component">3ã€ä»£ç å¦‚ä½•ç¼–å†™</p>
<p class="component-content component">4ã€æé«˜æ‰©å±•æŠ€æœ¯èƒ½åŠ›!</p>
<blockquote>
<p class="component-content component">æ­¥éª¤</p>
</blockquote>
<p class="component-content component">1ã€åˆ›å»ºæ•°æ®åº“ <code>mybatis_plus</code></p>
<p class="component-content component">2ã€åˆ›å»ºuserè¡¨</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">EXISTS</span> <span style="color:#66d9ef">user</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">user</span>
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>id BIGINT(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;ä¸»é”®ID&#39;</span>,
</span></span><span style="display:flex;"><span>name VARCHAR(<span style="color:#ae81ff">30</span>) <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;å§“å&#39;</span>, age INT(<span style="color:#ae81ff">11</span>) <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;å¹´é¾„&#39;</span>,
</span></span><span style="display:flex;"><span>email VARCHAR(<span style="color:#ae81ff">50</span>) <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">COMMENT</span> <span style="color:#e6db74">&#39;é‚®ç®±&#39;</span>, <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (id)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">user</span> (id, name, age, email) <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;Jone&#39;</span>, <span style="color:#ae81ff">18</span>, <span style="color:#e6db74">&#39;test1@baomidou.com&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;Jack&#39;</span>, <span style="color:#ae81ff">20</span>, <span style="color:#e6db74">&#39;test2@baomidou.com&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;Tom&#39;</span>, <span style="color:#ae81ff">28</span>, <span style="color:#e6db74">&#39;test3@baomidou.com&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;Sandy&#39;</span>, <span style="color:#ae81ff">21</span>, <span style="color:#e6db74">&#39;test4@baomidou.com&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;Billie&#39;</span>, <span style="color:#ae81ff">24</span>, <span style="color:#e6db74">&#39;test5@baomidou.com&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- çœŸå®å¼€å‘ä¸­ï¼Œversion(ä¹è§‚é”)ã€deleted(é€»è¾‘åˆ é™¤)ã€gmt_createã€gmt_modified</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">3ã€ç¼–å†™é¡¹ç›®ï¼Œåˆå§‹åŒ–é¡¹ç›®!ä½¿ç”¨SpringBootåˆå§‹åŒ–!</p>
<p class="component-content component">4ã€å¯¼å…¥ä¾èµ–</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span> <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>mysql<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- lombok --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>org.projectlombok<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>lombok<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- mybatis-plus --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- mybatis-plus æ˜¯è‡ªå·±å¼€å‘ï¼Œå¹¶éå®˜æ–¹çš„! --&gt;</span> <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>com.baomidou<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;version&gt;</span>3.0.5<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">è¯´æ˜:æˆ‘ä»¬ä½¿ç”¨ mybatis-plus å¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡çš„ä»£ç ï¼Œå°½é‡ä¸è¦åŒæ—¶å¯¼å…¥ mybatis å’Œ mybatis- plus!ç‰ˆæœ¬çš„å·®å¼‚!</p>
<p class="component-content component">5ã€è¿æ¥æ•°æ®åº“!è¿™ä¸€æ­¥å’Œ mybatis ç›¸åŒ!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span># mysql 5 é©±åŠ¨ä¸åŒ com.mysql.jdbc.Driver
</span></span><span style="display:flex;"><span># mysql 8 é©±åŠ¨ä¸åŒcom.mysql.cj.jdbc.Driverã€éœ€è¦å¢åŠ æ—¶åŒºçš„é…ç½® serverTimezone=GMT%2B8
</span></span><span style="display:flex;"><span>spring.datasource.username=root
</span></span><span style="display:flex;"><span>spring.datasource.password=123456 spring.datasource.url=jdbc:mysql://localhost:3306/mybatis_plus? useSSL=false<span style="color:#960050;background-color:#1e0010">&amp;</span>useUnicode=true<span style="color:#960050;background-color:#1e0010">&amp;</span>characterEncoding=utf-8<span style="color:#960050;background-color:#1e0010">&amp;</span>serverTimezone=GMT%2B8 spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span></span></code></pre></div></div>
  
</div><p class="component-content component">ä¼ ç»Ÿæ–¹å¼pojo-dao(è¿æ¥mybatisï¼Œé…ç½®mapper.xmlæ–‡ä»¶)-service-controller</p>
<p class="component-content component">6ã€ä½¿ç”¨äº†mybatis-plus ä¹‹å</p>
<div class="component-content component"><ul>
<li>pojo</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Data</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@AllArgsConstructor</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@NoArgsConstructor</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Long id<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Integer age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String email<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>mapperæ¥å£</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.kuang.mapper<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.kuang.pojo.User<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.stereotype.Repository<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// åœ¨å¯¹åº”çš„Mapperä¸Šé¢ç»§æ‰¿åŸºæœ¬çš„ç±» BaseMapper
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Repository</span> <span style="color:#75715e">// ä»£è¡¨æŒä¹…å±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">UserMapper</span> <span style="color:#66d9ef">extends</span> BaseMapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ‰€æœ‰çš„CRUDæ“ä½œéƒ½å·²ç»ç¼–å†™å®Œæˆäº†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// ä½ ä¸éœ€è¦åƒä»¥å‰çš„é…ç½®ä¸€å¤§å †æ–‡ä»¶äº†! }
</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">æ³¨æ„ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»å¯åŠ¨ç±»ä¸Šå»æ‰«ææˆ‘ä»¬çš„mapperåŒ…ä¸‹çš„æ‰€æœ‰æ¥å£</p>
<p class="component-content component"><code>@MapperScan(&quot;com.kuang.mapper&quot;)</code></p>
</li>
<li>
<p class="component-content component">æµ‹è¯•ç±»ä¸­æµ‹è¯•</p>
</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@SpringBootTest</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MybatisPlusApplicationTests</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ç»§æ‰¿äº†BaseMapperï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ¥è‡ªå·±çˆ¶ç±» // æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ‰©å±•æ–¹æ³•! @Autowired
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> UserMapper userMapper<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">contextLoads</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å‚æ•°æ˜¯ä¸€ä¸ª Wrapper ï¼Œæ¡ä»¶æ„é€ å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ null // æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectList</span><span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  users<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>ç»“æœ</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-2061c61eb919c506ba64255a1ae98ecd" id="lht2061c61eb919c506ba64255a1ae98ecd">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/3.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component">æ€è€ƒé—®é¢˜?</p>
</blockquote>
<p class="component-content component">1ã€SQLè°å¸®æˆ‘ä»¬å†™çš„ ? MyBatis-Plus éƒ½å†™å¥½äº†</p>
<p class="component-content component">2ã€æ–¹æ³•å“ªé‡Œæ¥çš„? MyBatis-Plus éƒ½å†™å¥½äº†</p>

<div class="component-content pagebody component">
  <h2 id="3é…ç½®æ—¥å¿—" class="pagebody-header">
    3ã€<strong>é…ç½®æ—¥å¿—</strong>
  </h2>
</div><p class="component-content component">æˆ‘ä»¬æ‰€æœ‰çš„sqlç°åœ¨æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬å¸Œæœ›çŸ¥é“å®ƒæ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦çœ‹æ—¥å¿—!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># é…ç½®æ—¥å¿— </span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">mybatis-plus.configuration.log-impl</span><span style="color:#f92672">=</span><span style="color:#e6db74">org.apache.ibatis.logging.stdout.StdOutImpl</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-45e0c4702b8b1b8d785ae5e7a4d1a2f1" id="lht45e0c4702b8b1b8d785ae5e7a4d1a2f1">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/4.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">é…ç½®å®Œæ¯•æ—¥å¿—ä¹‹åï¼Œåé¢çš„å­¦ä¹ å°±éœ€è¦æ³¨æ„è¿™ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„SQL.</p>

<div class="component-content pagebody component">
  <h2 id="4crudæ‰©å±•" class="pagebody-header">
    4ã€<strong>CRUD</strong>æ‰©å±•
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="41æ’å…¥æ“ä½œ" class="pagebody-header">
    4.1ã€<strong>æ’å…¥æ“ä½œ</strong>
  </h3>
</div><blockquote>
<p class="component-content component">Insert æ’å…¥</p>
</blockquote>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•æ’å…¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testInsert</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>  User user <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> User<span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Tomcatist&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setAge</span><span style="color:#f92672">(</span><span style="color:#ae81ff">3</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setEmail</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;321672102@qq.com&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span> <span style="color:#75715e">// å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆid 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>result<span style="color:#f92672">);</span> <span style="color:#75715e">// å—å½±å“çš„è¡Œæ•° 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span> <span style="color:#75715e">// å‘ç°ï¼Œidä¼šè‡ªåŠ¨å›å¡«
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-6c90684289c3c5df36cd34e9628b5e61" id="lht6c90684289c3c5df36cd34e9628b5e61">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/5.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component">æ•°æ®åº“æ’å…¥çš„idçš„é»˜è®¤å€¼ä¸º:å…¨å±€çš„å”¯ä¸€id</p>
</blockquote>

<div class="component-content pagebody component">
  <h3 id="42ä¸»é”®ç”Ÿæˆç­–ç•¥" class="pagebody-header">
    4.2ã€<strong>ä¸»é”®ç”Ÿæˆç­–ç•¥</strong>
  </h3>
</div><blockquote>
<p class="component-content component">é»˜è®¤ ID_WORKER å…¨å±€å”¯ä¸€id</p>
</blockquote>
<p class="component-content component">åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€idç”Ÿæˆ:https://www.cnblogs.com/haoxinyue/p/5208136.html</p>
<p class="component-content component"><strong>é›ªèŠ±ç®—æ³•:</strong></p>
<p class="component-content component">snowflakeæ˜¯Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ªlongå‹çš„IDã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯:ä½¿ç”¨41bitä½œä¸º æ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„ID(5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨ID)ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·(æ„å‘³ ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª ID)ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0ã€‚å¯ä»¥ä¿è¯å‡ ä¹å…¨çƒå”¯ ä¸€!</p>
<blockquote>
<p class="component-content component">ä¸»é”®è‡ªå¢</p>
</blockquote>
<p class="component-content component">æˆ‘ä»¬éœ€è¦é…ç½®ä¸»é”®è‡ªå¢:</p>
<p class="component-content component">1ã€å®ä½“ç±»å­—æ®µä¸Š <code>@TableId(type = IdType.AUTO)</code></p>
<p class="component-content component">2ã€æ•°æ®åº“å­—æ®µä¸€å®šè¦æ˜¯è‡ªå¢!</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-4961104d3bb06e6fff0d0e99976e92d6" id="lht4961104d3bb06e6fff0d0e99976e92d6">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/6.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">3ã€å†æ¬¡æµ‹è¯•æ’å…¥å³å¯!</p>
<blockquote>
<p class="component-content component">å…¶ä¸çš„æºç è§£é‡Š</p>
</blockquote>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> IdType <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>AUTO<span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">),</span> <span style="color:#75715e">// æ•°æ®åº“idè‡ªå¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>NONE<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">),</span> <span style="color:#75715e">// æœªè®¾ç½®ä¸»é”®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>INPUT<span style="color:#f92672">(</span><span style="color:#ae81ff">2</span><span style="color:#f92672">),</span> <span style="color:#75715e">// æ‰‹åŠ¨è¾“å…¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>ID_WORKER<span style="color:#f92672">(</span><span style="color:#ae81ff">3</span><span style="color:#f92672">),</span> <span style="color:#75715e">// é»˜è®¤çš„å…¨å±€å”¯ä¸€id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>UUID<span style="color:#f92672">(</span><span style="color:#ae81ff">4</span><span style="color:#f92672">),</span> <span style="color:#75715e">// å…¨å±€å”¯ä¸€id uuid ID_WORKER_STR(5); //ID_WORKER å­—ç¬¦ä¸²è¡¨ç¤ºæ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="43æ›´æ–°æ“ä½œ" class="pagebody-header">
    4.3ã€<strong>æ›´æ–°æ“ä½œ</strong>
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•æ›´æ–°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testUpdate</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>	User user <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> User<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// é€šè¿‡æ¡ä»¶è‡ªåŠ¨æ‹¼æ¥åŠ¨æ€
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  sql user<span style="color:#f92672">.</span><span style="color:#a6e22e">setId</span><span style="color:#f92672">(</span><span style="color:#ae81ff">6L</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Tomcatist&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setAge</span><span style="color:#f92672">(</span><span style="color:#ae81ff">18</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ³¨æ„:updateById ä½†æ˜¯å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡! 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">updateById</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>i<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">æ‰€æœ‰çš„sqléƒ½æ˜¯è‡ªåŠ¨å¸®ä½ åŠ¨æ€é…ç½®çš„!</p>

<div class="component-content pagebody component">
  <h3 id="44è‡ªåŠ¨å¡«å……" class="pagebody-header">
    4.4ã€<strong>è‡ªåŠ¨å¡«å……</strong>
  </h3>
</div><p class="component-content component">åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´!è¿™äº›ä¸ªæ“ä½œä¸€ééƒ½æ˜¯è‡ªåŠ¨åŒ–å®Œæˆçš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ‰‹åŠ¨æ›´æ–°!</p>
<p class="component-content component">é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œ:æ‰€æœ‰çš„æ•°æ®åº“è¡¨:gmt_createã€gmt_modifiedå‡ ä¹æ‰€æœ‰çš„è¡¨éƒ½è¦é…ç½®ä¸Š!è€Œä¸”éœ€ è¦è‡ªåŠ¨åŒ–!</p>
<blockquote>
<p class="component-content component">æ–¹å¼ä¸€:æ•°æ®åº“çº§åˆ«(å·¥ä½œä¸­ä¸å…è®¸ä½ ä¿®æ”¹æ•°æ®åº“)</p>
</blockquote>
<p class="component-content component">1ã€åœ¨è¡¨ä¸­æ–°å¢å­—æ®µ create_time, update_time</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-507e237bfed561ed3d10ef1c56d9fe28" id="lht507e237bfed561ed3d10ef1c56d9fe28">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/7.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">2ã€å†æ¬¡æµ‹è¯•æ’å…¥æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠå®ä½“ç±»åŒæ­¥!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> Date createTime<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> Date updateTime<span style="color:#f92672">;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">3ã€å†æ¬¡æ›´æ–°æŸ¥çœ‹ç»“æœå³å¯</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-6f9e45622c0dc9f8ec29f009614bcff7" id="lht6f9e45622c0dc9f8ec29f009614bcff7">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/8.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<blockquote>
<p class="component-content component">æ–¹å¼äºŒ:ä»£ç çº§åˆ«</p>
</blockquote>
<p class="component-content component">1ã€åˆ é™¤æ•°æ®åº“çš„é»˜è®¤å€¼ã€æ›´æ–°æ“ä½œ!</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-732b246827826834b6ae7d5da280df6c" id="lht732b246827826834b6ae7d5da280df6c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/9.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">2ã€å®ä½“ç±»å­—æ®µå±æ€§ä¸Šéœ€è¦å¢åŠ æ³¨è§£</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// å­—æ®µæ·»åŠ å¡«å……å†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@TableField</span><span style="color:#f92672">(</span>fill <span style="color:#f92672">=</span> FieldFill<span style="color:#f92672">.</span><span style="color:#a6e22e">INSERT</span><span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> Date createTime<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@TableField</span><span style="color:#f92672">(</span>fill <span style="color:#f92672">=</span> FieldFill<span style="color:#f92672">.</span><span style="color:#a6e22e">INSERT_UPDATE</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> Date updateTime<span style="color:#f92672">;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">3ã€ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªæ³¨è§£å³å¯!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.kuang.handler<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> lombok.extern.slf4j.Slf4j<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.apache.ibatis.reflection.MetaObject<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Date<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Slf4j</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Component</span> <span style="color:#75715e">// ä¸€å®šä¸è¦å¿˜è®°æŠŠå¤„ç†å™¨åŠ åˆ°IOCå®¹å™¨ä¸­!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyMetaObjectHandler</span> <span style="color:#66d9ef">implements</span> MetaObjectHandler <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertFill</span><span style="color:#f92672">(</span>MetaObject metaObject<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;start insert fill.....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// setFieldValByName(String fieldName, Object fieldVal, MetaObject
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>metaObject
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">setFieldValByName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;createTime&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">new</span> Date<span style="color:#f92672">(),</span>metaObject<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">setFieldValByName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;updateTime&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">new</span> Date<span style="color:#f92672">(),</span>metaObject<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateFill</span><span style="color:#f92672">(</span>MetaObject metaObject<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;start update fill.....&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">setFieldValByName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;updateTime&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">new</span> Date<span style="color:#f92672">(),</span>metaObject<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">4ã€æµ‹è¯•æ’å…¥</p>
<p class="component-content component">5ã€æµ‹è¯•æ›´æ–°ã€è§‚å¯Ÿæ—¶é—´å³å¯!</p>

<div class="component-content pagebody component">
  <h3 id="45ä¹è§‚é”" class="pagebody-header">
    4.5ã€<strong>ä¹è§‚é”</strong>
  </h3>
</div><blockquote>
<p class="component-content component">ä¹è§‚é” : æ•…åæ€æ„ååˆ†ä¹è§‚ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆä¸å»ä¸Šé”!å¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œ å†æ¬¡æ›´æ–°å€¼æµ‹è¯•</p>
<p class="component-content component">æ‚²è§‚é”:æ•…åæ€æ„ååˆ†æ‚²è§‚ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºæ€»æ˜¯å‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¼šä¸Šé”!å†å»æ“ä½œ!</p>
</blockquote>
<p class="component-content component">æˆ‘ä»¬è¿™é‡Œä¸»è¦è®²è§£ ä¹è§‚é”æœºåˆ¶! ä¹è§‚é”å®ç°æ–¹å¼:</p>
<div class="component-content component"><ul>
<li>
<p class="component-content component">å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version</p>
</li>
<li>
<p class="component-content component">æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ªversion</p>
</li>
<li>
<p class="component-content component">æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion</p>
</li>
<li>
<p class="component-content component">å¦‚æœversionä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</p>
</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ä¹è§‚é”:<span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">ã€</span>å…ˆæŸ¥è¯¢<span style="color:#960050;background-color:#1e0010">ï¼Œ</span>è·å¾—ç‰ˆæœ¬å· version <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">--</span> A
</span></span><span style="display:flex;"><span>update user set name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tomcatist&#34;</span><span style="color:#f92672">,</span> version <span style="color:#f92672">=</span> version <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> where id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> and version <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">--</span> B çº¿ç¨‹æŠ¢å…ˆå®Œæˆ<span style="color:#960050;background-color:#1e0010">ï¼Œ</span>è¿™ä¸ªæ—¶å€™ version <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span><span style="color:#960050;background-color:#1e0010">ï¼Œ</span>ä¼šå¯¼è‡´ A ä¿®æ”¹å¤±è´¥<span style="color:#f92672">!</span> update user set name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;tomcatist&#34;</span><span style="color:#f92672">,</span> version <span style="color:#f92672">=</span> version <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> where id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> and version <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span></span></span></code></pre></div></div>
  
</div><blockquote>
<p class="component-content component">æµ‹è¯•ä¸€ä¸‹MPçš„ä¹è§‚é”æ’ä»¶</p>
</blockquote>
<p class="component-content component">1ã€ç»™æ•°æ®åº“ä¸­å¢åŠ versionå­—æ®µ!</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-8d725823d1aa20ba690cb6131b1a6f2e" id="lht8d725823d1aa20ba690cb6131b1a6f2e">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/10.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">2ã€æˆ‘ä»¬å®ä½“ç±»åŠ å¯¹åº”çš„å­—æ®µ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#a6e22e">@Version</span> <span style="color:#75715e">//ä¹è§‚é”Versionæ³¨è§£ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">private</span> Integer version<span style="color:#f92672">;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">3ã€æ³¨å†Œç»„ä»¶</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æ‰«ææˆ‘ä»¬çš„ mapper æ–‡ä»¶å¤¹ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@MapperScan</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.kuang.mapper&#34;</span><span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@EnableTransactionManagement</span> 
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span> <span style="color:#75715e">// é…ç½®ç±»
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyBatisPlusConfig</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ³¨å†Œä¹è§‚é”æ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> OptimisticLockerInterceptor <span style="color:#a6e22e">optimisticLockerInterceptor</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> OptimisticLockerInterceptor<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">4ã€æµ‹è¯•ä¸€ä¸‹!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•ä¹è§‚é”æˆåŠŸ!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testOptimisticLocker</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 1ã€æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  User user <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectById</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1L</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 2ã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ user.setName(&#34;kuangshen&#34;); 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setEmail</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;24736743@qq.com&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3ã€æ‰§è¡Œæ›´æ–°æ“ä½œ userMapper.updateById(user);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•ä¹è§‚é”å¤±è´¥!å¤šçº¿ç¨‹ä¸‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testOptimisticLocker2</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// çº¿ç¨‹ 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  User user <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectById</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1L</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;kuangshen111&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span><span style="color:#a6e22e">setEmail</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;24736743@qq.com&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ¨¡æ‹Ÿå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œäº†æ’é˜Ÿæ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	User user2 <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectById</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1L</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user2<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;kuangshen222&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  user2<span style="color:#f92672">.</span><span style="color:#a6e22e">setEmail</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;24736743@qq.com&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">updateById</span><span style="color:#f92672">(</span>user2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// è‡ªæ—‹é”æ¥å¤šæ¬¡å°è¯•æäº¤!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">updateById</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span> <span style="color:#75715e">// å¦‚æœæ²¡æœ‰ä¹è§‚é”å°±ä¼šè¦†ç›–æ’é˜Ÿçº¿ç¨‹çš„å€¼! }
</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-7aa388064e6fcaf4400dda15cb32852b" id="lht7aa388064e6fcaf4400dda15cb32852b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/11.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="46æŸ¥è¯¢æ“ä½œ" class="pagebody-header">
    4.6ã€<strong>æŸ¥è¯¢æ“ä½œ</strong>
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•æŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testSelectById</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>    User user <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectById</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1L</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•æ‰¹é‡æŸ¥è¯¢!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testSelectByBatchId</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectBatchIds</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">asList</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">3</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>    users<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æŒ‰æ¡ä»¶æŸ¥è¯¢ä¹‹ä¸€ä½¿ç”¨mapæ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testSelectByBatchIds</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span> <span style="color:#75715e">// è‡ªå®šä¹‰è¦æŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;ç‹‚ç¥è¯´Java&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;age&#34;</span><span style="color:#f92672">,</span><span style="color:#ae81ff">3</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectByMap</span><span style="color:#f92672">(</span>map<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    users<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="47åˆ†é¡µæŸ¥è¯¢" class="pagebody-header">
    4.7ã€<strong>åˆ†é¡µæŸ¥è¯¢</strong>
  </h3>
</div><p class="component-content component">1ã€åŸå§‹çš„ limit è¿›è¡Œåˆ†é¡µ</p>
<p class="component-content component">2ã€pageHelper ç¬¬ä¸‰æ–¹æ’ä»¶</p>
<p class="component-content component">3ã€MP å…¶å®ä¹Ÿå†…ç½®äº†åˆ†é¡µæ’ä»¶!</p>
<blockquote>
<p class="component-content component">å¦‚ä½•ä½¿ç”¨!</p>
</blockquote>
<p class="component-content component">1ã€é…ç½®æ‹¦æˆªå™¨ç»„ä»¶å³å¯</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// åˆ†é¡µæ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> PaginationInterceptor <span style="color:#a6e22e">paginationInterceptor</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span>  <span style="color:#66d9ef">new</span> PaginationInterceptor<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">2ã€ç›´æ¥ä½¿ç”¨Pageå¯¹è±¡å³å¯!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•åˆ†é¡µæŸ¥è¯¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testPage</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å‚æ•°ä¸€:å½“å‰é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// å‚æ•°äºŒ:é¡µé¢å¤§å°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// ä½¿ç”¨äº†åˆ†é¡µæ’ä»¶ä¹‹åï¼Œæ‰€æœ‰çš„åˆ†é¡µæ“ä½œä¹Ÿå˜å¾—ç®€å•çš„! 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Page<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> page <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Page<span style="color:#f92672">&lt;&gt;(</span><span style="color:#ae81ff">2</span><span style="color:#f92672">,</span><span style="color:#ae81ff">5</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>    userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectPage</span><span style="color:#f92672">(</span>page<span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    page<span style="color:#f92672">.</span><span style="color:#a6e22e">getRecords</span><span style="color:#f92672">().</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>page<span style="color:#f92672">.</span><span style="color:#a6e22e">getTotal</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="48åˆ é™¤æ“ä½œ" class="pagebody-header">
    4.8ã€<strong>åˆ é™¤æ“ä½œ</strong>
  </h3>
</div><p class="component-content component">1ã€æ ¹æ® id åˆ é™¤è®°å½•</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æµ‹è¯•åˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testDeleteById</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>    userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">deleteById</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1240620674645544965L</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// é€šè¿‡idæ‰¹é‡åˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testDeleteBatchId</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span> 		userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">deleteBatchIds</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">asList</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1240620674645544961L</span><span style="color:#f92672">,</span><span style="color:#ae81ff">124062067464554496</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2L</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// é€šè¿‡mapåˆ é™¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testDeleteMap</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>	HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>  map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;ç‹‚ç¥è¯´Java&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">deleteByMap</span><span style="color:#f92672">(</span>map<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">æˆ‘ä»¬åœ¨å·¥ç»„ä¸­ä¼šé‡åˆ°ä¸€äº›é—®é¢˜:é€»è¾‘åˆ é™¤!</p>

<div class="component-content pagebody component">
  <h3 id="49é€»è¾‘åˆ é™¤" class="pagebody-header">
    4.9ã€<strong>é€»è¾‘åˆ é™¤</strong>
  </h3>
</div><blockquote>
<p class="component-content component">ç‰©ç†åˆ é™¤ :ä»æ•°æ®åº“ä¸­ç›´æ¥ç§»é™¤
é€»è¾‘åˆ é™¤ :å†æ•°æ®åº“ä¸­æ²¡æœ‰è¢«ç§»é™¤ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå˜é‡æ¥è®©ä»–å¤±æ•ˆ! deleted = 0 =&gt; deleted = 1s</p>
</blockquote>
<p class="component-content component">ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹è¢«åˆ é™¤çš„è®°å½•!é˜²æ­¢æ•°æ®çš„ä¸¢å¤±ï¼Œç±»ä¼¼äºå›æ”¶ç«™!</p>
<p class="component-content component">æµ‹è¯•ä¸€ä¸‹:</p>
<p class="component-content component">1ã€åœ¨æ•°æ®è¡¨ä¸­å¢åŠ ä¸€ä¸ª deleted å­—æ®µ</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-9e300cdc65670997b6983742aaed120e" id="lht9e300cdc65670997b6983742aaed120e">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/12.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">2ã€å®ä½“ç±»ä¸­å¢åŠ å±æ€§</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#a6e22e">@TableLogic</span> <span style="color:#75715e">//é€»è¾‘åˆ é™¤ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">private</span> Integer deleted<span style="color:#f92672">;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">3ã€é…ç½®!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// é€»è¾‘åˆ é™¤ç»„ä»¶!
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> ISqlInjector <span style="color:#a6e22e">sqlInjector</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> LogicSqlInjector<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># é…ç½®é€»è¾‘åˆ é™¤ </span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">mybatis-plus.global-config.db-config.logic-delete-value</span><span style="color:#f92672">=</span><span style="color:#e6db74">1 </span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">mybatis-plus.global-config.db-config.logic-not-delete-value</span><span style="color:#f92672">=</span><span style="color:#e6db74">0</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">4ã€æµ‹è¯•ä¸€ä¸‹åˆ é™¤!</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f5de2d59fea2dcbe46a1f7bd4402de5c" id="lhtf5de2d59fea2dcbe46a1f7bd4402de5c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/13.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">è®°å½•ä¾æ—§åœ¨æ•°æ®åº“ï¼Œä½†æ˜¯å€¼ç¡®å·²ç»å˜åŒ–äº†!</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f68823c5ce7abd21f6a81f48d42e7411" id="lhtf68823c5ce7abd21f6a81f48d42e7411">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/14.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">ä»¥ä¸Šçš„æ‰€æœ‰CRUDæ“ä½œåŠå…¶æ‰©å±•æ“ä½œï¼Œæˆ‘ä»¬éƒ½å¿…é¡»ç²¾é€šæŒæ¡!ä¼šå¤§å¤§æé«˜ä½ çš„å·¥ä½œå’Œå†™é¡¹ç›®çš„æ•ˆç‡!</p>

<div class="component-content pagebody component">
  <h3 id="410æ€§èƒ½åˆ†ææ’ä»¶" class="pagebody-header">
    4.10ã€<strong>æ€§èƒ½åˆ†ææ’ä»¶</strong>
  </h3>
</div><p class="component-content component">æˆ‘ä»¬åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ä¸€äº›æ…¢sqlã€‚æµ‹è¯•! druid,,,,,</p>
<p class="component-content component">ä½œç”¨:æ€§èƒ½åˆ†ææ‹¦æˆªå™¨ï¼Œç”¨äºè¾“å‡ºæ¯æ¡ SQL è¯­å¥åŠå…¶æ‰§è¡Œæ—¶é—´ MPä¹Ÿæä¾›æ€§èƒ½åˆ†ææ’ä»¶ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±åœæ­¢è¿è¡Œ!</p>
<p class="component-content component">1ã€å¯¼å…¥æ’ä»¶</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* SQLæ‰§è¡Œæ•ˆç‡æ’ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Profile</span><span style="color:#f92672">({</span><span style="color:#e6db74">&#34;dev&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;test&#34;</span><span style="color:#f92672">})</span><span style="color:#75715e">// è®¾ç½® dev test ç¯å¢ƒå¼€å¯ï¼Œä¿è¯æˆ‘ä»¬çš„æ•ˆç‡ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> PerformanceInterceptor <span style="color:#a6e22e">performanceInterceptor</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    PerformanceInterceptor performanceInterceptor <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span>
</span></span><span style="display:flex;"><span>PerformanceInterceptor<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		performanceInterceptor<span style="color:#f92672">.</span><span style="color:#a6e22e">setMaxTime</span><span style="color:#f92672">(</span><span style="color:#ae81ff">100</span><span style="color:#f92672">);</span> <span style="color:#75715e">// msè®¾ç½®sqlæ‰§è¡Œçš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†åˆ™ä¸ æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		performanceInterceptor<span style="color:#f92672">.</span><span style="color:#a6e22e">setFormat</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// æ˜¯å¦æ ¼å¼åŒ–ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  	<span style="color:#66d9ef">return</span> performanceInterceptor<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">è®°ä½ï¼Œè¦åœ¨SpringBootä¸­é…ç½®ç¯å¢ƒä¸ºdevæˆ–è€… test ç¯å¢ƒ!</p>
<p class="component-content component">2ã€æµ‹è¯•ä½¿ç”¨!</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">contextLoads</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å‚æ•°æ˜¯ä¸€ä¸ª Wrapper ï¼Œæ¡ä»¶æ„é€ å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ null 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectList</span><span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>  users<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-6675256a35730bb4927fbeb546d85f0a" id="lht6675256a35730bb4927fbeb546d85f0a">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/15.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">ä½¿ç”¨æ€§èƒ½åˆ†ææ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜æ•ˆç‡!</p>

<div class="component-content pagebody component">
  <h3 id="411æ¡ä»¶æ„é€ å™¨" class="pagebody-header">
    4.11ã€<strong>æ¡ä»¶æ„é€ å™¨</strong>
  </h3>
</div><p class="component-content component">ååˆ†é‡è¦:Wrapper</p>
<p class="component-content component">æˆ‘ä»¬å†™ä¸€äº›å¤æ‚çš„sqlå°±å¯ä»¥ä½¿ç”¨å®ƒæ¥æ›¿ä»£!</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-c011e50f7d51375cfea955c656567fdc" id="lhtc011e50f7d51375cfea955c656567fdc">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/16.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">1ã€æµ‹è¯•ä¸€ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">contextLoads</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æŸ¥è¯¢nameä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼Œå¹¶ä¸”é‚®ç®±ä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼Œå¹´é¾„å¤§äºç­‰äº12 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  	QueryWrapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QueryWrapper<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>    wrapper
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">.</span><span style="color:#a6e22e">isNotNull</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">.</span><span style="color:#a6e22e">isNotNull</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;email&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">.</span><span style="color:#a6e22e">ge</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;age&#34;</span><span style="color:#f92672">,</span><span style="color:#ae81ff">12</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectList</span><span style="color:#f92672">(</span>wrapper<span style="color:#f92672">).</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span> <span style="color:#75715e">// å’Œæˆ‘ä»¬åˆšæ‰å­¦ä¹  çš„mapå¯¹æ¯”ä¸€ä¸‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">2ã€æµ‹è¯•äºŒï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test2</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æŸ¥è¯¢åå­—tom
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  QueryWrapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QueryWrapper<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>  wrapper<span style="color:#f92672">.</span><span style="color:#a6e22e">eq</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;tom&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  User user <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectOne</span><span style="color:#f92672">(</span>wrapper<span style="color:#f92672">);</span> <span style="color:#75715e">// æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‡ºç°å¤šä¸ªç»“æœä½¿ç”¨Listæˆ–è€… Map 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>user<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">3ã€æµ‹è¯•ä¸‰ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test3</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// æŸ¥è¯¢å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´çš„ç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  QueryWrapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QueryWrapper<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>  wrapper<span style="color:#f92672">.</span><span style="color:#a6e22e">between</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;age&#34;</span><span style="color:#f92672">,</span><span style="color:#ae81ff">20</span><span style="color:#f92672">,</span><span style="color:#ae81ff">30</span><span style="color:#f92672">);</span> <span style="color:#75715e">// åŒºé—´
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  Integer count <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectCount</span><span style="color:#f92672">(</span>wrapper<span style="color:#f92672">);</span><span style="color:#75715e">// æŸ¥è¯¢ç»“æœæ•° 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>count<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">4ã€æµ‹è¯•å››ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æ¨¡ç³ŠæŸ¥è¯¢ @Test
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test4</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æŸ¥è¯¢å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´çš„ç”¨æˆ·
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  QueryWrapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QueryWrapper<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// å·¦å’Œå³ t%
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  wrapper
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span><span style="color:#a6e22e">notLike</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;e&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span><span style="color:#a6e22e">likeRight</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;email&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;t&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>      List<span style="color:#f92672">&lt;</span>Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;&gt;</span> maps <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectMaps</span><span style="color:#f92672">(</span>wrapper<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>      maps<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">5ã€æµ‹è¯•äº”,è®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// æ¨¡ç³ŠæŸ¥è¯¢ @Test
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test5</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>  QueryWrapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QueryWrapper<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// id åœ¨å­æŸ¥è¯¢ä¸­æŸ¥å‡ºæ¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  wrapper<span style="color:#f92672">.</span><span style="color:#a6e22e">inSql</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;select id from user where id&lt;3&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  List<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> objects <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectObjs</span><span style="color:#f92672">(</span>wrapper<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  objects<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">6ã€æµ‹è¯•å…­ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//æµ‹è¯•å…­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Test</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test6</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>  QueryWrapper<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> wrapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QueryWrapper<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// é€šè¿‡idè¿›è¡Œæ’åº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  wrapper<span style="color:#f92672">.</span><span style="color:#a6e22e">orderByAsc</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> userMapper<span style="color:#f92672">.</span><span style="color:#a6e22e">selectList</span><span style="color:#f92672">(</span>wrapper<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>  users<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">ç­‰ç­‰æµ‹è¯•éƒ½ç±»ä¼¼ï¼~</p>

<div class="component-content pagebody component">
  <h3 id="412ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨" class="pagebody-header">
    <strong>4.12</strong>ã€ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨
  </h3>
</div><p class="component-content component">daoã€pojoã€serviceã€controlleréƒ½ç»™æˆ‘è‡ªå·±å»ç¼–å†™å®Œæˆ!</p>
<p class="component-content component">AutoGenerator æ˜¯ MyBatis-Plus çš„ä»£ç ç”Ÿæˆå™¨ï¼Œé€šè¿‡ AutoGenerator å¯ä»¥å¿«é€Ÿç”Ÿæˆ Entityã€Mapperã€Mapper XMLã€Serviceã€Controller ç­‰å„ä¸ªæ¨¡å—çš„ä»£ç ï¼Œæå¤§çš„æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p class="component-content component">æµ‹è¯•:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.tom<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.annotation.DbType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.annotation.FieldFill<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.annotation.IdType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.annotation.TableField<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.AutoGenerator<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.po.TableFill<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.rules.DateType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.ArrayList<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TomCode</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// éœ€è¦æ„å»ºä¸€ä¸ª ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨ å¯¹è±¡ AutoGenerator mpg = new AutoGenerator(); 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#75715e">// é…ç½®ç­–ç•¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 1ã€å…¨å±€é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		GlobalConfig gc <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> GlobalConfig<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		String projectPath <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">getProperty</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;user.dir&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setOutputDir</span><span style="color:#f92672">(</span>projectPath<span style="color:#f92672">+</span><span style="color:#e6db74">&#34;/src/main/java&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setAuthor</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ç‹‚ç¥è¯´&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setOpen</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setFileOverride</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">);</span> <span style="color:#75715e">// æ˜¯å¦è¦†ç›– 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setServiceName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;%sService&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">// å»Serviceçš„Iå‰ç¼€ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setIdType</span><span style="color:#f92672">(</span>IdType<span style="color:#f92672">.</span><span style="color:#a6e22e">ID_WORKER</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setDateType</span><span style="color:#f92672">(</span>DateType<span style="color:#f92672">.</span><span style="color:#a6e22e">ONLY_DATE</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		gc<span style="color:#f92672">.</span><span style="color:#a6e22e">setSwagger2</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		mpg<span style="color:#f92672">.</span><span style="color:#a6e22e">setGlobalConfig</span><span style="color:#f92672">(</span>gc<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//2ã€è®¾ç½®æ•°æ®æº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		DataSourceConfig dsc <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DataSourceConfig<span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>		dsc<span style="color:#f92672">.</span><span style="color:#a6e22e">setUrl</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;jdbc:mysql://localhost:3306/kuang_community?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        dsc<span style="color:#f92672">.</span><span style="color:#a6e22e">setDriverName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        dsc<span style="color:#f92672">.</span><span style="color:#a6e22e">setUsername</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;root&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        dsc<span style="color:#f92672">.</span><span style="color:#a6e22e">setPassword</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        dsc<span style="color:#f92672">.</span><span style="color:#a6e22e">setDbType</span><span style="color:#f92672">(</span>DbType<span style="color:#f92672">.</span><span style="color:#a6e22e">MYSQL</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        mpg<span style="color:#f92672">.</span><span style="color:#a6e22e">setDataSource</span><span style="color:#f92672">(</span>dsc<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//3ã€åŒ…çš„é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		PackageConfig pc <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PackageConfig<span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>		pc<span style="color:#f92672">.</span><span style="color:#a6e22e">setModuleName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;blog&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		pc<span style="color:#f92672">.</span><span style="color:#a6e22e">setParent</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.kuang&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		pc<span style="color:#f92672">.</span><span style="color:#a6e22e">setEntity</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;entity&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		pc<span style="color:#f92672">.</span><span style="color:#a6e22e">setMapper</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mapper&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		pc<span style="color:#f92672">.</span><span style="color:#a6e22e">setService</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;service&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		pc<span style="color:#f92672">.</span><span style="color:#a6e22e">setController</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;controller&#34;</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		mpg<span style="color:#f92672">.</span><span style="color:#a6e22e">setPackageInfo</span><span style="color:#f92672">(</span>pc<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//4ã€ç­–ç•¥é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		StrategyConfig strategy <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> StrategyConfig<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setInclude</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;blog_tags&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;course&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;links&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;sys_settings&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;user_record&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34; user_say&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">// è®¾ç½®è¦æ˜ å°„çš„è¡¨å
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setNaming</span><span style="color:#f92672">(</span>NamingStrategy<span style="color:#f92672">.</span><span style="color:#a6e22e">underline_to_camel</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setColumnNaming</span><span style="color:#f92672">(</span>NamingStrategy<span style="color:#f92672">.</span><span style="color:#a6e22e">underline_to_camel</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setEntityLombokModel</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">// è‡ªåŠ¨lombok;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setLogicDeleteFieldName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;deleted&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// è‡ªåŠ¨å¡«å……é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		TableFill gmtCreate <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TableFill<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;gmt_create&#34;</span><span style="color:#f92672">,</span> FieldFill<span style="color:#f92672">.</span><span style="color:#a6e22e">INSERT</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		TableFill gmtModified <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TableFill<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;gmt_modified&#34;</span><span style="color:#f92672">,</span>FieldFill<span style="color:#f92672">.</span><span style="color:#a6e22e">INSERT_UPDATE</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		ArrayList<span style="color:#f92672">&lt;</span>TableFill<span style="color:#f92672">&gt;</span> tableFills <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;&gt;();</span> 
</span></span><span style="display:flex;"><span>		tableFills<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>gmtCreate<span style="color:#f92672">);</span> tableFills<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>gmtModified<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setTableFillList</span><span style="color:#f92672">(</span>tableFills<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// ä¹è§‚é”
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setVersionFieldName</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;version&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setRestControllerStyle</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		strategy<span style="color:#f92672">.</span><span style="color:#a6e22e">setControllerMappingHyphenStyle</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span> <span style="color:#75715e">//localhost:8080/hello_id_2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>		mpg<span style="color:#f92672">.</span><span style="color:#a6e22e">setStrategy</span><span style="color:#f92672">(</span>strategy<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>		mpg<span style="color:#f92672">.</span><span style="color:#a6e22e">execute</span><span style="color:#f92672">();</span> <span style="color:#75715e">//æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-8fdfb76ad8016b386836aaa9ff012e80" id="lht8fdfb76ad8016b386836aaa9ff012e80">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/17.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">è¿™æ ·å…¨éƒ¨éƒ½ä¸€é”®ç”Ÿæˆäº† ï¼</p>

          </div><div class="component">
            <div class="component-content">
              <div class="article-copyright">
                <p class="content">
                  ç‰ˆæƒå£°æ˜: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">ç‰ˆæƒå£°æ˜ï¼šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a>
                </p>
                <p class="content">ä½œè€…:  yuanshuai </p>
                <p class="content">å‘è¡¨æ—¥æœŸ:  2021å¹´11æœˆ24æ—¥</p>
              </div>
            </div>
          </div></article>
      </section>
  </main>

  <script>
    var script = document.createElement("script");script.src = "https://yuanshuai1122.github.io/js/initPost.js";
    document.head.appendChild(script);
  </script>

    
    <div class="footer-main ">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="foot-nav">
        <div class="foot-nav-items">
          <div class="item">
            <div class="logo"></div>
            <div class="email">Email: <a href="mailto:shuaiyuan@gmail.com">shuaiyuan@gmail.com</a></div>
          </div>

          <div class="item community">
            <div class="item-title">ç¤¾äº¤åª’ä½“</div>
            
              <a href="https://github.com/yuanshuai1122" target="_blank">Github</a>
            
          </div>

          <div class="item resources">
            <div class="item-title">å‹é“¾</div>
            
              <a href="https://yuanshuaicn.com/" target="_blank">ğŸ‘‹</a>
            
          </div>
        </div>
      </div>
      <div class="bottom">
        <div class="item copyright">
          &copy; 2023
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://github.com/floyd-li/hugo-theme-itheme" target="_blank">iTheme</a>
        </div>
      </div>
    </div>
  </div>
</div>

  </body>
    
    

    
    
</html>
