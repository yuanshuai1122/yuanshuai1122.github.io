<!DOCTYPE html>
<html class="js no-touch  progressive-image  no-reduced-motion progressive" lang="zh-hans">
  <head>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="keyword" content=""><meta property="og:title" content="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-webå¼€å‘" />
<meta property="og:description" content="BindingAwareModelMap æ˜¯Model ä¹Ÿæ˜¯Map mavContainer.getModel(); è·å–åˆ°å€¼çš„ 1.4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°ï¼š å¯ä»¥è‡ªåŠ¨ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–ï¼Œå¯ä»¥çº§è”å°è£…ã€‚ /** * å§“åï¼š &lt;input name=&#34;userName&#34;/&gt; &lt;br/&gt; * å¹´é¾„ï¼š &lt;input name=&#34;age&#34;/&gt; &lt;br/&gt; * ç”Ÿæ—¥ï¼š &lt;input" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.io/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-web%E5%BC%80%E5%8F%91-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-web%E5%BC%80%E5%8F%91/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-26T21:32:55+00:00" />
<meta property="article:modified_time" content="2021-11-26T21:32:55+00:00" />
<title>SpringBoot2æ ¸å¿ƒæŠ€æœ¯-webå¼€å‘</title>

    <link rel="canonical" href="/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-web%E5%BC%80%E5%8F%91-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-web%E5%BC%80%E5%8F%91/">

    <link rel="stylesheet" href="/css/global.css">

    <link rel="stylesheet" href="/css/custom.css">

    <link rel="stylesheet" href="/css/search.css" />

    
    

    
    

</head>
  </head>
  <body class=" page-article   ">
    <header>
      <nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/ " class="nav-title">ğŸ§€</a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            <a href="/posts " class="nav-item-content">ç›®å½•</a>
          </div><div class="nav-item-wrapper">
            <a href="/about" class="nav-item-content">å…³äº</a>
          </div><div class="nav-item-wrapper">
            <a href="/index.xml" class="nav-item-content" target="_blank">RSS</a>
          </div></div>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleSearchModal(){
    const template = `
    <div class="modal-body">
      <div id="autocomplete" onclick="event.stopPropagation();"></div>
    </div>
    `
    const modal = document.querySelector("#modal-wrapper")
    if(!modal){
      const div = document.createElement("div")
      document.body.setAttribute("style","overflow: hidden;")
      div.setAttribute("id", "modal-wrapper")
      div.setAttribute("onclick", "toggleSearchModal()")
      div.innerHTML = template
      const script = document.createElement("script");script.setAttribute("src", "https://yuanshuai1122.github.io/js/algolia.js")
      div.appendChild(script)
      document.body.append(div)
    } else {
      document.body.removeAttribute("style")
      document.body.removeChild(modal)
    }
  }
</script>
    </header>
    
  
  
  <main id="main" class="main">
      <section>
        <article class="article">
          
          <div class=" article-header ">
            <div class="category component">
              <div class="component-content">
                <div class="category-eyebrow">
                  <span class="category-eyebrow__category category_original">
                    
                      
                        Java
                      
                    
                  </span>
                  <span class="category-eyebrow__date">2021å¹´11æœˆ26æ—¥</span>
                </div>
              </div>
            </div>
            <div class="pagetitle component">
              <div class="component-content">
                <h1 class="hero-headline">SpringBoot2æ ¸å¿ƒæŠ€æœ¯-webå¼€å‘</h1>
              </div>
            </div>
            <div class="component  article-subhead ">
              <div class="component-content"></div>
            </div>

            <div class="tagssheet component">
              <div class="component-content">
                
                  
                  <a href="/tags/java" class="tag">
                    Java
                  </a>
                
                  
                  <a href="/tags/springboot" class="tag">
                    SpringBoot
                  </a>
                
              </div>
            </div>
          </div>
          
          <div class="pagebody">
            
            
            
            
            
            
            
            
            <blockquote>
<p class="component-content component">BindingAwareModelMap æ˜¯Model ä¹Ÿæ˜¯Map</p>
</blockquote>
<p class="component-content component"><strong>mavContainer</strong>.getModel(); è·å–åˆ°å€¼çš„</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-64e07339ebc0df57ed01df730347e355" id="lht64e07339ebc0df57ed01df730347e355">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/19.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-76a6601783136b43b5ce845a2a737f89" id="lht76a6601783136b43b5ce845a2a737f89">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/20.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-456313ec9ce0bd3b3cda37251c425281" id="lht456313ec9ce0bd3b3cda37251c425281">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/21.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="14è‡ªå®šä¹‰å¯¹è±¡å‚æ•°" class="pagebody-header">
    1.4ã€è‡ªå®šä¹‰å¯¹è±¡å‚æ•°ï¼š
  </h3>
</div><p class="component-content component">å¯ä»¥è‡ªåŠ¨ç±»å‹è½¬æ¢ä¸æ ¼å¼åŒ–ï¼Œå¯ä»¥çº§è”å°è£…ã€‚</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     å§“åï¼š &lt;input name=&#34;userName&#34;/&gt; &lt;br/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     å¹´é¾„ï¼š &lt;input name=&#34;age&#34;/&gt; &lt;br/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     ç”Ÿæ—¥ï¼š &lt;input name=&#34;birth&#34;/&gt; &lt;br/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     å® ç‰©å§“åï¼š&lt;input name=&#34;pet.name&#34;/&gt;&lt;br/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> *     å® ç‰©å¹´é¾„ï¼š&lt;input name=&#34;pet.age&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Data</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String userName<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Integer age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Date birth<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Pet pet<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Data</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Pet</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> String age<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>result</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="2pojoå°è£…è¿‡ç¨‹" class="pagebody-header">
    2ã€POJOå°è£…è¿‡ç¨‹
  </h2>
</div><div class="component-content component"><ul>
<li><strong>ServletModelAttributeMethodProcessor</strong></li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="3å‚æ•°å¤„ç†åŸç†" class="pagebody-header">
    3ã€å‚æ•°å¤„ç†åŸç†
  </h2>
</div><div class="component-content component"><ul>
<li>HandlerMappingä¸­æ‰¾åˆ°èƒ½å¤„ç†è¯·æ±‚çš„Handlerï¼ˆController.method()ï¼‰</li>
<li>ä¸ºå½“å‰Handler æ‰¾ä¸€ä¸ªé€‚é…å™¨ HandlerAdapterï¼› <strong>RequestMappingHandlerAdapter</strong></li>
<li>é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•å¹¶ç¡®å®šæ–¹æ³•å‚æ•°çš„æ¯ä¸€ä¸ªå€¼</li>
</ul></div>

<div class="component-content pagebody component">
  <h3 id="1handleradapter" class="pagebody-header">
    1ã€HandlerAdapter
  </h3>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-19d6a0d1b79d1030ef4516285a63796a" id="lht19d6a0d1b79d1030ef4516285a63796a">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/22.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">0 - æ”¯æŒæ–¹æ³•ä¸Šæ ‡æ³¨@RequestMapping</p>
<p class="component-content component">1 - æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„</p>
<p class="component-content component">xxxxxx</p>

<div class="component-content pagebody component">
  <h3 id="2æ‰§è¡Œç›®æ ‡æ–¹æ³•" class="pagebody-header">
    2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Actually invoke the handler.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//DispatcherServlet -- doDispatch
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>mv <span style="color:#f92672">=</span> ha<span style="color:#f92672">.</span><span style="color:#a6e22e">handle</span><span style="color:#f92672">(</span>processedRequest<span style="color:#f92672">,</span> response<span style="color:#f92672">,</span> mappedHandler<span style="color:#f92672">.</span><span style="color:#a6e22e">getHandler</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>mav <span style="color:#f92672">=</span> invokeHandlerMethod<span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> response<span style="color:#f92672">,</span> handlerMethod<span style="color:#f92672">);</span> <span style="color:#75715e">//æ‰§è¡Œç›®æ ‡æ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//ServletInvocableHandlerMethod
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Object returnValue <span style="color:#f92672">=</span> invokeForRequest<span style="color:#f92672">(</span>webRequest<span style="color:#f92672">,</span> mavContainer<span style="color:#f92672">,</span> providedArgs<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//è·å–æ–¹æ³•çš„å‚æ•°å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Object<span style="color:#f92672">[]</span> args <span style="color:#f92672">=</span> getMethodArgumentValues<span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> mavContainer<span style="color:#f92672">,</span> providedArgs<span style="color:#f92672">);</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="3å‚æ•°è§£æå™¨-handlermethodargumentresolver" class="pagebody-header">
    3ã€å‚æ•°è§£æå™¨-HandlerMethodArgumentResolver
  </h3>
</div><p class="component-content component">ç¡®å®šå°†è¦æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•çš„æ¯ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯ä»€ä¹ˆ;</p>
<p class="component-content component">SpringMVCç›®æ ‡æ–¹æ³•èƒ½å†™å¤šå°‘ç§å‚æ•°ç±»å‹ã€‚å–å†³äºå‚æ•°è§£æå™¨ã€‚</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-df9f05a3a8b1d8755240bdc26f6821ae" id="lhtdf9f05a3a8b1d8755240bdc26f6821ae">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/23.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-1d648ecf2ce7c1a18ad9e950648a63ad" id="lht1d648ecf2ce7c1a18ad9e950648a63ad">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/24.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>å½“å‰è§£æå™¨æ˜¯å¦æ”¯æŒè§£æè¿™ç§å‚æ•°</li>
<li>æ”¯æŒå°±è°ƒç”¨ resolveArgument</li>
</ul></div>

<div class="component-content pagebody component">
  <h3 id="4è¿”å›å€¼å¤„ç†å™¨" class="pagebody-header">
    4ã€è¿”å›å€¼å¤„ç†å™¨
  </h3>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-4bfdd9b929b1338eee23d56c4ba623fa" id="lht4bfdd9b929b1338eee23d56c4ba623fa">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/25.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="5å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼" class="pagebody-header">
    5ã€å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">============</span>InvocableHandlerMethod<span style="color:#f92672">==========================</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">protected</span> Object<span style="color:#f92672">[]</span> <span style="color:#a6e22e">getMethodArgumentValues</span><span style="color:#f92672">(</span>NativeWebRequest request<span style="color:#f92672">,</span> <span style="color:#a6e22e">@Nullable</span> ModelAndViewContainer mavContainer<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>            Object<span style="color:#f92672">...</span> providedArgs<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        MethodParameter<span style="color:#f92672">[]</span> parameters <span style="color:#f92672">=</span> getMethodParameters<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ObjectUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">(</span>parameters<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> EMPTY_ARGS<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Object<span style="color:#f92672">[]</span> args <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Object<span style="color:#f92672">[</span>parameters<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> parameters<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            MethodParameter parameter <span style="color:#f92672">=</span> parameters<span style="color:#f92672">[</span>i<span style="color:#f92672">];</span>
</span></span><span style="display:flex;"><span>            parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">initParameterNameDiscovery</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">parameterNameDiscoverer</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            args<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> findProvidedArgument<span style="color:#f92672">(</span>parameter<span style="color:#f92672">,</span> providedArgs<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>args<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">resolvers</span><span style="color:#f92672">.</span><span style="color:#a6e22e">supportsParameter</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalStateException<span style="color:#f92672">(</span>formatArgumentError<span style="color:#f92672">(</span>parameter<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;No suitable resolver&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                args<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">resolvers</span><span style="color:#f92672">.</span><span style="color:#a6e22e">resolveArgument</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">,</span> mavContainer<span style="color:#f92672">,</span> request<span style="color:#f92672">,</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">dataBinderFactory</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception ex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Leave stack trace for later, exception may actually be resolved and handled...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>logger<span style="color:#f92672">.</span><span style="color:#a6e22e">isDebugEnabled</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    String exMsg <span style="color:#f92672">=</span> ex<span style="color:#f92672">.</span><span style="color:#a6e22e">getMessage</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>exMsg <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>exMsg<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">getExecutable</span><span style="color:#f92672">().</span><span style="color:#a6e22e">toGenericString</span><span style="color:#f92672">()))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        logger<span style="color:#f92672">.</span><span style="color:#a6e22e">debug</span><span style="color:#f92672">(</span>formatArgumentError<span style="color:#f92672">(</span>parameter<span style="color:#f92672">,</span> exMsg<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">throw</span> ex<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> args<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="51æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°" class="pagebody-header">
    5.1ã€æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°
  </h4>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#a6e22e">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> HandlerMethodArgumentResolver <span style="color:#a6e22e">getArgumentResolver</span><span style="color:#f92672">(</span>MethodParameter parameter<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        HandlerMethodArgumentResolver result <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">argumentResolverCache</span><span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>result <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>HandlerMethodArgumentResolver resolver <span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">argumentResolvers</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>resolver<span style="color:#f92672">.</span><span style="color:#a6e22e">supportsParameter</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    result <span style="color:#f92672">=</span> resolver<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">argumentResolverCache</span><span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">,</span> result<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="52è§£æè¿™ä¸ªå‚æ•°çš„å€¼" class="pagebody-header">
    5.2ã€è§£æè¿™ä¸ªå‚æ•°çš„å€¼
  </h4>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>è°ƒç”¨å„è‡ª HandlerMethodArgumentResolver çš„ resolveArgument æ–¹æ³•å³å¯</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="53è‡ªå®šä¹‰ç±»å‹å‚æ•°-å°è£…pojo" class="pagebody-header">
    5.3ã€è‡ªå®šä¹‰ç±»å‹å‚æ•° å°è£…POJO
  </h4>
</div><p class="component-content component"><strong>ServletModelAttributeMethodProcessor  è¿™ä¸ªå‚æ•°å¤„ç†å™¨æ”¯æŒ</strong></p>
<p class="component-content component"><strong>æ˜¯å¦ä¸ºç®€å•ç±»å‹ã€‚</strong></p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isSimpleValueType</span><span style="color:#f92672">(</span>Class<span style="color:#f92672">&lt;?&gt;</span> type<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>Void<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">!=</span> type <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">.</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">!=</span> type <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">(</span>ClassUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">isPrimitiveOrWrapper</span><span style="color:#f92672">(</span>type<span style="color:#f92672">)</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                Enum<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isAssignableFrom</span><span style="color:#f92672">(</span>type<span style="color:#f92672">)</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                CharSequence<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isAssignableFrom</span><span style="color:#f92672">(</span>type<span style="color:#f92672">)</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                Number<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isAssignableFrom</span><span style="color:#f92672">(</span>type<span style="color:#f92672">)</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                Date<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isAssignableFrom</span><span style="color:#f92672">(</span>type<span style="color:#f92672">)</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                Temporal<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">.</span><span style="color:#a6e22e">isAssignableFrom</span><span style="color:#f92672">(</span>type<span style="color:#f92672">)</span> <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                URI<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">==</span> type <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                URL<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">==</span> type <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                Locale<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">==</span> type <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>                Class<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span> <span style="color:#f92672">==</span> type<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> Object <span style="color:#a6e22e">resolveArgument</span><span style="color:#f92672">(</span>MethodParameter parameter<span style="color:#f92672">,</span> <span style="color:#a6e22e">@Nullable</span> ModelAndViewContainer mavContainer<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>            NativeWebRequest webRequest<span style="color:#f92672">,</span> <span style="color:#a6e22e">@Nullable</span> WebDataBinderFactory binderFactory<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Assert<span style="color:#f92672">.</span><span style="color:#a6e22e">state</span><span style="color:#f92672">(</span>mavContainer <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;ModelAttributeMethodProcessor requires ModelAndViewContainer&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        Assert<span style="color:#f92672">.</span><span style="color:#a6e22e">state</span><span style="color:#f92672">(</span>binderFactory <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;ModelAttributeMethodProcessor requires WebDataBinderFactory&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String name <span style="color:#f92672">=</span> ModelFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">getNameForParameter</span><span style="color:#f92672">(</span>parameter<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        ModelAttribute ann <span style="color:#f92672">=</span> parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameterAnnotation</span><span style="color:#f92672">(</span>ModelAttribute<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>ann <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">setBinding</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> ann<span style="color:#f92672">.</span><span style="color:#a6e22e">binding</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Object attribute <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        BindingResult bindingResult <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">containsAttribute</span><span style="color:#f92672">(</span>name<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            attribute <span style="color:#f92672">=</span> mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">getModel</span><span style="color:#f92672">().</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Create attribute instance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                attribute <span style="color:#f92672">=</span> createAttribute<span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> parameter<span style="color:#f92672">,</span> binderFactory<span style="color:#f92672">,</span> webRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>BindException ex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>isBindExceptionRequired<span style="color:#f92672">(</span>parameter<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">// No BindingResult parameter -&gt; fail with BindException
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">throw</span> ex<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// Otherwise, expose null/empty value and associated BindingResult
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameterType</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> Optional<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    attribute <span style="color:#f92672">=</span> Optional<span style="color:#f92672">.</span><span style="color:#a6e22e">empty</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                bindingResult <span style="color:#f92672">=</span> ex<span style="color:#f92672">.</span><span style="color:#a6e22e">getBindingResult</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>bindingResult <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Bean property binding and validation;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#75715e">// skipped in case of binding failure on construction.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            WebDataBinder binder <span style="color:#f92672">=</span> binderFactory<span style="color:#f92672">.</span><span style="color:#a6e22e">createBinder</span><span style="color:#f92672">(</span>webRequest<span style="color:#f92672">,</span> attribute<span style="color:#f92672">,</span> name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>binder<span style="color:#f92672">.</span><span style="color:#a6e22e">getTarget</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">isBindingDisabled</span><span style="color:#f92672">(</span>name<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    bindRequestParameters<span style="color:#f92672">(</span>binder<span style="color:#f92672">,</span> webRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                validateIfApplicable<span style="color:#f92672">(</span>binder<span style="color:#f92672">,</span> parameter<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>binder<span style="color:#f92672">.</span><span style="color:#a6e22e">getBindingResult</span><span style="color:#f92672">().</span><span style="color:#a6e22e">hasErrors</span><span style="color:#f92672">()</span> <span style="color:#f92672">&amp;&amp;</span> isBindExceptionRequired<span style="color:#f92672">(</span>binder<span style="color:#f92672">,</span> parameter<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> BindException<span style="color:#f92672">(</span>binder<span style="color:#f92672">.</span><span style="color:#a6e22e">getBindingResult</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Value type adaptation, also covering java.util.Optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(!</span>parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameterType</span><span style="color:#f92672">().</span><span style="color:#a6e22e">isInstance</span><span style="color:#f92672">(</span>attribute<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                attribute <span style="color:#f92672">=</span> binder<span style="color:#f92672">.</span><span style="color:#a6e22e">convertIfNecessary</span><span style="color:#f92672">(</span>binder<span style="color:#f92672">.</span><span style="color:#a6e22e">getTarget</span><span style="color:#f92672">(),</span> parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameterType</span><span style="color:#f92672">(),</span> parameter<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            bindingResult <span style="color:#f92672">=</span> binder<span style="color:#f92672">.</span><span style="color:#a6e22e">getBindingResult</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Add resolved attribute and BindingResult at the end of the model
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> bindingResultModel <span style="color:#f92672">=</span> bindingResult<span style="color:#f92672">.</span><span style="color:#a6e22e">getModel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">removeAttributes</span><span style="color:#f92672">(</span>bindingResultModel<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">addAllAttributes</span><span style="color:#f92672">(</span>bindingResultModel<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> attribute<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="heading" class="pagebody-header">
    
  </h3>
</div><p class="component-content component"><strong>WebDataBinder binder = binderFactory.createBinder(webRequest, attribute, name);</strong></p>
<p class="component-content component"><strong>WebDataBinder :webæ•°æ®ç»‘å®šå™¨ï¼Œå°†è¯·æ±‚å‚æ•°çš„å€¼ç»‘å®šåˆ°æŒ‡å®šçš„JavaBeané‡Œé¢</strong></p>
<p class="component-content component"><strong>WebDataBinder åˆ©ç”¨å®ƒé‡Œé¢çš„ Converters å°†è¯·æ±‚æ•°æ®è½¬æˆæŒ‡å®šçš„æ•°æ®ç±»å‹ã€‚å†æ¬¡å°è£…åˆ°JavaBeanä¸­</strong></p>
<p class="component-content component">**
**</p>
<p class="component-content component"><strong>GenericConversionServiceï¼šåœ¨è®¾ç½®æ¯ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œæ‰¾å®ƒé‡Œé¢çš„æ‰€æœ‰converteré‚£ä¸ªå¯ä»¥å°†è¿™ä¸ªæ•°æ®ç±»å‹ï¼ˆrequestå¸¦æ¥å‚æ•°çš„å­—ç¬¦ä¸²ï¼‰è½¬æ¢åˆ°æŒ‡å®šçš„ç±»å‹ï¼ˆJavaBean &ndash; Integerï¼‰</strong></p>
<p class="component-content component"><strong>byte &ndash; &gt; file</strong></p>
<p class="component-content component">**
**</p>
<p class="component-content component">@FunctionalInterface<strong>public interface</strong> Converter&lt;S, T&gt;</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-fe9b35a17d448e51b7e7c030c453fb5e" id="lhtfe9b35a17d448e51b7e7c030c453fb5e">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/26.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-03e9665be3c85db84bf1b64ca22beb86" id="lht03e9665be3c85db84bf1b64ca22beb86">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/27.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">æœªæ¥æˆ‘ä»¬å¯ä»¥ç»™WebDataBinderé‡Œé¢æ”¾è‡ªå·±çš„Converterï¼›</p>
<p class="component-content component"><strong>private static final class</strong> StringToNumber&lt;T <strong>extends</strong> Number&gt; <strong>implements</strong> Converter&lt;String, T&gt;</p>
<p class="component-content component">è‡ªå®šä¹‰ Converter</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#75715e">//1ã€WebMvcConfigurerå®šåˆ¶åŒ–SpringMVCçš„åŠŸèƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> WebMvcConfigurer <span style="color:#a6e22e">webMvcConfigurer</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> WebMvcConfigurer<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">configurePathMatch</span><span style="color:#f92672">(</span>PathMatchConfigurer configurer<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                UrlPathHelper urlPathHelper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> UrlPathHelper<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// ä¸ç§»é™¤ï¼›åé¢çš„å†…å®¹ã€‚çŸ©é˜µå˜é‡åŠŸèƒ½å°±å¯ä»¥ç”Ÿæ•ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                urlPathHelper<span style="color:#f92672">.</span><span style="color:#a6e22e">setRemoveSemicolonContent</span><span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                configurer<span style="color:#f92672">.</span><span style="color:#a6e22e">setUrlPathHelper</span><span style="color:#f92672">(</span>urlPathHelper<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addFormatters</span><span style="color:#f92672">(</span>FormatterRegistry registry<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                registry<span style="color:#f92672">.</span><span style="color:#a6e22e">addConverter</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> Converter<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Pet<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">public</span> Pet <span style="color:#a6e22e">convert</span><span style="color:#f92672">(</span>String source<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e">// å•ŠçŒ«,3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                        <span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>StringUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">(</span>source<span style="color:#f92672">)){</span>
</span></span><span style="display:flex;"><span>                            Pet pet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Pet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                            String<span style="color:#f92672">[]</span> split <span style="color:#f92672">=</span> source<span style="color:#f92672">.</span><span style="color:#a6e22e">split</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>                            pet<span style="color:#f92672">.</span><span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span>split<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672">]);</span>
</span></span><span style="display:flex;"><span>                            pet<span style="color:#f92672">.</span><span style="color:#a6e22e">setAge</span><span style="color:#f92672">(</span>Integer<span style="color:#f92672">.</span><span style="color:#a6e22e">parseInt</span><span style="color:#f92672">(</span>split<span style="color:#f92672">[</span><span style="color:#ae81ff">1</span><span style="color:#f92672">]));</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">return</span> pet<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">});</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="6ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ" class="pagebody-header">
    6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆ
  </h3>
</div><p class="component-content component">å°†æ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨ <strong>ModelAndViewContainer</strong>ï¼›åŒ…å«è¦å»çš„é¡µé¢åœ°å€Viewã€‚è¿˜åŒ…å«Modelæ•°æ®ã€‚</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-ffe3726cfd4cdc84b0afcc2786c57044" id="lhtffe3726cfd4cdc84b0afcc2786c57044">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/28.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="7å¤„ç†æ´¾å‘ç»“æœ" class="pagebody-header">
    7ã€å¤„ç†æ´¾å‘ç»“æœ
  </h3>
</div><p class="component-content component"><strong>processDispatchResult</strong>(processedRequest, response, mappedHandler, mv, dispatchException);</p>
<p class="component-content component">renderMergedOutputModel(mergedModel, getRequestToExpose(request), response);</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>InternalResourceView<span style="color:#960050;background-color:#1e0010">ï¼š</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">renderMergedOutputModel</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>            Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> model<span style="color:#f92672">,</span> HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Expose the model object as request attributes.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        exposeModelAsRequestAttributes<span style="color:#f92672">(</span>model<span style="color:#f92672">,</span> request<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Expose helpers as request attributes, if any.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        exposeHelpers<span style="color:#f92672">(</span>request<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Determine the path for the request dispatcher.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        String dispatcherPath <span style="color:#f92672">=</span> prepareForRendering<span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> response<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Obtain a RequestDispatcher for the target resource (typically a JSP).
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        RequestDispatcher rd <span style="color:#f92672">=</span> getRequestDispatcher<span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> dispatcherPath<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>rd <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> ServletException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Could not get RequestDispatcher for [&#34;</span> <span style="color:#f92672">+</span> getUrl<span style="color:#f92672">()</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;]: Check that the corresponding file exists within your web application archive!&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// If already included or response already committed, perform include, else forward.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>useInclude<span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> response<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            response<span style="color:#f92672">.</span><span style="color:#a6e22e">setContentType</span><span style="color:#f92672">(</span>getContentType<span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>logger<span style="color:#f92672">.</span><span style="color:#a6e22e">isDebugEnabled</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                logger<span style="color:#f92672">.</span><span style="color:#a6e22e">debug</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Including [&#34;</span> <span style="color:#f92672">+</span> getUrl<span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            rd<span style="color:#f92672">.</span><span style="color:#a6e22e">include</span><span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> response<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Note: The forwarded resource is supposed to determine the content type itself.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>logger<span style="color:#f92672">.</span><span style="color:#a6e22e">isDebugEnabled</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                logger<span style="color:#f92672">.</span><span style="color:#a6e22e">debug</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Forwarding to [&#34;</span> <span style="color:#f92672">+</span> getUrl<span style="color:#f92672">()</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;]&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            rd<span style="color:#f92672">.</span><span style="color:#a6e22e">forward</span><span style="color:#f92672">(</span>request<span style="color:#f92672">,</span> response<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="heading-1" class="pagebody-header">
    
  </h1>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>æš´éœ²æ¨¡å‹ä½œä¸ºè¯·æ±‚åŸŸå±æ€§
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Expose the model object as request attributes.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        exposeModelAsRequestAttributes<span style="color:#f92672">(</span>model<span style="color:#f92672">,</span> request<span style="color:#f92672">);</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="heading-2" class="pagebody-header">
    
  </h1>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">exposeModelAsRequestAttributes</span><span style="color:#f92672">(</span>Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> model<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>            HttpServletRequest request<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//modelä¸­çš„æ‰€æœ‰æ•°æ®éå†æŒ¨ä¸ªæ”¾åœ¨è¯·æ±‚åŸŸä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        model<span style="color:#f92672">.</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">((</span>name<span style="color:#f92672">,</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>value <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                request<span style="color:#f92672">.</span><span style="color:#a6e22e">setAttribute</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                request<span style="color:#f92672">.</span><span style="color:#a6e22e">removeAttribute</span><span style="color:#f92672">(</span>name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">});</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="4æ•°æ®å“åº”ä¸å†…å®¹åå•†" class="pagebody-header">
    4ã€æ•°æ®å“åº”ä¸å†…å®¹åå•†
  </h1>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b5f45be29fcd7421ddc9ab1ad2727012" id="lhtb5f45be29fcd7421ddc9ab1ad2727012">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/29.jpg" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="1å“åº”json" class="pagebody-header">
    1ã€å“åº”JSON
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="11jacksonjarresponsebody" class="pagebody-header">
    1.1ã€jackson.jar+@ResponseBody
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>        <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>webåœºæ™¯è‡ªåŠ¨å¼•å…¥äº†jsonåœºæ™¯
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-json<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;version&gt;</span>2.3.4.RELEASE<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;scope&gt;</span>compile<span style="color:#f92672">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-cd27b4021f67721af595f5ec0872245b" id="lhtcd27b4021f67721af595f5ec0872245b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/30.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">ç»™å‰ç«¯è‡ªåŠ¨è¿”å›jsonæ•°æ®ï¼›</p>

<div class="component-content pagebody component">
  <h4 id="1è¿”å›å€¼è§£æå™¨" class="pagebody-header">
    1ã€è¿”å›å€¼è§£æå™¨
  </h4>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-9e44e29594bc30cb5881179dcbc1636b" id="lht9e44e29594bc30cb5881179dcbc1636b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/31.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">returnValueHandlers</span><span style="color:#f92672">.</span><span style="color:#a6e22e">handleReturnValue</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>					returnValue<span style="color:#f92672">,</span> getReturnValueType<span style="color:#f92672">(</span>returnValue<span style="color:#f92672">),</span> mavContainer<span style="color:#f92672">,</span> webRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleReturnValue</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Nullable</span> Object returnValue<span style="color:#f92672">,</span> MethodParameter returnType<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>			ModelAndViewContainer mavContainer<span style="color:#f92672">,</span> NativeWebRequest webRequest<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		HandlerMethodReturnValueHandler handler <span style="color:#f92672">=</span> selectHandler<span style="color:#f92672">(</span>returnValue<span style="color:#f92672">,</span> returnType<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>handler <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalArgumentException<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Unknown return value type: &#34;</span> <span style="color:#f92672">+</span> returnType<span style="color:#f92672">.</span><span style="color:#a6e22e">getParameterType</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getName</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>		handler<span style="color:#f92672">.</span><span style="color:#a6e22e">handleReturnValue</span><span style="color:#f92672">(</span>returnValue<span style="color:#f92672">,</span> returnType<span style="color:#f92672">,</span> mavContainer<span style="color:#f92672">,</span> webRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>RequestResponseBodyMethodProcessor  	
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handleReturnValue</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@Nullable</span> Object returnValue<span style="color:#f92672">,</span> MethodParameter returnType<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>			ModelAndViewContainer mavContainer<span style="color:#f92672">,</span> NativeWebRequest webRequest<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">throws</span> IOException<span style="color:#f92672">,</span> HttpMediaTypeNotAcceptableException<span style="color:#f92672">,</span> HttpMessageNotWritableException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		mavContainer<span style="color:#f92672">.</span><span style="color:#a6e22e">setRequestHandled</span><span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		ServletServerHttpRequest inputMessage <span style="color:#f92672">=</span> createInputMessage<span style="color:#f92672">(</span>webRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>		ServletServerHttpResponse outputMessage <span style="color:#f92672">=</span> createOutputMessage<span style="color:#f92672">(</span>webRequest<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Try even with null return value. ResponseBodyAdvice could get involved.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// ä½¿ç”¨æ¶ˆæ¯è½¬æ¢å™¨è¿›è¡Œå†™å‡ºæ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		writeWithMessageConverters<span style="color:#f92672">(</span>returnValue<span style="color:#f92672">,</span> returnType<span style="color:#f92672">,</span> inputMessage<span style="color:#f92672">,</span> outputMessage<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="2è¿”å›å€¼è§£æå™¨åŸç†" class="pagebody-header">
    2ã€è¿”å›å€¼è§£æå™¨åŸç†
  </h4>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b7c8d378d02b719820930307b42fd752" id="lhtb7c8d378d02b719820930307b42fd752">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/32.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>
<p class="component-content component">1ã€è¿”å›å€¼å¤„ç†å™¨åˆ¤æ–­æ˜¯å¦æ”¯æŒè¿™ç§ç±»å‹è¿”å›å€¼ supportsReturnType</p>
</li>
<li>
<p class="component-content component">2ã€è¿”å›å€¼å¤„ç†å™¨è°ƒç”¨ handleReturnValue è¿›è¡Œå¤„ç†</p>
</li>
<li>
<p class="component-content component">3ã€RequestResponseBodyMethodProcessor å¯ä»¥å¤„ç†è¿”å›å€¼æ ‡äº†@ResponseBody æ³¨è§£çš„ã€‚</p>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ol>
<li>åˆ©ç”¨ MessageConverters è¿›è¡Œå¤„ç† å°†æ•°æ®å†™ä¸ºjson</li>
</ol></div>
</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>1ã€å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</li>
<li>2ã€æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®ï¼Œ</li>
<li>3ã€SpringMVCä¼šæŒ¨ä¸ªéå†æ‰€æœ‰å®¹å™¨åº•å±‚çš„ HttpMessageConverter ï¼Œçœ‹è°èƒ½å¤„ç†ï¼Ÿ</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>1ã€å¾—åˆ°MappingJackson2HttpMessageConverterå¯ä»¥å°†å¯¹è±¡å†™ä¸ºjson</li>
<li>2ã€åˆ©ç”¨MappingJackson2HttpMessageConverterå°†å¯¹è±¡è½¬ä¸ºjsonå†å†™å‡ºå»ã€‚</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-8aac672862a2987bbf33ba14944c2d5e" id="lht8aac672862a2987bbf33ba14944c2d5e">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/33.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="12springmvcåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼" class="pagebody-header">
    1.2ã€SpringMVCåˆ°åº•æ”¯æŒå“ªäº›è¿”å›å€¼
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ModelAndView
</span></span><span style="display:flex;"><span>Model
</span></span><span style="display:flex;"><span>View
</span></span><span style="display:flex;"><span>ResponseEntity 
</span></span><span style="display:flex;"><span>ResponseBodyEmitter
</span></span><span style="display:flex;"><span>StreamingResponseBody
</span></span><span style="display:flex;"><span>HttpEntity
</span></span><span style="display:flex;"><span>HttpHeaders
</span></span><span style="display:flex;"><span>Callable
</span></span><span style="display:flex;"><span>DeferredResult
</span></span><span style="display:flex;"><span>ListenableFuture
</span></span><span style="display:flex;"><span>CompletionStage
</span></span><span style="display:flex;"><span>WebAsyncTask
</span></span><span style="display:flex;"><span>æœ‰ <span style="color:#a6e22e">@ModelAttribute</span> ä¸”ä¸ºå¯¹è±¡ç±»å‹çš„
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@ResponseBody</span> æ³¨è§£ <span style="color:#f92672">---&gt;</span> RequestResponseBodyMethodProcessor<span style="color:#960050;background-color:#1e0010">ï¼›</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="13httpmessageconverteråŸç†" class="pagebody-header">
    1.3ã€HTTPMessageConverteråŸç†
  </h3>
</div>
<div class="component-content pagebody component">
  <h4 id="1messageconverterè§„èŒƒ" class="pagebody-header">
    1ã€MessageConverterè§„èŒƒ
  </h4>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-2d405bd64255dc148846928036caa9dd" id="lht2d405bd64255dc148846928036caa9dd">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/34.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">HttpMessageConverter: çœ‹æ˜¯å¦æ”¯æŒå°† æ­¤ Classç±»å‹çš„å¯¹è±¡ï¼Œè½¬ä¸ºMediaTypeç±»å‹çš„æ•°æ®ã€‚</p>
<p class="component-content component">ä¾‹å­ï¼šPersonå¯¹è±¡è½¬ä¸ºJSONã€‚æˆ–è€… JSONè½¬ä¸ºPerson</p>

<div class="component-content pagebody component">
  <h4 id="2é»˜è®¤çš„messageconverter" class="pagebody-header">
    2ã€é»˜è®¤çš„MessageConverter
  </h4>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-41c13e48bfef5cf88b52c0aa2139b54f" id="lht41c13e48bfef5cf88b52c0aa2139b54f">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/35.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">0 - åªæ”¯æŒByteç±»å‹çš„</p>
<p class="component-content component">1 - String</p>
<p class="component-content component">2 - String</p>
<p class="component-content component">3 - Resource</p>
<p class="component-content component">4 - ResourceRegion</p>
<p class="component-content component">5 - DOMSource.*<em>class *</em> SAXSource.<strong>class</strong>) \ StAXSource.**class **StreamSource.**class **Source.<strong>class</strong></p>
<p class="component-content component"><strong>6 -</strong> MultiValueMap</p>
<p class="component-content component">7 - <strong>true</strong></p>
<p class="component-content component"><strong>8 - true</strong></p>
<p class="component-content component"><strong>9 - æ”¯æŒæ³¨è§£æ–¹å¼xmlå¤„ç†çš„ã€‚</strong></p>
<p class="component-content component">æœ€ç»ˆ MappingJackson2HttpMessageConverter  æŠŠå¯¹è±¡è½¬ä¸ºJSONï¼ˆåˆ©ç”¨åº•å±‚çš„jacksonçš„objectMapperè½¬æ¢çš„ï¼‰</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0053b26ebce43df74287aac7fe7a13aa" id="lht0053b26ebce43df74287aac7fe7a13aa">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/36.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="2å†…å®¹åå•†" class="pagebody-header">
    2ã€å†…å®¹åå•†
  </h2>
</div><p class="component-content component">æ ¹æ®å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›ä¸åŒï¼Œè¿”å›ä¸åŒåª’ä½“ç±»å‹çš„æ•°æ®ã€‚</p>

<div class="component-content pagebody component">
  <h3 id="1å¼•å…¥xmlä¾èµ–" class="pagebody-header">
    1ã€å¼•å…¥xmlä¾èµ–
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span> <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;groupId&gt;</span>com.fasterxml.jackson.dataformat<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;artifactId&gt;</span>jackson-dataformat-xml<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="2postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml" class="pagebody-header">
    2ã€postmanåˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxml
  </h3>
</div><p class="component-content component">åªéœ€è¦æ”¹å˜è¯·æ±‚å¤´ä¸­Acceptå­—æ®µã€‚Httpåè®®ä¸­è§„å®šçš„ï¼Œå‘Šè¯‰æœåŠ¡å™¨æœ¬å®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„æ•°æ®ç±»å‹ã€‚</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-d35e434d0c982db924ece724baa1967c" id="lhtd35e434d0c982db924ece724baa1967c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/37.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="3å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½" class="pagebody-header">
    3ã€å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½
  </h3>
</div><p class="component-content component">ä¸ºäº†æ–¹ä¾¿å†…å®¹åå•†ï¼Œå¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">spring</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">contentnegotiation</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">favor-parameter</span>: <span style="color:#66d9ef">true</span>  <span style="color:#75715e">#å¼€å¯è¯·æ±‚å‚æ•°å†…å®¹åå•†æ¨¡å¼</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">å‘è¯·æ±‚ï¼š http://localhost:8080/test/person?format=json</p>
<p class="component-content component"><a href="http://localhost:8080/test/person?format=json">http://localhost:8080/test/person?format=</a>xml</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-857e8dca5bdf5a4813b36bfc6359cbbb" id="lht857e8dca5bdf5a4813b36bfc6359cbbb">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/38.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">ç¡®å®šå®¢æˆ·ç«¯æ¥æ”¶ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼›</p>
<p class="component-content component">1ã€Parameterç­–ç•¥ä¼˜å…ˆç¡®å®šæ˜¯è¦è¿”å›jsonæ•°æ®ï¼ˆè·å–è¯·æ±‚å¤´ä¸­çš„formatçš„å€¼ï¼‰</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-127ef76533ff1bc9ce56bbe7ef0711ef" id="lht127ef76533ff1bc9ce56bbe7ef0711ef">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/39.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">2ã€æœ€ç»ˆè¿›è¡Œå†…å®¹åå•†è¿”å›ç»™å®¢æˆ·ç«¯jsonå³å¯ã€‚</p>

<div class="component-content pagebody component">
  <h3 id="4å†…å®¹åå•†åŸç†" class="pagebody-header">
    4ã€å†…å®¹åå•†åŸç†
  </h3>
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">1ã€åˆ¤æ–­å½“å‰å“åº”å¤´ä¸­æ˜¯å¦å·²ç»æœ‰ç¡®å®šçš„åª’ä½“ç±»å‹ã€‚MediaType</p>
</li>
<li>
<p class="component-content component"><strong>2ã€è·å–å®¢æˆ·ç«¯ï¼ˆPostManã€æµè§ˆå™¨ï¼‰æ”¯æŒæ¥æ”¶çš„å†…å®¹ç±»å‹ã€‚ï¼ˆè·å–å®¢æˆ·ç«¯Acceptè¯·æ±‚å¤´å­—æ®µï¼‰ã€application/xmlã€‘</strong></p>
</li>
<li>
<div class="component-content component"><ul>
<li><strong>contentNegotiationManager å†…å®¹åå•†ç®¡ç†å™¨ é»˜è®¤ä½¿ç”¨åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</strong></li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-db0dee89cf94157b6431dfb17c06bcb6" id="lhtdb0dee89cf94157b6431dfb17c06bcb6">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/40.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li></li>
<li><strong>HeaderContentNegotiationStrategy  ç¡®å®šå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„å†…å®¹ç±»å‹</strong></li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-225edaa80e9978e26523799427ad02d9" id="lht225edaa80e9978e26523799427ad02d9">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/41.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">3ã€éå†å¾ªç¯æ‰€æœ‰å½“å‰ç³»ç»Ÿçš„ <strong>MessageConverter</strong>ï¼Œçœ‹è°æ”¯æŒæ“ä½œè¿™ä¸ªå¯¹è±¡ï¼ˆPersonï¼‰</p>
<p class="component-content component">4ã€æ‰¾åˆ°æ”¯æŒæ“ä½œPersonçš„converterï¼ŒæŠŠconverteræ”¯æŒçš„åª’ä½“ç±»å‹ç»Ÿè®¡å‡ºæ¥ã€‚</p>
<p class="component-content component">5ã€å®¢æˆ·ç«¯éœ€è¦ã€application/xmlã€‘ã€‚æœåŠ¡ç«¯èƒ½åŠ›ã€10ç§ã€jsonã€xmlã€‘</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f6bc24f9da7e2ca668d05aef8f06bfa1" id="lhtf6bc24f9da7e2ca668d05aef8f06bfa1">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/42.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-36f944b980a44e0bde08575a7686d51a" id="lht36f944b980a44e0bde08575a7686d51a">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/43.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">6ã€è¿›è¡Œå†…å®¹åå•†çš„æœ€ä½³åŒ¹é…åª’ä½“ç±»å‹</p>
<p class="component-content component">7ã€ç”¨ æ”¯æŒ å°†å¯¹è±¡è½¬ä¸º æœ€ä½³åŒ¹é…åª’ä½“ç±»å‹ çš„converterã€‚è°ƒç”¨å®ƒè¿›è¡Œè½¬åŒ– ã€‚</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3ade8ad9674722fc62694712b7d9ae2c" id="lht3ade8ad9674722fc62694712b7d9ae2c">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/44.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">å¯¼å…¥äº†jacksonå¤„ç†xmlçš„åŒ…ï¼Œxmlçš„converterå°±ä¼šè‡ªåŠ¨è¿›æ¥</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>WebMvcConfigurationSupport
</span></span><span style="display:flex;"><span>jackson2XmlPresent <span style="color:#f92672">=</span> ClassUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">isPresent</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.fasterxml.jackson.dataformat.xml.XmlMapper&#34;</span><span style="color:#f92672">,</span> classLoader<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>jackson2XmlPresent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            Jackson2ObjectMapperBuilder builder <span style="color:#f92672">=</span> Jackson2ObjectMapperBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">xml</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">applicationContext</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                builder<span style="color:#f92672">.</span><span style="color:#a6e22e">applicationContext</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">applicationContext</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            messageConverters<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> MappingJackson2XmlHttpMessageConverter<span style="color:#f92672">(</span>builder<span style="color:#f92672">.</span><span style="color:#a6e22e">build</span><span style="color:#f92672">()));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="5è‡ªå®šä¹‰-messageconverter" class="pagebody-header">
    5ã€è‡ªå®šä¹‰ MessageConverter
  </h3>
</div><p class="component-content component"><strong>å®ç°å¤šåè®®æ•°æ®å…¼å®¹ã€‚jsonã€xmlã€x-guigu</strong></p>
<p class="component-content component"><strong>0ã€</strong>@ResponseBody å“åº”æ•°æ®å‡ºå» è°ƒç”¨ <strong>RequestResponseBodyMethodProcessor</strong> å¤„ç†</p>
<p class="component-content component">1ã€Processor å¤„ç†æ–¹æ³•è¿”å›å€¼ã€‚é€šè¿‡ <strong>MessageConverter</strong> å¤„ç†</p>
<p class="component-content component">2ã€æ‰€æœ‰ <strong>MessageConverter</strong> åˆèµ·æ¥å¯ä»¥æ”¯æŒå„ç§åª’ä½“ç±»å‹æ•°æ®çš„æ“ä½œï¼ˆè¯»ã€å†™ï¼‰</p>
<p class="component-content component">3ã€å†…å®¹åå•†æ‰¾åˆ°æœ€ç»ˆçš„ <strong>messageConverter</strong>ï¼›</p>
<p class="component-content component">SpringMVCçš„ä»€ä¹ˆåŠŸèƒ½ã€‚ä¸€ä¸ªå…¥å£ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ª  WebMvcConfigurer</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> WebMvcConfigurer <span style="color:#a6e22e">webMvcConfigurer</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> WebMvcConfigurer<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">extendMessageConverters</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>HttpMessageConverter<span style="color:#f92672">&lt;?&gt;&gt;</span> converters<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-c0eb89f97f6934391133d8a278624f4a" id="lhtc0eb89f97f6934391133d8a278624f4a">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/45.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-cb1fd8e8289385aabdb6eb56607e5907" id="lhtcb1fd8e8289385aabdb6eb56607e5907">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/46.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>æœ‰å¯èƒ½æˆ‘ä»¬æ·»åŠ çš„è‡ªå®šä¹‰çš„åŠŸèƒ½ä¼šè¦†ç›–é»˜è®¤å¾ˆå¤šåŠŸèƒ½ï¼Œå¯¼è‡´ä¸€äº›é»˜è®¤çš„åŠŸèƒ½å¤±æ•ˆã€‚</strong></p>
<p class="component-content component"><strong>å¤§å®¶è€ƒè™‘ï¼Œä¸Šè¿°åŠŸèƒ½é™¤äº†æˆ‘ä»¬å®Œå…¨è‡ªå®šä¹‰å¤–ï¼ŸSpringBootæœ‰æ²¡æœ‰ä¸ºæˆ‘ä»¬æä¾›åŸºäºé…ç½®æ–‡ä»¶çš„å¿«é€Ÿä¿®æ”¹åª’ä½“ç±»å‹åŠŸèƒ½ï¼Ÿæ€ä¹ˆé…ç½®å‘¢ï¼Ÿã€æç¤ºï¼šå‚ç…§SpringBootå®˜æ–¹æ–‡æ¡£webå¼€å‘å†…å®¹åå•†ç« èŠ‚ã€‘</strong></p>

<div class="component-content pagebody component">
  <h1 id="5è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“" class="pagebody-header">
    5ã€è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“
  </h1>
</div><p class="component-content component">è§†å›¾è§£æï¼š<strong>SpringBooté»˜è®¤ä¸æ”¯æŒ JSPï¼Œéœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡æ¿å¼•æ“æŠ€æœ¯å®ç°é¡µé¢æ¸²æŸ“ã€‚</strong></p>

<div class="component-content pagebody component">
  <h2 id="1è§†å›¾è§£æ" class="pagebody-header">
    1ã€è§†å›¾è§£æ
  </h2>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f8698099c47e3ad90b4ebb882a9e7162" id="lhtf8698099c47e3ad90b4ebb882a9e7162">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/47.jpg" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="1è§†å›¾è§£æåŸç†æµç¨‹" class="pagebody-header">
    1ã€è§†å›¾è§£æåŸç†æµç¨‹
  </h3>
</div><p class="component-content component">1ã€ç›®æ ‡æ–¹æ³•å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«æ”¾åœ¨ <strong>ModelAndViewContainer é‡Œé¢ã€‚åŒ…æ‹¬æ•°æ®å’Œè§†å›¾åœ°å€</strong></p>
<p class="component-content component"><strong>2ã€æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡ï¼ˆä»è¯·æ±‚å‚æ•°ä¸­ç¡®å®šçš„ï¼‰ï¼ŒæŠŠä»–é‡æ–°æ”¾åœ¨</strong> <strong>ModelAndViewContainer</strong></p>
<p class="component-content component"><strong>3ã€ä»»ä½•ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥åéƒ½ä¼šè¿”å› ModelAndViewï¼ˆ<strong><strong>æ•°æ®å’Œè§†å›¾åœ°å€</strong></strong>ï¼‰ã€‚</strong></p>
<p class="component-content component">**4ã€**<strong>processDispatchResult  å¤„ç†æ´¾å‘ç»“æœï¼ˆé¡µé¢æ”¹å¦‚ä½•å“åº”ï¼‰</strong></p>
<div class="component-content component"><ul>
<li>
<p class="component-content component">1ã€<strong>render</strong>(<strong>mv</strong>, request, response); è¿›è¡Œé¡µé¢æ¸²æŸ“é€»è¾‘</p>
</li>
<li>
<div class="component-content component"><ul>
<li>1ã€æ ¹æ®æ–¹æ³•çš„Stringè¿”å›å€¼å¾—åˆ° <strong>View</strong> å¯¹è±¡ã€å®šä¹‰äº†é¡µé¢çš„æ¸²æŸ“é€»è¾‘ã€‘</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>1ã€æ‰€æœ‰çš„è§†å›¾è§£æå™¨å°è¯•æ˜¯å¦èƒ½æ ¹æ®å½“å‰è¿”å›å€¼å¾—åˆ°<strong>View</strong>å¯¹è±¡</li>
<li>2ã€å¾—åˆ°äº† <strong>redirect:/main.html</strong> &ndash;&gt; Thymeleaf new <strong>RedirectView</strong>()</li>
<li>3ã€ContentNegotiationViewResolver é‡Œé¢åŒ…å«äº†ä¸‹é¢æ‰€æœ‰çš„è§†å›¾è§£æå™¨ï¼Œå†…éƒ¨è¿˜æ˜¯åˆ©ç”¨ä¸‹é¢æ‰€æœ‰è§†å›¾è§£æå™¨å¾—åˆ°è§†å›¾å¯¹è±¡ã€‚</li>
<li>4ã€view.render(mv.getModelInternal(), request, response);  è§†å›¾å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰çš„renderè¿›è¡Œé¡µé¢æ¸²æŸ“å·¥ä½œ</li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li><strong>RedirectView å¦‚ä½•æ¸²æŸ“ã€é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢ã€‘</strong></li>
<li><strong>1ã€è·å–ç›®æ ‡urlåœ°å€</strong></li>
<li>**2ã€**<strong>response.sendRedirect(encodedURL);</strong></li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component"><strong>è§†å›¾è§£æï¼š</strong></p>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li><strong>è¿”å›å€¼ä»¥ forward: å¼€å§‹ï¼š new InternalResourceView(forwardUrl); &ndash;&gt;  è½¬å‘****request.getRequestDispatcher(path).forward(request, response);</strong></li>
<li><strong>è¿”å›å€¼ä»¥</strong> <strong>redirect: å¼€å§‹ï¼š</strong> <strong>new RedirectView() &ndash;ã€‹ renderå°±æ˜¯é‡å®šå‘</strong></li>
<li><strong>è¿”å›å€¼æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼š new ThymeleafViewï¼ˆï¼‰&mdash;&gt;</strong></li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3211ee2d996d49dfa9341d885e446502" id="lht3211ee2d996d49dfa9341d885e446502">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/48.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-a19f39b3405e7c5a82382c728127eb17" id="lhta19f39b3405e7c5a82382c728127eb17">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/49.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0755c5318f55edf6319458d3299b4d76" id="lht0755c5318f55edf6319458d3299b4d76">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/50.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3d069b5db5ce8bcde109c6e0aaf5f138" id="lht3d069b5db5ce8bcde109c6e0aaf5f138">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/51.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="2æ¨¡æ¿å¼•æ“-thymeleaf" class="pagebody-header">
    2ã€æ¨¡æ¿å¼•æ“-Thymeleaf
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="1thymeleafç®€ä»‹" class="pagebody-header">
    1ã€thymeleafç®€ä»‹
  </h3>
</div><p class="component-content component">Thymeleaf is a modern server-side Java template engine for both web and standalone environments, capable of processing HTML, XML, JavaScript, CSS and even plain text.</p>
<p class="component-content component"><strong>ç°ä»£åŒ–ã€æœåŠ¡ç«¯Javaæ¨¡æ¿å¼•æ“</strong></p>

<div class="component-content pagebody component">
  <h3 id="2åŸºæœ¬è¯­æ³•" class="pagebody-header">
    2ã€åŸºæœ¬è¯­æ³•
  </h3>
</div>
<div class="component-content pagebody component">
  <h4 id="1è¡¨è¾¾å¼" class="pagebody-header">
    1ã€è¡¨è¾¾å¼
  </h4>
</div><div class="component-content component"><table>
<thead>
<tr>
<th>è¡¨è¾¾å¼åå­—</th>
<th>è¯­æ³•</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>å˜é‡å–å€¼</td>
<td>${&hellip;}</td>
<td>è·å–è¯·æ±‚åŸŸã€sessionåŸŸã€å¯¹è±¡ç­‰å€¼</td>
</tr>
<tr>
<td>é€‰æ‹©å˜é‡</td>
<td>*{&hellip;}</td>
<td>è·å–ä¸Šä¸‹æ–‡å¯¹è±¡å€¼</td>
</tr>
<tr>
<td>æ¶ˆæ¯</td>
<td>#{&hellip;}</td>
<td>è·å–å›½é™…åŒ–ç­‰å€¼</td>
</tr>
<tr>
<td>é“¾æ¥</td>
<td>@{&hellip;}</td>
<td>ç”Ÿæˆé“¾æ¥</td>
</tr>
<tr>
<td>ç‰‡æ®µè¡¨è¾¾å¼</td>
<td>~{&hellip;}</td>
<td>jsp:include ä½œç”¨ï¼Œå¼•å…¥å…¬å…±é¡µé¢ç‰‡æ®µ</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h4 id="2å­—é¢é‡" class="pagebody-header">
    2ã€å­—é¢é‡
  </h4>
</div><p class="component-content component">æ–‡æœ¬å€¼: <strong>&lsquo;one text&rsquo;</strong> <strong>,</strong> <strong>&lsquo;Another one!&rsquo;</strong> **,â€¦**æ•°å­—: <strong>0</strong> <strong>,</strong> <strong>34</strong> <strong>,</strong> <strong>3.0</strong> <strong>,</strong> <strong>12.3</strong> **,â€¦**å¸ƒå°”å€¼: <strong>true</strong> <strong>,</strong> <strong>false</strong></p>
<p class="component-content component">ç©ºå€¼: <strong>null</strong></p>
<p class="component-content component">å˜é‡ï¼š oneï¼Œtwoï¼Œ&hellip;. å˜é‡ä¸èƒ½æœ‰ç©ºæ ¼</p>

<div class="component-content pagebody component">
  <h4 id="3æ–‡æœ¬æ“ä½œ" class="pagebody-header">
    3ã€æ–‡æœ¬æ“ä½œ
  </h4>
</div><p class="component-content component">å­—ç¬¦ä¸²æ‹¼æ¥: <strong>+</strong></p>
<p class="component-content component">å˜é‡æ›¿æ¢: <strong>|The name is ${name}|</strong></p>

<div class="component-content pagebody component">
  <h4 id="4æ•°å­¦è¿ç®—" class="pagebody-header">
    4ã€æ•°å­¦è¿ç®—
  </h4>
</div><p class="component-content component">è¿ç®—ç¬¦: + , - , * , / , %</p>

<div class="component-content pagebody component">
  <h4 id="5å¸ƒå°”è¿ç®—" class="pagebody-header">
    5ã€å¸ƒå°”è¿ç®—
  </h4>
</div><p class="component-content component">è¿ç®—ç¬¦:  <strong>and</strong> <strong>,</strong> <strong>or</strong></p>
<p class="component-content component">ä¸€å…ƒè¿ç®—: <strong>!</strong> <strong>,</strong> <strong>not</strong></p>
<p class="component-content component">**
**</p>

<div class="component-content pagebody component">
  <h4 id="6æ¯”è¾ƒè¿ç®—" class="pagebody-header">
    6ã€æ¯”è¾ƒè¿ç®—
  </h4>
</div><p class="component-content component">æ¯”è¾ƒ: <strong>&gt;</strong> <strong>,</strong> <strong>&lt;</strong> <strong>,</strong> <strong>&gt;=</strong> <strong>,</strong> <strong>&lt;=</strong> <strong>(</strong> <strong>gt</strong> <strong>,</strong> <strong>lt</strong> <strong>,</strong> <strong>ge</strong> <strong>,</strong> <strong>le</strong> **)**ç­‰å¼: <strong>==</strong> <strong>,</strong> <strong>!=</strong> <strong>(</strong> <strong>eq</strong> <strong>,</strong> <strong>ne</strong> <strong>)</strong></p>

<div class="component-content pagebody component">
  <h4 id="7æ¡ä»¶è¿ç®—" class="pagebody-header">
    7ã€æ¡ä»¶è¿ç®—
  </h4>
</div><p class="component-content component">If-then: <strong>(if) ? (then)</strong></p>
<p class="component-content component">If-then-else: <strong>(if) ? (then) : (else)</strong></p>
<p class="component-content component">Default: (value) <strong>?: (defaultvalue)</strong></p>

<div class="component-content pagebody component">
  <h4 id="8ç‰¹æ®Šæ“ä½œ" class="pagebody-header">
    8ã€ç‰¹æ®Šæ“ä½œ
  </h4>
</div><p class="component-content component">æ— æ“ä½œï¼š _</p>

<div class="component-content pagebody component">
  <h3 id="3è®¾ç½®å±æ€§å€¼-thattr" class="pagebody-header">
    3ã€è®¾ç½®å±æ€§å€¼-th:attr
  </h3>
</div><p class="component-content component">è®¾ç½®å•ä¸ªå€¼</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;subscribe.html&#34;</span> <span style="color:#a6e22e">th:attr</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;action=@{/subscribe}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">fieldset</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;email&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Subscribe!&#34;</span> <span style="color:#a6e22e">th:attr</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;value=#{subscribe.submit}&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">fieldset</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div></div>
  
</div><p class="component-content component">è®¾ç½®å¤šä¸ªå€¼</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;../../images/gtvglogo.png&#34;</span>  <span style="color:#a6e22e">th:attr</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}&#34;</span> /&gt;</span></span></code></pre></div></div>
  
</div><p class="component-content component">ä»¥ä¸Šä¸¤ä¸ªçš„ä»£æ›¿å†™æ³• th:xxxx</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Subscribe!&#34;</span> <span style="color:#a6e22e">th:value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#{subscribe.submit}&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;subscribe.html&#34;</span> <span style="color:#a6e22e">th:action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/subscribe}&#34;</span>&gt;</span></span></code></pre></div></div>
  
</div><p class="component-content component">æ‰€æœ‰h5å…¼å®¹çš„æ ‡ç­¾å†™æ³•</p>
<p class="component-content component"><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes</a></p>

<div class="component-content pagebody component">
  <h3 id="4è¿­ä»£" class="pagebody-header">
    4ã€è¿­ä»£
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">tr</span> <span style="color:#a6e22e">th:each</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;prod : ${prods}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${prod.name}&#34;</span>&gt;Onions&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${prod.price}&#34;</span>&gt;2.41&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${prod.inStock}? #{true} : #{false}&#34;</span>&gt;yes&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">tr</span>&gt;</span></span></code></pre></div></div>
  
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">tr</span> <span style="color:#a6e22e">th:each</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;prod,iterStat : ${prods}&#34;</span> <span style="color:#a6e22e">th:class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${iterStat.odd}? &#39;odd&#39;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${prod.name}&#34;</span>&gt;Onions&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${prod.price}&#34;</span>&gt;2.41&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">td</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${prod.inStock}? #{true} : #{false}&#34;</span>&gt;yes&lt;/<span style="color:#f92672">td</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">tr</span>&gt;</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="5æ¡ä»¶è¿ç®—" class="pagebody-header">
    5ã€æ¡ä»¶è¿ç®—
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;comments.html&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">th:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{/product/comments(prodId=${prod.id})}&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">th:if</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${not #lists.isEmpty(prod.comments)}&#34;</span>&gt;view&lt;/<span style="color:#f92672">a</span>&gt;</span></span></code></pre></div></div>
  
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">th:switch</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${user.role}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:case</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#39;admin&#39;&#34;</span>&gt;User is an administrator&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:case</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#{roles.manager}&#34;</span>&gt;User is a manager&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">th:case</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*&#34;</span>&gt;User is some other thing&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="heading-3" class="pagebody-header">
    
  </h1>
</div>
<div class="component-content pagebody component">
  <h3 id="6å±æ€§ä¼˜å…ˆçº§" class="pagebody-header">
    6ã€å±æ€§ä¼˜å…ˆçº§
  </h3>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f183b51c4c4804a7712113b98f663bd4" id="lhtf183b51c4c4804a7712113b98f663bd4">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/52.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="3thymeleafä½¿ç”¨" class="pagebody-header">
    3ã€thymeleafä½¿ç”¨
  </h2>
</div>
<div class="component-content pagebody component">
  <h4 id="1å¼•å…¥starter" class="pagebody-header">
    1ã€å¼•å…¥Starter
  </h4>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>        <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/dependency&gt;</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="2è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf" class="pagebody-header">
    2ã€è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf
  </h4>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>@Configuration(proxyBeanMethods = false)
</span></span><span style="display:flex;"><span>@EnableConfigurationProperties(ThymeleafProperties.class)
</span></span><span style="display:flex;"><span>@ConditionalOnClass({ TemplateMode.class, SpringTemplateEngine.class })
</span></span><span style="display:flex;"><span>@AutoConfigureAfter({ WebMvcAutoConfiguration.class, WebFluxAutoConfiguration.class })
</span></span><span style="display:flex;"><span>public class ThymeleafAutoConfiguration { }</span></span></code></pre></div></div>
  
</div><p class="component-content component">è‡ªåŠ¨é…å¥½çš„ç­–ç•¥</p>
<div class="component-content component"><ul>
<li>1ã€æ‰€æœ‰thymeleafçš„é…ç½®å€¼éƒ½åœ¨ ThymeleafProperties</li>
<li>2ã€é…ç½®å¥½äº† <strong>SpringTemplateEngine</strong></li>
<li><strong>3ã€é…å¥½äº†</strong> <strong>ThymeleafViewResolver</strong></li>
<li>4ã€æˆ‘ä»¬åªéœ€è¦ç›´æ¥å¼€å‘é¡µé¢</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String DEFAULT_PREFIX <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;classpath:/templates/&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String DEFAULT_SUFFIX <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;.html&#34;</span><span style="color:#f92672">;</span>  <span style="color:#75715e">//xxx.html
</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="3é¡µé¢å¼€å‘" class="pagebody-header">
    3ã€é¡µé¢å¼€å‘
  </h4>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span> <span style="color:#a6e22e">xmlns:th</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://www.thymeleaf.org&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">title</span>&gt;Title&lt;/<span style="color:#f92672">title</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h1</span> <span style="color:#a6e22e">th:text</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${msg}&#34;</span>&gt;å“ˆå“ˆ&lt;/<span style="color:#f92672">h1</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;www.atguigu.com&#34;</span> <span style="color:#a6e22e">th:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${link}&#34;</span>&gt;å»ç™¾åº¦&lt;/<span style="color:#f92672">a</span>&gt;  &lt;<span style="color:#f92672">br</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;www.atguigu.com&#34;</span> <span style="color:#a6e22e">th:href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;@{link}&#34;</span>&gt;å»ç™¾åº¦2&lt;/<span style="color:#f92672">a</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="4æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ" class="pagebody-header">
    4ã€æ„å»ºåå°ç®¡ç†ç³»ç»Ÿ
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="1é¡¹ç›®åˆ›å»º" class="pagebody-header">
    1ã€é¡¹ç›®åˆ›å»º
  </h3>
</div><p class="component-content component">thymeleafã€web-starterã€devtoolsã€lombok</p>

<div class="component-content pagebody component">
  <h3 id="2é™æ€èµ„æºå¤„ç†" class="pagebody-header">
    2ã€é™æ€èµ„æºå¤„ç†
  </h3>
</div><p class="component-content component">è‡ªåŠ¨é…ç½®å¥½ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ‰€æœ‰é™æ€èµ„æºæ”¾åˆ° static æ–‡ä»¶å¤¹ä¸‹</p>

<div class="component-content pagebody component">
  <h3 id="3è·¯å¾„æ„å»º" class="pagebody-header">
    3ã€è·¯å¾„æ„å»º
  </h3>
</div><p class="component-content component">th:action=&quot;@{/login}&quot;</p>

<div class="component-content pagebody component">
  <h3 id="4æ¨¡æ¿æŠ½å–" class="pagebody-header">
    4ã€æ¨¡æ¿æŠ½å–
  </h3>
</div><p class="component-content component">th:insert/replace/include</p>

<div class="component-content pagebody component">
  <h3 id="5é¡µé¢è·³è½¬" class="pagebody-header">
    5ã€é¡µé¢è·³è½¬
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#a6e22e">@PostMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/login&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>User user<span style="color:#f92672">,</span> HttpSession session<span style="color:#f92672">,</span> Model model<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>StringUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">hasLength</span><span style="color:#f92672">(</span>user<span style="color:#f92672">.</span><span style="color:#a6e22e">getUserName</span><span style="color:#f92672">())</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">equals</span><span style="color:#f92672">(</span>user<span style="color:#f92672">.</span><span style="color:#a6e22e">getPassword</span><span style="color:#f92672">())){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//æŠŠç™»é™†æˆåŠŸçš„ç”¨æˆ·ä¿å­˜èµ·æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            session<span style="color:#f92672">.</span><span style="color:#a6e22e">setAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;loginUser&#34;</span><span style="color:#f92672">,</span>user<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//ç™»å½•æˆåŠŸé‡å®šå‘åˆ°main.html;  é‡å®šå‘é˜²æ­¢è¡¨å•é‡å¤æäº¤
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;redirect:/main.html&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span><span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            model<span style="color:#f92672">.</span><span style="color:#a6e22e">addAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;msg&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;è´¦å·å¯†ç é”™è¯¯&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//å›åˆ°ç™»å½•é¡µé¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;login&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="6æ•°æ®æ¸²æŸ“" class="pagebody-header">
    6ã€æ•°æ®æ¸²æŸ“
  </h3>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#a6e22e">@GetMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/dynamic_table&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">dynamic_table</span><span style="color:#f92672">(</span>Model model<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//è¡¨æ ¼å†…å®¹çš„éå†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        List<span style="color:#f92672">&lt;</span>User<span style="color:#f92672">&gt;</span> users <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">asList</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> User<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;zhangsan&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> User<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;lisi&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;123444&#34;</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> User<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;haha&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;aaaaa&#34;</span><span style="color:#f92672">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">new</span> User<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hehe &#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;aaddd&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        model<span style="color:#f92672">.</span><span style="color:#a6e22e">addAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;users&#34;</span><span style="color:#f92672">,</span>users<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;table/dynamic_table&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span>table class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;display table table-bordered&#34;</span> id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hidden-table-info&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span>thead<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span>tr<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span>th<span style="color:#f92672">&gt;</span><span style="color:#960050;background-color:#1e0010">#</span><span style="color:#f92672">&lt;/</span>th<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span>th<span style="color:#f92672">&gt;</span>ç”¨æˆ·å<span style="color:#f92672">&lt;/</span>th<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span>th<span style="color:#f92672">&gt;</span>å¯†ç <span style="color:#f92672">&lt;/</span>th<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/</span>tr<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/</span>thead<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span>tbody<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span>tr class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gradeX&#34;</span> th<span style="color:#f92672">:</span>each<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user,stats:${users}&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span>td th<span style="color:#f92672">:</span>text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${stats.count}&#34;</span><span style="color:#f92672">&gt;</span>Trident<span style="color:#f92672">&lt;/</span>td<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span>td th<span style="color:#f92672">:</span>text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${user.userName}&#34;</span><span style="color:#f92672">&gt;</span>Internet<span style="color:#f92672">&lt;/</span>td<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;</span>td <span style="color:#f92672">&gt;[[</span>$<span style="color:#f92672">{</span>user<span style="color:#f92672">.</span><span style="color:#a6e22e">password</span><span style="color:#f92672">}]]&lt;/</span>td<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/</span>tr<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/</span>tbody<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/</span>table<span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="6æ‹¦æˆªå™¨" class="pagebody-header">
    6ã€æ‹¦æˆªå™¨
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1handlerinterceptor-æ¥å£" class="pagebody-header">
    1ã€HandlerInterceptor æ¥å£
  </h2>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * ç™»å½•æ£€æŸ¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 1ã€é…ç½®å¥½æ‹¦æˆªå™¨è¦æ‹¦æˆªå“ªäº›è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 2ã€æŠŠè¿™äº›é…ç½®æ”¾åœ¨å®¹å™¨ä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Slf4j</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LoginInterceptor</span> <span style="color:#66d9ef">implements</span> HandlerInterceptor <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param response
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param handler
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @throws Exception
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">preHandle</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">,</span> Object handler<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        String requestURI <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestURI</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;preHandleæ‹¦æˆªçš„è¯·æ±‚è·¯å¾„æ˜¯{}&#34;</span><span style="color:#f92672">,</span>requestURI<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//ç™»å½•æ£€æŸ¥é€»è¾‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        HttpSession session <span style="color:#f92672">=</span> request<span style="color:#f92672">.</span><span style="color:#a6e22e">getSession</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Object loginUser <span style="color:#f92672">=</span> session<span style="color:#f92672">.</span><span style="color:#a6e22e">getAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;loginUser&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>loginUser <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//æ”¾è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//æ‹¦æˆªä½ã€‚æœªç™»å½•ã€‚è·³è½¬åˆ°ç™»å½•é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        request<span style="color:#f92672">.</span><span style="color:#a6e22e">setAttribute</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;msg&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;è¯·å…ˆç™»å½•&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        re.sendRedirect(&#34;/&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        request<span style="color:#f92672">.</span><span style="color:#a6e22e">getRequestDispatcher</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">forward</span><span style="color:#f92672">(</span>request<span style="color:#f92672">,</span>response<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥å
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param response
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param handler
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param modelAndView
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @throws Exception
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">postHandle</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">,</span> Object handler<span style="color:#f92672">,</span> ModelAndView modelAndView<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;postHandleæ‰§è¡Œ{}&#34;</span><span style="color:#f92672">,</span>modelAndView<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * é¡µé¢æ¸²æŸ“ä»¥å
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param response
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param handler
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param ex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @throws Exception
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">afterCompletion</span><span style="color:#f92672">(</span>HttpServletRequest request<span style="color:#f92672">,</span> HttpServletResponse response<span style="color:#f92672">,</span> Object handler<span style="color:#f92672">,</span> Exception ex<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;afterCompletionæ‰§è¡Œå¼‚å¸¸{}&#34;</span><span style="color:#f92672">,</span>ex<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="2é…ç½®æ‹¦æˆªå™¨" class="pagebody-header">
    2ã€é…ç½®æ‹¦æˆªå™¨
  </h2>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 1ã€ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨å®ç°HandlerInterceptoræ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 2ã€æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼ˆå®ç°WebMvcConfigurerçš„addInterceptorsï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * 3ã€æŒ‡å®šæ‹¦æˆªè§„åˆ™ã€å¦‚æœæ˜¯æ‹¦æˆªæ‰€æœ‰ï¼Œé™æ€èµ„æºä¹Ÿä¼šè¢«æ‹¦æˆªã€‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AdminWebConfig</span> <span style="color:#66d9ef">implements</span> WebMvcConfigurer <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">addInterceptors</span><span style="color:#f92672">(</span>InterceptorRegistry registry<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        registry<span style="color:#f92672">.</span><span style="color:#a6e22e">addInterceptor</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> LoginInterceptor<span style="color:#f92672">())</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">.</span><span style="color:#a6e22e">addPathPatterns</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/**&#34;</span><span style="color:#f92672">)</span>  <span style="color:#75715e">//æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ‹¦æˆªåŒ…æ‹¬é™æ€èµ„æº
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#f92672">.</span><span style="color:#a6e22e">excludePathPatterns</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/login&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/css/**&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/fonts/**&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/images/**&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/js/**&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">//æ”¾è¡Œçš„è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="3æ‹¦æˆªå™¨åŸç†" class="pagebody-header">
    3ã€æ‹¦æˆªå™¨åŸç†
  </h2>
</div><p class="component-content component">1ã€æ ¹æ®å½“å‰è¯·æ±‚ï¼Œæ‰¾åˆ°**HandlerExecutionChainã€**å¯ä»¥å¤„ç†è¯·æ±‚çš„handlerä»¥åŠhandlerçš„æ‰€æœ‰ æ‹¦æˆªå™¨ã€‘</p>
<p class="component-content component">2ã€å…ˆæ¥<strong>é¡ºåºæ‰§è¡Œ</strong> æ‰€æœ‰æ‹¦æˆªå™¨çš„ preHandleæ–¹æ³•</p>
<div class="component-content component"><ul>
<li>1ã€å¦‚æœå½“å‰æ‹¦æˆªå™¨prehandlerè¿”å›ä¸ºtrueã€‚åˆ™æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„preHandle</li>
<li>2ã€å¦‚æœå½“å‰æ‹¦æˆªå™¨è¿”å›ä¸ºfalseã€‚ç›´æ¥   å€’åºæ‰§è¡Œæ‰€æœ‰å·²ç»æ‰§è¡Œäº†çš„æ‹¦æˆªå™¨çš„  afterCompletionï¼›</li>
</ul></div>
<p class="component-content component"><strong>3ã€å¦‚æœä»»ä½•ä¸€ä¸ªæ‹¦æˆªå™¨è¿”å›falseã€‚ç›´æ¥è·³å‡ºä¸æ‰§è¡Œç›®æ ‡æ–¹æ³•</strong></p>
<p class="component-content component"><strong>4ã€æ‰€æœ‰æ‹¦æˆªå™¨éƒ½è¿”å›Trueã€‚æ‰§è¡Œç›®æ ‡æ–¹æ³•</strong></p>
<p class="component-content component"><strong>5ã€å€’åºæ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„postHandleæ–¹æ³•ã€‚</strong></p>
<p class="component-content component"><strong>6ã€å‰é¢çš„æ­¥éª¤æœ‰ä»»ä½•å¼‚å¸¸éƒ½ä¼šç›´æ¥å€’åºè§¦å‘</strong> afterCompletion</p>
<p class="component-content component">7ã€é¡µé¢æˆåŠŸæ¸²æŸ“å®Œæˆä»¥åï¼Œä¹Ÿä¼šå€’åºè§¦å‘ afterCompletion</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-931b9145cbd89c4cbe9428f1b947a9fc" id="lht931b9145cbd89c4cbe9428f1b947a9fc">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/53.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-e0e160b16cc08b513d72a1475d1639d2" id="lhte0e160b16cc08b513d72a1475d1639d2">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/54.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h1 id="7æ–‡ä»¶ä¸Šä¼ " class="pagebody-header">
    7ã€æ–‡ä»¶ä¸Šä¼ 
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1é¡µé¢è¡¨å•" class="pagebody-header">
    1ã€é¡µé¢è¡¨å•
  </h2>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/upload&#34;</span> <span style="color:#a6e22e">enctype</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;multipart/form-data&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;file&#34;</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;æäº¤&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">form</span>&gt;</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="2æ–‡ä»¶ä¸Šä¼ ä»£ç " class="pagebody-header">
    2ã€æ–‡ä»¶ä¸Šä¼ ä»£ç 
  </h2>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * MultipartFile è‡ªåŠ¨å°è£…ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param email
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param username
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param headerImg
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @param photos
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@PostMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/upload&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">upload</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@RequestParam</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;email&#34;</span><span style="color:#f92672">)</span> String email<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#a6e22e">@RequestParam</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;username&#34;</span><span style="color:#f92672">)</span> String username<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#a6e22e">@RequestPart</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;headerImg&#34;</span><span style="color:#f92672">)</span> MultipartFile headerImg<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#a6e22e">@RequestPart</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;photos&#34;</span><span style="color:#f92672">)</span> MultipartFile<span style="color:#f92672">[]</span> photos<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ä¸Šä¼ çš„ä¿¡æ¯ï¼šemail={}ï¼Œusername={}ï¼ŒheaderImg={}ï¼Œphotos={}&#34;</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                email<span style="color:#f92672">,</span>username<span style="color:#f92672">,</span>headerImg<span style="color:#f92672">.</span><span style="color:#a6e22e">getSize</span><span style="color:#f92672">(),</span>photos<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>headerImg<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//ä¿å­˜åˆ°æ–‡ä»¶æœåŠ¡å™¨ï¼ŒOSSæœåŠ¡å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            String originalFilename <span style="color:#f92672">=</span> headerImg<span style="color:#f92672">.</span><span style="color:#a6e22e">getOriginalFilename</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            headerImg<span style="color:#f92672">.</span><span style="color:#a6e22e">transferTo</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;H:\\cache\\&#34;</span><span style="color:#f92672">+</span>originalFilename<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>photos<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>MultipartFile photo <span style="color:#f92672">:</span> photos<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>photo<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">()){</span>
</span></span><span style="display:flex;"><span>                    String originalFilename <span style="color:#f92672">=</span> photo<span style="color:#f92672">.</span><span style="color:#a6e22e">getOriginalFilename</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                    photo<span style="color:#f92672">.</span><span style="color:#a6e22e">transferTo</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;H:\\cache\\&#34;</span><span style="color:#f92672">+</span>originalFilename<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;main&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h2 id="3è‡ªåŠ¨é…ç½®åŸç†" class="pagebody-header">
    3ã€è‡ªåŠ¨é…ç½®åŸç†
  </h2>
</div><p class="component-content component">**æ–‡ä»¶ä¸Šä¼ è‡ªåŠ¨é…ç½®ç±»-MultipartAutoConfiguration-**<strong>MultipartProperties</strong></p>
<div class="component-content component"><ul>
<li>
<p class="component-content component">è‡ªåŠ¨é…ç½®å¥½äº† <strong>StandardServletMultipartResolver  ã€æ–‡ä»¶ä¸Šä¼ è§£æå™¨ã€‘</strong></p>
</li>
<li>
<p class="component-content component"><strong>åŸç†æ­¥éª¤</strong></p>
</li>
<li>
<div class="component-content component"><ul>
<li><strong>1ã€è¯·æ±‚è¿›æ¥ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ è§£æå™¨åˆ¤æ–­ï¼ˆ<strong>isMultipart</strong>ï¼‰å¹¶å°è£…ï¼ˆ<strong>resolveMultipartï¼Œ<strong>è¿”å›</strong>MultipartHttpServletRequest</strong>ï¼‰æ–‡ä»¶ä¸Šä¼ è¯·æ±‚</strong></li>
<li><strong>2ã€å‚æ•°è§£æå™¨æ¥è§£æè¯·æ±‚ä¸­çš„æ–‡ä»¶å†…å®¹å°è£…æˆMultipartFile</strong></li>
<li>**3ã€å°†requestä¸­æ–‡ä»¶ä¿¡æ¯å°è£…ä¸ºä¸€ä¸ªMapï¼›**MultiValueMap&lt;String, MultipartFile&gt;</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component"><strong>FileCopyUtils</strong>ã€‚å®ç°æ–‡ä»¶æµçš„æ‹·è´</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#a6e22e">@PostMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/upload&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">upload</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@RequestParam</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;email&#34;</span><span style="color:#f92672">)</span> String email<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#a6e22e">@RequestParam</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;username&#34;</span><span style="color:#f92672">)</span> String username<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#a6e22e">@RequestPart</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;headerImg&#34;</span><span style="color:#f92672">)</span> MultipartFile headerImg<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                         <span style="color:#a6e22e">@RequestPart</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;photos&#34;</span><span style="color:#f92672">)</span> MultipartFile<span style="color:#f92672">[]</span> photos<span style="color:#f92672">)</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3861db1255453a184d51f88825896161" id="lht3861db1255453a184d51f88825896161">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/55.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h1 id="8å¼‚å¸¸å¤„ç†" class="pagebody-header">
    8ã€å¼‚å¸¸å¤„ç†
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1é”™è¯¯å¤„ç†" class="pagebody-header">
    1ã€é”™è¯¯å¤„ç†
  </h2>
</div>
<div class="component-content pagebody component">
  <h4 id="1é»˜è®¤è§„åˆ™" class="pagebody-header">
    1ã€é»˜è®¤è§„åˆ™
  </h4>
</div><div class="component-content component"><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Bootæä¾›<code>/error</code>å¤„ç†æ‰€æœ‰é”™è¯¯çš„æ˜ å°„</li>
<li>å¯¹äºæœºå™¨å®¢æˆ·ç«¯ï¼Œå®ƒå°†ç”ŸæˆJSONå“åº”ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯ï¼ŒHTTPçŠ¶æ€å’Œå¼‚å¸¸æ¶ˆæ¯çš„è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºæµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œå“åº”ä¸€ä¸ªâ€œ whitelabelâ€é”™è¯¯è§†å›¾ï¼Œä»¥HTMLæ ¼å¼å‘ˆç°ç›¸åŒçš„æ•°æ®</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-3d139b8d8ad224935864b5029c805305" id="lht3d139b8d8ad224935864b5029c805305">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/56.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-141575508e5f39fb4b05ba49d74813e3" id="lht141575508e5f39fb4b05ba49d74813e3">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/57.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component"><strong>è¦å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ï¼Œæ·»åŠ </strong>**<code>View</code>**<strong>è§£æä¸º`error```</strong></p>
<p class="component-content component">è¦å®Œå…¨æ›¿æ¢é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥å®ç° <code>ErrorController </code>å¹¶æ³¨å†Œè¯¥ç±»å‹çš„Beanå®šä¹‰ï¼Œæˆ–æ·»åŠ <code>ErrorAttributesç±»å‹çš„ç»„ä»¶</code>ä»¥ä½¿ç”¨ç°æœ‰æœºåˆ¶ä½†æ›¿æ¢å…¶å†…å®¹ã€‚</p>
<p class="component-content component">error/ä¸‹çš„4xxï¼Œ5xxé¡µé¢ä¼šè¢«è‡ªåŠ¨è§£æï¼›</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-f196a32cc0c1c1db356eb553fda974b8" id="lhtf196a32cc0c1c1db356eb553fda974b8">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/58.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h4 id="2å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘" class="pagebody-header">
    2ã€å®šåˆ¶é”™è¯¯å¤„ç†é€»è¾‘
  </h4>
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">è‡ªå®šä¹‰é”™è¯¯é¡µ</p>
</li>
<li>
<div class="component-content component"><ul>
<li>error/404.html  error/5xx.htmlï¼›æœ‰ç²¾ç¡®çš„é”™è¯¯çŠ¶æ€ç é¡µé¢å°±åŒ¹é…ç²¾ç¡®ï¼Œæ²¡æœ‰å°±æ‰¾ 4xx.htmlï¼›å¦‚æœéƒ½æ²¡æœ‰å°±è§¦å‘ç™½é¡µ</li>
</ul></div>
</li>
<li>
<p class="component-content component">@ControllerAdvice+@ExceptionHandlerå¤„ç†å…¨å±€å¼‚å¸¸ï¼›åº•å±‚æ˜¯ <strong>ExceptionHandlerExceptionResolver æ”¯æŒçš„</strong></p>
</li>
<li>
<p class="component-content component">@ResponseStatus+è‡ªå®šä¹‰å¼‚å¸¸ ï¼›åº•å±‚æ˜¯ <strong>ResponseStatusExceptionResolver ï¼ŒæŠŠresponsestatusæ³¨è§£çš„ä¿¡æ¯åº•å±‚è°ƒç”¨</strong> <strong>response.sendError(statusCode, resolvedReason)ï¼›tomcatå‘é€çš„/error</strong></p>
</li>
<li>
<p class="component-content component">Springåº•å±‚çš„å¼‚å¸¸ï¼Œå¦‚ å‚æ•°ç±»å‹è½¬æ¢å¼‚å¸¸ï¼›<strong>DefaultHandlerExceptionResolver å¤„ç†æ¡†æ¶åº•å±‚çš„å¼‚å¸¸ã€‚</strong></p>
</li>
<li>
<div class="component-content component"><ul>
<li>response.sendError(HttpServletResponse.<strong>SC_BAD_REQUEST</strong>, ex.getMessage());</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-1d780155f3426fe21450ba5e66bb6c8a" id="lht1d780155f3426fe21450ba5e66bb6c8a">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/59.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>è‡ªå®šä¹‰å®ç° HandlerExceptionResolver å¤„ç†å¼‚å¸¸ï¼›å¯ä»¥ä½œä¸ºé»˜è®¤çš„å…¨å±€å¼‚å¸¸å¤„ç†è§„åˆ™</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b6cdd2fce0b741f6f1a2764536ffb6a4" id="lhtb6cdd2fce0b741f6f1a2764536ffb6a4">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/60.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>
<p class="component-content component"><strong>ErrorViewResolver</strong> å®ç°è‡ªå®šä¹‰å¤„ç†å¼‚å¸¸ï¼›</p>
</li>
<li>
<div class="component-content component"><ul>
<li>response.sendError ã€‚errorè¯·æ±‚å°±ä¼šè½¬ç»™controller</li>
<li>ä½ çš„å¼‚å¸¸æ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†ã€‚tomcatåº•å±‚ response.sendErrorã€‚errorè¯·æ±‚å°±ä¼šè½¬ç»™controller</li>
<li><strong>basicErrorController è¦å»çš„é¡µé¢åœ°å€æ˜¯</strong> <strong>ErrorViewResolver</strong> ï¼›</li>
</ul></div>
</li>
</ul></div>

<div class="component-content pagebody component">
  <h4 id="3å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†" class="pagebody-header">
    3ã€å¼‚å¸¸å¤„ç†è‡ªåŠ¨é…ç½®åŸç†
  </h4>
</div><div class="component-content component"><ul>
<li>
<p class="component-content component"><strong>ErrorMvcAutoConfiguration  è‡ªåŠ¨é…ç½®å¼‚å¸¸å¤„ç†è§„åˆ™</strong></p>
</li>
<li>
<div class="component-content component"><ul>
<li><strong>å®¹å™¨ä¸­çš„ç»„ä»¶ï¼šç±»å‹ï¼šDefaultErrorAttributes -&gt;</strong> <strong>idï¼šerrorAttributes</strong></li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li><strong>public class</strong> <strong>DefaultErrorAttributes</strong> <strong>implements</strong> <strong>ErrorAttributes</strong>, <strong>HandlerExceptionResolver</strong></li>
<li><strong>DefaultErrorAttributes</strong>ï¼šå®šä¹‰é”™è¯¯é¡µé¢ä¸­å¯ä»¥åŒ…å«å“ªäº›æ•°æ®ã€‚</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-95d0825830af423437d830f243c08dfe" id="lht95d0825830af423437d830f243c08dfe">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/61.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0c2d4fcbdba13fab3a4b1f8bd349a9f6" id="lht0c2d4fcbdba13fab3a4b1f8bd349a9f6">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/62.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>**å®¹å™¨ä¸­çš„ç»„ä»¶ï¼šç±»å‹ï¼š**<strong>BasicErrorController &ndash;&gt; idï¼šbasicErrorControllerï¼ˆjson+ç™½é¡µ é€‚é…å“åº”ï¼‰</strong></li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li><strong>å¤„ç†é»˜è®¤</strong> <strong>/error è·¯å¾„çš„è¯·æ±‚ï¼›é¡µé¢å“åº”</strong> <strong>new</strong> ModelAndView(<strong>&ldquo;error&rdquo;</strong>, model)ï¼›</li>
<li><strong>å®¹å™¨ä¸­æœ‰ç»„ä»¶ View</strong>-&gt;<strong>idæ˜¯error</strong>ï¼›ï¼ˆå“åº”é»˜è®¤é”™è¯¯é¡µï¼‰</li>
<li>å®¹å™¨ä¸­æ”¾ç»„ä»¶ <strong>BeanNameViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼‰ï¼›æŒ‰ç…§è¿”å›çš„è§†å›¾åä½œä¸ºç»„ä»¶çš„idå»å®¹å™¨ä¸­æ‰¾Viewå¯¹è±¡ã€‚</strong></li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>**å®¹å™¨ä¸­çš„ç»„ä»¶ï¼š**ç±»å‹ï¼š**DefaultErrorViewResolver -&gt; idï¼š**conventionErrorViewResolver</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œä¼šä»¥HTTPçš„çŠ¶æ€ç  ä½œä¸ºè§†å›¾é¡µåœ°å€ï¼ˆviewNameï¼‰ï¼Œæ‰¾åˆ°çœŸæ­£çš„é¡µé¢</li>
<li>error/404ã€5xx.html</li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">å¦‚æœæƒ³è¦è¿”å›é¡µé¢ï¼›å°±ä¼šæ‰¾errorè§†å›¾ã€<strong>StaticView</strong>ã€‘ã€‚(é»˜è®¤æ˜¯ä¸€ä¸ªç™½é¡µ)</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-beadf9780649c827fcf374c626a1f3ab" id="lhtbeadf9780649c827fcf374c626a1f3ab">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/63.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>

<div class="component-content pagebody component">
  <h4 id="4å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹" class="pagebody-header">
    4ã€å¼‚å¸¸å¤„ç†æ­¥éª¤æµç¨‹
  </h4>
</div></li>
<li>
<p class="component-content component">1ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼Œç›®æ ‡æ–¹æ³•è¿è¡ŒæœŸé—´æœ‰ä»»ä½•å¼‚å¸¸éƒ½ä¼šè¢«catchã€è€Œä¸”æ ‡å¿—å½“å‰è¯·æ±‚ç»“æŸï¼›å¹¶ä¸”ç”¨ <strong>dispatchException</strong></p>
</li>
<li>
<p class="component-content component">2ã€è¿›å…¥è§†å›¾è§£ææµç¨‹ï¼ˆé¡µé¢æ¸²æŸ“ï¼Ÿï¼‰</p>
</li>
<li>
<p class="component-content component">processDispatchResult(processedRequest, response, mappedHandler, <strong>mv</strong>, <strong>dispatchException</strong>);</p>
</li>
<li>
<p class="component-content component">3ã€<strong>mv</strong> = <strong>processHandlerException</strong>ï¼›å¤„ç†handlerå‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¤„ç†å®Œæˆè¿”å›ModelAndViewï¼›</p>
</li>
<li>
<div class="component-content component"><ul>
<li>1ã€éå†æ‰€æœ‰çš„ <strong>handlerExceptionResolversï¼Œçœ‹è°èƒ½å¤„ç†å½“å‰å¼‚å¸¸ã€<strong><strong>HandlerExceptionResolverå¤„ç†å™¨å¼‚å¸¸è§£æå™¨</strong></strong>ã€‘</strong></li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b4b5fe6183d2335302e0543d87288c0f" id="lhtb4b5fe6183d2335302e0543d87288c0f">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/64.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li><strong>2ã€ç³»ç»Ÿé»˜è®¤çš„  å¼‚å¸¸è§£æå™¨ï¼›</strong></li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-b9d7120127cafc30c16c9c604acac79d" id="lhtb9d7120127cafc30c16c9c604acac79d">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/65.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li><strong>1ã€DefaultErrorAttributeså…ˆæ¥å¤„ç†å¼‚å¸¸ã€‚æŠŠå¼‚å¸¸ä¿¡æ¯ä¿å­˜åˆ°rrequeståŸŸï¼Œå¹¶ä¸”è¿”å›nullï¼›</strong></li>
<li><strong>2ã€é»˜è®¤æ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†å¼‚å¸¸ï¼Œæ‰€ä»¥å¼‚å¸¸ä¼šè¢«æŠ›å‡º</strong></li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li><strong>1ã€å¦‚æœæ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†æœ€ç»ˆåº•å±‚å°±ä¼šå‘é€ /error è¯·æ±‚ã€‚ä¼šè¢«åº•å±‚çš„BasicErrorControllerå¤„ç†</strong></li>
<li><strong>2ã€è§£æé”™è¯¯è§†å›¾ï¼›éå†æ‰€æœ‰çš„</strong>  <strong>ErrorViewResolver  çœ‹è°èƒ½è§£æã€‚</strong></li>
</ul></div>
</li>
</ul></div>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-19f6c6a5aa1b8db2a1296ed44ccd4012" id="lht19f6c6a5aa1b8db2a1296ed44ccd4012">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/66.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">â€‹			<strong>3ã€é»˜è®¤çš„</strong> <strong>DefaultErrorViewResolver ,ä½œç”¨æ˜¯æŠŠå“åº”çŠ¶æ€ç ä½œä¸ºé”™è¯¯é¡µçš„åœ°å€ï¼Œerror/500.html</strong></p>
<p class="component-content component">â€‹			<strong>4ã€æ¨¡æ¿å¼•æ“æœ€ç»ˆå“åº”è¿™ä¸ªé¡µé¢</strong> <strong>error/500.html</strong></p>

<div class="component-content pagebody component">
  <h1 id="9webåŸç”Ÿç»„ä»¶æ³¨å…¥servletfilterlistener" class="pagebody-header">
    9ã€WebåŸç”Ÿç»„ä»¶æ³¨å…¥ï¼ˆServletã€Filterã€Listenerï¼‰
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1ä½¿ç”¨servlet-api" class="pagebody-header">
    1ã€ä½¿ç”¨Servlet API
  </h2>
</div><p class="component-content component">@ServletComponentScan(basePackages = <strong>&ldquo;com.atguigu.admin&rdquo;</strong>) :æŒ‡å®šåŸç”ŸServletç»„ä»¶éƒ½æ”¾åœ¨é‚£é‡Œ</p>
<p class="component-content component">@WebServlet(urlPatterns = <strong>&quot;/my&quot;</strong>)ï¼šæ•ˆæœï¼šç›´æ¥å“åº”ï¼Œ<strong>æ²¡æœ‰ç»è¿‡Springçš„æ‹¦æˆªå™¨ï¼Ÿ</strong></p>
<p class="component-content component">@WebFilter(urlPatterns={<strong>&quot;/css/*&quot;</strong>,<strong>&quot;/images/*&quot;</strong>})</p>
<p class="component-content component">@WebListener</p>
<p class="component-content component">æ¨èå¯ä»¥è¿™ç§æ–¹å¼ï¼›</p>
<p class="component-content component">æ‰©å±•ï¼šDispatchServlet å¦‚ä½•æ³¨å†Œè¿›æ¥</p>
<div class="component-content component"><ul>
<li>å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®äº†  DispatcherServlet  å±æ€§ç»‘å®šåˆ° WebMvcPropertiesï¼›å¯¹åº”çš„é…ç½®æ–‡ä»¶é…ç½®é¡¹æ˜¯ <strong>spring.mvcã€‚</strong></li>
<li><strong>é€šè¿‡</strong> <strong>ServletRegistrationBean</strong><!-- raw HTML omitted --> æŠŠ DispatcherServlet  é…ç½®è¿›æ¥ã€‚</li>
<li>é»˜è®¤æ˜ å°„çš„æ˜¯ / è·¯å¾„ã€‚</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-763383f596683880d97e28c77cb2e096" id="lht763383f596683880d97e28c77cb2e096">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/67.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">Tomcat-Servletï¼›</p>
<p class="component-content component">å¤šä¸ªServletéƒ½èƒ½å¤„ç†åˆ°åŒä¸€å±‚è·¯å¾„ï¼Œç²¾ç¡®ä¼˜é€‰åŸåˆ™</p>
<p class="component-content component">Aï¼š /my/</p>
<p class="component-content component">Bï¼š /my/1</p>

<div class="component-content pagebody component">
  <h2 id="2ä½¿ç”¨registrationbean" class="pagebody-header">
    2ã€ä½¿ç”¨RegistrationBean
  </h2>
</div><div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ServletRegistrationBean<span style="color:#960050;background-color:#1e0010">`</span><span style="color:#f92672">,</span> <span style="color:#960050;background-color:#1e0010">`</span>FilterRegistrationBean<span style="color:#960050;background-color:#1e0010">`</span><span style="color:#f92672">,</span> and <span style="color:#960050;background-color:#1e0010">`</span>ServletListenerRegistrationBean
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRegistConfig</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ServletRegistrationBean <span style="color:#a6e22e">myServlet</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        MyServlet myServlet <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyServlet<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ServletRegistrationBean<span style="color:#f92672">(</span>myServlet<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/my&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/my02&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> FilterRegistrationBean <span style="color:#a6e22e">myFilter</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        MyFilter myFilter <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MyFilter<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//        return new FilterRegistrationBean(myFilter,myServlet());
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        FilterRegistrationBean filterRegistrationBean <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> FilterRegistrationBean<span style="color:#f92672">(</span>myFilter<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        filterRegistrationBean<span style="color:#f92672">.</span><span style="color:#a6e22e">setUrlPatterns</span><span style="color:#f92672">(</span>Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">asList</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/my&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;/css/*&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> filterRegistrationBean<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ServletListenerRegistrationBean <span style="color:#a6e22e">myListener</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        MySwervletContextListener mySwervletContextListener <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MySwervletContextListener<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> ServletListenerRegistrationBean<span style="color:#f92672">(</span>mySwervletContextListener<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="10åµŒå…¥å¼servletå®¹å™¨" class="pagebody-header">
    10ã€åµŒå…¥å¼Servletå®¹å™¨
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1åˆ‡æ¢åµŒå…¥å¼servletå®¹å™¨" class="pagebody-header">
    1ã€åˆ‡æ¢åµŒå…¥å¼Servletå®¹å™¨
  </h2>
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">é»˜è®¤æ”¯æŒçš„webServer</p>
</li>
<li>
<div class="component-content component"><ul>
<li><code>Tomcat</code>, <code>Jetty</code>, or <code>Undertow</code></li>
<li><code>ServletWebServerApplicationContext å®¹å™¨å¯åŠ¨å¯»æ‰¾ServletWebServerFactory å¹¶å¼•å¯¼åˆ›å»ºæœåŠ¡å™¨</code></li>
</ul></div>
</li>
<li>
<p class="component-content component">åˆ‡æ¢æœåŠ¡å™¨</p>
</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-a7d932c9f01cde10f823d2e3d86f1065" id="lhta7d932c9f01cde10f823d2e3d86f1065">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/68.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;exclusions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;exclusion&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-tomcat<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/exclusion&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/exclusions&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span></span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">åŸç†</p>
</li>
<li>
<div class="component-content component"><ul>
<li>SpringBootåº”ç”¨å¯åŠ¨å‘ç°å½“å‰æ˜¯Webåº”ç”¨ã€‚webåœºæ™¯åŒ…-å¯¼å…¥tomcat</li>
<li>webåº”ç”¨ä¼šåˆ›å»ºä¸€ä¸ªwebç‰ˆçš„iocå®¹å™¨ <code>ServletWebServerApplicationContext</code></li>
<li><code>ServletWebServerApplicationContext</code> å¯åŠ¨çš„æ—¶å€™å¯»æ‰¾ <strong><code>ServletWebServerFactory</code></strong><code>ï¼ˆServlet çš„webæœåŠ¡å™¨å·¥å‚---&gt; Servlet çš„webæœåŠ¡å™¨ï¼‰</code></li>
<li>SpringBootåº•å±‚é»˜è®¤æœ‰å¾ˆå¤šçš„WebServerå·¥å‚ï¼›<code>TomcatServletWebServerFactory</code>, <code>JettyServletWebServerFactory</code>, or <code>UndertowServletWebServerFactory</code></li>
<li><code>åº•å±‚ç›´æ¥ä¼šæœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ã€‚ServletWebServerFactoryAutoConfiguration</code></li>
<li><code>ServletWebServerFactoryAutoConfigurationå¯¼å…¥äº†ServletWebServerFactoryConfigurationï¼ˆé…ç½®ç±»ï¼‰</code></li>
<li><code>ServletWebServerFactoryConfiguration é…ç½®ç±» æ ¹æ®åŠ¨æ€åˆ¤æ–­ç³»ç»Ÿä¸­åˆ°åº•å¯¼å…¥äº†é‚£ä¸ªWebæœåŠ¡å™¨çš„åŒ…ã€‚ï¼ˆé»˜è®¤æ˜¯web-starterå¯¼å…¥tomcatåŒ…ï¼‰ï¼Œå®¹å™¨ä¸­å°±æœ‰ TomcatServletWebServerFactory</code></li>
<li><code>TomcatServletWebServerFactory åˆ›å»ºå‡ºTomcatæœåŠ¡å™¨å¹¶å¯åŠ¨ï¼›TomcatWebServer çš„æ„é€ å™¨æ‹¥æœ‰åˆå§‹åŒ–æ–¹æ³•initialize---this.tomcat.start();</code></li>
<li><code>å†…åµŒæœåŠ¡å™¨ï¼Œå°±æ˜¯æ‰‹åŠ¨æŠŠå¯åŠ¨æœåŠ¡å™¨çš„ä»£ç è°ƒç”¨ï¼ˆtomcatæ ¸å¿ƒjaråŒ…å­˜åœ¨ï¼‰</code></li>
</ul></div>
</li>
<li>
<p class="component-content component">``</p>
</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="2å®šåˆ¶servletå®¹å™¨" class="pagebody-header">
    2ã€å®šåˆ¶Servletå®¹å™¨
  </h2>
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">å®ç° <strong>WebServerFactoryCu</strong>stomizer<!-- raw HTML omitted --></p>
</li>
<li>
<div class="component-content component"><ul>
<li>æŠŠé…ç½®æ–‡ä»¶çš„å€¼å’Œ**<code>ServletWebServerFactory è¿›è¡Œç»‘å®š</code>**</li>
</ul></div>
</li>
<li>
<p class="component-content component">ä¿®æ”¹é…ç½®æ–‡ä»¶ <strong>server.xxx</strong></p>
</li>
<li>
<p class="component-content component">ç›´æ¥è‡ªå®šä¹‰ <strong>ConfigurableServletWebServerFactory</strong></p>
</li>
</ul></div>
<p class="component-content component"><strong>xxxxx<strong><strong>Customizer</strong></strong>ï¼šå®šåˆ¶åŒ–å™¨ï¼Œå¯ä»¥æ”¹å˜xxxxçš„é»˜è®¤è§„åˆ™</strong></p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.boot.web.server.WebServerFactoryCustomizer<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.boot.web.servlet.server.ConfigurableServletWebServerFactory<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.stereotype.Component<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CustomizationBean</span> <span style="color:#66d9ef">implements</span> WebServerFactoryCustomizer<span style="color:#f92672">&lt;</span>ConfigurableServletWebServerFactory<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">customize</span><span style="color:#f92672">(</span>ConfigurableServletWebServerFactory server<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        server<span style="color:#f92672">.</span><span style="color:#a6e22e">setPort</span><span style="color:#f92672">(</span><span style="color:#ae81ff">9000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="11å®šåˆ¶åŒ–åŸç†" class="pagebody-header">
    11ã€å®šåˆ¶åŒ–åŸç†
  </h1>
</div>
<div class="component-content pagebody component">
  <h2 id="1å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼" class="pagebody-header">
    1ã€å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼
  </h2>
</div><div class="component-content component"><ul>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼›</li>
<li><strong>xxxxxCustomizerï¼›</strong></li>
<li><strong>ç¼–å†™è‡ªå®šä¹‰çš„é…ç½®ç±»  xxxConfigurationï¼›+</strong> <strong>@Beanæ›¿æ¢ã€å¢åŠ å®¹å™¨ä¸­é»˜è®¤ç»„ä»¶ï¼›è§†å›¾è§£æå™¨</strong></li>
<li><strong>Webåº”ç”¨ ç¼–å†™ä¸€ä¸ªé…ç½®ç±»å®ç° WebMvcConfigurer å³å¯å®šåˆ¶åŒ–webåŠŸèƒ½ï¼›+ @Beanç»™å®¹å™¨ä¸­å†æ‰©å±•ä¸€äº›ç»„ä»¶</strong></li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AdminWebConfig</span> <span style="color:#66d9ef">implements</span> WebMvcConfigurer</span></span></code></pre></div></div>
  
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">@EnableWebMvc + WebMvcConfigurer â€”â€” @Bean å¯ä»¥å…¨é¢æ¥ç®¡SpringMVCï¼Œæ‰€æœ‰è§„åˆ™å…¨éƒ¨è‡ªå·±é‡æ–°é…ç½®ï¼› å®ç°å®šåˆ¶å’Œæ‰©å±•åŠŸèƒ½</p>
</li>
<li>
<div class="component-content component"><ul>
<li>åŸç†</li>
<li>1ã€WebMvcAutoConfiguration  é»˜è®¤çš„SpringMVCçš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ç±»ã€‚é™æ€èµ„æºã€æ¬¢è¿é¡µ&hellip;..</li>
<li>2ã€ä¸€æ—¦ä½¿ç”¨ @EnableWebMvc ã€ã€‚ä¼š @Import(DelegatingWebMvcConfiguration.<strong>class</strong>)</li>
<li>3ã€<strong>DelegatingWebMvcConfiguration</strong> çš„ ä½œç”¨ï¼Œåªä¿è¯SpringMVCæœ€åŸºæœ¬çš„ä½¿ç”¨</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>
<div class="component-content component"><ul>
<li>æŠŠæ‰€æœ‰ç³»ç»Ÿä¸­çš„ WebMvcConfigurer æ‹¿è¿‡æ¥ã€‚æ‰€æœ‰åŠŸèƒ½çš„å®šåˆ¶éƒ½æ˜¯è¿™äº› WebMvcConfigurer  åˆèµ·æ¥ä¸€èµ·ç”Ÿæ•ˆ</li>
<li>è‡ªåŠ¨é…ç½®äº†ä¸€äº›éå¸¸åº•å±‚çš„ç»„ä»¶ã€‚<strong>RequestMappingHandlerMapping</strong>ã€è¿™äº›ç»„ä»¶ä¾èµ–çš„ç»„ä»¶éƒ½æ˜¯ä»å®¹å™¨ä¸­è·å–</li>
<li><strong>public class</strong> DelegatingWebMvcConfiguration <strong>extends</strong> <strong>WebMvcConfigurationSupport</strong></li>
</ul></div>
</li>
</ul></div>
</li>
<li>
<div class="component-content component"><ul>
<li>4ã€<strong>WebMvcAutoConfiguration</strong> é‡Œé¢çš„é…ç½®è¦èƒ½ç”Ÿæ•ˆ å¿…é¡»  @ConditionalOnMissingBean(<strong>WebMvcConfigurationSupport</strong>.<strong>class</strong>)</li>
<li>5ã€@EnableWebMvc  å¯¼è‡´äº† <strong>WebMvcAutoConfiguration  æ²¡æœ‰ç”Ÿæ•ˆã€‚</strong></li>
</ul></div>
</li>
<li>
<p class="component-content component">&hellip; &hellip;</p>
</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="2åŸç†åˆ†æå¥—è·¯" class="pagebody-header">
    2ã€åŸç†åˆ†æå¥—è·¯
  </h2>
</div><p class="component-content component"><strong>åœºæ™¯starter</strong> <strong>- xxxxAutoConfiguration - å¯¼å…¥xxxç»„ä»¶ - ç»‘å®šxxxProperties &ndash;</strong> <strong>ç»‘å®šé…ç½®æ–‡ä»¶é¡¹</strong></p>

          </div><div class="component">
            <div class="component-content">
              <div class="article-copyright">
                <p class="content">
                  ç‰ˆæƒå£°æ˜: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">ç‰ˆæƒå£°æ˜ï¼šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a>
                </p>
                <p class="content">ä½œè€…:  yuanshuai </p>
                <p class="content">å‘è¡¨æ—¥æœŸ:  2021å¹´11æœˆ26æ—¥</p>
              </div>
            </div>
          </div></article>
      </section>
  </main>

  <script>
    var script = document.createElement("script");script.src = "https://yuanshuai1122.github.io/js/initPost.js";
    document.head.appendChild(script);
  </script>

    
    <div class="footer-main ">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="foot-nav">
        <div class="foot-nav-items">
          <div class="item">
            <div class="logo"></div>
            <div class="email">Email: <a href="mailto:shuaiyuan@gmail.com">shuaiyuan@gmail.com</a></div>
          </div>

          <div class="item community">
            <div class="item-title">ç¤¾äº¤åª’ä½“</div>
            
              <a href="https://github.com/yuanshuai1122" target="_blank">Github</a>
            
          </div>

          <div class="item resources">
            <div class="item-title">å‹é“¾</div>
            
              <a href="https://yuanshuaicn.com/" target="_blank">ğŸ‘‹</a>
            
          </div>
        </div>
      </div>
      <div class="bottom">
        <div class="item copyright">
          &copy; 2023
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://github.com/floyd-li/hugo-theme-itheme" target="_blank">iTheme</a>
        </div>
      </div>
    </div>
  </div>
</div>

  </body>
    
    

    
    
</html>
