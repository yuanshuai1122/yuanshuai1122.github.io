<!DOCTYPE html>
<html class="js no-touch  progressive-image  no-reduced-motion progressive" lang="zh-hans">
  <head>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="keyword" content=""><meta property="og:title" content="Redisä¹‹Javaå®¢æˆ·ç«¯Jedis" />
<meta property="og:description" content="&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; ); jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; ); System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; )); //list System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; ); //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;); List list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1); for (String element : list) { System. out .println(element); } //set jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; ); Set set1 = jedis.smembers( &ldquo;orders&rdquo;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.io/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-26T21:31:04+00:00" />
<meta property="article:modified_time" content="2021-11-26T21:31:04+00:00" />
<title>Redisä¹‹Javaå®¢æˆ·ç«¯Jedis</title>

    <link rel="canonical" href="/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/">

    <link rel="stylesheet" href="/css/global.css">

    <link rel="stylesheet" href="/css/custom.css">

    <link rel="stylesheet" href="/css/search.css" />

    
    

    
    

</head>
  </head>
  <body class=" page-article   ">
    <header>
      <nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/ " class="nav-title">ğŸ§€</a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            <a href="/posts " class="nav-item-content">ç›®å½•</a>
          </div><div class="nav-item-wrapper">
            <a href="/about" class="nav-item-content">å…³äº</a>
          </div><div class="nav-item-wrapper">
            <a href="/index.xml" class="nav-item-content" target="_blank">RSS</a>
          </div></div>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleSearchModal(){
    const template = `
    <div class="modal-body">
      <div id="autocomplete" onclick="event.stopPropagation();"></div>
    </div>
    `
    const modal = document.querySelector("#modal-wrapper")
    if(!modal){
      const div = document.createElement("div")
      document.body.setAttribute("style","overflow: hidden;")
      div.setAttribute("id", "modal-wrapper")
      div.setAttribute("onclick", "toggleSearchModal()")
      div.innerHTML = template
      const script = document.createElement("script");script.setAttribute("src", "https://yuanshuai1122.github.io/js/algolia.js")
      div.appendChild(script)
      document.body.append(div)
    } else {
      document.body.removeAttribute("style")
      document.body.removeChild(modal)
    }
  }
</script>
    </header>
    
  
  
  <main id="main" class="main">
      <section>
        <article class="article">
          
          <div class=" article-header ">
            <div class="category component">
              <div class="component-content">
                <div class="category-eyebrow">
                  <span class="category-eyebrow__category category_original">
                    
                      
                        æ•°æ®åº“
                      
                    
                  </span>
                  <span class="category-eyebrow__date">2021å¹´11æœˆ26æ—¥</span>
                </div>
              </div>
            </div>
            <div class="pagetitle component">
              <div class="component-content">
                <h1 class="hero-headline">Redisä¹‹Javaå®¢æˆ·ç«¯Jedis</h1>
              </div>
            </div>
            <div class="component  article-subhead ">
              <div class="component-content"></div>
            </div>

            <div class="tagssheet component">
              <div class="component-content">
                
                  
                  <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93" class="tag">
                    æ•°æ®åº“
                  </a>
                
                  
                  <a href="/tags/redis" class="tag">
                    Redis
                  </a>
                
              </div>
            </div>
          </div>
          
          <div class="pagebody">
            
            
            
            
            
            
            
            
            <p class="component-content component">&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; );
Â Â Â Â Â jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; );
Â Â Â Â Â System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; ));
Â Â Â Â Â  //list
Â Â Â Â Â System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; );
Â Â Â Â Â  //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;);
Â Â Â Â Â List<!-- raw HTML omitted --> list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1);
Â Â Â Â Â  for Â (String element : list) {
Â Â Â Â Â Â Â System. out .println(element);
Â Â Â Â Â }
Â Â Â Â Â  //set
Â Â Â Â Â jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; );
Â Â Â Â Â jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; );
Â Â Â Â Â jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; );
Â Â Â Â Â Set<!-- raw HTML omitted --> set1 = jedis.smembers( &ldquo;orders&rdquo; );
Â Â Â Â Â  for Â ( Iterator Â iterator = set1.iterator(); iterator.hasNext();) {
Â Â Â Â Â Â Â String string = (String) iterator.next();
Â Â Â Â Â Â Â System. out .println(string);
Â Â Â Â Â }
Â Â Â Â Â jedis.srem( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; );
Â Â Â Â Â System. out .println(jedis.smembers( &ldquo;orders&rdquo; ).size());
Â Â Â Â Â  //hash
Â Â Â Â Â jedis.hset( &ldquo;hash1&rdquo; , &ldquo;userName&rdquo; , &ldquo;lisi&rdquo; );
Â Â Â Â Â System. out .println(jedis.hget( &ldquo;hash1&rdquo; , &ldquo;userName&rdquo; ));
Â Â Â Â Â Map&lt;String,String&gt; map =Â  new Â HashMap&lt;String,String&gt;();
Â Â Â Â Â map.put( &ldquo;telphone&rdquo; , &ldquo;13811814763&rdquo; );
Â Â Â Â Â map.put( &ldquo;address&rdquo; , &ldquo;atguigu&rdquo; );
Â Â Â Â Â map.put( &ldquo;email&rdquo; , &ldquo;<a href="mailto:abc@163.com">abc@163.com</a>&rdquo; );
Â Â Â Â Â jedis.hmset( &ldquo;hash2&rdquo; ,map);
Â Â Â Â Â List<!-- raw HTML omitted --> result = jedis.hmget( &ldquo;hash2&rdquo; ,Â  &ldquo;telphone&rdquo; , &ldquo;email&rdquo; );
Â Â Â Â Â  for Â (String element : result) {
Â Â Â Â Â Â Â System. out .println(element);
Â Â Â Â Â }
Â Â Â Â Â  // zset
Â Â Â Â Â jedis.zadd( &ldquo;zset01&rdquo; ,60d, &ldquo;v1&rdquo; );
Â Â Â Â Â jedis.zadd( &ldquo;zset01&rdquo; ,70d, &ldquo;v2&rdquo; );
Â Â Â Â Â jedis.zadd( &ldquo;zset01&rdquo; ,80d, &ldquo;v3&rdquo; );
Â Â Â Â Â jedis.zadd( &ldquo;zset01&rdquo; ,90d, &ldquo;v4&rdquo; );
Â Â Â Â Â 
Â Â Â Â Â Set<!-- raw HTML omitted --> s1 = jedis.zrange( &ldquo;zset01&rdquo; ,0,-1);
Â Â Â Â Â  for Â ( Iterator Â iterator = s1.iterator(); iterator.hasNext();) {
Â Â Â Â Â Â Â String string = (String) iterator.next();
Â Â Â Â Â Â Â System. out .println(string);
Â Â Â Â Â }</p>
<p class="component-content component">Â Â Â Â Â Â Â Â Â Â 
Â Â }
}</p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">
### 4.3ã€äº‹åŠ¡æäº¤

- æ—¥å¸¸

```java
package Â com.atguigu.redis.test; 
â€¨
import Â  redis.clients.jedis.Jedis ; 
import Â redis.clients.jedis.Response; 
import Â redis.clients.jedis.Transaction; 
â€¨
public Â  class Â Test03Â  
{ 
Â Â  public Â  static Â  void Â main(String[] args)Â  
Â Â { 
Â Â Â Â Â  Jedis Â jedis =Â  new Â  Jedis ( &#34;127.0.0.1&#34; ,6379); 
Â Â Â Â Â  
Â Â Â Â Â  //ç›‘æ§keyï¼Œå¦‚æœè¯¥åŠ¨äº†äº‹åŠ¡å°±è¢«æ”¾å¼ƒ 
Â Â Â Â Â  /*3 
Â Â Â Â Â jedis.watch(&#34;serialNum&#34;); 
Â Â Â Â Â jedis.set(&#34;serialNum&#34;,&#34;s#####################&#34;); 
Â Â Â Â Â jedis.unwatch();*/ 
Â Â Â Â Â  
Â Â Â Â Â Transaction transaction = jedis.multi(); //è¢«å½“ä½œä¸€ä¸ªå‘½ä»¤è¿›è¡Œæ‰§è¡Œ 
Â Â Â Â Â Response&lt;String&gt; response = transaction.get( &#34;serialNum&#34; ); 
Â Â Â Â Â transaction.set( &#34;serialNum&#34; , &#34;s002&#34; ); 
Â Â Â Â Â response = transaction.get( &#34;serialNum&#34; ); 
Â Â Â Â Â transaction.lpush( &#34;list3&#34; , &#34;a&#34; ); 
Â Â Â Â Â transaction.lpush( &#34;list3&#34; , &#34;b&#34; ); 
Â Â Â Â Â transaction.lpush( &#34;list3&#34; , &#34;c&#34; ); 
Â Â Â Â Â  
Â Â Â Â Â transaction.exec(); 
Â Â Â Â Â  //2 transaction.discard(); 
Â Â Â Â Â System. out .println( &#34;serialNum***********&#34; &#43;response.get()); 
Â Â Â Â Â Â Â Â Â Â  
Â Â } 
} </code></pre>
  
</div><div class="component-content component"><ul>
<li>åŠ é”</li>
</ul></div>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">class</span> Â <span style="color:#a6e22e">TestTransaction</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">boolean</span> Â <span style="color:#a6e22e">transMethod</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Jedis jedis <span style="color:#f92672">=</span>Â  <span style="color:#66d9ef">new</span> Â Jedis<span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;127.0.0.1&#34;</span> <span style="color:#f92672">,</span> <span style="color:#ae81ff">6379</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">int</span> Â balance<span style="color:#f92672">;</span> <span style="color:#75715e">// å¯ç”¨ä½™é¢ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Â Â Â Â Â  <span style="color:#66d9ef">int</span> Â debt<span style="color:#f92672">;</span> <span style="color:#75715e">// æ¬ é¢ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Â Â Â Â Â  <span style="color:#66d9ef">int</span> Â amtToSubtract <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span><span style="color:#f92672">;</span> <span style="color:#75715e">// å®åˆ·é¢åº¦ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>â€¨
</span></span><span style="display:flex;"><span>Â Â Â Â Â jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">watch</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;balance&#34;</span> <span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#75715e">//jedis.set(&#34;balance&#34;,&#34;5&#34;);//æ­¤å¥ä¸è¯¥å‡ºç°ï¼Œè®²è¯¾æ–¹ä¾¿ã€‚æ¨¡æ‹Ÿå…¶ä»–ç¨‹åºå·²ç»ä¿®æ”¹äº†è¯¥æ¡ç›® 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Â Â Â Â Â balance <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span> <span style="color:#a6e22e">parseInt</span> <span style="color:#f92672">(</span>jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;balance&#34;</span> <span style="color:#f92672">));</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">if</span> Â <span style="color:#f92672">(</span>balance <span style="color:#f92672">&lt;</span> amtToSubtract<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">unwatch</span><span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â System<span style="color:#f92672">.</span> out <span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;modify&#34;</span> <span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â  <span style="color:#66d9ef">return</span> Â  <span style="color:#66d9ef">false</span> <span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â <span style="color:#f92672">}</span>Â  <span style="color:#66d9ef">else</span> Â <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â System<span style="color:#f92672">.</span> out <span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;***********transaction&#34;</span> <span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â  Transaction Â transaction <span style="color:#f92672">=</span> jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">multi</span><span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â transaction<span style="color:#f92672">.</span><span style="color:#a6e22e">decrBy</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;balance&#34;</span> <span style="color:#f92672">,</span> amtToSubtract<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â transaction<span style="color:#f92672">.</span><span style="color:#a6e22e">incrBy</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;debt&#34;</span> <span style="color:#f92672">,</span> amtToSubtract<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â transaction<span style="color:#f92672">.</span><span style="color:#a6e22e">exec</span><span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â balance <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span> <span style="color:#a6e22e">parseInt</span> <span style="color:#f92672">(</span>jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;balance&#34;</span> <span style="color:#f92672">));</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â debt <span style="color:#f92672">=</span> Integer<span style="color:#f92672">.</span> <span style="color:#a6e22e">parseInt</span> <span style="color:#f92672">(</span>jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;debt&#34;</span> <span style="color:#f92672">));</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â System<span style="color:#f92672">.</span> out <span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;*******&#34;</span> Â <span style="color:#f92672">+</span> balance<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â System<span style="color:#f92672">.</span> out <span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;*******&#34;</span> Â <span style="color:#f92672">+</span> debt<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â  <span style="color:#66d9ef">return</span> Â  <span style="color:#66d9ef">true</span> <span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#75715e">/** 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Â Â  * é€šä¿—ç‚¹è®²ï¼Œwatchå‘½ä»¤å°±æ˜¯æ ‡è®°ä¸€ä¸ªé”®ï¼Œå¦‚æœæ ‡è®°äº†ä¸€ä¸ªé”®ï¼Œ åœ¨æäº¤äº‹åŠ¡å‰å¦‚æœè¯¥é”®è¢«åˆ«äººä¿®æ”¹è¿‡ï¼Œé‚£äº‹åŠ¡å°±ä¼šå¤±è´¥ï¼Œè¿™ç§æƒ…å†µé€šå¸¸å¯ä»¥åœ¨ç¨‹åºä¸­ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Â Â  * é‡æ–°å†å°è¯•ä¸€æ¬¡ã€‚ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Â Â  * é¦–å…ˆæ ‡è®°äº†é”®balanceï¼Œç„¶åæ£€æŸ¥ä½™é¢æ˜¯å¦è¶³å¤Ÿï¼Œä¸è¶³å°±å–æ¶ˆæ ‡è®°ï¼Œå¹¶ä¸åšæ‰£å‡ï¼› è¶³å¤Ÿçš„è¯ï¼Œå°±å¯åŠ¨äº‹åŠ¡è¿›è¡Œæ›´æ–°æ“ä½œï¼Œ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Â Â  * å¦‚æœåœ¨æ­¤æœŸé—´é”®balanceè¢«å…¶å®ƒäººä¿®æ”¹ï¼Œ é‚£åœ¨æäº¤äº‹åŠ¡ï¼ˆæ‰§è¡Œ exec ï¼‰æ—¶å°±ä¼šæŠ¥é”™ï¼Œ ç¨‹åºä¸­é€šå¸¸å¯ä»¥æ•è·è¿™ç±»é”™è¯¯å†é‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œç›´åˆ°æˆåŠŸã€‚ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Â Â  */</span> 
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">static</span> Â  <span style="color:#66d9ef">void</span> Â <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â TestTransaction test <span style="color:#f92672">=</span>Â  <span style="color:#66d9ef">new</span> Â TestTransaction<span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">boolean</span> Â retValue <span style="color:#f92672">=</span> test<span style="color:#f92672">.</span><span style="color:#a6e22e">transMethod</span><span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â System<span style="color:#f92672">.</span> out <span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;main retValue-------: &#34;</span> Â <span style="color:#f92672">+</span> retValue<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> </span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="44ä¸»ä»å¤åˆ¶" class="pagebody-header">
    4.4ã€ä¸»ä»å¤åˆ¶
  </h3>
</div><div class="component-content component"><ul>
<li>
<p class="component-content component">6379,6380å¯åŠ¨ï¼Œå…ˆå„è‡ªå…ˆç‹¬ç«‹</p>
</li>
<li>
<p class="component-content component">ä¸»å†™</p>
</li>
<li>
<p class="component-content component">ä»è¯»</p>
</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="5jedispool" class="pagebody-header">
    5ã€JedisPool
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="51è·å–jediså®ä¾‹éœ€è¦ä»jedispoolä¸­è·å–" class="pagebody-header">
    5.1ã€è·å–Jediså®ä¾‹éœ€è¦ä»JedisPoolä¸­è·å–
  </h3>
</div>
<div class="component-content pagebody component">
  <h3 id="52ç”¨å®Œjediså®ä¾‹éœ€è¦è¿”è¿˜ç»™jedispool" class="pagebody-header">
    5.2ã€ç”¨å®ŒJediså®ä¾‹éœ€è¦è¿”è¿˜ç»™JedisPool
  </h3>
</div>
<div class="component-content pagebody component">
  <h3 id="52å¦‚æœjedisåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºé”™åˆ™ä¹Ÿéœ€è¦è¿˜ç»™jedispool" class="pagebody-header">
    5.2ã€å¦‚æœJedisåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºé”™ï¼Œåˆ™ä¹Ÿéœ€è¦è¿˜ç»™JedisPool
  </h3>
</div>
<div class="component-content pagebody component">
  <h3 id="54ä¾‹è§ä»£ç " class="pagebody-header">
    5.4ã€ä¾‹è§ä»£ç 
  </h3>
</div><p class="component-content component">JedisPoolUtil</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> Â com.atguigu.redis.test<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> Â redis.clients.jedis.Jedis<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> Â redis.clients.jedis.JedisPool<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> Â redis.clients.jedis.JedisPoolConfig<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">class</span> Â  <span style="color:#a6e22e">JedisPoolUtil</span> Â <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â  
</span></span><span style="display:flex;"><span>Â  <span style="color:#66d9ef">private</span> Â  <span style="color:#66d9ef">static</span> Â  <span style="color:#66d9ef">volatile</span> Â JedisPoolÂ  jedisPool Â <span style="color:#f92672">=</span>Â  <span style="color:#66d9ef">null</span> <span style="color:#f92672">;</span> <span style="color:#75715e">//è¢«volatileä¿®é¥°çš„å˜é‡ä¸ä¼šè¢«æœ¬åœ°çº¿ç¨‹ç¼“å­˜ï¼Œå¯¹è¯¥å˜é‡çš„è¯»å†™éƒ½æ˜¯ç›´æ¥æ“ä½œå…±äº«å†…å­˜ã€‚ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Â Â  
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#66d9ef">private</span> Â <span style="color:#a6e22e">JedisPoolUtil</span><span style="color:#f92672">()</span> <span style="color:#f92672">{}</span> 
</span></span><span style="display:flex;"><span>Â Â  
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">static</span> Â JedisPool <span style="color:#a6e22e">getJedisPoolInstance</span><span style="color:#f92672">()</span> 
</span></span><span style="display:flex;"><span>Â <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span> <span style="color:#66d9ef">null</span> Â <span style="color:#f92672">==</span>Â  jedisPool <span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span>Â Â Â  <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â  <span style="color:#66d9ef">synchronized</span> Â <span style="color:#f92672">(</span> JedisPoolUtil <span style="color:#f92672">.</span> <span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">) </span>
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span> <span style="color:#66d9ef">null</span> Â <span style="color:#f92672">==</span>Â  jedisPool <span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â  <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â  JedisPoolConfig poolConfig <span style="color:#f92672">=</span>Â  <span style="color:#66d9ef">new</span> Â JedisPoolConfig<span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â  poolConfig<span style="color:#f92672">.</span><span style="color:#a6e22e">setMaxActive</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1000</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â  poolConfig<span style="color:#f92672">.</span><span style="color:#a6e22e">setMaxIdle</span><span style="color:#f92672">(</span><span style="color:#ae81ff">32</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â  poolConfig<span style="color:#f92672">.</span><span style="color:#a6e22e">setMaxWait</span><span style="color:#f92672">(</span><span style="color:#ae81ff">100</span><span style="color:#f92672">*</span><span style="color:#ae81ff">1000</span><span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â  poolConfig<span style="color:#f92672">.</span><span style="color:#a6e22e">setTestOnBorrow</span><span style="color:#f92672">(</span> <span style="color:#66d9ef">true</span> <span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â Â Â  
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â Â Â Â Â  jedisPool Â <span style="color:#f92672">=</span>Â  <span style="color:#66d9ef">new</span> Â JedisPool<span style="color:#f92672">(</span>poolConfig<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;127.0.0.1&#34;</span> <span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â Â  <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â Â Â  <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">return</span> Â  jedisPool <span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â Â  
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">static</span> Â  <span style="color:#66d9ef">void</span> Â <span style="color:#a6e22e">release</span><span style="color:#f92672">(</span>JedisPool jedisPool<span style="color:#f92672">,</span>Jedis jedis<span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span>Â <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span> <span style="color:#66d9ef">null</span> Â <span style="color:#f92672">!=</span> jedis<span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span>Â Â Â  <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  jedisPool<span style="color:#f92672">.</span><span style="color:#a6e22e">returnResourceObject</span><span style="color:#f92672">(</span>jedis<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â  <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â </span></span></code></pre></div></div>
  
</div><p class="component-content component">Demo5:JedisPool.getResource();</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> Â com.atguigu.redis.test<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> Â redis.clients.jedis.Jedis<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> Â redis.clients.jedis.JedisPool<span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>â€¨
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">class</span> Â <span style="color:#a6e22e">Test01</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â  <span style="color:#66d9ef">public</span> Â  <span style="color:#66d9ef">static</span> Â  <span style="color:#66d9ef">void</span> Â <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â JedisPool jedisPool <span style="color:#f92672">=</span> JedisPoolUtil<span style="color:#f92672">.</span> <span style="color:#a6e22e">getJedisPoolInstance</span> <span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Jedis jedis <span style="color:#f92672">=</span>Â  <span style="color:#66d9ef">null</span> <span style="color:#f92672">;</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â  
</span></span><span style="display:flex;"><span>Â Â Â Â Â  <span style="color:#66d9ef">try</span> Â  
</span></span><span style="display:flex;"><span>Â Â Â Â Â <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â jedis <span style="color:#f92672">=</span> jedisPool<span style="color:#f92672">.</span><span style="color:#a6e22e">getResource</span><span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â jedis<span style="color:#f92672">.</span><span style="color:#a6e22e">set</span><span style="color:#f92672">(</span> <span style="color:#e6db74">&#34;k18&#34;</span> <span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;v183&#34;</span> <span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â  
</span></span><span style="display:flex;"><span>Â Â Â Â Â <span style="color:#f92672">}</span>Â  <span style="color:#66d9ef">catch</span> Â <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â e<span style="color:#f92672">.</span><span style="color:#a6e22e">printStackTrace</span><span style="color:#f92672">();</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â <span style="color:#f92672">}</span> <span style="color:#66d9ef">finally</span> <span style="color:#f92672">{</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â Â Â JedisPoolUtil<span style="color:#f92672">.</span> <span style="color:#a6e22e">release</span> <span style="color:#f92672">(</span>jedisPool<span style="color:#f92672">,</span> jedis<span style="color:#f92672">);</span> 
</span></span><span style="display:flex;"><span>Â Â Â Â Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â Â <span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>Â </span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="55é…ç½®æ€»ç»“all" class="pagebody-header">
    5.5ã€é…ç½®æ€»ç»“all
  </h3>
</div><p class="component-content component">JedisPoolçš„é…ç½®å‚æ•°å¤§éƒ¨åˆ†æ˜¯ç”±JedisPoolConfigçš„å¯¹åº”é¡¹æ¥èµ‹å€¼çš„ã€‚</p>
<p class="component-content component">maxActive ï¼šæ§åˆ¶ä¸€ä¸ªpoolå¯åˆ†é…å¤šå°‘ä¸ªjediså®ä¾‹ï¼Œé€šè¿‡pool.getResource()æ¥è·å–ï¼›å¦‚æœèµ‹å€¼ä¸º-1ï¼Œåˆ™è¡¨ç¤ºä¸é™åˆ¶ï¼›å¦‚æœpoolå·²ç»åˆ†é…äº†maxActiveä¸ªjediså®ä¾‹ï¼Œåˆ™æ­¤æ—¶poolçš„çŠ¶æ€ä¸ºexhaustedã€‚</p>
<p class="component-content component">maxIdle ï¼šæ§åˆ¶ä¸€ä¸ªpoolæœ€å¤šæœ‰å¤šå°‘ä¸ªçŠ¶æ€ä¸ºidle(ç©ºé—²)çš„jediså®ä¾‹ï¼›</p>
<p class="component-content component">whenExhaustedActionï¼šè¡¨ç¤ºå½“poolä¸­çš„jediså®ä¾‹éƒ½è¢«allocatedå®Œæ—¶ï¼Œpoolè¦é‡‡å–çš„æ“ä½œï¼›é»˜è®¤æœ‰ä¸‰ç§ã€‚</p>
<p class="component-content component">WHEN_EXHAUSTED_FAIL &ndash;&gt; è¡¨ç¤ºæ— jediså®ä¾‹æ—¶ï¼Œç›´æ¥æŠ›å‡ºNoSuchElementExceptionï¼›</p>
<p class="component-content component">WHEN_EXHAUSTED_BLOCK &ndash;&gt; åˆ™è¡¨ç¤ºé˜»å¡ä½ï¼Œæˆ–è€…è¾¾åˆ°maxWaitæ—¶æŠ›å‡ºJedisConnectionExceptionï¼›</p>
<p class="component-content component">WHEN_EXHAUSTED_GROW &ndash;&gt; åˆ™è¡¨ç¤ºæ–°å»ºä¸€ä¸ªjediså®ä¾‹ï¼Œä¹Ÿå°±è¯´è®¾ç½®çš„maxActiveæ— ç”¨ï¼›</p>
<p class="component-content component">maxWait ï¼šè¡¨ç¤ºå½“borrowä¸€ä¸ªjediså®ä¾‹æ—¶ï¼Œæœ€å¤§çš„ç­‰å¾…æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡ç­‰å¾…æ—¶é—´ï¼Œåˆ™ç›´æ¥æŠ›JedisConnectionExceptionï¼›</p>
<p class="component-content component">testOnBorrow ï¼šè·å¾—ä¸€ä¸ªjediså®ä¾‹çš„æ—¶å€™æ˜¯å¦æ£€æŸ¥è¿æ¥å¯ç”¨æ€§ï¼ˆping()ï¼‰ï¼›å¦‚æœä¸ºtrueï¼Œåˆ™å¾—åˆ°çš„jediså®ä¾‹å‡æ˜¯å¯ç”¨çš„ï¼›</p>
<p class="component-content component">testOnReturnï¼šreturn ä¸€ä¸ªjediså®ä¾‹ç»™poolæ—¶ï¼Œæ˜¯å¦æ£€æŸ¥è¿æ¥å¯ç”¨æ€§ï¼ˆping()ï¼‰ï¼›</p>
<p class="component-content component">testWhileIdleï¼šå¦‚æœä¸ºtrueï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ªidle object evitorçº¿ç¨‹å¯¹idle objectè¿›è¡Œæ‰«æï¼Œå¦‚æœvalidateå¤±è´¥ï¼Œæ­¤objectä¼šè¢«ä»poolä¸­dropæ‰ï¼›è¿™ä¸€é¡¹åªæœ‰åœ¨timeBetweenEvictionRunsMilliså¤§äº0æ—¶æ‰æœ‰æ„ä¹‰ï¼›</p>
<p class="component-content component">timeBetweenEvictionRunsMillisï¼šè¡¨ç¤ºidle object evitorä¸¤æ¬¡æ‰«æä¹‹é—´è¦sleepçš„æ¯«ç§’æ•°ï¼›</p>
<p class="component-content component">numTestsPerEvictionRunï¼šè¡¨ç¤ºidle object evitoræ¯æ¬¡æ‰«æçš„æœ€å¤šçš„å¯¹è±¡æ•°ï¼›</p>
<p class="component-content component">minEvictableIdleTimeMillisï¼šè¡¨ç¤ºä¸€ä¸ªå¯¹è±¡è‡³å°‘åœç•™åœ¨idleçŠ¶æ€çš„æœ€çŸ­æ—¶é—´ï¼Œç„¶åæ‰èƒ½è¢«idle object evitoræ‰«æå¹¶é©±é€ï¼›è¿™ä¸€é¡¹åªæœ‰åœ¨timeBetweenEvictionRunsMilliså¤§äº0æ—¶æ‰æœ‰æ„ä¹‰ï¼›</p>
<p class="component-content component">softMinEvictableIdleTimeMillisï¼šåœ¨minEvictableIdleTimeMillisåŸºç¡€ä¸Šï¼ŒåŠ å…¥äº†è‡³å°‘minIdleä¸ªå¯¹è±¡å·²ç»åœ¨poolé‡Œé¢äº†ã€‚å¦‚æœä¸º-1ï¼Œevictedä¸ä¼šæ ¹æ®idle timeé©±é€ä»»ä½•å¯¹è±¡ã€‚å¦‚æœminEvictableIdleTimeMillis&gt;0ï¼Œåˆ™æ­¤é¡¹è®¾ç½®æ— æ„ä¹‰ï¼Œä¸”åªæœ‰åœ¨timeBetweenEvictionRunsMilliså¤§äº0æ—¶æ‰æœ‰æ„ä¹‰ï¼›</p>
<p class="component-content component">lifoï¼šborrowObjectè¿”å›å¯¹è±¡æ—¶ï¼Œæ˜¯é‡‡ç”¨DEFAULT_LIFOï¼ˆlast in first outï¼Œå³ç±»ä¼¼cacheçš„æœ€é¢‘ç¹ä½¿ç”¨é˜Ÿåˆ—ï¼‰ï¼Œå¦‚æœä¸ºFalseï¼Œåˆ™è¡¨ç¤ºFIFOé˜Ÿåˆ—ï¼›</p>
<p class="component-content component">å…¶ä¸­JedisPoolConfigå¯¹ä¸€äº›å‚æ•°çš„é»˜è®¤è®¾ç½®å¦‚ä¸‹ï¼š</p>
<p class="component-content component">testWhileIdle=true</p>
<p class="component-content component">minEvictableIdleTimeMills=60000</p>
<p class="component-content component">timeBetweenEvictionRunsMillis=30000</p>
<p class="component-content component">numTestsPerEvictionRun=-1</p>

          </div><div class="component">
            <div class="component-content">
              <div class="article-copyright">
                <p class="content">
                  ç‰ˆæƒå£°æ˜: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">ç‰ˆæƒå£°æ˜ï¼šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a>
                </p>
                <p class="content">ä½œè€…:  yuanshuai </p>
                <p class="content">å‘è¡¨æ—¥æœŸ:  2021å¹´11æœˆ26æ—¥</p>
              </div>
            </div>
          </div></article>
      </section>
  </main>

  <script>
    var script = document.createElement("script");script.src = "https://yuanshuai1122.github.io/js/initPost.js";
    document.head.appendChild(script);
  </script>

    
    <div class="footer-main ">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="foot-nav">
        <div class="foot-nav-items">
          <div class="item">
            <div class="logo"></div>
            <div class="email">Email: <a href="mailto:shuaiyuan@gmail.com">shuaiyuan@gmail.com</a></div>
          </div>

          <div class="item community">
            <div class="item-title">ç¤¾äº¤åª’ä½“</div>
            
              <a href="https://github.com/yuanshuai1122" target="_blank">Github</a>
            
          </div>

          <div class="item resources">
            <div class="item-title">å‹é“¾</div>
            
              <a href="https://yuanshuaicn.com/" target="_blank">ğŸ‘‹</a>
            
          </div>
        </div>
      </div>
      <div class="bottom">
        <div class="item copyright">
          &copy; 2023
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://github.com/floyd-li/hugo-theme-itheme" target="_blank">iTheme</a>
        </div>
      </div>
    </div>
  </div>
</div>

  </body>
    
    

    
    
</html>
