<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Redis之Java客户端Jedis - CN.yuanshuai</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; ); jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; ); System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; )); //list System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; ); //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;); List list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1); for (String element : list) { System. out .println(element); } //set jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; ); Set set1 = jedis.smembers( &ldquo;orders&rdquo;" /><meta name="keywords" content='数据库, Redis' /><meta itemprop="name" content="Redis之Java客户端Jedis">
<meta itemprop="description" content="&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; ); jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; ); System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; )); //list System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; ); //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;); List list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1); for (String element : list) { System. out .println(element); } //set jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; ); Set set1 = jedis.smembers( &ldquo;orders&rdquo;"><meta itemprop="datePublished" content="2021-09-24T18:38:23+00:00" />
<meta itemprop="dateModified" content="2021-09-24T18:38:23+00:00" />
<meta itemprop="wordCount" content="2320">
<meta itemprop="keywords" content="数据库,Redis," /><meta property="og:title" content="Redis之Java客户端Jedis" />
<meta property="og:description" content="&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; ); jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; ); System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; )); //list System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; ); //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;); List list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1); for (String element : list) { System. out .println(element); } //set jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; ); Set set1 = jedis.smembers( &ldquo;orders&rdquo;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.yuanshuaicn.com/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-24T18:38:23+00:00" />
<meta property="article:modified_time" content="2021-09-24T18:38:23+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Redis之Java客户端Jedis"/>
<meta name="twitter:description" content="&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; ); jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; ); System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; )); //list System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; ); //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;); List list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1); for (String element : list) { System. out .println(element); } //set jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; ); jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; ); Set set1 = jedis.smembers( &ldquo;orders&rdquo;"/>
<meta name="application-name" content="CN.yuanshuai">
<meta name="apple-mobile-web-app-title" content="CN.yuanshuai"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://blog.yuanshuaicn.com/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/" /><link rel="prev" href="http://blog.yuanshuaicn.com/posts/redis%E4%B9%8Bnosql%E5%85%A5%E9%97%A8%E5%92%8C%E6%A6%82%E8%BF%B0-redis%E4%B9%8Bnosql%E5%85%A5%E9%97%A8%E5%92%8C%E6%A6%82%E8%BF%B0/" /><link rel="next" href="http://blog.yuanshuaicn.com/posts/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%80-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%80/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Redis之Java客户端Jedis",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/blog.yuanshuaicn.com\/posts\/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis\/"
    },"genre": "posts","keywords": "数据库, Redis","wordcount":  2320 ,
    "url": "http:\/\/blog.yuanshuaicn.com\/posts\/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis\/","datePublished": "2021-09-24T18:38:23+00:00","dateModified": "2021-09-24T18:38:23+00:00","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "yuanshuai"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="CN.yuanshuai"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="CN.yuanshuai" data-alt="CN.yuanshuai" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">CN.yuanshuai</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="CN.yuanshuai"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="/fixit.min.svg" data-alt="/fixit.min.svg" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">CN.yuanshuai</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><main class="container"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom">
    </aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Redis之Java客户端Jedis</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><a href="https://cloud.tencent.com/developer/user/8180692" title="作者"target="_blank" rel="external nofollow noopener noreferrer author" class="author"><img loading="lazy" src="https://aabb-2023.oss-cn-beijing.aliyuncs.com/hjscijg3uw.png" srcset="https://aabb-2023.oss-cn-beijing.aliyuncs.com/hjscijg3uw.png, https://aabb-2023.oss-cn-beijing.aliyuncs.com/hjscijg3uw.png 1.5x, https://aabb-2023.oss-cn-beijing.aliyuncs.com/hjscijg3uw.png 2x" sizes="auto" data-title="yuanshuai" data-alt="yuanshuai" class="avatar" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/>&nbsp;yuanshuai</a></span></div>
      <div class="post-meta-line"><span title="发布于 2021-09-24 18:38:23"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden="true"></i><time datetime="2021-09-24">2021-09-24</time></span>&nbsp;<span title="更新于 2021-09-24 18:38:23"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden="true"></i><time datetime="2021-09-24">2021-09-24</time></span>&nbsp;<span title="2320 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 2400 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 5 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#44主从复制">4.4、主从复制</a></li>
      </ul>
    </li>
    <li><a href="#5jedispool">5、JedisPool</a>
      <ul>
        <li><a href="#51获取jedis实例需要从jedispool中获取">5.1、获取Jedis实例需要从JedisPool中获取</a></li>
        <li><a href="#52用完jedis实例需要返还给jedispool">5.2、用完Jedis实例需要返还给JedisPool</a></li>
        <li><a href="#52如果jedis在使用过程中出错则也需要还给jedispool">5.2、如果Jedis在使用过程中出错，则也需要还给JedisPool</a></li>
        <li><a href="#54例见代码">5.4、例见代码</a></li>
        <li><a href="#55配置总结all">5.5、配置总结all</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&quot; );
     jedis.mset( &ldquo;str1&rdquo; , &ldquo;v1&rdquo; , &ldquo;str2&rdquo; , &ldquo;v2&rdquo; , &ldquo;str3&rdquo; , &ldquo;v3&rdquo; );
     System. out .println(jedis.mget( &ldquo;str1&rdquo; , &ldquo;str2&rdquo; , &ldquo;str3&rdquo; ));
      //list
     System. out .println( &ldquo;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-&rdquo; );
      //jedis.lpush(&quot; mylist &ldquo;,&ldquo;v1&rdquo;,&ldquo;v2&rdquo;,&ldquo;v3&rdquo;,&ldquo;v4&rdquo;,&ldquo;v5&rdquo;);
     List<!-- raw HTML omitted --> list = jedis.lrange( &ldquo;mylist&rdquo; ,0,-1);
      for  (String element : list) {
       System. out .println(element);
     }
      //set
     jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd001&rdquo; );
     jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; );
     jedis.sadd( &ldquo;orders&rdquo; , &ldquo;jd003&rdquo; );
     Set<!-- raw HTML omitted --> set1 = jedis.smembers( &ldquo;orders&rdquo; );
      for  ( Iterator  iterator = set1.iterator(); iterator.hasNext();) {
       String string = (String) iterator.next();
       System. out .println(string);
     }
     jedis.srem( &ldquo;orders&rdquo; , &ldquo;jd002&rdquo; );
     System. out .println(jedis.smembers( &ldquo;orders&rdquo; ).size());
      //hash
     jedis.hset( &ldquo;hash1&rdquo; , &ldquo;userName&rdquo; , &ldquo;lisi&rdquo; );
     System. out .println(jedis.hget( &ldquo;hash1&rdquo; , &ldquo;userName&rdquo; ));
     Map&lt;String,String&gt; map =  new  HashMap&lt;String,String&gt;();
     map.put( &ldquo;telphone&rdquo; , &ldquo;13811814763&rdquo; );
     map.put( &ldquo;address&rdquo; , &ldquo;atguigu&rdquo; );
     map.put( &ldquo;email&rdquo; , &ldquo;<a href="mailto:abc@163.com">abc@163.com</a>&rdquo; );
     jedis.hmset( &ldquo;hash2&rdquo; ,map);
     List<!-- raw HTML omitted --> result = jedis.hmget( &ldquo;hash2&rdquo; ,  &ldquo;telphone&rdquo; , &ldquo;email&rdquo; );
      for  (String element : result) {
       System. out .println(element);
     }
      // zset
     jedis.zadd( &ldquo;zset01&rdquo; ,60d, &ldquo;v1&rdquo; );
     jedis.zadd( &ldquo;zset01&rdquo; ,70d, &ldquo;v2&rdquo; );
     jedis.zadd( &ldquo;zset01&rdquo; ,80d, &ldquo;v3&rdquo; );
     jedis.zadd( &ldquo;zset01&rdquo; ,90d, &ldquo;v4&rdquo; );
     
     Set<!-- raw HTML omitted --> s1 = jedis.zrange( &ldquo;zset01&rdquo; ,0,-1);
      for  ( Iterator  iterator = s1.iterator(); iterator.hasNext();) {
       String string = (String) iterator.next();
       System. out .println(string);
     }</p>
<p>          
  }
}</p>
<pre tabindex="0"><code>
### 4.3、事务提交

- 日常

```java
package  com.atguigu.redis.test; 
 
import   redis.clients.jedis.Jedis ; 
import  redis.clients.jedis.Response; 
import  redis.clients.jedis.Transaction; 
 
public   class  Test03  
{ 
   public   static   void  main(String[] args)  
  { 
      Jedis  jedis =  new   Jedis ( &#34;127.0.0.1&#34; ,6379); 
      
      //监控key，如果该动了事务就被放弃 
      /*3 
     jedis.watch(&#34;serialNum&#34;); 
     jedis.set(&#34;serialNum&#34;,&#34;s#####################&#34;); 
     jedis.unwatch();*/ 
      
     Transaction transaction = jedis.multi(); //被当作一个命令进行执行 
     Response&lt;String&gt; response = transaction.get( &#34;serialNum&#34; ); 
     transaction.set( &#34;serialNum&#34; , &#34;s002&#34; ); 
     response = transaction.get( &#34;serialNum&#34; ); 
     transaction.lpush( &#34;list3&#34; , &#34;a&#34; ); 
     transaction.lpush( &#34;list3&#34; , &#34;b&#34; ); 
     transaction.lpush( &#34;list3&#34; , &#34;c&#34; ); 
      
     transaction.exec(); 
      //2 transaction.discard(); 
     System. out .println( &#34;serialNum***********&#34; +response.get()); 
           
  } 
} </code></pre><ul>
<li>加锁</li>
</ul>
<div class="highlight" id="id-2"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span>   <span class="kd">class</span>  <span class="nc">TestTransaction</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="kd">public</span>   <span class="kt">boolean</span>  <span class="nf">transMethod</span><span class="o">()</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">     <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span>  <span class="k">new</span>  <span class="n">Jedis</span><span class="o">(</span> <span class="s">&#34;127.0.0.1&#34;</span> <span class="o">,</span> <span class="mi">6379</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">      <span class="kt">int</span>  <span class="n">balance</span><span class="o">;</span> <span class="c1">// 可用余额 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kt">int</span>  <span class="n">debt</span><span class="o">;</span> <span class="c1">// 欠额 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="kt">int</span>  <span class="n">amtToSubtract</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span> <span class="c1">// 实刷额度 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> 
</span></span><span class="line"><span class="cl">     <span class="n">jedis</span><span class="o">.</span><span class="na">watch</span><span class="o">(</span> <span class="s">&#34;balance&#34;</span> <span class="o">);</span> 
</span></span><span class="line"><span class="cl">      <span class="c1">//jedis.set(&#34;balance&#34;,&#34;5&#34;);//此句不该出现，讲课方便。模拟其他程序已经修改了该条目 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="n">balance</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span> <span class="nf">parseInt</span> <span class="o">(</span><span class="n">jedis</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="s">&#34;balance&#34;</span> <span class="o">));</span> 
</span></span><span class="line"><span class="cl">      <span class="k">if</span>  <span class="o">(</span><span class="n">balance</span> <span class="o">&lt;</span> <span class="n">amtToSubtract</span><span class="o">)</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">jedis</span><span class="o">.</span><span class="na">unwatch</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span> <span class="n">out</span> <span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&#34;modify&#34;</span> <span class="o">);</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span>   <span class="kc">false</span> <span class="o">;</span> 
</span></span><span class="line"><span class="cl">     <span class="o">}</span>  <span class="k">else</span>  <span class="o">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span> <span class="n">out</span> <span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&#34;***********transaction&#34;</span> <span class="o">);</span> 
</span></span><span class="line"><span class="cl">        <span class="n">Transaction</span>  <span class="n">transaction</span> <span class="o">=</span> <span class="n">jedis</span><span class="o">.</span><span class="na">multi</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">       <span class="n">transaction</span><span class="o">.</span><span class="na">decrBy</span><span class="o">(</span> <span class="s">&#34;balance&#34;</span> <span class="o">,</span> <span class="n">amtToSubtract</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">       <span class="n">transaction</span><span class="o">.</span><span class="na">incrBy</span><span class="o">(</span> <span class="s">&#34;debt&#34;</span> <span class="o">,</span> <span class="n">amtToSubtract</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">       <span class="n">transaction</span><span class="o">.</span><span class="na">exec</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">       <span class="n">balance</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span> <span class="nf">parseInt</span> <span class="o">(</span><span class="n">jedis</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="s">&#34;balance&#34;</span> <span class="o">));</span> 
</span></span><span class="line"><span class="cl">       <span class="n">debt</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span> <span class="nf">parseInt</span> <span class="o">(</span><span class="n">jedis</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="s">&#34;debt&#34;</span> <span class="o">));</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span> <span class="n">out</span> <span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&#34;*******&#34;</span>  <span class="o">+</span> <span class="n">balance</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span> <span class="n">out</span> <span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&#34;*******&#34;</span>  <span class="o">+</span> <span class="n">debt</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">        <span class="k">return</span>   <span class="kc">true</span> <span class="o">;</span> 
</span></span><span class="line"><span class="cl">     <span class="o">}</span> 
</span></span><span class="line"><span class="cl">  <span class="o">}</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">   <span class="cm">/** 
</span></span></span><span class="line"><span class="cl"><span class="cm">   * 通俗点讲，watch命令就是标记一个键，如果标记了一个键， 在提交事务前如果该键被别人修改过，那事务就会失败，这种情况通常可以在程序中 
</span></span></span><span class="line"><span class="cl"><span class="cm">   * 重新再尝试一次。 
</span></span></span><span class="line"><span class="cl"><span class="cm">   * 首先标记了键balance，然后检查余额是否足够，不足就取消标记，并不做扣减； 足够的话，就启动事务进行更新操作， 
</span></span></span><span class="line"><span class="cl"><span class="cm">   * 如果在此期间键balance被其它人修改， 那在提交事务（执行 exec ）时就会报错， 程序中通常可以捕获这类错误再重新执行一次，直到成功。 
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span> 
</span></span><span class="line"><span class="cl">   <span class="kd">public</span>   <span class="kd">static</span>   <span class="kt">void</span>  <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">     <span class="n">TestTransaction</span> <span class="n">test</span> <span class="o">=</span>  <span class="k">new</span>  <span class="n">TestTransaction</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">      <span class="kt">boolean</span>  <span class="n">retValue</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="na">transMethod</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">     <span class="n">System</span><span class="o">.</span> <span class="n">out</span> <span class="o">.</span><span class="na">println</span><span class="o">(</span> <span class="s">&#34;main retValue-------: &#34;</span>  <span class="o">+</span> <span class="n">retValue</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span> </span></span></code></pre></div><h3 id="44主从复制">4.4、主从复制</h3>
<ul>
<li>
<p>6379,6380启动，先各自先独立</p>
</li>
<li>
<p>主写</p>
</li>
<li>
<p>从读</p>
</li>
</ul>
<h2 id="5jedispool">5、JedisPool</h2>
<h3 id="51获取jedis实例需要从jedispool中获取">5.1、获取Jedis实例需要从JedisPool中获取</h3>
<h3 id="52用完jedis实例需要返还给jedispool">5.2、用完Jedis实例需要返还给JedisPool</h3>
<h3 id="52如果jedis在使用过程中出错则也需要还给jedispool">5.2、如果Jedis在使用过程中出错，则也需要还给JedisPool</h3>
<h3 id="54例见代码">5.4、例见代码</h3>
<p>JedisPoolUtil</p>
<div class="highlight" id="id-3"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span>  <span class="nn">com.atguigu.redis.test</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span>  <span class="nn">redis.clients.jedis.Jedis</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span>  <span class="nn">redis.clients.jedis.JedisPool</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span>  <span class="nn">redis.clients.jedis.JedisPoolConfig</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kd">public</span>   <span class="kd">class</span>   <span class="nc">JedisPoolUtil</span>  <span class="o">{</span> 
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">  <span class="kd">private</span>   <span class="kd">static</span>   <span class="kd">volatile</span>  <span class="n">JedisPool</span>  <span class="n">jedisPool</span>  <span class="o">=</span>  <span class="kc">null</span> <span class="o">;</span> <span class="c1">//被volatile修饰的变量不会被本地线程缓存，对该变量的读写都是直接操作共享内存。 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   
</span></span><span class="line"><span class="cl">   <span class="kd">private</span>  <span class="nf">JedisPoolUtil</span><span class="o">()</span> <span class="o">{}</span> 
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   <span class="kd">public</span>   <span class="kd">static</span>  <span class="n">JedisPool</span> <span class="nf">getJedisPoolInstance</span><span class="o">()</span> 
</span></span><span class="line"><span class="cl"> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="o">(</span> <span class="kc">null</span>  <span class="o">==</span>  <span class="n">jedisPool</span> <span class="o">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">{</span> 
</span></span><span class="line"><span class="cl">        <span class="kd">synchronized</span>  <span class="o">(</span> <span class="n">JedisPoolUtil</span> <span class="o">.</span> <span class="kd">class</span> <span class="err">) </span>
</span></span><span class="line"><span class="cl">      <span class="o">{</span> 
</span></span><span class="line"><span class="cl">           <span class="k">if</span> <span class="o">(</span> <span class="kc">null</span>  <span class="o">==</span>  <span class="n">jedisPool</span> <span class="o">)</span> 
</span></span><span class="line"><span class="cl">         <span class="o">{</span> 
</span></span><span class="line"><span class="cl">           <span class="n">JedisPoolConfig</span> <span class="n">poolConfig</span> <span class="o">=</span>  <span class="k">new</span>  <span class="n">JedisPoolConfig</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">           <span class="n">poolConfig</span><span class="o">.</span><span class="na">setMaxActive</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">           <span class="n">poolConfig</span><span class="o">.</span><span class="na">setMaxIdle</span><span class="o">(</span><span class="mi">32</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">           <span class="n">poolConfig</span><span class="o">.</span><span class="na">setMaxWait</span><span class="o">(</span><span class="mi">100</span><span class="o">*</span><span class="mi">1000</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">           <span class="n">poolConfig</span><span class="o">.</span><span class="na">setTestOnBorrow</span><span class="o">(</span> <span class="kc">true</span> <span class="o">);</span> 
</span></span><span class="line"><span class="cl">             
</span></span><span class="line"><span class="cl">             <span class="n">jedisPool</span>  <span class="o">=</span>  <span class="k">new</span>  <span class="n">JedisPool</span><span class="o">(</span><span class="n">poolConfig</span><span class="o">,</span> <span class="s">&#34;127.0.0.1&#34;</span> <span class="o">);</span> 
</span></span><span class="line"><span class="cl">         <span class="o">}</span> 
</span></span><span class="line"><span class="cl">      <span class="o">}</span> 
</span></span><span class="line"><span class="cl">    <span class="o">}</span> 
</span></span><span class="line"><span class="cl">      <span class="k">return</span>   <span class="n">jedisPool</span> <span class="o">;</span> 
</span></span><span class="line"><span class="cl"> <span class="o">}</span> 
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">   <span class="kd">public</span>   <span class="kd">static</span>   <span class="kt">void</span>  <span class="nf">release</span><span class="o">(</span><span class="n">JedisPool</span> <span class="n">jedisPool</span><span class="o">,</span><span class="n">Jedis</span> <span class="n">jedis</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl"> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="o">(</span> <span class="kc">null</span>  <span class="o">!=</span> <span class="n">jedis</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl">    <span class="o">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">jedisPool</span><span class="o">.</span><span class="na">returnResourceObject</span><span class="o">(</span><span class="n">jedis</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">    <span class="o">}</span> 
</span></span><span class="line"><span class="cl"> <span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl"> </span></span></code></pre></div><p>Demo5:JedisPool.getResource();</p>
<div class="highlight" id="id-4"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span>  <span class="nn">com.atguigu.redis.test</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span>  <span class="nn">redis.clients.jedis.Jedis</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span>  <span class="nn">redis.clients.jedis.JedisPool</span><span class="o">;</span> 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kd">public</span>   <span class="kd">class</span>  <span class="nc">Test01</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">   <span class="kd">public</span>   <span class="kd">static</span>   <span class="kt">void</span>  <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">     <span class="n">JedisPool</span> <span class="n">jedisPool</span> <span class="o">=</span> <span class="n">JedisPoolUtil</span><span class="o">.</span> <span class="nf">getJedisPoolInstance</span> <span class="o">();</span> 
</span></span><span class="line"><span class="cl">     <span class="n">Jedis</span> <span class="n">jedis</span> <span class="o">=</span>  <span class="kc">null</span> <span class="o">;</span> 
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      <span class="k">try</span>   
</span></span><span class="line"><span class="cl">     <span class="o">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">jedis</span> <span class="o">=</span> <span class="n">jedisPool</span><span class="o">.</span><span class="na">getResource</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">       <span class="n">jedis</span><span class="o">.</span><span class="na">set</span><span class="o">(</span> <span class="s">&#34;k18&#34;</span> <span class="o">,</span> <span class="s">&#34;v183&#34;</span> <span class="o">);</span> 
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">     <span class="o">}</span>  <span class="k">catch</span>  <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">     <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">JedisPoolUtil</span><span class="o">.</span> <span class="nf">release</span> <span class="o">(</span><span class="n">jedisPool</span><span class="o">,</span> <span class="n">jedis</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">     <span class="o">}</span> 
</span></span><span class="line"><span class="cl">  <span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl"> </span></span></code></pre></div><h3 id="55配置总结all">5.5、配置总结all</h3>
<p>JedisPool的配置参数大部分是由JedisPoolConfig的对应项来赋值的。</p>
<p>maxActive ：控制一个pool可分配多少个jedis实例，通过pool.getResource()来获取；如果赋值为-1，则表示不限制；如果pool已经分配了maxActive个jedis实例，则此时pool的状态为exhausted。</p>
<p>maxIdle ：控制一个pool最多有多少个状态为idle(空闲)的jedis实例；</p>
<p>whenExhaustedAction：表示当pool中的jedis实例都被allocated完时，pool要采取的操作；默认有三种。</p>
<p>WHEN_EXHAUSTED_FAIL &ndash;&gt; 表示无jedis实例时，直接抛出NoSuchElementException；</p>
<p>WHEN_EXHAUSTED_BLOCK &ndash;&gt; 则表示阻塞住，或者达到maxWait时抛出JedisConnectionException；</p>
<p>WHEN_EXHAUSTED_GROW &ndash;&gt; 则表示新建一个jedis实例，也就说设置的maxActive无用；</p>
<p>maxWait ：表示当borrow一个jedis实例时，最大的等待时间，如果超过等待时间，则直接抛JedisConnectionException；</p>
<p>testOnBorrow ：获得一个jedis实例的时候是否检查连接可用性（ping()）；如果为true，则得到的jedis实例均是可用的；</p>
<p>testOnReturn：return 一个jedis实例给pool时，是否检查连接可用性（ping()）；</p>
<p>testWhileIdle：如果为true，表示有一个idle object evitor线程对idle object进行扫描，如果validate失败，此object会被从pool中drop掉；这一项只有在timeBetweenEvictionRunsMillis大于0时才有意义；</p>
<p>timeBetweenEvictionRunsMillis：表示idle object evitor两次扫描之间要sleep的毫秒数；</p>
<p>numTestsPerEvictionRun：表示idle object evitor每次扫描的最多的对象数；</p>
<p>minEvictableIdleTimeMillis：表示一个对象至少停留在idle状态的最短时间，然后才能被idle object evitor扫描并驱逐；这一项只有在timeBetweenEvictionRunsMillis大于0时才有意义；</p>
<p>softMinEvictableIdleTimeMillis：在minEvictableIdleTimeMillis基础上，加入了至少minIdle个对象已经在pool里面了。如果为-1，evicted不会根据idle time驱逐任何对象。如果minEvictableIdleTimeMillis&gt;0，则此项设置无意义，且只有在timeBetweenEvictionRunsMillis大于0时才有意义；</p>
<p>lifo：borrowObject返回对象时，是采用DEFAULT_LIFO（last in first out，即类似cache的最频繁使用队列），如果为False，则表示FIFO队列；</p>
<p>其中JedisPoolConfig对一些参数的默认设置如下：</p>
<p>testWhileIdle=true</p>
<p>minEvictableIdleTimeMills=60000</p>
<p>timeBetweenEvictionRunsMillis=30000</p>
<p>numTestsPerEvictionRun=-1</p>
</div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2021-09-24 18:38:23">更新于 2021-09-24&nbsp;</span>
      </div><div class="post-info-license">
          <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
        </div></div>
    <div class="post-info-line">
      <div class="post-info-md"></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://blog.yuanshuaicn.com/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/" data-title="Redis之Java客户端Jedis" data-hashtags="数据库,Redis"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="http://blog.yuanshuaicn.com/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/" data-hashtag="数据库"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="http://blog.yuanshuaicn.com/posts/redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis-redis%E4%B9%8Bjava%E5%AE%A2%E6%88%B7%E7%AB%AFjedis/" data-title="Redis之Java客户端Jedis"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href='/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/' class="post-tag">数据库</a><a href='/tags/redis/' class="post-tag">Redis</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/redis%E4%B9%8Bnosql%E5%85%A5%E9%97%A8%E5%92%8C%E6%A6%82%E8%BF%B0-redis%E4%B9%8Bnosql%E5%85%A5%E9%97%A8%E5%92%8C%E6%A6%82%E8%BF%B0/" class="post-nav-item" rel="prev" title="Redis之NoSql入门和概述"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Redis之NoSql入门和概述</a>
      <a href="/posts/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%80-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%80/" class="post-nav-item" rel="next" title="Python数据分析之Pandas（一）">Python数据分析之Pandas（一）<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.119.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.18-lts.2"><img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div><div class="footer-line statistics"></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
