<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>SpringBoot2核心技术-数据访问 - 我的 Hugo FixIt 网站</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="&mdash;&mdash;&mdash;- | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- | | default | com.alibaba.druid.filter.stat.StatFilter | | stat | com.alibaba.druid.filter.stat.StatFilter | | mergeStat | com.alibaba.druid.filter.stat.MergeStatFilter | | encoding | com.alibaba.druid.filter.encoding.EncodingConvertFilter | | log4j | com.alibaba.druid.filter.logging.Log4jFilter | | log4j2 | com.alibaba.druid.filter.logging.Log4j2Filter | | slf4j | com.alibaba.druid.filter.logging.Slf4jLogFilter | | commonlogging | com.alibaba.druid.filter.logging.CommonsLogFilter | 慢SQL记录配置 &lt;bean id=&#34;stat-filter&#34; class=&#34;com.alibaba.druid.filter.stat.StatFilter&#34;&gt; &lt;property name=&#34;slowSqlMillis&#34; value=&#34;10000&#34; /&gt; &lt;property name=&#34;logSlowSql&#34; value=&#34;true&#34; /&gt; &lt;/bean&gt; 使用 slowSqlMillis 定义慢" /><meta name="keywords" content='Java, SpringBoot' /><meta itemprop="name" content="SpringBoot2核心技术-数据访问">
<meta itemprop="description" content="&mdash;&mdash;&mdash;- | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- | | default | com.alibaba.druid.filter.stat.StatFilter | | stat | com.alibaba.druid.filter.stat.StatFilter | | mergeStat | com.alibaba.druid.filter.stat.MergeStatFilter | | encoding | com.alibaba.druid.filter.encoding.EncodingConvertFilter | | log4j | com.alibaba.druid.filter.logging.Log4jFilter | | log4j2 | com.alibaba.druid.filter.logging.Log4j2Filter | | slf4j | com.alibaba.druid.filter.logging.Slf4jLogFilter | | commonlogging | com.alibaba.druid.filter.logging.CommonsLogFilter | 慢SQL记录配置 &lt;bean id=&#34;stat-filter&#34; class=&#34;com.alibaba.druid.filter.stat.StatFilter&#34;&gt; &lt;property name=&#34;slowSqlMillis&#34; value=&#34;10000&#34; /&gt; &lt;property name=&#34;logSlowSql&#34; value=&#34;true&#34; /&gt; &lt;/bean&gt; 使用 slowSqlMillis 定义慢">

<meta itemprop="wordCount" content="2819">
<meta itemprop="keywords" content="Java,SpringBoot," /><meta property="og:title" content="SpringBoot2核心技术-数据访问" />
<meta property="og:description" content="&mdash;&mdash;&mdash;- | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- | | default | com.alibaba.druid.filter.stat.StatFilter | | stat | com.alibaba.druid.filter.stat.StatFilter | | mergeStat | com.alibaba.druid.filter.stat.MergeStatFilter | | encoding | com.alibaba.druid.filter.encoding.EncodingConvertFilter | | log4j | com.alibaba.druid.filter.logging.Log4jFilter | | log4j2 | com.alibaba.druid.filter.logging.Log4j2Filter | | slf4j | com.alibaba.druid.filter.logging.Slf4jLogFilter | | commonlogging | com.alibaba.druid.filter.logging.CommonsLogFilter | 慢SQL记录配置 &lt;bean id=&#34;stat-filter&#34; class=&#34;com.alibaba.druid.filter.stat.StatFilter&#34;&gt; &lt;property name=&#34;slowSqlMillis&#34; value=&#34;10000&#34; /&gt; &lt;property name=&#34;logSlowSql&#34; value=&#34;true&#34; /&gt; &lt;/bean&gt; 使用 slowSqlMillis 定义慢" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/" /><meta property="article:section" content="posts" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SpringBoot2核心技术-数据访问"/>
<meta name="twitter:description" content="&mdash;&mdash;&mdash;- | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- | | default | com.alibaba.druid.filter.stat.StatFilter | | stat | com.alibaba.druid.filter.stat.StatFilter | | mergeStat | com.alibaba.druid.filter.stat.MergeStatFilter | | encoding | com.alibaba.druid.filter.encoding.EncodingConvertFilter | | log4j | com.alibaba.druid.filter.logging.Log4jFilter | | log4j2 | com.alibaba.druid.filter.logging.Log4j2Filter | | slf4j | com.alibaba.druid.filter.logging.Slf4jLogFilter | | commonlogging | com.alibaba.druid.filter.logging.CommonsLogFilter | 慢SQL记录配置 &lt;bean id=&#34;stat-filter&#34; class=&#34;com.alibaba.druid.filter.stat.StatFilter&#34;&gt; &lt;property name=&#34;slowSqlMillis&#34; value=&#34;10000&#34; /&gt; &lt;property name=&#34;logSlowSql&#34; value=&#34;true&#34; /&gt; &lt;/bean&gt; 使用 slowSqlMillis 定义慢"/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/" /><link rel="prev" href="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/" /><link rel="next" href="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "SpringBoot2核心技术-数据访问",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/yuanshuai1122.github.com\/posts\/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE\/"
    },"genre": "posts","keywords": "Java, SpringBoot","wordcount":  2819 ,
    "url": "https:\/\/yuanshuai1122.github.com\/posts\/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE\/","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "yuanshuai"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="我的 Hugo FixIt 网站"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="我的 Hugo FixIt 网站" data-alt="我的 Hugo FixIt 网站" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">My Hugo FixIt Site</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              >文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              >分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              >标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="我的 Hugo FixIt 网站"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="/fixit.min.svg" data-alt="/fixit.min.svg" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">My Hugo FixIt Site</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                >文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                >分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                >标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><main class="container"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom">
    </aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>SpringBoot2核心技术-数据访问</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      yuanshuai</span></span></div>
      <div class="post-meta-line"><span title="发布于 0001-01-01 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden="true"></i><time datetime="0001-01-01">0001-01-01</time></span>&nbsp;<span title="更新于 0001-01-01 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden="true"></i><time datetime="0001-01-01">0001-01-01</time></span>&nbsp;<span title="2819 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 2900 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 6 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#3使用官方starter方式">3、使用官方starter方式</a></li>
      </ul>
    </li>
    <li><a href="#3整合mybatis操作">3、整合MyBatis操作</a>
      <ul>
        <li><a href="#1配置模式">1、配置模式</a></li>
        <li><a href="#2注解模式">2、注解模式</a></li>
        <li><a href="#3混合模式">3、混合模式</a></li>
      </ul>
    </li>
    <li><a href="#4整合-mybatis-plus-完成crud">4、整合 MyBatis-Plus 完成CRUD</a>
      <ul>
        <li><a href="#1什么是mybatis-plus">1、什么是MyBatis-Plus</a></li>
        <li><a href="#2整合mybatis-plus">2、整合MyBatis-Plus</a></li>
        <li><a href="#3crud功能">3、CRUD功能</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#1redis自动配置">1、Redis自动配置</a></li>
    <li><a href="#2redistemplate与lettuce">2、RedisTemplate与Lettuce</a></li>
    <li><a href="#3切换至jedis">3、切换至jedis</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p>&mdash;&mdash;&mdash;- | &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;- |
| default       | com.alibaba.druid.filter.stat.StatFilter                |
| stat          | com.alibaba.druid.filter.stat.StatFilter                |
| mergeStat     | com.alibaba.druid.filter.stat.MergeStatFilter           |
| encoding      | com.alibaba.druid.filter.encoding.EncodingConvertFilter |
| log4j         | com.alibaba.druid.filter.logging.Log4jFilter            |
| log4j2        | com.alibaba.druid.filter.logging.Log4j2Filter           |
| slf4j         | com.alibaba.druid.filter.logging.Slf4jLogFilter         |
| commonlogging | com.alibaba.druid.filter.logging.CommonsLogFilter       |</p>
<p><strong>慢SQL记录配置</strong></p>
<div class="highlight" id="id-1"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;stat-filter&#34;</span> <span class="na">class=</span><span class="s">&#34;com.alibaba.druid.filter.stat.StatFilter&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;slowSqlMillis&#34;</span> <span class="na">value=</span><span class="s">&#34;10000&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;logSlowSql&#34;</span> <span class="na">value=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">使用 slowSqlMillis 定义慢SQL的时长</span></span></code></pre></div><h3 id="3使用官方starter方式">3、使用官方starter方式</h3>
<h4 id="1引入druid-starter">1、引入druid-starter</h4>
<div class="highlight" id="id-2"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>druid-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.1.17<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span></span></span></code></pre></div><h4 id="2分析自动配置">2、分析自动配置</h4>
<ul>
<li>扩展配置项 <strong>spring.datasource.druid</strong></li>
<li>DruidSpringAopConfiguration.<strong>class</strong>,  监控SpringBean的；配置项：<strong>spring.datasource.druid.aop-patterns</strong></li>
<li>DruidStatViewServletConfiguration.<strong>class</strong>, 监控页的配置：<strong>spring.datasource.druid.stat-view-servlet；默认开启</strong></li>
<li>DruidWebStatFilterConfiguration.<strong>class</strong>, web监控配置；<strong>spring.datasource.druid.web-stat-filter；默认开启</strong></li>
<li>DruidFilterConfiguration.<strong>class</strong>}) 所有Druid自己filter的配置</li>
</ul>
<div class="highlight" id="id-3"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_STAT_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.stat&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_CONFIG_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.config&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_ENCODING_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.encoding&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_SLF4J_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.slf4j&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_LOG4J_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.log4j&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_LOG4J2_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.log4j2&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_COMMONS_LOG_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.commons-log&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">FILTER_WALL_PREFIX</span> <span class="o">=</span> <span class="s">&#34;spring.datasource.druid.filter.wall&#34;</span><span class="o">;</span></span></span></code></pre></div><h4 id="3配置示例">3、配置示例</h4>
<div class="highlight" id="id-4"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">spring</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">datasource</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">jdbc:mysql://localhost:3306/db_account</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="m">123456</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l">com.mysql.jdbc.Driver</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">druid</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">aop-patterns</span><span class="p">:</span><span class="w"> </span><span class="l">com.atguigu.admin.* </span><span class="w"> </span><span class="c">#监控SpringBean</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">filters</span><span class="p">:</span><span class="w"> </span><span class="l">stat,wall    </span><span class="w"> </span><span class="c"># 底层开启功能，stat（sql监控），wall（防火墙）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">stat-view-servlet</span><span class="p">:</span><span class="w">   </span><span class="c"># 配置监控页功能</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">login-username</span><span class="p">:</span><span class="w"> </span><span class="l">admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">login-password</span><span class="p">:</span><span class="w"> </span><span class="l">admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">resetEnable</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">web-stat-filter</span><span class="p">:</span><span class="w">  </span><span class="c"># 监控web</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">urlPattern</span><span class="p">:</span><span class="w"> </span><span class="l">/*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exclusions</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">filter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">stat</span><span class="p">:</span><span class="w">    </span><span class="c"># 对上面filters里面的stat的详细配置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">slow-sql-millis</span><span class="p">:</span><span class="w"> </span><span class="m">1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">logSlowSql</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">wall</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">drop-table-allow</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span></span></span></code></pre></div><p>SpringBoot配置示例</p>
<p><a href="https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter"target="_blank" rel="external nofollow noopener noreferrer">https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter</a></p>
<p>配置项列表<a href="https://github.com/alibaba/druid/wiki/DruidDataSource%e9%85%8d%e7%bd%ae%e5%b1%9e%e6%80%a7%e5%88%97%e8%a1%a8"target="_blank" rel="external nofollow noopener noreferrer">https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8</a></p>
<h2 id="3整合mybatis操作">3、整合MyBatis操作</h2>
<p><a href="https://github.com/mybatis"target="_blank" rel="external nofollow noopener noreferrer">https://github.com/mybatis</a></p>
<p>starter</p>
<p>SpringBoot官方的Starter：spring-boot-starter-*</p>
<p>第三方的： *-spring-boot-starter</p>
<div class="highlight" id="id-5"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.mybatis.spring.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>2.1.4<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span></span></span></code></pre></div><p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/70.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/70.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/70.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/70.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/70.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/70.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h3 id="1配置模式">1、配置模式</h3>
<ul>
<li>全局配置文件</li>
<li>SqlSessionFactory: 自动配置好了</li>
<li>SqlSession：自动配置了 <strong>SqlSessionTemplate 组合了SqlSession</strong></li>
<li>@Import(<strong>AutoConfiguredMapperScannerRegistrar</strong>.<strong>class</strong>）；</li>
<li>Mapper： 只要我们写的操作MyBatis的接口标准了 <strong>@Mapper 就会被自动扫描进来</strong></li>
</ul>
<div class="highlight" id="id-6"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@EnableConfigurationProperties</span><span class="o">(</span><span class="n">MybatisProperties</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="err">：</span> <span class="n">MyBatis配置项绑定类</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="nd">@AutoConfigureAfter</span><span class="o">({</span> <span class="n">DataSourceAutoConfiguration</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">MybatisLanguageDriverAutoConfiguration</span><span class="o">.</span><span class="na">class</span> <span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MybatisAutoConfiguration</span><span class="o">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@ConfigurationProperties</span><span class="o">(</span><span class="n">prefix</span> <span class="o">=</span> <span class="s">&#34;mybatis&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MybatisProperties</span></span></span></code></pre></div><p>可以修改配置文件中 mybatis 开始的所有；</p>
<div class="highlight" id="id-7"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"># 配置mybatis规则
</span></span><span class="line"><span class="cl">mybatis:
</span></span><span class="line"><span class="cl">  config-location: classpath:mybatis/mybatis-config.xml  #全局配置文件位置
</span></span><span class="line"><span class="cl">  mapper-locations: classpath:mybatis/mapper/*.xml  #sql映射文件位置
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">Mapper接口---&gt;绑定Xml
</span></span><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE mapper
</span></span></span><span class="line"><span class="cl"><span class="cp">        PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&#34;com.atguigu.admin.mapper.AccountMapper&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--    public Account getAcct(Long id); --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;getAcct&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.atguigu.admin.bean.Account&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        select * from  account_tbl where  id=#{id}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/select&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mapper&gt;</span></span></span></code></pre></div><p>配置 <strong>private</strong> Configuration <strong>configuration</strong>; mybatis.<strong>configuration下面的所有，就是相当于改mybatis全局配置文件中的值</strong></p>
<p>**
**</p>
<div class="highlight" id="id-8"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="c"># 配置mybatis规则</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">mybatis</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c">#  config-location: classpath:mybatis/mybatis-config.xml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">mapper-locations</span><span class="p">:</span><span class="w"> </span><span class="l">classpath:mybatis/mapper/*.xml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">configuration</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">map-underscore-to-camel-case</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="l">可以不写全局；配置文件，所有全局配置文件的配置都放在configuration配置项中即可</span></span></span></code></pre></div><ul>
<li>导入mybatis官方starter</li>
<li>编写mapper接口。标准@Mapper注解</li>
<li>编写sql映射文件并绑定mapper接口</li>
<li>在application.yaml中指定Mapper配置文件的位置，以及指定全局配置文件的信息 （建议；<strong>配置在mybatis.configuration</strong>）</li>
</ul>
<h3 id="2注解模式">2、注解模式</h3>
<div class="highlight" id="id-9"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CityMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from city where id=#{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">City</span> <span class="nf">getById</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="n">City</span> <span class="n">city</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><h3 id="3混合模式">3、混合模式</h3>
<div class="highlight" id="id-10"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CityMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;select * from city where id=#{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">City</span> <span class="nf">getById</span><span class="o">(</span><span class="n">Long</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="n">City</span> <span class="n">city</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p><strong>最佳实战：</strong></p>
<ul>
<li>引入mybatis-starter</li>
<li><strong>配置application.yaml中，指定mapper-location位置即可</strong></li>
<li>编写Mapper接口并标注@Mapper注解</li>
<li>简单方法直接注解方式</li>
<li>复杂方法编写mapper.xml进行绑定映射</li>
<li><em>@MapperScan(&ldquo;com.atguigu.admin.mapper&rdquo;) 简化，其他的接口就可以不用标注@Mapper注解</em></li>
</ul>
<h2 id="4整合-mybatis-plus-完成crud">4、整合 MyBatis-Plus 完成CRUD</h2>
<h3 id="1什么是mybatis-plus">1、什么是MyBatis-Plus</h3>
<p><a href="https://github.com/baomidou/mybatis-plus"target="_blank" rel="external nofollow noopener noreferrer">MyBatis-Plus</a>（简称 MP）是一个 <a href="http://www.mybatis.org/mybatis-3/"target="_blank" rel="external nofollow noopener noreferrer">MyBatis</a> 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>
<p><a href="https://baomidou.com/"target="_blank" rel="external nofollow noopener noreferrer">mybatis plus 官网</a></p>
<p>建议安装 <strong>MybatisX</strong> 插件</p>
<h3 id="2整合mybatis-plus">2、整合MyBatis-Plus</h3>
<div class="highlight" id="id-11"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>3.4.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span></span></span></code></pre></div><p>自动配置</p>
<ul>
<li>MybatisPlusAutoConfiguration 配置类，MybatisPlusProperties 配置项绑定。<strong>mybatis-plus：xxx 就是对****mybatis-plus的定制</strong></li>
<li><strong>SqlSessionFactory 自动配置好。底层是容器中默认的数据源</strong></li>
<li>**mapperLocations 自动配置好的。有默认值。*<strong><em>classpath*:/mapper/*</em>/*.xml；任意包的类路径下的所有mapper文件夹下任意路径下的所有xml都是sql映射文件。  建议以后sql映射文件，放在 mapper下</strong></li>
<li><strong>容器中也自动配置好了</strong> <strong>SqlSessionTemplate</strong></li>
<li><strong>@Mapper 标注的接口也会被自动扫描；建议直接</strong> @MapperScan(<strong>&ldquo;com.atguigu.admin.mapper&rdquo;</strong>) 批量扫描就行</li>
</ul>
<p><strong>优点：</strong></p>
<ul>
<li>只需要我们的Mapper继承 <strong>BaseMapper</strong> 就可以拥有crud能力</li>
</ul>
<h3 id="3crud功能">3、CRUD功能</h3>
<div class="highlight" id="id-12"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/user/delete/{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Long</span> <span class="n">id</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                             <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;pn&#34;</span><span class="o">,</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">&#34;1&#34;</span><span class="o">)</span><span class="n">Integer</span> <span class="n">pn</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                             <span class="n">RedirectAttributes</span> <span class="n">ra</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">userService</span><span class="o">.</span><span class="na">removeById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">ra</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&#34;pn&#34;</span><span class="o">,</span><span class="n">pn</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;redirect:/dynamic_table&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/dynamic_table&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">dynamic_table</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span><span class="o">=</span><span class="s">&#34;pn&#34;</span><span class="o">,</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">&#34;1&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">pn</span><span class="o">,</span><span class="n">Model</span> <span class="n">model</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//表格内容的遍历
</span></span></span><span class="line"><span class="cl"><span class="c1">//        response.sendError
</span></span></span><span class="line"><span class="cl"><span class="c1">//     List&lt;User&gt; users = Arrays.asList(new User(&#34;zhangsan&#34;, &#34;123456&#34;),
</span></span></span><span class="line"><span class="cl"><span class="c1">//                new User(&#34;lisi&#34;, &#34;123444&#34;),
</span></span></span><span class="line"><span class="cl"><span class="c1">//                new User(&#34;haha&#34;, &#34;aaaaa&#34;),
</span></span></span><span class="line"><span class="cl"><span class="c1">//                new User(&#34;hehe &#34;, &#34;aaddd&#34;));
</span></span></span><span class="line"><span class="cl"><span class="c1">//        model.addAttribute(&#34;users&#34;,users);
</span></span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">//        if(users.size()&gt;3){
</span></span></span><span class="line"><span class="cl"><span class="c1">//            throw new UserTooManyException();
</span></span></span><span class="line"><span class="cl"><span class="c1">//        }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//从数据库中查出user表中的用户进行展示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">//构造分页参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">&lt;&gt;(</span><span class="n">pn</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//调用page进行分页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">userPage</span> <span class="o">=</span> <span class="n">userService</span><span class="o">.</span><span class="na">page</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//        userPage.getRecords()
</span></span></span><span class="line"><span class="cl"><span class="c1">//        userPage.getCurrent()
</span></span></span><span class="line"><span class="cl"><span class="c1">//        userPage.getPages()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&#34;users&#34;</span><span class="o">,</span><span class="n">userPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;table/dynamic_table&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-13"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceImpl</span> <span class="kd">extends</span> <span class="n">ServiceImpl</span><span class="o">&lt;</span><span class="n">UserMapper</span><span class="o">,</span><span class="n">User</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">UserService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserService</span> <span class="kd">extends</span> <span class="n">IService</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><h1 id="2nosql">2、NoSQL</h1>
<p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、<strong>缓存</strong>和消息中间件。 它支持多种类型的数据结构，如 <a href="http://www.redis.cn/topics/data-types-intro.html#strings"target="_blank" rel="external nofollow noopener noreferrer">字符串（strings）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hashes"target="_blank" rel="external nofollow noopener noreferrer">散列（hashes）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#lists"target="_blank" rel="external nofollow noopener noreferrer">列表（lists）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sets"target="_blank" rel="external nofollow noopener noreferrer">集合（sets）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sorted-sets"target="_blank" rel="external nofollow noopener noreferrer">有序集合（sorted sets）</a>与范围查询， <a href="http://www.redis.cn/topics/data-types-intro.html#bitmaps"target="_blank" rel="external nofollow noopener noreferrer">bitmaps</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hyperloglogs"target="_blank" rel="external nofollow noopener noreferrer">hyperloglogs</a> 和 <a href="http://www.redis.cn/commands/geoadd.html"target="_blank" rel="external nofollow noopener noreferrer">地理空间（geospatial）</a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html"target="_blank" rel="external nofollow noopener noreferrer">复制（replication）</a>，<a href="http://www.redis.cn/commands/eval.html"target="_blank" rel="external nofollow noopener noreferrer">LUA脚本（Lua scripting）</a>， <a href="http://www.redis.cn/topics/lru-cache.html"target="_blank" rel="external nofollow noopener noreferrer">LRU驱动事件（LRU eviction）</a>，<a href="http://www.redis.cn/topics/transactions.html"target="_blank" rel="external nofollow noopener noreferrer">事务（transactions）</a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html"target="_blank" rel="external nofollow noopener noreferrer">磁盘持久化（persistence）</a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html"target="_blank" rel="external nofollow noopener noreferrer">Redis哨兵（Sentinel）</a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html"target="_blank" rel="external nofollow noopener noreferrer">分区（Cluster）</a>提供高可用性（high availability）。</p>
<h2 id="1redis自动配置">1、Redis自动配置</h2>
<div class="highlight" id="id-14"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span></span></span></code></pre></div><p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/71.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/71.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/71.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/71.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/71.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/springboot2.x/71.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>自动配置：</p>
<ul>
<li>RedisAutoConfiguration 自动配置类。RedisProperties 属性类 &ndash;&gt; <strong>spring.redis.xxx是对redis的配置</strong></li>
<li>连接工厂是准备好的。<strong>Lettuce</strong>ConnectionConfiguration、<strong>Jedis</strong>ConnectionConfiguration</li>
<li><strong>自动注入了RedisTemplate</strong>&lt;<strong>Object</strong>, <strong>Object</strong>&gt; ： xxxTemplate；</li>
<li><strong>自动注入了StringRedisTemplate；k：v都是String</strong></li>
<li><strong>key：value</strong></li>
<li><strong>底层只要我们使用</strong> **StringRedisTemplate、**<strong>RedisTemplate就可以操作redis</strong></li>
</ul>
<p><strong>redis环境搭建</strong></p>
<p><strong>1、阿里云按量付费redis。经典网络</strong></p>
<p><strong>2、申请redis的公网连接地址</strong></p>
<p><strong>3、修改白名单  允许0.0.0.0/0 访问</strong></p>
<h2 id="2redistemplate与lettuce">2、RedisTemplate与Lettuce</h2>
<div class="highlight" id="id-15"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">testRedis</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">ValueOperations</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">operations</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">operations</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">,</span><span class="s">&#34;world&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="n">operations</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hello</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span></span></span></code></pre></div><h2 id="3切换至jedis">3、切换至jedis</h2>
<div class="highlight" id="id-16"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--        导入jedis--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>redis.clients<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>jedis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">spring:
</span></span><span class="line"><span class="cl">  redis:
</span></span><span class="line"><span class="cl">      host: r-bp1nc7reqesxisgxpipd.redis.rds.aliyuncs.com
</span></span><span class="line"><span class="cl">      port: 6379
</span></span><span class="line"><span class="cl">      password: lfy:Lfy123456
</span></span><span class="line"><span class="cl">      client-type: jedis
</span></span><span class="line"><span class="cl">      jedis:
</span></span><span class="line"><span class="cl">        pool:
</span></span><span class="line"><span class="cl">          max-active: 10</span></span></code></pre></div></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 0001-01-01 00:00:00">更新于 0001-01-01&nbsp;</span>
      </div><div class="post-info-license">
          <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
        </div></div>
    <div class="post-info-line">
      <div class="post-info-md"></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/" data-title="SpringBoot2核心技术-数据访问" data-hashtags="Java,SpringBoot"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/" data-hashtag="Java"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://yuanshuai1122.github.com/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/" data-title="SpringBoot2核心技术-数据访问"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href='/tags/java/' class="post-tag">Java</a><a href='/tags/springboot/' class="post-tag">SpringBoot</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/" class="post-nav-item" rel="prev" title="SpringBoot2核心技术-原理解析"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>SpringBoot2核心技术-原理解析</a>
      <a href="/posts/springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-springboot2%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" class="post-nav-item" rel="next" title="SpringBoot2核心技术-基础入门">SpringBoot2核心技术-基础入门<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.119.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.18-lts.2"><img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div><div class="footer-line statistics"></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
