<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Spring5之IOC的bean管理 - 我的 Hugo FixIt 网站</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="一、概念 1、什么是 Bean 管理 (1)Bean 管理指的是两个操作 (2)Spring 创建对象 (3)Spirng 注入属性 2、Bean 管理操作有两种方式 (1)基于 xml 配置文件方式实现 (2)基于注解方式" /><meta name="keywords" content='Spring5, Java' /><meta itemprop="name" content="Spring5之IOC的bean管理">
<meta itemprop="description" content="一、概念 1、什么是 Bean 管理 (1)Bean 管理指的是两个操作 (2)Spring 创建对象 (3)Spirng 注入属性 2、Bean 管理操作有两种方式 (1)基于 xml 配置文件方式实现 (2)基于注解方式">

<meta itemprop="wordCount" content="6542">
<meta itemprop="keywords" content="Spring5,Java," /><meta property="og:title" content="Spring5之IOC的bean管理" />
<meta property="og:description" content="一、概念 1、什么是 Bean 管理 (1)Bean 管理指的是两个操作 (2)Spring 创建对象 (3)Spirng 注入属性 2、Bean 管理操作有两种方式 (1)基于 xml 配置文件方式实现 (2)基于注解方式" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86/" /><meta property="article:section" content="posts" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Spring5之IOC的bean管理"/>
<meta name="twitter:description" content="一、概念 1、什么是 Bean 管理 (1)Bean 管理指的是两个操作 (2)Spring 创建对象 (3)Spirng 注入属性 2、Bean 管理操作有两种方式 (1)基于 xml 配置文件方式实现 (2)基于注解方式"/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86/" /><link rel="prev" href="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bjdbctemplate-spring5%E4%B9%8Bjdbctemplate/" /><link rel="next" href="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bioc-spring5%E4%B9%8Bioc/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Spring5之IOC的bean管理",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/yuanshuai1122.github.com\/posts\/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86\/"
    },"genre": "posts","keywords": "Spring5, Java","wordcount":  6542 ,
    "url": "https:\/\/yuanshuai1122.github.com\/posts\/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86\/","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "yuanshuai"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="我的 Hugo FixIt 网站"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="我的 Hugo FixIt 网站" data-alt="我的 Hugo FixIt 网站" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">My Hugo FixIt Site</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              >文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              >分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              >标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="我的 Hugo FixIt 网站"><img loading="lazy" src="/fixit.min.svg" srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" sizes="auto" data-title="/fixit.min.svg" data-alt="/fixit.min.svg" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">My Hugo FixIt Site</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                >文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                >分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                >标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><main class="container"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom">
    </aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Spring5之IOC的bean管理</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      yuanshuai</span></span></div>
      <div class="post-meta-line"><span title="发布于 0001-01-01 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden="true"></i><time datetime="0001-01-01">0001-01-01</time></span>&nbsp;<span title="更新于 0001-01-01 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden="true"></i><time datetime="0001-01-01">0001-01-01</time></span>&nbsp;<span title="6542 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 6600 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 14 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1什么是-bean-管理"><strong>1</strong>、什么是 <strong>Bean</strong> 管理</a></li>
    <li><a href="#2bean-管理操作有两种方式">2、Bean 管理操作有两种方式</a></li>
  </ul>

  <ul>
    <li><a href="#1基于-xml-方式创建对象"><strong>1</strong>、基于 <strong>xml</strong> 方式创建对象</a></li>
    <li><a href="#2基于-xml-方式注入属性"><strong>2</strong>、基于 <strong>xml</strong> 方式注入属性</a></li>
    <li><a href="#3第一种注入方式使用-set-方法进行注入"><strong>3</strong>、第一种注入方式:使用 <strong>set</strong> 方法进行注入</a></li>
    <li><a href="#4第二种注入方式使用有参数构造进行注入"><strong>4</strong>、第二种注入方式:使用有参数构造进行注入</a></li>
    <li><a href="#5p-名称空间注入了解"><strong>5</strong>、<strong>p</strong> 名称空间注入(了解)</a></li>
  </ul>

  <ul>
    <li><a href="#1字面量"><strong>1</strong>、字面量</a></li>
    <li><a href="#2注入属性-外部-bean"><strong>2</strong>、注入属性**-**外部 <strong>bean</strong></a></li>
    <li><a href="#3注入属性-内部-bean"><strong>3</strong>、注入属性**-**内部 bean</a></li>
    <li><a href="#4注入属性-级联赋值">4、注入属性-级联赋值</a></li>
  </ul>

  <ul>
    <li><a href="#1注入数组类型属性"><strong>1</strong>、注入数组类型属性</a></li>
    <li><a href="#2注入-list-集合类型属性"><strong>2</strong>、注入 <strong>List</strong> 集合类型属性</a></li>
    <li><a href="#3注入-map-集合类型属性"><strong>3</strong>、注入 <strong>Map</strong> 集合类型属性</a></li>
    <li><a href="#4在集合里面设置对象类型值"><strong>4</strong>、在集合里面设置对象类型值</a></li>
    <li><a href="#5把集合注入部分提取出来"><strong>5</strong>、把集合注入部分提取出来</a></li>
  </ul>

  <ul>
    <li><a href="#1在-spring-里面设置创建-bean-实例是单实例还是多实例"><strong>1</strong>、在 <strong>Spring</strong> 里面，设置创建 <strong>bean</strong> 实例是单实例还是多实例</a></li>
    <li><a href="#2在-spring-里面默认情况下bean-是单实例对象"><strong>2</strong>、在 <strong>Spring</strong> 里面，默认情况下，<strong>bean</strong> 是单实例对象</a></li>
    <li><a href="#3如何设置单实例还是多实例"><strong>3</strong>、如何设置单实例还是多实例</a></li>
  </ul>

  <ul>
    <li><a href="#1生命周期-1从对象创建到对象销毁的过程"><strong>1</strong>、生命周期 (1)从对象创建到对象销毁的过程</a></li>
    <li><a href="#2bean-生命周期"><strong>2</strong>、<strong>bean</strong> 生命周期</a></li>
    <li><a href="#3演示-bean-生命周期"><strong>3</strong>、演示 <strong>bean</strong> 生命周期</a></li>
    <li><a href="#4bean-的后置处理器bean-生命周期有七步"><strong>4</strong>、<strong>bean</strong> 的后置处理器，<strong>bean</strong> 生命周期有七步</a></li>
    <li><a href="#5演示添加后置处理器效果"><strong>5</strong>、演示添加后置处理器效果</a></li>
  </ul>

  <ul>
    <li><a href="#1什么是自动装配"><strong>1</strong>、什么是自动装配</a></li>
    <li><a href="#2演示自动装配过程"><strong>2</strong>、演示自动装配过程</a></li>
  </ul>

  <ul>
    <li><a href="#1直接配置数据库信息"><strong>1</strong>、直接配置数据库信息</a></li>
    <li><a href="#2引入外部属性文件配置数据库连接池"><strong>2</strong>、引入外部属性文件配置数据库连接池</a></li>
  </ul>

  <ul>
    <li><a href="#1什么是注解"><strong>1</strong>、什么是注解</a></li>
    <li><a href="#2spring-针对-bean-管理中创建对象提供注解"><strong>2</strong>、<strong>Spring</strong> 针对 <strong>Bean</strong> 管理中创建对象提供注解</a></li>
    <li><a href="#3基于注解方式实现对象创建"><strong>3</strong>、基于注解方式实现对象创建</a></li>
    <li><a href="#4开启组件扫描细节配置"><strong>4</strong>、开启组件扫描细节配置</a></li>
    <li><a href="#5基于注解方式实现属性注入"><strong>5</strong>、基于注解方式实现属性注入</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#6完全注解开发">6、完全注解开发</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><h1 id="一概念">一、概念</h1>
<h2 id="1什么是-bean-管理"><strong>1</strong>、什么是 <strong>Bean</strong> 管理</h2>
<p>(1)Bean 管理指的是两个操作</p>
<p>(2)Spring 创建对象</p>
<p>(3)Spirng 注入属性</p>
<h2 id="2bean-管理操作有两种方式">2、Bean 管理操作有两种方式</h2>
<p>(1)基于 xml 配置文件方式实现</p>
<p>(2)基于注解方式实现</p>
<h1 id="二基于-xml-方式">二、基于 <strong>xml</strong> 方式</h1>
<h2 id="1基于-xml-方式创建对象"><strong>1</strong>、基于 <strong>xml</strong> 方式创建对象</h2>
<div class="highlight" id="id-1"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--     配置User对象创建--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;user&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.User&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span></span></span></code></pre></div><p>(1)在 spring 配置文件中，使用 bean 标签，标签里面添加对应属性，就可以实现对象创建</p>
<p>(2)在 bean 标签有很多属性，介绍常用的属性</p>
<ul>
<li>id 属性:唯一标识</li>
<li>class 属性:类全路径(包类路径)</li>
</ul>
<p>(3)创建对象时候，默认也是执行无参数构造方法完成对象创建</p>
<h2 id="2基于-xml-方式注入属性"><strong>2</strong>、基于 <strong>xml</strong> 方式注入属性</h2>
<p>(<strong>1</strong>)<strong>DI</strong>:依赖注入，就是注入属性</p>
<h2 id="3第一种注入方式使用-set-方法进行注入"><strong>3</strong>、第一种注入方式:使用 <strong>set</strong> 方法进行注入</h2>
<p>(1)创建类，定义属性和对应的 set 方法</p>
<div class="highlight" id="id-2"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 演示使用set方法进行注入属性
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">bname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">bauthor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">address</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//创建属性对应的set方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBname</span><span class="o">(</span><span class="n">String</span> <span class="n">bname</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">bname</span> <span class="o">=</span> <span class="n">bname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBauthor</span><span class="o">(</span><span class="n">String</span> <span class="n">bauthor</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">bauthor</span> <span class="o">=</span> <span class="n">bauthor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddress</span><span class="o">(</span><span class="n">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p>(2)在 spring 配置文件配置对象创建，配置属性注入</p>
<div class="highlight" id="id-3"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;book&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.Book&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--使用property完成属性注入
</span></span></span><span class="line"><span class="cl"><span class="c">            name：类里面属性名称
</span></span></span><span class="line"><span class="cl"><span class="c">            value：向属性注入的值
</span></span></span><span class="line"><span class="cl"><span class="c">        --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;bname&#34;</span> <span class="na">value=</span><span class="s">&#34;易筋经&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;bauthor&#34;</span> <span class="na">value=</span><span class="s">&#34;达摩老祖&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--null值--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--&lt;property name=&#34;address&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="c">            &lt;null/&gt;
</span></span></span><span class="line"><span class="cl"><span class="c">        &lt;/property&gt;--&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--属性值包含特殊符号
</span></span></span><span class="line"><span class="cl"><span class="c">            1 把&lt;&gt;进行转义 &amp;lt; &amp;gt;
</span></span></span><span class="line"><span class="cl"><span class="c">            2 把带特殊符号内容写到CDATA
</span></span></span><span class="line"><span class="cl"><span class="c">        --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;address&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;value&gt;</span><span class="cp">&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;</span><span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h2 id="4第二种注入方式使用有参数构造进行注入"><strong>4</strong>、第二种注入方式:使用有参数构造进行注入</h2>
<p>(1)创建类，定义属性，创建属性对应有参数构造方法</p>
<div class="highlight" id="id-4"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 使用有参数构造注入
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Orders</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">oname</span><span class="o">=</span><span class="s">&#34;&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">address</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//有参数构造
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="nf">Orders</span><span class="o">(</span><span class="n">String</span> <span class="n">oname</span><span class="o">,</span><span class="n">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">oname</span> <span class="o">=</span> <span class="n">oname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p>(2)在 spring 配置文件中进行配置</p>
<div class="highlight" id="id-5"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!-- 有参数构造注入属性--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;orders&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.Orders&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;constructor-arg</span> <span class="na">name=</span><span class="s">&#34;oname&#34;</span> <span class="na">value=</span><span class="s">&#34;电脑&#34;</span><span class="nt">&gt;&lt;/constructor-arg&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;constructor-arg</span> <span class="na">name=</span><span class="s">&#34;address&#34;</span> <span class="na">value=</span><span class="s">&#34;China&#34;</span><span class="nt">&gt;&lt;/constructor-arg&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h2 id="5p-名称空间注入了解"><strong>5</strong>、<strong>p</strong> 名称空间注入(了解)</h2>
<p>(1)使用 p 名称空间注入，可以简化基于 xml 配置方式</p>
<p>第一步 添加 p 名称空间在配置文件中</p>
<div class="highlight" id="id-6"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:p=</span><span class="s">&#34;http://www.springframework.org/schema/p&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span class="nt">&gt;</span></span></span></code></pre></div><p>第二步 进行属性注入，在 bean 标签里面进行操作</p>
<div class="highlight" id="id-7"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!--2 set方法注入属性--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;book&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.Book&#34;</span> <span class="na">p:bname=</span><span class="s">&#34;九阳神功&#34;</span> <span class="na">p:bauthor=</span><span class="s">&#34;无名氏&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h1 id="三xml-注入其他类型属性"><strong>三、xml</strong> 注入其他类型属性</h1>
<h2 id="1字面量"><strong>1</strong>、字面量</h2>
<p>(1) null 值</p>
<div class="highlight" id="id-8"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;address&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;null/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span></span></span></code></pre></div><p>(2)属性值包含特殊符号</p>
<div class="highlight" id="id-9"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--属性值包含特殊符号
</span></span></span><span class="line"><span class="cl"><span class="c">1 把&lt;&gt;进行转义 &amp;lt; &amp;gt;
</span></span></span><span class="line"><span class="cl"><span class="c">2 把带特殊符号内容写到 CDATA
</span></span></span><span class="line"><span class="cl"><span class="c">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;address&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;value&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;</span><span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span></span></span></code></pre></div><h2 id="2注入属性-外部-bean"><strong>2</strong>、注入属性**-**外部 <strong>bean</strong></h2>
<p>(1)创建两个类 UserService 类和 UserDao 类</p>
<p>(2)在 service 调用 dao 里面的方法</p>
<div class="highlight" id="id-10"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//创建UserDao类型属性，生成set方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">UserDao</span> <span class="n">userDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserDao</span><span class="o">(</span><span class="n">UserDao</span> <span class="n">userDao</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">userDao</span> <span class="o">=</span> <span class="n">userDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;service add...............&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">userDao</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-11"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-12"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDaoImpl</span> <span class="kd">implements</span> <span class="n">UserDao</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;dao update...........&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p>(3)在 spring 配置文件中进行配置</p>
<div class="highlight" id="id-13"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!-- service和dao对象创建--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;userService&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.service.UserService&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--注入userDao对象
</span></span></span><span class="line"><span class="cl"><span class="c">            name属性：类里面属性名称
</span></span></span><span class="line"><span class="cl"><span class="c">            ref属性：创建userDao对象bean标签id值
</span></span></span><span class="line"><span class="cl"><span class="c">        --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;userDao&#34;</span> <span class="na">ref=</span><span class="s">&#34;userDaoImpl&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;userDaoImpl&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.dao.UserDaoImpl&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/beans&gt;</span></span></span></code></pre></div><h2 id="3注入属性-内部-bean"><strong>3</strong>、注入属性**-**内部 bean</h2>
<p>(1)一对多关系:部门和员工</p>
<p>一个部门有多个员工，一个员工属于一个部门</p>
<p>部门是一，员工是多</p>
<p>(2)在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示</p>
<div class="highlight" id="id-14"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//部门类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Dept</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">dname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDname</span><span class="o">(</span><span class="n">String</span> <span class="n">dname</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">dname</span> <span class="o">=</span> <span class="n">dname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-15"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//员工类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Emp</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">ename</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//员工属于某一个部门，使用对象形式表示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">Dept</span> <span class="n">dept</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDept</span><span class="o">(</span><span class="n">Dept</span> <span class="n">dept</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">dept</span> <span class="o">=</span> <span class="n">dept</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEname</span><span class="o">(</span><span class="n">String</span> <span class="n">ename</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">ename</span> <span class="o">=</span> <span class="n">ename</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGender</span><span class="o">(</span><span class="n">String</span> <span class="n">gender</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="n">gender</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ename</span><span class="o">+</span><span class="s">&#34;::&#34;</span><span class="o">+</span><span class="n">gender</span><span class="o">+</span><span class="s">&#34;::&#34;</span><span class="o">+</span><span class="n">dept</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p>(3)在 spring 配置文件中进行配置</p>
<div class="highlight" id="id-16"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--内部bean--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;emp&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Emp&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--设置两个普通属性--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;ename&#34;</span> <span class="na">value=</span><span class="s">&#34;lucy&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;gender&#34;</span> <span class="na">value=</span><span class="s">&#34;女&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--设置对象类型属性--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dept&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dept&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Dept&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dname&#34;</span> <span class="na">value=</span><span class="s">&#34;安保部&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h2 id="4注入属性-级联赋值">4、注入属性-级联赋值</h2>
<p>(1)第一种写法</p>
<div class="highlight" id="id-17"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--级联赋值--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;emp&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Emp&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--设置两个普通属性--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;ename&#34;</span> <span class="na">value=</span><span class="s">&#34;lucy&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;gender&#34;</span> <span class="na">value=</span><span class="s">&#34;女&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--级联赋值--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dept&#34;</span> <span class="na">ref=</span><span class="s">&#34;dept&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dept&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Dept&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dname&#34;</span> <span class="na">value=</span><span class="s">&#34;财务部&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><p>(2)第二种写法</p>
<p>在员工类添加get属性</p>
<div class="highlight" id="id-18"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="c1">//生成dept的get方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="n">Dept</span> <span class="nf">getDept</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dept</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span></span></span></code></pre></div><p>xml配置</p>
<div class="highlight" id="id-19"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!--级联赋值--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;emp&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Emp&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--设置两个普通属性--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;ename&#34;</span> <span class="na">value=</span><span class="s">&#34;lucy&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;gender&#34;</span> <span class="na">value=</span><span class="s">&#34;女&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--级联赋值--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dept&#34;</span> <span class="na">ref=</span><span class="s">&#34;dept&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dept.dname&#34;</span> <span class="na">value=</span><span class="s">&#34;技术部&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dept&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Dept&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;dname&#34;</span> <span class="na">value=</span><span class="s">&#34;财务部&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h1 id="四xml-注入集合属性">四、<strong>xml</strong> 注入集合属性</h1>
<h2 id="1注入数组类型属性"><strong>1</strong>、注入数组类型属性</h2>
<h2 id="2注入-list-集合类型属性"><strong>2</strong>、注入 <strong>List</strong> 集合类型属性</h2>
<h2 id="3注入-map-集合类型属性"><strong>3</strong>、注入 <strong>Map</strong> 集合类型属性</h2>
<p>(1)创建类，定义数组、list、map、set 类型属性，生成对应 set 方法</p>
<div class="highlight" id="id-20"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stu</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//1 数组类型属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">String</span><span class="o">[]</span> <span class="n">courses</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//2 list集合类型属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//3 map集合类型属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">maps</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//4 set集合类型属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">sets</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//学生所学多门课程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">courseList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCourseList</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">courseList</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">courseList</span> <span class="o">=</span> <span class="n">courseList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSets</span><span class="o">(</span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">sets</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">sets</span> <span class="o">=</span> <span class="n">sets</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCourses</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">courses</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">courses</span> <span class="o">=</span> <span class="n">courses</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setList</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">list</span> <span class="o">=</span> <span class="n">list</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMaps</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">maps</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">maps</span> <span class="o">=</span> <span class="n">maps</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">courses</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">maps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sets</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">courseList</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p>(2)在 spring 配置文件进行配置</p>
<div class="highlight" id="id-21"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!--1 集合类型属性注入--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;stu&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.collectiontype.Stu&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--数组类型属性注入--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;courses&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;array&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;value&gt;</span>java课程<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;value&gt;</span>数据库课程<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/array&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--list类型属性注入--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;list&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;list&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;value&gt;</span>张三<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;value&gt;</span>小三<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/list&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--map类型属性注入--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;maps&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;map&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;JAVA&#34;</span> <span class="na">value=</span><span class="s">&#34;java&#34;</span><span class="nt">&gt;&lt;/entry&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&#34;PHP&#34;</span> <span class="na">value=</span><span class="s">&#34;php&#34;</span><span class="nt">&gt;&lt;/entry&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/map&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--set类型属性注入--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;sets&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;set&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;value&gt;</span>MySQL<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;value&gt;</span>Redis<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/set&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h2 id="4在集合里面设置对象类型值"><strong>4</strong>、在集合里面设置对象类型值</h2>
<div class="highlight" id="id-22"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--创建多个course对象--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;course1&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.collectiontype.Course&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;cname&#34;</span> <span class="na">value=</span><span class="s">&#34;Spring5框架&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;course2&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.collectiontype.Course&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;cname&#34;</span> <span class="na">value=</span><span class="s">&#34;MyBatis框架&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;stu&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.collectiontype.Stu&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--注入list集合类型，值是对象--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;courseList&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;list&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;ref</span> <span class="na">bean=</span><span class="s">&#34;course1&#34;</span><span class="nt">&gt;&lt;/ref&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;ref</span> <span class="na">bean=</span><span class="s">&#34;course2&#34;</span><span class="nt">&gt;&lt;/ref&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/list&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h2 id="5把集合注入部分提取出来"><strong>5</strong>、把集合注入部分提取出来</h2>
<p>(1)在 spring 配置文件中引入名称空间 util</p>
<div class="highlight" id="id-23"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:p=</span><span class="s">&#34;http://www.springframework.org/schema/p&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:util=</span><span class="s">&#34;http://www.springframework.org/schema/util&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span class="line"><span class="cl"><span class="s">                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&#34;</span><span class="nt">&gt;</span></span></span></code></pre></div><p>(2)使用 util 标签完成 list 集合注入提取</p>
<div class="highlight" id="id-24"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"> <span class="c">&lt;!--1 提取list集合类型属性注入--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;util:list</span> <span class="na">id=</span><span class="s">&#34;bookList&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>易筋经<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>九阴真经<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;value&gt;</span>九阳神功<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/util:list&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--2 提取list集合类型属性注入使用--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;book&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.collectiontype.Book&#34;</span> <span class="na">scope=</span><span class="s">&#34;prototype&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;list&#34;</span> <span class="na">ref=</span><span class="s">&#34;bookList&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h1 id="五factorybean"><strong>五、FactoryBean</strong></h1>
<p><strong>1</strong>、<strong>Spring</strong> 有两种类型 <strong>bean</strong>，一种普通 <strong>bean</strong>，另外一种工厂 <strong>bean</strong>(<strong>FactoryBean</strong>)</p>
<p><strong>2</strong>、普通 <strong>bean</strong>:在配置文件中定义 <strong>bean</strong> 类型就是返回类型</p>
<p><strong>3</strong>、工厂 <strong>bean</strong>:在配置文件定义 <strong>bean</strong> 类型可以和返回类型不一样</p>
<p>第一步 创建类，让这个类作为工厂 bean，实现接口 FactoryBean</p>
<p>第二步 实现接口里面的方法，在实现的方法中定义返回的 bean 类型</p>
<div class="highlight" id="id-25"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="kd">implements</span> <span class="n">FactoryBean</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">  <span class="c1">//定义返回 bean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">Course</span> <span class="nf">getObject</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">    <span class="n">Course</span> <span class="n">course</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Course</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">    <span class="n">course</span><span class="o">.</span><span class="na">setCname</span><span class="o">(</span><span class="s">&#34;abc&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  	<span class="k">return</span> <span class="n">course</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">	<span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getObjectType</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSingleton</span><span class="o">()</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-26"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;myBean&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.factorybean.MyBean&#34;</span><span class="nt">&gt;</span></span></span></code></pre></div><div class="highlight" id="id-27"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">		<span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test3</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;bean3.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Course</span> <span class="n">course</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;myBean&#34;</span><span class="o">,</span> <span class="n">Course</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">course</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span></span></span></code></pre></div><h1 id="六bean-作用域"><strong>六、bean</strong> 作用域</h1>
<h2 id="1在-spring-里面设置创建-bean-实例是单实例还是多实例"><strong>1</strong>、在 <strong>Spring</strong> 里面，设置创建 <strong>bean</strong> 实例是单实例还是多实例</h2>
<h2 id="2在-spring-里面默认情况下bean-是单实例对象"><strong>2</strong>、在 <strong>Spring</strong> 里面，默认情况下，<strong>bean</strong> 是单实例对象</h2>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/18.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/18.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/18.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/18.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/18.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/18.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h2 id="3如何设置单实例还是多实例"><strong>3</strong>、如何设置单实例还是多实例</h2>
<p>(1)在 spring 配置文件 bean 标签里面有属性(scope)用于设置单实例还是多实例</p>
<p>(2)scope 属性值</p>
<p>第一个值 默认值，singleton，表示是单实例对象</p>
<p>第二个值 prototype，表示是多实例对象</p>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/19.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/19.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/19.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/19.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/19.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/19.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>(3)singleton 和 prototype 区别
第一 singleton单实例，prototype多实例</p>
<p>第二 设置 scope 值是 singleton 时候，加载 spring 配置文件时候就会创建单实例对象</p>
<p>设置 scope 值是 prototype 时候，不是在加载 spring 配置文件时候创建 对象，在调用 getBean 方法时候创建多实例对象</p>
<h1 id="七bean-生命周期">七、<strong>bean</strong> 生命周期</h1>
<h2 id="1生命周期-1从对象创建到对象销毁的过程"><strong>1</strong>、生命周期 (1)从对象创建到对象销毁的过程</h2>
<h2 id="2bean-生命周期"><strong>2</strong>、<strong>bean</strong> 生命周期</h2>
<p>(1)通过构造器创建 bean 实例(无参数构造)</p>
<p>(2)为 bean 的属性设置值和对其他 bean 引用(调用 set 方法)</p>
<p>(3)调用 bean 的初始化的方法(需要进行配置初始化的方法)</p>
<p>(4)bean 可以使用了(对象获取到了)</p>
<p>(5)当容器关闭时候，调用 bean 的销毁的方法(需要进行配置销毁的方法)</p>
<h2 id="3演示-bean-生命周期"><strong>3</strong>、演示 <strong>bean</strong> 生命周期</h2>
<div class="highlight" id="id-28"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Orders</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//无参数构造
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="nf">Orders</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;第一步 执行无参数构造创建bean实例&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">oname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOname</span><span class="o">(</span><span class="n">String</span> <span class="n">oname</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">oname</span> <span class="o">=</span> <span class="n">oname</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;第二步 调用set方法设置属性值&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//创建执行的初始化的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initMethod</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;第三步 执行初始化的方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//创建执行的销毁的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroyMethod</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;第五步 执行销毁的方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-29"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;orders&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.Orders&#34;</span> <span class="err">init-</span>
</span></span><span class="line"><span class="cl"><span class="na">method=</span><span class="s">&#34;initMethod&#34;</span> <span class="na">destroy-method=</span><span class="s">&#34;destroyMethod&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><div class="highlight" id="id-30"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testBean3</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">//        ApplicationContext context =
</span></span></span><span class="line"><span class="cl"><span class="c1">//                new ClassPathXmlApplicationContext(&#34;bean4.xml&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ClassPathXmlApplicationContext</span> <span class="n">context</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">&#34;bean4.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Orders</span> <span class="n">orders</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;orders&#34;</span><span class="o">,</span> <span class="n">Orders</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;第四步 获取创建bean实例对象&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">orders</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//手动让bean实例销毁
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">context</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span></span></span></code></pre></div><p>执行结果：</p>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/20.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/20.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/20.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/20.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/20.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/20.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h2 id="4bean-的后置处理器bean-生命周期有七步"><strong>4</strong>、<strong>bean</strong> 的后置处理器，<strong>bean</strong> 生命周期有七步</h2>
<p>(1)通过构造器创建 bean 实例(无参数构造)</p>
<p>(2)为 bean 的属性设置值和对其他 bean 引用(调用 set 方法)</p>
<p>(3)把 bean 实例传递 bean 后置处理器的方法 postProcessBeforeInitialization</p>
<p>(4)调用 bean 的初始化的方法(需要进行配置初始化的方法)</p>
<p><strong>(5</strong>)把 <strong>bean</strong> 实例传递 <strong>bean</strong> 后置处理器的方法 postProcessAfterInitialization</p>
<p>(6)bean 可以使用了(对象获取到了)</p>
<p>(7)当容器关闭时候，调用 bean 的销毁的方法(需要进行配置销毁的方法)</p>
<h2 id="5演示添加后置处理器效果"><strong>5</strong>、演示添加后置处理器效果</h2>
<p>(1)创建类，实现接口 BeanPostProcessor，创建后置处理器</p>
<div class="highlight" id="id-31"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBeanPost</span> <span class="kd">implements</span> <span class="n">BeanPostProcessor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">postProcessBeforeInitialization</span><span class="o">(</span><span class="n">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="n">String</span> <span class="n">beanName</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">BeansException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;在初始化之前执行的方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">postProcessAfterInitialization</span><span class="o">(</span><span class="n">Object</span> <span class="n">bean</span><span class="o">,</span> <span class="n">String</span> <span class="n">beanName</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">BeansException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;在初始化之后执行的方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><div class="highlight" id="id-32"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"> <span class="c">&lt;!--配置后置处理器--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;myBeanPost&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.bean.MyBeanPost&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span></span></span></code></pre></div><p>执行结果：</p>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/21.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/21.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/21.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/21.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/21.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/21.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<h1 id="八xml-自动装配"><strong>八、xml</strong> 自动装配</h1>
<h2 id="1什么是自动装配"><strong>1</strong>、什么是自动装配</h2>
<p>(1)根据指定装配规则(属性名称或者属性类型)，Spring 自动将匹配的属性值进行注入</p>
<h2 id="2演示自动装配过程"><strong>2</strong>、演示自动装配过程</h2>
<p>(1)根据属性名称自动注入</p>
<div class="highlight" id="id-33"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--实现自动装配
</span></span></span><span class="line"><span class="cl"><span class="c">        bean标签属性autowire，配置自动装配
</span></span></span><span class="line"><span class="cl"><span class="c">        autowire属性常用两个值：
</span></span></span><span class="line"><span class="cl"><span class="c">            byName根据属性名称注入 ，注入值bean的id值和类属性名称一样
</span></span></span><span class="line"><span class="cl"><span class="c">            byType根据属性类型注入
</span></span></span><span class="line"><span class="cl"><span class="c">    --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;emp&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.autowire.Emp&#34;</span> <span class="na">autowire=</span><span class="s">&#34;byName&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--&lt;property name=&#34;dept&#34; ref=&#34;dept&#34;&gt;&lt;/property&gt;--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dept&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.autowire.Dept&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span></span></span></code></pre></div><p>(2)根据属性类型自动注入</p>
<div class="highlight" id="id-34"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--实现自动装配
</span></span></span><span class="line"><span class="cl"><span class="c">        bean标签属性autowire，配置自动装配
</span></span></span><span class="line"><span class="cl"><span class="c">        autowire属性常用两个值：
</span></span></span><span class="line"><span class="cl"><span class="c">            byName根据属性名称注入 ，注入值bean的id值和类属性名称一样
</span></span></span><span class="line"><span class="cl"><span class="c">            byType根据属性类型注入
</span></span></span><span class="line"><span class="cl"><span class="c">    --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;emp&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.autowire.Emp&#34;</span> <span class="na">autowire=</span><span class="s">&#34;byType&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--&lt;property name=&#34;dept&#34; ref=&#34;dept&#34;&gt;&lt;/property&gt;--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dept&#34;</span> <span class="na">class=</span><span class="s">&#34;com.atguigu.spring5.autowire.Dept&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span></span></span></code></pre></div><h1 id="九外部属性文件">九、外部属性文件</h1>
<h2 id="1直接配置数据库信息"><strong>1</strong>、直接配置数据库信息</h2>
<p>(1)配置德鲁伊连接池</p>
<p>(2)引入德鲁伊连接池依赖 jar 包</p>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/22.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/22.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/22.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/22.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/22.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/22.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<div class="highlight" id="id-35"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="c">&lt;!--直接配置连接池--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">class=</span><span class="s">&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driverClassName&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;jdbc:mysql://localhost:3306/userDb&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h2 id="2引入外部属性文件配置数据库连接池"><strong>2</strong>、引入外部属性文件配置数据库连接池</h2>
<p>(1)创建外部属性文件，properties 格式文件，写数据库信息</p>
<p>创建jdbc.properties</p>
<div class="highlight" id="id-36"><pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="na">prop.driverClass</span><span class="o">=</span><span class="s">com.mysql.jdbc.Driver</span>
</span></span><span class="line"><span class="cl"><span class="na">prop.url</span><span class="o">=</span><span class="s">jdbc:mysql://localhost:3306/userDb</span>
</span></span><span class="line"><span class="cl"><span class="na">prop.userName</span><span class="o">=</span><span class="s">root</span>
</span></span><span class="line"><span class="cl"><span class="na">prop.password</span><span class="o">=</span><span class="s">ro</span></span></span></code></pre></div><p>(2)把外部 properties 属性文件引入到 spring 配置文件中</p>
<ul>
<li>引入spring配置文件 context 名称空间</li>
</ul>
<div class="highlight" id="id-37"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xmlns:context=</span><span class="s">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span class="line"><span class="cl"><span class="s">                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span class="nt">&gt;</span></span></span></code></pre></div><p>在spring配置文件使用标签引入外部属性文件</p>
<div class="highlight" id="id-38"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--引入外部属性文件--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">&#34;classpath:jdbc.properties&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--配置连接池--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;dataSource&#34;</span> <span class="na">class=</span><span class="s">&#34;com.alibaba.druid.pool.DruidDataSource&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driverClassName&#34;</span> <span class="na">value=</span><span class="s">&#34;${prop.driverClass}&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;${prop.url}&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;${prop.userName}&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;${prop.password}&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span></span></span></code></pre></div><h1 id="十基于注解方式">十、基于注解方式</h1>
<h2 id="1什么是注解"><strong>1</strong>、什么是注解</h2>
<p>(1)注解是代码特殊标记，格式:@注解名称(属性名称=属性值, 属性名称=属性值..)</p>
<p>(2)使用注解，注解作用在类上面，方法上面，属性上面</p>
<p>(3)使用注解目的:简化 xml 配置</p>
<h2 id="2spring-针对-bean-管理中创建对象提供注解"><strong>2</strong>、<strong>Spring</strong> 针对 <strong>Bean</strong> 管理中创建对象提供注解</h2>
<p>(1)@Component</p>
<p>(2)@Service</p>
<p>(3)@Controller</p>
<p>(4)@Repository</p>
<p>* 上面四个注解功能是一样的，都可以用来创建 bean 实例，但是开发中为了区分，就按照实际名称添加</p>
<h2 id="3基于注解方式实现对象创建"><strong>3</strong>、基于注解方式实现对象创建</h2>
<p>第一步 引入依赖</p>
<p><img loading="lazy" src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/23.png" srcset="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/23.png, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/23.png 1.5x, https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/23.png 2x" sizes="auto" data-title="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/23.png" data-alt="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/spring5/23.png" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></p>
<p>第二步 开启组件扫描</p>
<div class="highlight" id="id-39"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--开启组件扫描
</span></span></span><span class="line"><span class="cl"><span class="c">1 如果扫描多个包，多个包使用逗号隔开 2 扫描包上层目录
</span></span></span><span class="line"><span class="cl"><span class="c">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.atguigu&#34;</span><span class="nt">&gt;&lt;/context:component-scan&gt;</span></span></span></code></pre></div><p>第三步 创建类，在类上面添加创建对象注解</p>
<div class="highlight" id="id-40"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//在注解里面value属性值可以省略不写，
</span></span></span><span class="line"><span class="cl"><span class="c1">//默认值是类名称，首字母小写
</span></span></span><span class="line"><span class="cl"><span class="c1">//UserService -- userService
</span></span></span><span class="line"><span class="cl"><span class="c1">//@Component(value = &#34;userService&#34;)  //&lt;bean id=&#34;userService&#34; class=&#34;..&#34;/&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;service add.......&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><h2 id="4开启组件扫描细节配置"><strong>4</strong>、开启组件扫描细节配置</h2>
<div class="highlight" id="id-41"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--示例 1
</span></span></span><span class="line"><span class="cl"><span class="c">use-default-filters=&#34;false&#34; 表示现在不使用默认 filter，自己配置 filter context:include-filter ，设置扫描哪些内容
</span></span></span><span class="line"><span class="cl"><span class="c">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.atguigu&#34;</span> <span class="na">use-default-filters=</span><span class="s">&#34;false&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;context:include-filter</span> <span class="na">type=</span><span class="s">&#34;annotation&#34;</span> <span class="na">expression=</span><span class="s">&#34;org.springframework.stereotype.Controller&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/context:component-scan&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--示例 2
</span></span></span><span class="line"><span class="cl"><span class="c">下面配置扫描包所有内容 context:exclude-filter: 设置哪些内容不进行扫描
</span></span></span><span class="line"><span class="cl"><span class="c">--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.atguigu&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;context:exclude-filter</span> <span class="na">type=</span><span class="s">&#34;annotation&#34;</span> <span class="na">expression=</span><span class="s">&#34;org.springframework.stereotype.Controller&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/context:component-scan&gt;</span></span></span></code></pre></div><h2 id="5基于注解方式实现属性注入"><strong>5</strong>、基于注解方式实现属性注入</h2>
<h4 id="1autowired根据属性类型进行自动装配">(1)@Autowired:根据属性类型进行自动装配</h4>
<p>第一步 把 service 和 dao 对象创建，在 service 和 dao 类添加创建对象注解</p>
<p>第二步 在 service 注入 dao 对象，在 service 类添加 dao 类型属性，在属性上面使用注解</p>
<div class="highlight" id="id-42"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span> <span class="c1">//定义 dao 类型属性 //不需要添加 set 方法 //添加注入属性注解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nd">@Autowired</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">UserDao</span> <span class="n">userDao</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">()</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;service add.......&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">      <span class="n">userDao</span><span class="o">.</span><span class="na">add</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><h4 id="2qualifier根据名称进行注入">(2)@Qualifier:根据名称进行注入</h4>
<p>这个@Qualifier 注解的使用，和上面@Autowired 一起使用</p>
<div class="highlight" id="id-43"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//定义dao类型属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//不需要添加set方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//添加注入属性注解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Autowired</span>  <span class="c1">//根据类型进行注入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Qualifier</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;userDaoImpl1&#34;</span><span class="o">)</span> <span class="c1">//根据名称进行注入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">UserDao</span> <span class="n">userDao</span><span class="o">;</span></span></span></code></pre></div><h4 id="3resource可以根据类型注入可以根据名称注入">(3)@Resource:可以根据类型注入，可以根据名称注入</h4>
<div class="highlight" id="id-44"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//@Resource //根据类型进行注入
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Resource</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#34;userDaoImpl1&#34;</span><span class="o">)</span> <span class="c1">//根据名称进行注入 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">private</span> <span class="n">UserDao</span> <span class="n">userDao</span><span class="o">;</span></span></span></code></pre></div><h4 id="4value注入普通类型属性">(4)@Value:注入普通类型属性</h4>
<div class="highlight" id="id-45"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Value</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;abc&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span></span></span></code></pre></div><h2 id="6完全注解开发">6、完全注解开发</h2>
<p>(1)创建配置类，替代 xml 配置文件</p>
<div class="highlight" id="id-46"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>  <span class="c1">//作为配置类，替代xml配置文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;com.atguigu&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></div><p>(2)编写测试类</p>
<div class="highlight" id="id-47"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">    <span class="nd">@Test</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testService2</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//加载配置类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ApplicationContext</span> <span class="n">context</span>
</span></span><span class="line"><span class="cl">                <span class="o">=</span> <span class="k">new</span> <span class="n">AnnotationConfigApplicationContext</span><span class="o">(</span><span class="n">SpringConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">UserService</span> <span class="n">userService</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">&#34;userService&#34;</span><span class="o">,</span> <span class="n">UserService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">userService</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">userService</span><span class="o">.</span><span class="na">add</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span></span></span></code></pre></div></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 0001-01-01 00:00:00">更新于 0001-01-01&nbsp;</span>
      </div><div class="post-info-license">
          <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
        </div></div>
    <div class="post-info-line">
      <div class="post-info-md"></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86/" data-title="Spring5之IOC的bean管理" data-hashtags="Spring5,Java"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86/" data-hashtag="Spring5"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://yuanshuai1122.github.com/posts/spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86-spring5%E4%B9%8Bioc%E7%9A%84bean%E7%AE%A1%E7%90%86/" data-title="Spring5之IOC的bean管理"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href='/tags/spring5/' class="post-tag">Spring5</a><a href='/tags/java/' class="post-tag">Java</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/spring5%E4%B9%8Bjdbctemplate-spring5%E4%B9%8Bjdbctemplate/" class="post-nav-item" rel="prev" title="Spring5之JdbcTemplate"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Spring5之JdbcTemplate</a>
      <a href="/posts/spring5%E4%B9%8Bioc-spring5%E4%B9%8Bioc/" class="post-nav-item" rel="next" title="Spring5之IOC">Spring5之IOC<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.119.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.18-lts.2"><img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div><div class="footer-line statistics"></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
