<!DOCTYPE html>
<html class="js no-touch  progressive-image  no-reduced-motion progressive" lang="zh-hans">
  <head>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="/img/favicon.ico">

    <meta name="keyword" content=""><meta property="og:title" content="Pythonæ•°æ®åˆ†æä¹‹Pandasï¼ˆä¸‰ï¼‰" />
<meta property="og:description" content=": | &mdash;&ndash;: | &mdash;&mdash;: | &mdash;&ndash;: | &mdash;&mdash;&ndash;: | | 0 | 1 | 1193 | 5 | 978300760 | | 1 | 1 | 661 | 3 | 978302109 | | 2 | 1 | 914 | 3 | 978301968 | | 3 | 1 | 3408 | 4 | 978300275 | | 4 | 1 | 2355 | 5 | 978824291 | In [3]: # å®ç°" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yuanshuai1122.github.io/posts/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%89-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%89/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-26T21:54:10+00:00" />
<meta property="article:modified_time" content="2021-11-26T21:54:10+00:00" />
<title>Pythonæ•°æ®åˆ†æä¹‹Pandasï¼ˆä¸‰ï¼‰</title>

    <link rel="canonical" href="/posts/python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%89-python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8Bpandas%E4%B8%89/">

    <link rel="stylesheet" href="/css/global.css">

    <link rel="stylesheet" href="/css/custom.css">

    <link rel="stylesheet" href="/css/search.css" />

    
    

    
    

</head>
  </head>
  <body class=" page-article   ">
    <header>
      <nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/ " class="nav-title">ğŸ§€</a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            <a href="/posts " class="nav-item-content">ç›®å½•</a>
          </div><div class="nav-item-wrapper">
            <a href="/about" class="nav-item-content">å…³äº</a>
          </div><div class="nav-item-wrapper">
            <a href="/index.xml" class="nav-item-content" target="_blank">RSS</a>
          </div></div>
      </div>
    </div>
  </div>
</nav>

<script>
  function toggleSearchModal(){
    const template = `
    <div class="modal-body">
      <div id="autocomplete" onclick="event.stopPropagation();"></div>
    </div>
    `
    const modal = document.querySelector("#modal-wrapper")
    if(!modal){
      const div = document.createElement("div")
      document.body.setAttribute("style","overflow: hidden;")
      div.setAttribute("id", "modal-wrapper")
      div.setAttribute("onclick", "toggleSearchModal()")
      div.innerHTML = template
      const script = document.createElement("script");script.setAttribute("src", "https://yuanshuai1122.github.io/js/algolia.js")
      div.appendChild(script)
      document.body.append(div)
    } else {
      document.body.removeAttribute("style")
      document.body.removeChild(modal)
    }
  }
</script>
    </header>
    
  
  
  <main id="main" class="main">
      <section>
        <article class="article">
          
          <div class=" article-header ">
            <div class="category component">
              <div class="component-content">
                <div class="category-eyebrow">
                  <span class="category-eyebrow__category category_original">
                    
                      
                        Python
                      
                    
                  </span>
                  <span class="category-eyebrow__date">2021å¹´11æœˆ26æ—¥</span>
                </div>
              </div>
            </div>
            <div class="pagetitle component">
              <div class="component-content">
                <h1 class="hero-headline">Pythonæ•°æ®åˆ†æä¹‹Pandasï¼ˆä¸‰ï¼‰</h1>
              </div>
            </div>
            <div class="component  article-subhead ">
              <div class="component-content"></div>
            </div>

            <div class="tagssheet component">
              <div class="component-content">
                
                  
                  <a href="/tags/python" class="tag">
                    Python
                  </a>
                
                  
                  <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90" class="tag">
                    æ•°æ®åˆ†æ
                  </a>
                
              </div>
            </div>
          </div>
          
          <div class="pagebody">
            
            
            
            
            
            
            
            
            <p class="component-content component">: | &mdash;&ndash;: | &mdash;&mdash;: | &mdash;&ndash;: | &mdash;&mdash;&ndash;: |
|    0 |      1 |    1193 |      5 | 978300760 |
|    1 |      1 |     661 |      3 | 978302109 |
|    2 |      1 |     914 |      3 | 978301968 |
|    3 |      1 |    3408 |      4 | 978300275 |
|    4 |      1 |    2355 |      5 | 978824291 |</p>
<p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å®ç°æŒ‰ç…§ç”¨æˆ·IDåˆ†ç»„ï¼Œç„¶åå¯¹å…¶ä¸­ä¸€åˆ—å½’ä¸€åŒ–</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">ratings_norm</span>(df):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    @param dfï¼šæ¯ä¸ªç”¨æˆ·åˆ†ç»„çš„dataframe
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    min_value <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Rating&#34;</span>]<span style="color:#f92672">.</span>min()
</span></span><span style="display:flex;"><span>    max_value <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Rating&#34;</span>]<span style="color:#f92672">.</span>max()
</span></span><span style="display:flex;"><span>    df[<span style="color:#e6db74">&#34;Rating_norm&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Rating&#34;</span>]<span style="color:#f92672">.</span>apply(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">lambda</span> x: (x<span style="color:#f92672">-</span>min_value)<span style="color:#f92672">/</span>(max_value<span style="color:#f92672">-</span>min_value))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> df
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ratings <span style="color:#f92672">=</span> ratings<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#34;UserID&#34;</span>)<span style="color:#f92672">.</span>apply(ratings_norm)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ratings[ratings[<span style="color:#e6db74">&#34;UserID&#34;</span>]<span style="color:#f92672">==</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">UserID</th>
<th style="text-align:right">MovieID</th>
<th style="text-align:right">Rating</th>
<th style="text-align:right">Timestamp</th>
<th style="text-align:right">Rating_norm</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1193</td>
<td style="text-align:right">5</td>
<td style="text-align:right">978300760</td>
<td style="text-align:right">1.0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">661</td>
<td style="text-align:right">3</td>
<td style="text-align:right">978302109</td>
<td style="text-align:right">0.0</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">914</td>
<td style="text-align:right">3</td>
<td style="text-align:right">978301968</td>
<td style="text-align:right">0.0</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3408</td>
<td style="text-align:right">4</td>
<td style="text-align:right">978300275</td>
<td style="text-align:right">0.5</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2355</td>
<td style="text-align:right">5</td>
<td style="text-align:right">978824291</td>
<td style="text-align:right">1.0</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">å¯ä»¥çœ‹åˆ°UserID==1è¿™ä¸ªç”¨æˆ·ï¼ŒRating==3æ˜¯ä»–çš„æœ€ä½åˆ†ï¼Œæ˜¯ä¸ªä¹è§‚æ´¾ï¼Œæˆ‘ä»¬å½’ä¸€åŒ–åˆ°0åˆ†ï¼›</p>

<div class="component-content pagebody component">
  <h3 id="å®ä¾‹2æ€æ ·å–æ¯ä¸ªåˆ†ç»„çš„topnæ•°æ®" class="pagebody-header">
    å®ä¾‹2ï¼šæ€æ ·å–æ¯ä¸ªåˆ†ç»„çš„TOPNæ•°æ®ï¼Ÿ
  </h3>
</div><p class="component-content component">è·å–2018å¹´æ¯ä¸ªæœˆæ¸©åº¦æœ€é«˜çš„2å¤©æ•°æ®</p>
<p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>fpath <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./datas/beijing_tianqi/beijing_tianqi_2018.csv&#34;</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(fpath)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ›¿æ¢æ‰æ¸©åº¦çš„åç¼€â„ƒ</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#34;bWendu&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;â„ƒ&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int32&#39;</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#34;yWendu&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;yWendu&#34;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;â„ƒ&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int32&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ–°å¢ä¸€åˆ—ä¸ºæœˆä»½</span>
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;month&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;ymd&#39;</span>]<span style="color:#f92672">.</span>str[:<span style="color:#ae81ff">7</span>]
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
<th style="text-align:right">yWendu</th>
<th style="text-align:right">tianqi</th>
<th style="text-align:right">fengxiang</th>
<th style="text-align:right">fengli</th>
<th style="text-align:right">aqi</th>
<th style="text-align:right">aqiInfo</th>
<th style="text-align:right">aqiLevel</th>
<th style="text-align:right">month</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">2018-01-01</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">59</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2018-01</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2018-01-02</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">49</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2018-01</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2018-01-03</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2018-01</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2018-01-04</td>
<td style="text-align:right">0</td>
<td style="text-align:right">-8</td>
<td style="text-align:right">é˜´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2018-01</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">50</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2018-01</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getWenduTopN</span>(df, topn):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    è¿™é‡Œçš„dfï¼Œæ˜¯æ¯ä¸ªæœˆä»½åˆ†ç»„groupçš„df
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> df<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bWendu&#34;</span>)[[<span style="color:#e6db74">&#34;ymd&#34;</span>, <span style="color:#e6db74">&#34;bWendu&#34;</span>]][<span style="color:#f92672">-</span>topn:]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#34;month&#34;</span>)<span style="color:#f92672">.</span>apply(getWenduTopN, topn<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">month</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2018-01</td>
<td style="text-align:right">18</td>
<td style="text-align:right">2018-01-19</td>
<td style="text-align:right">7</td>
</tr>
<tr>
<td style="text-align:right">2018-02</td>
<td style="text-align:right">56</td>
<td style="text-align:right">2018-02-26</td>
<td style="text-align:right">12</td>
</tr>
<tr>
<td style="text-align:right">2018-03</td>
<td style="text-align:right">85</td>
<td style="text-align:right">2018-03-27</td>
<td style="text-align:right">27</td>
</tr>
<tr>
<td style="text-align:right">2018-04</td>
<td style="text-align:right">118</td>
<td style="text-align:right">2018-04-29</td>
<td style="text-align:right">30</td>
</tr>
<tr>
<td style="text-align:right">2018-05</td>
<td style="text-align:right">150</td>
<td style="text-align:right">2018-05-31</td>
<td style="text-align:right">35</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">æˆ‘ä»¬çœ‹åˆ°ï¼Œgroubyçš„applyå‡½æ•°è¿”å›çš„dataframeï¼Œå…¶å®å’ŒåŸæ¥çš„dataframeå…¶å®å¯ä»¥å®Œå…¨ä¸ä¸€æ ·</p>

<div class="component-content pagebody component">
  <h1 id="20pandasçš„stackå’Œpivotå®ç°æ•°æ®é€è§†" class="pagebody-header">
    20ã€Pandasçš„stackå’Œpivotå®ç°æ•°æ®é€è§†
  </h1>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-32820bfb96d25e98a2f6f8f0d79fee36" id="lht32820bfb96d25e98a2f6f8f0d79fee36">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/12.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<div class="component-content component"><ol>
<li>ç»è¿‡ç»Ÿè®¡å¾—åˆ°å¤šç»´åº¦æŒ‡æ ‡æ•°æ®</li>
<li>ä½¿ç”¨unstackå®ç°æ•°æ®äºŒç»´é€è§†</li>
<li>ä½¿ç”¨pivotç®€åŒ–é€è§†</li>
<li>stackã€unstackã€pivotçš„è¯­æ³•</li>
</ol></div>

<div class="component-content pagebody component">
  <h3 id="1-ç»è¿‡ç»Ÿè®¡å¾—åˆ°å¤šç»´åº¦æŒ‡æ ‡æ•°æ®" class="pagebody-header">
    1. ç»è¿‡ç»Ÿè®¡å¾—åˆ°å¤šç»´åº¦æŒ‡æ ‡æ•°æ®
  </h3>
</div><p class="component-content component">éå¸¸å¸¸è§çš„ç»Ÿè®¡åœºæ™¯ï¼ŒæŒ‡å®šå¤šä¸ªç»´åº¦ï¼Œè®¡ç®—èšåˆåçš„æŒ‡æ ‡</p>
<p class="component-content component">å®ä¾‹ï¼šç»Ÿè®¡å¾—åˆ°â€œç”µå½±è¯„åˆ†æ•°æ®é›†â€ï¼Œæ¯ä¸ªæœˆä»½çš„æ¯ä¸ªåˆ†æ•°è¢«è¯„åˆ†å¤šå°‘æ¬¡ï¼šï¼ˆæœˆä»½ã€åˆ†æ•°1~5ã€æ¬¡æ•°ï¼‰</p>
<p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">%</span>matplotlib inline</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;./datas/movielens-1m/ratings.dat&#34;</span>,
</span></span><span style="display:flex;"><span>    header<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>,
</span></span><span style="display:flex;"><span>    names<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UserID::MovieID::Rating::Timestamp&#34;</span><span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;::&#34;</span>),
</span></span><span style="display:flex;"><span>    sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;::&#34;</span>,
</span></span><span style="display:flex;"><span>    engine<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;python&#34;</span>
</span></span><span style="display:flex;"><span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">UserID</th>
<th style="text-align:right">MovieID</th>
<th style="text-align:right">Rating</th>
<th style="text-align:right">Timestamp</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1193</td>
<td style="text-align:right">5</td>
<td style="text-align:right">978300760</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">661</td>
<td style="text-align:right">3</td>
<td style="text-align:right">978302109</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">914</td>
<td style="text-align:right">3</td>
<td style="text-align:right">978301968</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3408</td>
<td style="text-align:right">4</td>
<td style="text-align:right">978300275</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2355</td>
<td style="text-align:right">5</td>
<td style="text-align:right">978824291</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df[<span style="color:#e6db74">&#34;pdate&#34;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_datetime(df[<span style="color:#e6db74">&#34;Timestamp&#34;</span>], unit<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;s&#39;</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">UserID</th>
<th style="text-align:right">MovieID</th>
<th style="text-align:right">Rating</th>
<th style="text-align:right">Timestamp</th>
<th style="text-align:right">pdate</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1193</td>
<td style="text-align:right">5</td>
<td style="text-align:right">978300760</td>
<td style="text-align:right">2000-12-31 22:12:40</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">661</td>
<td style="text-align:right">3</td>
<td style="text-align:right">978302109</td>
<td style="text-align:right">2000-12-31 22:35:09</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">914</td>
<td style="text-align:right">3</td>
<td style="text-align:right">978301968</td>
<td style="text-align:right">2000-12-31 22:32:48</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3408</td>
<td style="text-align:right">4</td>
<td style="text-align:right">978300275</td>
<td style="text-align:right">2000-12-31 22:04:35</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2355</td>
<td style="text-align:right">5</td>
<td style="text-align:right">978824291</td>
<td style="text-align:right">2001-01-06 23:38:11</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>dtypes</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>UserID                int64
</span></span><span style="display:flex;"><span>MovieID               int64
</span></span><span style="display:flex;"><span>Rating                int64
</span></span><span style="display:flex;"><span>Timestamp             int64
</span></span><span style="display:flex;"><span>pdate        datetime64[ns]
</span></span><span style="display:flex;"><span>dtype: object</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [19]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å®ç°æ•°æ®ç»Ÿè®¡</span>
</span></span><span style="display:flex;"><span>df_group <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby([df[<span style="color:#e6db74">&#34;pdate&#34;</span>]<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>month, <span style="color:#e6db74">&#34;Rating&#34;</span>])[<span style="color:#e6db74">&#34;UserID&#34;</span>]<span style="color:#f92672">.</span>agg(pv<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>size)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [20]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_group<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[20]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right">Rating</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1127</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2608</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">6442</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">8400</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">4495</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">629</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1464</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3297</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4403</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">2335</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">466</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1077</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2523</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">3032</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">1439</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1048</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2247</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">5501</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">6748</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">3863</td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table></div>
<p class="component-content component">å¯¹è¿™æ ·æ ¼å¼çš„æ•°æ®ï¼Œæˆ‘æƒ³æŸ¥çœ‹æŒ‰æœˆä»½ï¼Œä¸åŒè¯„åˆ†çš„æ¬¡æ•°è¶‹åŠ¿ï¼Œæ˜¯æ²¡æ³•å®ç°çš„</p>
<p class="component-content component">éœ€è¦å°†æ•°æ®å˜æ¢æˆæ¯ä¸ªè¯„åˆ†æ˜¯ä¸€åˆ—æ‰å¯ä»¥å®ç°</p>

<div class="component-content pagebody component">
  <h3 id="2-ä½¿ç”¨unstackå®ç°æ•°æ®äºŒç»´é€è§†" class="pagebody-header">
    2. ä½¿ç”¨unstackå®ç°æ•°æ®äºŒç»´é€è§†
  </h3>
</div><p class="component-content component">ç›®çš„ï¼šæƒ³è¦ç”»å›¾å¯¹æ¯”æŒ‰ç…§æœˆä»½çš„ä¸åŒè¯„åˆ†çš„æ•°é‡è¶‹åŠ¿</p>
<p class="component-content component">In [21]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_stack <span style="color:#f92672">=</span> df_group<span style="color:#f92672">.</span>unstack()
</span></span><span style="display:flex;"><span>df_stack</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[21]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">Rating</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1127</td>
<td style="text-align:right">2608</td>
<td style="text-align:right">6442</td>
<td style="text-align:right">8400</td>
<td style="text-align:right">4495</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">629</td>
<td style="text-align:right">1464</td>
<td style="text-align:right">3297</td>
<td style="text-align:right">4403</td>
<td style="text-align:right">2335</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">466</td>
<td style="text-align:right">1077</td>
<td style="text-align:right">2523</td>
<td style="text-align:right">3032</td>
<td style="text-align:right">1439</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1048</td>
<td style="text-align:right">2247</td>
<td style="text-align:right">5501</td>
<td style="text-align:right">6748</td>
<td style="text-align:right">3863</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">4557</td>
<td style="text-align:right">7631</td>
<td style="text-align:right">18481</td>
<td style="text-align:right">25769</td>
<td style="text-align:right">17840</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:right">3196</td>
<td style="text-align:right">6500</td>
<td style="text-align:right">15211</td>
<td style="text-align:right">21838</td>
<td style="text-align:right">14365</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:right">4891</td>
<td style="text-align:right">9566</td>
<td style="text-align:right">25421</td>
<td style="text-align:right">34957</td>
<td style="text-align:right">22169</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:right">10873</td>
<td style="text-align:right">20597</td>
<td style="text-align:right">50509</td>
<td style="text-align:right">64198</td>
<td style="text-align:right">42497</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:right">3107</td>
<td style="text-align:right">5873</td>
<td style="text-align:right">14702</td>
<td style="text-align:right">19927</td>
<td style="text-align:right">13182</td>
</tr>
<tr>
<td style="text-align:right">10</td>
<td style="text-align:right">2121</td>
<td style="text-align:right">4785</td>
<td style="text-align:right">12175</td>
<td style="text-align:right">16095</td>
<td style="text-align:right">10324</td>
</tr>
<tr>
<td style="text-align:right">11</td>
<td style="text-align:right">17701</td>
<td style="text-align:right">32202</td>
<td style="text-align:right">76069</td>
<td style="text-align:right">102448</td>
<td style="text-align:right">67041</td>
</tr>
<tr>
<td style="text-align:right">12</td>
<td style="text-align:right">6458</td>
<td style="text-align:right">13007</td>
<td style="text-align:right">30866</td>
<td style="text-align:right">41156</td>
<td style="text-align:right">26760</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [22]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_stack<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[22]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x1ba09b0ce48</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-67cfd55528a8feafe8607185418b0cd9" id="lht67cfd55528a8feafe8607185418b0cd9">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/13.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">In [23]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># unstackå’Œstackæ˜¯äº’é€†æ“ä½œ</span>
</span></span><span style="display:flex;"><span>df_stack<span style="color:#f92672">.</span>stack()<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[23]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right">Rating</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1127</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2608</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">6442</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">8400</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">4495</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">629</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1464</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3297</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4403</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">2335</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">466</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1077</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2523</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">3032</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">1439</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1048</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2247</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">5501</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">6748</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">3863</td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="3-ä½¿ç”¨pivotç®€åŒ–é€è§†" class="pagebody-header">
    3. ä½¿ç”¨pivotç®€åŒ–é€è§†
  </h3>
</div><p class="component-content component">In [24]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_group<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[24]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right">Rating</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1127</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2608</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">6442</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">8400</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">4495</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">629</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1464</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">3297</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">4403</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">2335</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">466</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1077</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2523</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">3032</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">1439</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1048</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2247</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">5501</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">6748</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">3863</td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [25]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_reset <span style="color:#f92672">=</span> df_group<span style="color:#f92672">.</span>reset_index()
</span></span><span style="display:flex;"><span>df_reset<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[25]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pdate</th>
<th style="text-align:right">Rating</th>
<th style="text-align:right">pv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1127</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2608</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">6442</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
<td style="text-align:right">8400</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">5</td>
<td style="text-align:right">4495</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [26]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_pivot <span style="color:#f92672">=</span> df_reset<span style="color:#f92672">.</span>pivot(<span style="color:#e6db74">&#34;pdate&#34;</span>, <span style="color:#e6db74">&#34;Rating&#34;</span>, <span style="color:#e6db74">&#34;pv&#34;</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [27]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_pivot<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[27]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right">Rating</th>
<th style="text-align:right">1</th>
<th style="text-align:right">2</th>
<th style="text-align:right">3</th>
<th style="text-align:right">4</th>
<th style="text-align:right">5</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1127</td>
<td style="text-align:right">2608</td>
<td style="text-align:right">6442</td>
<td style="text-align:right">8400</td>
<td style="text-align:right">4495</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">629</td>
<td style="text-align:right">1464</td>
<td style="text-align:right">3297</td>
<td style="text-align:right">4403</td>
<td style="text-align:right">2335</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">466</td>
<td style="text-align:right">1077</td>
<td style="text-align:right">2523</td>
<td style="text-align:right">3032</td>
<td style="text-align:right">1439</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">1048</td>
<td style="text-align:right">2247</td>
<td style="text-align:right">5501</td>
<td style="text-align:right">6748</td>
<td style="text-align:right">3863</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">4557</td>
<td style="text-align:right">7631</td>
<td style="text-align:right">18481</td>
<td style="text-align:right">25769</td>
<td style="text-align:right">17840</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [28]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_pivot<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[28]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x1ba09db6d48</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0d71d12fd5dd031c55777b7d0644b8e7" id="lht0d71d12fd5dd031c55777b7d0644b8e7">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/14.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">*<strong>pivotæ–¹æ³•ç›¸å½“äºå¯¹dfä½¿ç”¨set_indexåˆ›å»ºåˆ†å±‚ç´¢å¼•ï¼Œç„¶åè°ƒç”¨unstack*</strong></p>

<div class="component-content pagebody component">
  <h3 id="4-stackunstackpivotçš„è¯­æ³•" class="pagebody-header">
    4. stackã€unstackã€pivotçš„è¯­æ³•
  </h3>
</div>
<div class="component-content pagebody component">
  <h4 id="stackdataframestacklevel-1-dropnatrueå°†columnå˜æˆindexç±»ä¼¼æŠŠæ¨ªæ”¾çš„ä¹¦ç±å˜æˆç«–æ”¾" class="pagebody-header">
    stackï¼šDataFrame.stack(level=-1, dropna=True)ï¼Œå°†columnå˜æˆindexï¼Œç±»ä¼¼æŠŠæ¨ªæ”¾çš„ä¹¦ç±å˜æˆç«–æ”¾
  </h4>
</div><p class="component-content component">level=-1ä»£è¡¨å¤šå±‚ç´¢å¼•çš„æœ€å†…å±‚ï¼Œå¯ä»¥é€šè¿‡==0ã€1ã€2æŒ‡å®šå¤šå±‚ç´¢å¼•çš„å¯¹åº”å±‚</p>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-78cb494314cca162e0481991cceb0d90" id="lht78cb494314cca162e0481991cceb0d90">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/15.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h4 id="unstackdataframeunstacklevel-1-fill_valuenoneå°†indexå˜æˆcolumnç±»ä¼¼æŠŠç«–æ”¾çš„ä¹¦ç±å˜æˆæ¨ªæ”¾" class="pagebody-header">
    unstackï¼šDataFrame.unstack(level=-1, fill_value=None)ï¼Œå°†indexå˜æˆcolumnï¼Œç±»ä¼¼æŠŠç«–æ”¾çš„ä¹¦ç±å˜æˆæ¨ªæ”¾
  </h4>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-650fe06dfe2d742495399462829d4722" id="lht650fe06dfe2d742495399462829d4722">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/16.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h4 id="pivotdataframepivotindexnone-columnsnone-valuesnoneæŒ‡å®šindexcolumnsvalueså®ç°äºŒç»´é€è§†" class="pagebody-header">
    pivotï¼šDataFrame.pivot(index=None, columns=None, values=None)ï¼ŒæŒ‡å®šindexã€columnsã€valueså®ç°äºŒç»´é€è§†
  </h4>
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-11fc4827f1a6fcc8c652e77a26f01742" id="lht11fc4827f1a6fcc8c652e77a26f01742">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/17.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h1 id="21pandasæ€æ ·å¿«æ·æ–¹ä¾¿çš„å¤„ç†æ—¥æœŸæ•°æ®" class="pagebody-header">
    21ã€Pandasæ€æ ·å¿«æ·æ–¹ä¾¿çš„å¤„ç†æ—¥æœŸæ•°æ®
  </h1>
</div><p class="component-content component">Pandasæ—¥æœŸå¤„ç†çš„ä½œç”¨ï¼šå°†2018-01-01ã€1/1/2018ç­‰å¤šç§æ—¥æœŸæ ¼å¼æ˜ å°„æˆç»Ÿä¸€çš„æ ¼å¼å¯¹è±¡ï¼Œåœ¨è¯¥å¯¹è±¡ä¸Šæä¾›å¼ºå¤§çš„åŠŸèƒ½æ”¯æŒ</p>
<p class="component-content component">å‡ ä¸ªæ¦‚å¿µï¼š</p>
<div class="component-content component"><ol>
<li>pd.to_datetimeï¼špandasçš„ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½å°†å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€serieså˜æˆæ—¥æœŸå½¢å¼</li>
<li>Timestampï¼špandasè¡¨ç¤ºæ—¥æœŸçš„å¯¹è±¡å½¢å¼</li>
<li>DatetimeIndexï¼špandasè¡¨ç¤ºæ—¥æœŸçš„å¯¹è±¡åˆ—è¡¨å½¢å¼</li>
</ol></div>
<p class="component-content component">å…¶ä¸­ï¼š</p>
<div class="component-content component"><ul>
<li>DatetimeIndexæ˜¯Timestampçš„åˆ—è¡¨å½¢å¼</li>
<li>pd.to_datetimeå¯¹å•ä¸ªæ—¥æœŸå­—ç¬¦ä¸²å¤„ç†ä¼šå¾—åˆ°Timestamp</li>
<li>pd.to_datetimeå¯¹æ—¥æœŸå­—ç¬¦ä¸²åˆ—è¡¨å¤„ç†ä¼šå¾—åˆ°DatetimeIndex</li>
</ul></div>
<p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-0d0a31a24b3592e09ff533712c06d7d1" id="lht0d0a31a24b3592e09ff533712c06d7d1">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/18.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h3 id="é—®é¢˜æ€æ ·ç»Ÿè®¡æ¯å‘¨æ¯æœˆæ¯å­£åº¦çš„æœ€é«˜æ¸©åº¦" class="pagebody-header">
    é—®é¢˜ï¼šæ€æ ·ç»Ÿè®¡æ¯å‘¨ã€æ¯æœˆã€æ¯å­£åº¦çš„æœ€é«˜æ¸©åº¦ï¼Ÿ
  </h3>
</div>
<div class="component-content pagebody component">
  <h3 id="1è¯»å–å¤©æ°”æ•°æ®åˆ°dataframe" class="pagebody-header">
    1ã€è¯»å–å¤©æ°”æ•°æ®åˆ°dataframe
  </h3>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">%</span>matplotlib inline</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>fpath <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./datas/beijing_tianqi/beijing_tianqi_2018.csv&#34;</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(fpath)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ›¿æ¢æ‰æ¸©åº¦çš„åç¼€â„ƒ</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#34;bWendu&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;â„ƒ&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int32&#39;</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[:, <span style="color:#e6db74">&#34;yWendu&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;yWendu&#34;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;â„ƒ&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>)<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int32&#39;</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[2]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
<th style="text-align:right">yWendu</th>
<th style="text-align:right">tianqi</th>
<th style="text-align:right">fengxiang</th>
<th style="text-align:right">fengli</th>
<th style="text-align:right">aqi</th>
<th style="text-align:right">aqiInfo</th>
<th style="text-align:right">aqiLevel</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">2018-01-01</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">59</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2018-01-02</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">49</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2018-01-03</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2018-01-04</td>
<td style="text-align:right">0</td>
<td style="text-align:right">-8</td>
<td style="text-align:right">é˜´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">50</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="2å°†æ—¥æœŸåˆ—è½¬æ¢æˆpandasçš„æ—¥æœŸ" class="pagebody-header">
    2ã€å°†æ—¥æœŸåˆ—è½¬æ¢æˆpandasçš„æ—¥æœŸ
  </h3>
</div><p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>set_index(pd<span style="color:#f92672">.</span>to_datetime(df[<span style="color:#e6db74">&#34;ymd&#34;</span>]), inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
<th style="text-align:right">yWendu</th>
<th style="text-align:right">tianqi</th>
<th style="text-align:right">fengxiang</th>
<th style="text-align:right">fengli</th>
<th style="text-align:right">aqi</th>
<th style="text-align:right">aqiInfo</th>
<th style="text-align:right">aqiLevel</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">ymd</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2018-01-01</td>
<td style="text-align:right">2018-01-01</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">59</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-01-02</td>
<td style="text-align:right">2018-01-02</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">49</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-03</td>
<td style="text-align:right">2018-01-03</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-04</td>
<td style="text-align:right">2018-01-04</td>
<td style="text-align:right">0</td>
<td style="text-align:right">-8</td>
<td style="text-align:right">é˜´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">50</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>index</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DatetimeIndex([<span style="color:#e6db74">&#39;2018-01-01&#39;</span>, <span style="color:#e6db74">&#39;2018-01-02&#39;</span>, <span style="color:#e6db74">&#39;2018-01-03&#39;</span>, <span style="color:#e6db74">&#39;2018-01-04&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-01-05&#39;</span>, <span style="color:#e6db74">&#39;2018-01-06&#39;</span>, <span style="color:#e6db74">&#39;2018-01-07&#39;</span>, <span style="color:#e6db74">&#39;2018-01-08&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-01-09&#39;</span>, <span style="color:#e6db74">&#39;2018-01-10&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-12-22&#39;</span>, <span style="color:#e6db74">&#39;2018-12-23&#39;</span>, <span style="color:#e6db74">&#39;2018-12-24&#39;</span>, <span style="color:#e6db74">&#39;2018-12-25&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-12-26&#39;</span>, <span style="color:#e6db74">&#39;2018-12-27&#39;</span>, <span style="color:#e6db74">&#39;2018-12-28&#39;</span>, <span style="color:#e6db74">&#39;2018-12-29&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-12-30&#39;</span>, <span style="color:#e6db74">&#39;2018-12-31&#39;</span>],
</span></span><span style="display:flex;"><span>              dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime64[ns]&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ymd&#39;</span>, length<span style="color:#f92672">=</span><span style="color:#ae81ff">365</span>, freq<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># DatetimeIndexæ˜¯Timestampçš„åˆ—è¡¨å½¢å¼</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>index[<span style="color:#ae81ff">0</span>]</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Timestamp(<span style="color:#e6db74">&#39;2018-01-01 00:00:00&#39;</span>)</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="3-æ–¹ä¾¿çš„å¯¹datetimeindexè¿›è¡ŒæŸ¥è¯¢" class="pagebody-header">
    3ã€ æ–¹ä¾¿çš„å¯¹DatetimeIndexè¿›è¡ŒæŸ¥è¯¢
  </h3>
</div><p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># ç­›é€‰å›ºå®šçš„æŸä¸€å¤©</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;2018-01-05&#39;</span>]</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ymd          <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span>
</span></span><span style="display:flex;"><span>bWendu                <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>yWendu               <span style="color:#f92672">-</span><span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>tianqi             å¤šäº‘<span style="color:#f92672">~</span>æ™´
</span></span><span style="display:flex;"><span>fengxiang           è¥¿åŒ—é£
</span></span><span style="display:flex;"><span>fengli             <span style="color:#ae81ff">1</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>çº§
</span></span><span style="display:flex;"><span>aqi                  <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>aqiInfo               ä¼˜
</span></span><span style="display:flex;"><span>aqiLevel              <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Name: <span style="color:#ae81ff">2018</span><span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>, dtype: object</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æ—¥æœŸåŒºé—´</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;2018-01-05&#39;</span>:<span style="color:#e6db74">&#39;2018-01-10&#39;</span>]</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[8]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
<th style="text-align:right">yWendu</th>
<th style="text-align:right">tianqi</th>
<th style="text-align:right">fengxiang</th>
<th style="text-align:right">fengli</th>
<th style="text-align:right">aqi</th>
<th style="text-align:right">aqiInfo</th>
<th style="text-align:right">aqiLevel</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">ymd</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">50</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-06</td>
<td style="text-align:right">2018-01-06</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">å¤šäº‘~é˜´</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">32</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-07</td>
<td style="text-align:right">2018-01-07</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-4</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">59</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-01-08</td>
<td style="text-align:right">2018-01-08</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">4-5çº§</td>
<td style="text-align:right">50</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-09</td>
<td style="text-align:right">2018-01-09</td>
<td style="text-align:right">1</td>
<td style="text-align:right">-8</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">3-4çº§</td>
<td style="text-align:right">34</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-10</td>
<td style="text-align:right">2018-01-10</td>
<td style="text-align:right">-2</td>
<td style="text-align:right">-10</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">26</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [10]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æŒ‰æœˆä»½å‰ç¼€ç­›é€‰</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#39;2018-03&#39;</span>]</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[10]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
<th style="text-align:right">yWendu</th>
<th style="text-align:right">tianqi</th>
<th style="text-align:right">fengxiang</th>
<th style="text-align:right">fengli</th>
<th style="text-align:right">aqi</th>
<th style="text-align:right">aqiInfo</th>
<th style="text-align:right">aqiLevel</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">ymd</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2018-03-01</td>
<td style="text-align:right">2018-03-01</td>
<td style="text-align:right">8</td>
<td style="text-align:right">-3</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">46</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-03-02</td>
<td style="text-align:right">2018-03-02</td>
<td style="text-align:right">9</td>
<td style="text-align:right">-1</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">95</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-03</td>
<td style="text-align:right">2018-03-03</td>
<td style="text-align:right">13</td>
<td style="text-align:right">3</td>
<td style="text-align:right">å¤šäº‘~é˜´</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">214</td>
<td style="text-align:right">é‡åº¦æ±¡æŸ“</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">2018-03-04</td>
<td style="text-align:right">2018-03-04</td>
<td style="text-align:right">7</td>
<td style="text-align:right">-2</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">ä¸œå—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">144</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-05</td>
<td style="text-align:right">2018-03-05</td>
<td style="text-align:right">8</td>
<td style="text-align:right">-3</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">94</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-06</td>
<td style="text-align:right">2018-03-06</td>
<td style="text-align:right">6</td>
<td style="text-align:right">-3</td>
<td style="text-align:right">å¤šäº‘~é˜´</td>
<td style="text-align:right">ä¸œå—é£</td>
<td style="text-align:right">3-4çº§</td>
<td style="text-align:right">67</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-07</td>
<td style="text-align:right">2018-03-07</td>
<td style="text-align:right">6</td>
<td style="text-align:right">-2</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">65</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-08</td>
<td style="text-align:right">2018-03-08</td>
<td style="text-align:right">8</td>
<td style="text-align:right">-4</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">62</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-09</td>
<td style="text-align:right">2018-03-09</td>
<td style="text-align:right">10</td>
<td style="text-align:right">-2</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">132</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-10</td>
<td style="text-align:right">2018-03-10</td>
<td style="text-align:right">14</td>
<td style="text-align:right">-2</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">ä¸œå—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">171</td>
<td style="text-align:right">ä¸­åº¦æ±¡æŸ“</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">2018-03-11</td>
<td style="text-align:right">2018-03-11</td>
<td style="text-align:right">11</td>
<td style="text-align:right">0</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">81</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-12</td>
<td style="text-align:right">2018-03-12</td>
<td style="text-align:right">15</td>
<td style="text-align:right">3</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">174</td>
<td style="text-align:right">ä¸­åº¦æ±¡æŸ“</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">2018-03-13</td>
<td style="text-align:right">2018-03-13</td>
<td style="text-align:right">17</td>
<td style="text-align:right">5</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">287</td>
<td style="text-align:right">é‡åº¦æ±¡æŸ“</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">2018-03-14</td>
<td style="text-align:right">2018-03-14</td>
<td style="text-align:right">15</td>
<td style="text-align:right">6</td>
<td style="text-align:right">å¤šäº‘~é˜´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">293</td>
<td style="text-align:right">é‡åº¦æ±¡æŸ“</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">2018-03-15</td>
<td style="text-align:right">2018-03-15</td>
<td style="text-align:right">12</td>
<td style="text-align:right">-1</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">3-4çº§</td>
<td style="text-align:right">70</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-16</td>
<td style="text-align:right">2018-03-16</td>
<td style="text-align:right">10</td>
<td style="text-align:right">-1</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">58</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-17</td>
<td style="text-align:right">2018-03-17</td>
<td style="text-align:right">4</td>
<td style="text-align:right">0</td>
<td style="text-align:right">å°é›¨~é˜´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">81</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-18</td>
<td style="text-align:right">2018-03-18</td>
<td style="text-align:right">13</td>
<td style="text-align:right">1</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">134</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-19</td>
<td style="text-align:right">2018-03-19</td>
<td style="text-align:right">13</td>
<td style="text-align:right">2</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">ä¸œé£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">107</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-20</td>
<td style="text-align:right">2018-03-20</td>
<td style="text-align:right">10</td>
<td style="text-align:right">-2</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">41</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-03-21</td>
<td style="text-align:right">2018-03-21</td>
<td style="text-align:right">11</td>
<td style="text-align:right">1</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">76</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-22</td>
<td style="text-align:right">2018-03-22</td>
<td style="text-align:right">17</td>
<td style="text-align:right">4</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">112</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-23</td>
<td style="text-align:right">2018-03-23</td>
<td style="text-align:right">18</td>
<td style="text-align:right">5</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">146</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-24</td>
<td style="text-align:right">2018-03-24</td>
<td style="text-align:right">22</td>
<td style="text-align:right">5</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">119</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-25</td>
<td style="text-align:right">2018-03-25</td>
<td style="text-align:right">24</td>
<td style="text-align:right">7</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">78</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-26</td>
<td style="text-align:right">2018-03-26</td>
<td style="text-align:right">25</td>
<td style="text-align:right">7</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">è¥¿å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">151</td>
<td style="text-align:right">ä¸­åº¦æ±¡æŸ“</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">2018-03-27</td>
<td style="text-align:right">2018-03-27</td>
<td style="text-align:right">27</td>
<td style="text-align:right">11</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">243</td>
<td style="text-align:right">é‡åº¦æ±¡æŸ“</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">2018-03-28</td>
<td style="text-align:right">2018-03-28</td>
<td style="text-align:right">25</td>
<td style="text-align:right">9</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">ä¸œé£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">387</td>
<td style="text-align:right">ä¸¥é‡æ±¡æŸ“</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:right">2018-03-29</td>
<td style="text-align:right">2018-03-29</td>
<td style="text-align:right">19</td>
<td style="text-align:right">7</td>
<td style="text-align:right">æ™´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">119</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2018-03-30</td>
<td style="text-align:right">2018-03-30</td>
<td style="text-align:right">18</td>
<td style="text-align:right">8</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">68</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-03-31</td>
<td style="text-align:right">2018-03-31</td>
<td style="text-align:right">23</td>
<td style="text-align:right">9</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">å—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">125</td>
<td style="text-align:right">è½»åº¦æ±¡æŸ“</td>
<td style="text-align:right">3</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [11]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æŒ‰æœˆä»½å‰ç¼€ç­›é€‰</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#34;2018-07&#34;</span>:<span style="color:#e6db74">&#34;2018-09&#34;</span>]<span style="color:#f92672">.</span>index</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[11]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DatetimeIndex([<span style="color:#e6db74">&#39;2018-07-01&#39;</span>, <span style="color:#e6db74">&#39;2018-07-02&#39;</span>, <span style="color:#e6db74">&#39;2018-07-03&#39;</span>, <span style="color:#e6db74">&#39;2018-07-04&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-05&#39;</span>, <span style="color:#e6db74">&#39;2018-07-06&#39;</span>, <span style="color:#e6db74">&#39;2018-07-07&#39;</span>, <span style="color:#e6db74">&#39;2018-07-08&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-09&#39;</span>, <span style="color:#e6db74">&#39;2018-07-10&#39;</span>, <span style="color:#e6db74">&#39;2018-07-11&#39;</span>, <span style="color:#e6db74">&#39;2018-07-12&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-13&#39;</span>, <span style="color:#e6db74">&#39;2018-07-14&#39;</span>, <span style="color:#e6db74">&#39;2018-07-15&#39;</span>, <span style="color:#e6db74">&#39;2018-07-16&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-17&#39;</span>, <span style="color:#e6db74">&#39;2018-07-18&#39;</span>, <span style="color:#e6db74">&#39;2018-07-19&#39;</span>, <span style="color:#e6db74">&#39;2018-07-20&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-21&#39;</span>, <span style="color:#e6db74">&#39;2018-07-22&#39;</span>, <span style="color:#e6db74">&#39;2018-07-23&#39;</span>, <span style="color:#e6db74">&#39;2018-07-24&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-25&#39;</span>, <span style="color:#e6db74">&#39;2018-07-26&#39;</span>, <span style="color:#e6db74">&#39;2018-07-27&#39;</span>, <span style="color:#e6db74">&#39;2018-07-28&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-07-29&#39;</span>, <span style="color:#e6db74">&#39;2018-07-30&#39;</span>, <span style="color:#e6db74">&#39;2018-07-31&#39;</span>, <span style="color:#e6db74">&#39;2018-08-01&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-02&#39;</span>, <span style="color:#e6db74">&#39;2018-08-03&#39;</span>, <span style="color:#e6db74">&#39;2018-08-04&#39;</span>, <span style="color:#e6db74">&#39;2018-08-05&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-06&#39;</span>, <span style="color:#e6db74">&#39;2018-08-07&#39;</span>, <span style="color:#e6db74">&#39;2018-08-08&#39;</span>, <span style="color:#e6db74">&#39;2018-08-09&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-10&#39;</span>, <span style="color:#e6db74">&#39;2018-08-11&#39;</span>, <span style="color:#e6db74">&#39;2018-08-12&#39;</span>, <span style="color:#e6db74">&#39;2018-08-13&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-14&#39;</span>, <span style="color:#e6db74">&#39;2018-08-15&#39;</span>, <span style="color:#e6db74">&#39;2018-08-16&#39;</span>, <span style="color:#e6db74">&#39;2018-08-17&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-18&#39;</span>, <span style="color:#e6db74">&#39;2018-08-19&#39;</span>, <span style="color:#e6db74">&#39;2018-08-20&#39;</span>, <span style="color:#e6db74">&#39;2018-08-21&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-22&#39;</span>, <span style="color:#e6db74">&#39;2018-08-23&#39;</span>, <span style="color:#e6db74">&#39;2018-08-24&#39;</span>, <span style="color:#e6db74">&#39;2018-08-25&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-26&#39;</span>, <span style="color:#e6db74">&#39;2018-08-27&#39;</span>, <span style="color:#e6db74">&#39;2018-08-28&#39;</span>, <span style="color:#e6db74">&#39;2018-08-29&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-08-30&#39;</span>, <span style="color:#e6db74">&#39;2018-08-31&#39;</span>, <span style="color:#e6db74">&#39;2018-09-01&#39;</span>, <span style="color:#e6db74">&#39;2018-09-02&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-03&#39;</span>, <span style="color:#e6db74">&#39;2018-09-04&#39;</span>, <span style="color:#e6db74">&#39;2018-09-05&#39;</span>, <span style="color:#e6db74">&#39;2018-09-06&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-07&#39;</span>, <span style="color:#e6db74">&#39;2018-09-08&#39;</span>, <span style="color:#e6db74">&#39;2018-09-09&#39;</span>, <span style="color:#e6db74">&#39;2018-09-10&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-11&#39;</span>, <span style="color:#e6db74">&#39;2018-09-12&#39;</span>, <span style="color:#e6db74">&#39;2018-09-13&#39;</span>, <span style="color:#e6db74">&#39;2018-09-14&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-15&#39;</span>, <span style="color:#e6db74">&#39;2018-09-16&#39;</span>, <span style="color:#e6db74">&#39;2018-09-17&#39;</span>, <span style="color:#e6db74">&#39;2018-09-18&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-19&#39;</span>, <span style="color:#e6db74">&#39;2018-09-20&#39;</span>, <span style="color:#e6db74">&#39;2018-09-21&#39;</span>, <span style="color:#e6db74">&#39;2018-09-22&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-23&#39;</span>, <span style="color:#e6db74">&#39;2018-09-24&#39;</span>, <span style="color:#e6db74">&#39;2018-09-25&#39;</span>, <span style="color:#e6db74">&#39;2018-09-26&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2018-09-27&#39;</span>, <span style="color:#e6db74">&#39;2018-09-28&#39;</span>, <span style="color:#e6db74">&#39;2018-09-29&#39;</span>, <span style="color:#e6db74">&#39;2018-09-30&#39;</span>],
</span></span><span style="display:flex;"><span>              dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime64[ns]&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ymd&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [12]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æŒ‰å¹´ä»½å‰ç¼€ç­›é€‰</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#34;2018&#34;</span>]<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[12]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ymd</th>
<th style="text-align:right">bWendu</th>
<th style="text-align:right">yWendu</th>
<th style="text-align:right">tianqi</th>
<th style="text-align:right">fengxiang</th>
<th style="text-align:right">fengli</th>
<th style="text-align:right">aqi</th>
<th style="text-align:right">aqiInfo</th>
<th style="text-align:right">aqiLevel</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">ymd</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2018-01-01</td>
<td style="text-align:right">2018-01-01</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">æ™´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">59</td>
<td style="text-align:right">è‰¯</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2018-01-02</td>
<td style="text-align:right">2018-01-02</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">é˜´~å¤šäº‘</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">49</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-03</td>
<td style="text-align:right">2018-01-03</td>
<td style="text-align:right">2</td>
<td style="text-align:right">-5</td>
<td style="text-align:right">å¤šäº‘</td>
<td style="text-align:right">åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-04</td>
<td style="text-align:right">2018-01-04</td>
<td style="text-align:right">0</td>
<td style="text-align:right">-8</td>
<td style="text-align:right">é˜´</td>
<td style="text-align:right">ä¸œåŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">28</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">2018-01-05</td>
<td style="text-align:right">3</td>
<td style="text-align:right">-6</td>
<td style="text-align:right">å¤šäº‘~æ™´</td>
<td style="text-align:right">è¥¿åŒ—é£</td>
<td style="text-align:right">1-2çº§</td>
<td style="text-align:right">50</td>
<td style="text-align:right">ä¼˜</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="4æ–¹ä¾¿çš„è·å–å‘¨æœˆå­£åº¦" class="pagebody-header">
    4ã€æ–¹ä¾¿çš„è·å–å‘¨ã€æœˆã€å­£åº¦
  </h3>
</div><p class="component-content component">Timestampã€DatetimeIndexæ”¯æŒå¤§é‡çš„å±æ€§å¯ä»¥è·å–æ—¥æœŸåˆ†é‡ï¼š
<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components</a></p>
<p class="component-content component">In [13]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å‘¨æ•°å­—åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>week</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[13]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Int64Index([ <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">2</span>,  <span style="color:#ae81ff">2</span>,  <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">51</span>, <span style="color:#ae81ff">51</span>, <span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">52</span>, <span style="color:#ae81ff">52</span>,  <span style="color:#ae81ff">1</span>],
</span></span><span style="display:flex;"><span>           dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;int64&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ymd&#39;</span>, length<span style="color:#f92672">=</span><span style="color:#ae81ff">365</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [14]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æœˆæ•°å­—åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>month</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[14]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Int64Index([ <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,  <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>],
</span></span><span style="display:flex;"><span>           dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;int64&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ymd&#39;</span>, length<span style="color:#f92672">=</span><span style="color:#ae81ff">365</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [15]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å­£åº¦æ•°å­—åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>quarter</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[15]:</p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">Int64Index([1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
            ...
            4, 4, 4, 4, 4, 4, 4, 4, 4, 4],
           dtype=&#39;int64&#39;, name=&#39;ymd&#39;, length=365)</code></pre>
  
</div>
<div class="component-content pagebody component">
  <h3 id="5ç»Ÿè®¡æ¯å‘¨æ¯æœˆæ¯ä¸ªå­£åº¦çš„æœ€é«˜æ¸©åº¦" class="pagebody-header">
    5ã€ç»Ÿè®¡æ¯å‘¨ã€æ¯æœˆã€æ¯ä¸ªå­£åº¦çš„æœ€é«˜æ¸©åº¦
  </h3>
</div>
<div class="component-content pagebody component">
  <h4 id="ç»Ÿè®¡æ¯å‘¨çš„æ•°æ®" class="pagebody-header">
    ç»Ÿè®¡æ¯å‘¨çš„æ•°æ®
  </h4>
</div><p class="component-content component">In [16]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>week)[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>max()<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[16]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ymd
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    <span style="color:#ae81ff">7</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>   <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>    <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>Name: bWendu, dtype: int32</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [17]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>week)[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>max()<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[17]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x23300b75b88</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-5cd8c5838a7d1b4d23f5398e266a985b" id="lht5cd8c5838a7d1b4d23f5398e266a985b">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/19.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h4 id="ç»Ÿè®¡æ¯ä¸ªæœˆçš„æ•°æ®" class="pagebody-header">
    ç»Ÿè®¡æ¯ä¸ªæœˆçš„æ•°æ®
  </h4>
</div><p class="component-content component">In [18]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>month)[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>max()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[18]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ymd
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">7</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">27</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">38</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">37</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>     <span style="color:#ae81ff">36</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>     <span style="color:#ae81ff">31</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>    <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>    <span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>    <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>Name: bWendu, dtype: int32</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [19]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>month)[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>max()<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[19]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x23302dac4c8</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-efd38d28d72806bab9f73909d16e90de" id="lhtefd38d28d72806bab9f73909d16e90de">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/20.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h4 id="ç»Ÿè®¡æ¯ä¸ªå­£åº¦çš„æ•°æ®" class="pagebody-header">
    ç»Ÿè®¡æ¯ä¸ªå­£åº¦çš„æ•°æ®
  </h4>
</div><p class="component-content component">In [20]:</p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">df.groupby(df.index.quarter)[&#34;bWendu&#34;].max()</code></pre>
  
</div><p class="component-content component">Out[20]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ymd
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">27</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">38</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    <span style="color:#ae81ff">37</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    <span style="color:#ae81ff">25</span>
</span></span><span style="display:flex;"><span>Name: bWendu, dtype: int32</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [21]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>groupby(df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>quarter)[<span style="color:#e6db74">&#34;bWendu&#34;</span>]<span style="color:#f92672">.</span>max()<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[21]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x23302e338c8</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-eba0930b8f2739b6b05af9fb4eb71875" id="lhteba0930b8f2739b6b05af9fb4eb71875">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/21.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h1 id="22pandasæ€ä¹ˆå¤„ç†æ—¥æœŸç´¢å¼•çš„ç¼ºå¤±" class="pagebody-header">
    22ã€Pandasæ€ä¹ˆå¤„ç†æ—¥æœŸç´¢å¼•çš„ç¼ºå¤±ï¼Ÿ
  </h1>
</div><p class="component-content component">é—®é¢˜ï¼šæŒ‰æ—¥æœŸç»Ÿè®¡çš„æ•°æ®ï¼Œç¼ºå¤±äº†æŸå¤©ï¼Œå¯¼è‡´æ•°æ®ä¸å…¨è¯¥æ€ä¹ˆè¡¥å……æ—¥æœŸï¼Ÿ</p>
<p class="component-content component">å¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•å®ç°ï¼š
1ã€DataFrame.reindexï¼Œè°ƒæ•´dataframeçš„ç´¢å¼•ä»¥é€‚åº”æ–°çš„ç´¢å¼•
2ã€DataFrame.resampleï¼Œå¯ä»¥å¯¹æ—¶é—´åºåˆ—é‡é‡‡æ ·ï¼Œæ”¯æŒè¡¥å……ç¼ºå¤±å€¼</p>

<div class="component-content pagebody component">
  <h2 id="é—®é¢˜å¦‚æœç¼ºå¤±äº†ç´¢å¼•è¯¥æ€ä¹ˆå¡«å……" class="pagebody-header">
    é—®é¢˜ï¼šå¦‚æœç¼ºå¤±äº†ç´¢å¼•è¯¥æ€ä¹ˆå¡«å……ï¼Ÿ
  </h2>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">%</span>matplotlib inline</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;pdate&#34;</span>: [<span style="color:#e6db74">&#34;2019-12-01&#34;</span>, <span style="color:#e6db74">&#34;2019-12-02&#34;</span>, <span style="color:#e6db74">&#34;2019-12-04&#34;</span>, <span style="color:#e6db74">&#34;2019-12-05&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;pv&#34;</span>: [<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">400</span>, <span style="color:#ae81ff">500</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;uv&#34;</span>: [<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>],
</span></span><span style="display:flex;"><span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[2]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pdate</th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500</td>
<td style="text-align:right">50</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#34;pdate&#34;</span>)<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x1a0d908bf48</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-966fd3fb2cb18c7e9e6d716051ee79e8" id="lht966fd3fb2cb18c7e9e6d716051ee79e8">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/22.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>
<p class="component-content component">*<strong>é—®é¢˜ï¼Œè¿™é‡Œç¼ºå¤±äº†2019-12-03çš„æ•°æ®ï¼Œå¯¼è‡´æ•°æ®ä¸å…¨è¯¥æ€ä¹ˆè¡¥å……ï¼Ÿ*</strong></p>

<div class="component-content pagebody component">
  <h2 id="æ–¹æ³•1ä½¿ç”¨pandasreindexæ–¹æ³•" class="pagebody-header">
    æ–¹æ³•1ï¼šä½¿ç”¨pandas.reindexæ–¹æ³•
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="1å°†dfçš„ç´¢å¼•å˜æˆæ—¥æœŸç´¢å¼•" class="pagebody-header">
    1ã€å°†dfçš„ç´¢å¼•å˜æˆæ—¥æœŸç´¢å¼•
  </h3>
</div><p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_date <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#34;pdate&#34;</span>)
</span></span><span style="display:flex;"><span>df_date</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500</td>
<td style="text-align:right">50</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_date<span style="color:#f92672">.</span>index</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Index([<span style="color:#e6db74">&#39;2019-12-01&#39;</span>, <span style="color:#e6db74">&#39;2019-12-02&#39;</span>, <span style="color:#e6db74">&#39;2019-12-04&#39;</span>, <span style="color:#e6db74">&#39;2019-12-05&#39;</span>], dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;object&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pdate&#39;</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å°†dfçš„ç´¢å¼•è®¾ç½®ä¸ºæ—¥æœŸç´¢å¼•</span>
</span></span><span style="display:flex;"><span>df_date <span style="color:#f92672">=</span> df_date<span style="color:#f92672">.</span>set_index(pd<span style="color:#f92672">.</span>to_datetime(df_date<span style="color:#f92672">.</span>index))
</span></span><span style="display:flex;"><span>df_date</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500</td>
<td style="text-align:right">50</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_date<span style="color:#f92672">.</span>index</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DatetimeIndex([<span style="color:#e6db74">&#39;2019-12-01&#39;</span>, <span style="color:#e6db74">&#39;2019-12-02&#39;</span>, <span style="color:#e6db74">&#39;2019-12-04&#39;</span>, <span style="color:#e6db74">&#39;2019-12-05&#39;</span>], dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime64[ns]&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pdate&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="2ä½¿ç”¨pandasreindexå¡«å……ç¼ºå¤±çš„ç´¢å¼•" class="pagebody-header">
    2ã€ä½¿ç”¨pandas.reindexå¡«å……ç¼ºå¤±çš„ç´¢å¼•
  </h3>
</div><p class="component-content component">In [8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># ç”Ÿæˆå®Œæ•´çš„æ—¥æœŸåºåˆ—</span>
</span></span><span style="display:flex;"><span>pdates <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>date_range(start<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2019-12-01&#34;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2019-12-05&#34;</span>)
</span></span><span style="display:flex;"><span>pdates</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DatetimeIndex([<span style="color:#e6db74">&#39;2019-12-01&#39;</span>, <span style="color:#e6db74">&#39;2019-12-02&#39;</span>, <span style="color:#e6db74">&#39;2019-12-03&#39;</span>, <span style="color:#e6db74">&#39;2019-12-04&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2019-12-05&#39;</span>],
</span></span><span style="display:flex;"><span>              dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime64[ns]&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;D&#39;</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_date_new <span style="color:#f92672">=</span> df_date<span style="color:#f92672">.</span>reindex(pdates, fill_value<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>df_date_new</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[9]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">2019-12-03</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500</td>
<td style="text-align:right">50</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [10]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_date_new<span style="color:#f92672">.</span>plot()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[10]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>matplotlib<span style="color:#f92672">.</span>axes<span style="color:#f92672">.</span>_subplots<span style="color:#f92672">.</span>AxesSubplot at <span style="color:#ae81ff">0x1a0db1ab388</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">








<figure class="image component image-fullbleed body-copy-wide nr-scroll-animation nr-scroll-animation--on image-big">  <div class="component-content">
    <div class="image-sharesheet">
      <div class="image image-load image-asset image-09a7dd81618b2973b45eb8e3ced639d2" id="lht09a7dd81618b2973b45eb8e3ced639d2">
        <picture  class="picture">
          <img class="picture-image" data-src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/python_pandas/23.png" alt=""  />
        </picture>
      </div>
    </div>
    <div class="image-description">
      <div class="image-caption">
        
      </div>
    </div>
  </div>
</figure>
</p>

<div class="component-content pagebody component">
  <h2 id="æ–¹æ³•2ä½¿ç”¨pandasresampleæ–¹æ³•" class="pagebody-header">
    æ–¹æ³•2ï¼šä½¿ç”¨pandas.resampleæ–¹æ³•
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="1å…ˆå°†ç´¢å¼•å˜æˆæ—¥æœŸç´¢å¼•" class="pagebody-header">
    1ã€å…ˆå°†ç´¢å¼•å˜æˆæ—¥æœŸç´¢å¼•
  </h3>
</div><p class="component-content component">In [11]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[11]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pdate</th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500</td>
<td style="text-align:right">50</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [12]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_new2 <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>set_index(pd<span style="color:#f92672">.</span>to_datetime(df[<span style="color:#e6db74">&#34;pdate&#34;</span>]))<span style="color:#f92672">.</span>drop(<span style="color:#e6db74">&#34;pdate&#34;</span>, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>df_new2</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[12]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100</td>
<td style="text-align:right">10</td>
</tr>
<tr>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200</td>
<td style="text-align:right">20</td>
</tr>
<tr>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400</td>
<td style="text-align:right">40</td>
</tr>
<tr>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500</td>
<td style="text-align:right">50</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [13]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_new2<span style="color:#f92672">.</span>index</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[13]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DatetimeIndex([<span style="color:#e6db74">&#39;2019-12-01&#39;</span>, <span style="color:#e6db74">&#39;2019-12-02&#39;</span>, <span style="color:#e6db74">&#39;2019-12-04&#39;</span>, <span style="color:#e6db74">&#39;2019-12-05&#39;</span>], dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime64[ns]&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pdate&#39;</span>, freq<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="2ä½¿ç”¨dataframeçš„resampleçš„æ–¹æ³•æŒ‰ç…§å¤©é‡é‡‡æ ·" class="pagebody-header">
    2ã€ä½¿ç”¨dataframeçš„resampleçš„æ–¹æ³•æŒ‰ç…§å¤©é‡é‡‡æ ·
  </h3>
</div><p class="component-content component">resampleçš„å«ä¹‰ï¼š
æ”¹å˜æ•°æ®çš„æ—¶é—´é¢‘ç‡ï¼Œæ¯”å¦‚æŠŠå¤©æ•°æ®å˜æˆæœˆä»½ï¼Œæˆ–è€…æŠŠå°æ—¶æ•°æ®å˜æˆåˆ†é’Ÿçº§åˆ«</p>
<p class="component-content component">resampleçš„è¯­æ³•ï¼š
(DataFrame or Series).resample(arguments).(aggregate function)</p>
<p class="component-content component">resampleçš„é‡‡æ ·è§„åˆ™å‚æ•°ï¼š
<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases</a></p>
<p class="component-content component">In [14]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># ç”±äºé‡‡æ ·ä¼šè®©åŒºé—´å˜æˆä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šmeanç­‰é‡‡æ ·å€¼çš„è®¾å®šæ–¹æ³•</span>
</span></span><span style="display:flex;"><span>df_new2 <span style="color:#f92672">=</span> df_new2<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#34;D&#34;</span>)<span style="color:#f92672">.</span>mean()<span style="color:#f92672">.</span>fillna(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>df_new2</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[14]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">100.0</td>
<td style="text-align:right">10.0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">200.0</td>
<td style="text-align:right">20.0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-03</td>
<td style="text-align:right">0.0</td>
<td style="text-align:right">0.0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-04</td>
<td style="text-align:right">400.0</td>
<td style="text-align:right">40.0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500.0</td>
<td style="text-align:right">50.0</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [15]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># resampleçš„ä½¿ç”¨æ–¹å¼</span>
</span></span><span style="display:flex;"><span>df_new2<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#34;2D&#34;</span>)<span style="color:#f92672">.</span>mean()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[15]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">pv</th>
<th style="text-align:right">uv</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">pdate</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-12-01</td>
<td style="text-align:right">150.0</td>
<td style="text-align:right">15.0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-03</td>
<td style="text-align:right">200.0</td>
<td style="text-align:right">20.0</td>
</tr>
<tr>
<td style="text-align:right">2019-12-05</td>
<td style="text-align:right">500.0</td>
<td style="text-align:right">50.0</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h1 id="23pandasæ€æ ·å®ç°excelçš„vlookupå¹¶ä¸”åœ¨æŒ‡å®šåˆ—åé¢è¾“å‡º" class="pagebody-header">
    23ã€Pandasæ€æ ·å®ç°Excelçš„vlookupå¹¶ä¸”åœ¨æŒ‡å®šåˆ—åé¢è¾“å‡ºï¼Ÿ
  </h1>
</div><p class="component-content component">èƒŒæ™¯ï¼š</p>
<div class="component-content component"><ol>
<li>æœ‰ä¸¤ä¸ªexcelï¼Œä»–ä»¬æœ‰ç›¸åŒçš„ä¸€ä¸ªåˆ—ï¼›</li>
<li>æŒ‰ç…§è¿™ä¸ªåˆ—åˆå¹¶æˆä¸€ä¸ªå¤§çš„excelï¼Œå³vlookupåŠŸèƒ½ï¼Œè¦æ±‚ï¼š
<div class="component-content component"><ul>
<li>åªéœ€è¦ç¬¬äºŒä¸ªexcelçš„å°‘é‡çš„åˆ—ï¼Œæ¯”å¦‚ä»40ä¸ªåˆ—ä¸­æŒ‘é€‰2ä¸ªåˆ—</li>
<li>æ–°å¢çš„æ¥è‡ªç¬¬äºŒä¸ªexcelçš„åˆ—éœ€è¦æ”¾åˆ°ç¬¬ä¸€ä¸ªexcelæŒ‡å®šçš„åˆ—åé¢ï¼›</li>
</ul></div>
</li>
<li>å°†ç»“æœè¾“å‡ºåˆ°ä¸€ä¸ªæ–°çš„excel;</li>
</ol></div>

<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤1è¯»å–ä¸¤ä¸ªæ•°æ®è¡¨" class="pagebody-header">
    æ­¥éª¤1ï¼šè¯»å–ä¸¤ä¸ªæ•°æ®è¡¨
  </h3>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å­¦ç”Ÿæˆç»©è¡¨</span>
</span></span><span style="display:flex;"><span>df_grade <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#34;./course_datas/c23_excel_vlookup/å­¦ç”Ÿæˆç»©è¡¨.xlsx&#34;</span>) 
</span></span><span style="display:flex;"><span>df_grade<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[2]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ç­çº§</th>
<th style="text-align:right">å­¦å·</th>
<th style="text-align:right">è¯­æ–‡æˆç»©</th>
<th style="text-align:right">æ•°å­¦æˆç»©</th>
<th style="text-align:right">è‹±è¯­æˆç»©</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S001</td>
<td style="text-align:right">99</td>
<td style="text-align:right">84</td>
<td style="text-align:right">88</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S002</td>
<td style="text-align:right">66</td>
<td style="text-align:right">95</td>
<td style="text-align:right">77</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S003</td>
<td style="text-align:right">68</td>
<td style="text-align:right">68</td>
<td style="text-align:right">61</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S004</td>
<td style="text-align:right">63</td>
<td style="text-align:right">66</td>
<td style="text-align:right">82</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S005</td>
<td style="text-align:right">72</td>
<td style="text-align:right">95</td>
<td style="text-align:right">94</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å­¦ç”Ÿä¿¡æ¯è¡¨</span>
</span></span><span style="display:flex;"><span>df_sinfo <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#34;./course_datas/c23_excel_vlookup/å­¦ç”Ÿä¿¡æ¯è¡¨.xlsx&#34;</span>) 
</span></span><span style="display:flex;"><span>df_sinfo<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">å­¦å·</th>
<th style="text-align:right">å§“å</th>
<th style="text-align:right">æ€§åˆ«</th>
<th style="text-align:right">å¹´é¾„</th>
<th style="text-align:right">ç±è´¯</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">S001</td>
<td style="text-align:right">æ€ æ¶µ</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">23</td>
<td style="text-align:right">å±±ä¸œ</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">S002</td>
<td style="text-align:right">å©‰æ¸…</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">25</td>
<td style="text-align:right">æ²³å—</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">S003</td>
<td style="text-align:right">æºªæ¦•</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">23</td>
<td style="text-align:right">æ¹–åŒ—</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">S004</td>
<td style="text-align:right">æ¼ æ¶“</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">19</td>
<td style="text-align:right">é™•è¥¿</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">S005</td>
<td style="text-align:right">ç¥ˆåš</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">24</td>
<td style="text-align:right">å±±ä¸œ</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">*<strong>ç›®æ ‡ï¼šæ€æ ·å°†ç¬¬äºŒä¸ªâ€œå­¦ç”Ÿä¿¡æ¯è¡¨â€çš„å§“åã€æ€§åˆ«ä¸¤åˆ—ï¼Œæ·»åŠ åˆ°ç¬¬ä¸€ä¸ªè¡¨â€œå­¦ç”Ÿæˆç»©è¡¨â€ï¼Œå¹¶ä¸”æ”¾åœ¨ç¬¬ä¸€ä¸ªè¡¨çš„â€œå­¦å·â€åˆ—åé¢ï¼Ÿ*</strong></p>

<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤2å®ç°ä¸¤ä¸ªè¡¨çš„å…³è”" class="pagebody-header">
    æ­¥éª¤2ï¼šå®ç°ä¸¤ä¸ªè¡¨çš„å…³è”
  </h3>
</div><p class="component-content component">å³excelçš„vloopupåŠŸèƒ½</p>
<p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># åªç­›é€‰ç¬¬äºŒä¸ªè¡¨çš„å°‘é‡çš„åˆ—</span>
</span></span><span style="display:flex;"><span>df_sinfo <span style="color:#f92672">=</span> df_sinfo[[<span style="color:#e6db74">&#34;å­¦å·&#34;</span>, <span style="color:#e6db74">&#34;å§“å&#34;</span>, <span style="color:#e6db74">&#34;æ€§åˆ«&#34;</span>]]
</span></span><span style="display:flex;"><span>df_sinfo<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">å­¦å·</th>
<th style="text-align:right">å§“å</th>
<th style="text-align:right">æ€§åˆ«</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">S001</td>
<td style="text-align:right">æ€ æ¶µ</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">S002</td>
<td style="text-align:right">å©‰æ¸…</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">S003</td>
<td style="text-align:right">æºªæ¦•</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">S004</td>
<td style="text-align:right">æ¼ æ¶“</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">S005</td>
<td style="text-align:right">ç¥ˆåš</td>
<td style="text-align:right">å¥³</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_merge <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(left<span style="color:#f92672">=</span>df_grade, right<span style="color:#f92672">=</span>df_sinfo, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;å­¦å·&#34;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;å­¦å·&#34;</span>)
</span></span><span style="display:flex;"><span>df_merge<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ç­çº§</th>
<th style="text-align:right">å­¦å·</th>
<th style="text-align:right">è¯­æ–‡æˆç»©</th>
<th style="text-align:right">æ•°å­¦æˆç»©</th>
<th style="text-align:right">è‹±è¯­æˆç»©</th>
<th style="text-align:right">å§“å</th>
<th style="text-align:right">æ€§åˆ«</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S001</td>
<td style="text-align:right">99</td>
<td style="text-align:right">84</td>
<td style="text-align:right">88</td>
<td style="text-align:right">æ€ æ¶µ</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S002</td>
<td style="text-align:right">66</td>
<td style="text-align:right">95</td>
<td style="text-align:right">77</td>
<td style="text-align:right">å©‰æ¸…</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S003</td>
<td style="text-align:right">68</td>
<td style="text-align:right">68</td>
<td style="text-align:right">61</td>
<td style="text-align:right">æºªæ¦•</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S004</td>
<td style="text-align:right">63</td>
<td style="text-align:right">66</td>
<td style="text-align:right">82</td>
<td style="text-align:right">æ¼ æ¶“</td>
<td style="text-align:right">å¥³</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S005</td>
<td style="text-align:right">72</td>
<td style="text-align:right">95</td>
<td style="text-align:right">94</td>
<td style="text-align:right">ç¥ˆåš</td>
<td style="text-align:right">å¥³</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤3è°ƒæ•´åˆ—çš„é¡ºåº" class="pagebody-header">
    æ­¥éª¤3ï¼šè°ƒæ•´åˆ—çš„é¡ºåº
  </h3>
</div><p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_merge<span style="color:#f92672">.</span>columns</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Index([<span style="color:#e6db74">&#39;ç­çº§&#39;</span>, <span style="color:#e6db74">&#39;å­¦å·&#39;</span>, <span style="color:#e6db74">&#39;è¯­æ–‡æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;æ•°å­¦æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;è‹±è¯­æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;å§“å&#39;</span>, <span style="color:#e6db74">&#39;æ€§åˆ«&#39;</span>], dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;object&#39;</span>)</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="é—®é¢˜æ€æ ·å°†å§“å-æ€§åˆ«ä¸¤åˆ—æ”¾åˆ°å­¦å·çš„åé¢" class="pagebody-header">
    é—®é¢˜ï¼šæ€æ ·å°†&rsquo;å§“å&rsquo;, &lsquo;æ€§åˆ«&rsquo;ä¸¤åˆ—ï¼Œæ”¾åˆ°&rsquo;å­¦å·&rsquo;çš„åé¢ï¼Ÿ
  </h4>
</div><p class="component-content component">æ¥ä¸‹æ¥éœ€è¦ç”¨Pythonçš„è¯­æ³•å®ç°åˆ—è¡¨çš„å¤„ç†</p>
<p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å°†columnså˜æˆpythonçš„åˆ—è¡¨å½¢å¼</span>
</span></span><span style="display:flex;"><span>new_columns <span style="color:#f92672">=</span> df_merge<span style="color:#f92672">.</span>columns<span style="color:#f92672">.</span>to_list()
</span></span><span style="display:flex;"><span>new_columns</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;ç­çº§&#39;</span>, <span style="color:#e6db74">&#39;å­¦å·&#39;</span>, <span style="color:#e6db74">&#39;è¯­æ–‡æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;æ•°å­¦æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;è‹±è¯­æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;å§“å&#39;</span>, <span style="color:#e6db74">&#39;æ€§åˆ«&#39;</span>]</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class=""># æŒ‰é€†åºinsertï¼Œä¼šå°†&#34;å§“å&#34;ï¼Œ&#34;æ€§åˆ«&#34;æ”¾åˆ°&#34;å­¦å·&#34;çš„åé¢
for name in [&#34;å§“å&#34;, &#34;æ€§åˆ«&#34;][::-1]:
    new_columns.remove(name)
    new_columns.insert(new_columns.index(&#34;å­¦å·&#34;)&#43;1, name)</code></pre>
  
</div><p class="component-content component">In [9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>new_columns</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>[<span style="color:#e6db74">&#39;ç­çº§&#39;</span>, <span style="color:#e6db74">&#39;å­¦å·&#39;</span>, <span style="color:#e6db74">&#39;å§“å&#39;</span>, <span style="color:#e6db74">&#39;æ€§åˆ«&#39;</span>, <span style="color:#e6db74">&#39;è¯­æ–‡æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;æ•°å­¦æˆç»©&#39;</span>, <span style="color:#e6db74">&#39;è‹±è¯­æˆç»©&#39;</span>]</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [10]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_merge <span style="color:#f92672">=</span> df_merge<span style="color:#f92672">.</span>reindex(columns<span style="color:#f92672">=</span>new_columns)
</span></span><span style="display:flex;"><span>df_merge<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[10]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ç­çº§</th>
<th style="text-align:right">å­¦å·</th>
<th style="text-align:right">å§“å</th>
<th style="text-align:right">æ€§åˆ«</th>
<th style="text-align:right">è¯­æ–‡æˆç»©</th>
<th style="text-align:right">æ•°å­¦æˆç»©</th>
<th style="text-align:right">è‹±è¯­æˆç»©</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S001</td>
<td style="text-align:right">æ€ æ¶µ</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">99</td>
<td style="text-align:right">84</td>
<td style="text-align:right">88</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S002</td>
<td style="text-align:right">å©‰æ¸…</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">66</td>
<td style="text-align:right">95</td>
<td style="text-align:right">77</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S003</td>
<td style="text-align:right">æºªæ¦•</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">68</td>
<td style="text-align:right">68</td>
<td style="text-align:right">61</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S004</td>
<td style="text-align:right">æ¼ æ¶“</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">63</td>
<td style="text-align:right">66</td>
<td style="text-align:right">82</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">C01</td>
<td style="text-align:right">S005</td>
<td style="text-align:right">ç¥ˆåš</td>
<td style="text-align:right">å¥³</td>
<td style="text-align:right">72</td>
<td style="text-align:right">95</td>
<td style="text-align:right">94</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤4è¾“å‡ºæœ€ç»ˆçš„excelæ–‡ä»¶" class="pagebody-header">
    æ­¥éª¤4ï¼šè¾“å‡ºæœ€ç»ˆçš„Excelæ–‡ä»¶
  </h3>
</div><p class="component-content component">In [11]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_merge<span style="color:#f92672">.</span>to_excel(<span style="color:#e6db74">&#34;./course_datas/c23_excel_vlookup/åˆå¹¶åçš„æ•°æ®è¡¨.xlsx&#34;</span>, index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="24pandasæ€æ ·ç»“åˆpyechartsç»˜åˆ¶äº¤äº’æ€§æŠ˜çº¿å›¾" class="pagebody-header">
    24ã€Pandasæ€æ ·ç»“åˆPyechartsç»˜åˆ¶äº¤äº’æ€§æŠ˜çº¿å›¾ï¼Ÿ
  </h1>
</div><p class="component-content component">èƒŒæ™¯ï¼š</p>
<div class="component-content component"><ul>
<li>Pandasæ˜¯Pythonç”¨äºæ•°æ®åˆ†æé¢†åŸŸçš„è¶…çº§ç‰›çš„åº“</li>
<li>Echartsæ˜¯ç™¾åº¦å¼€æºçš„éå¸¸å¥½ç”¨å¼ºå¤§çš„å¯è§†åŒ–å›¾è¡¨åº“ï¼ŒPyechartsæ˜¯å®ƒçš„Pythonåº“ç‰ˆæœ¬</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="1è¯»å–æ•°æ®" class="pagebody-header">
    1ã€è¯»å–æ•°æ®
  </h2>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>xlsx_path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./datas/stocks/baidu_stocks.xlsx&#34;</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(xlsx_path, index_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;datetime&#34;</span>, parse_dates<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[2]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">code</th>
<th style="text-align:right">open</th>
<th style="text-align:right">close</th>
<th style="text-align:right">high</th>
<th style="text-align:right">low</th>
<th style="text-align:right">vol</th>
<th style="text-align:right">p_change</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">datetime</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-12-03</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">115.199997</td>
<td style="text-align:right">114.800003</td>
<td style="text-align:right">116.019997</td>
<td style="text-align:right">113.300003</td>
<td style="text-align:right">3493249</td>
<td style="text-align:right">-2.25</td>
</tr>
<tr>
<td style="text-align:right">2019-12-02</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">118.389999</td>
<td style="text-align:right">117.440002</td>
<td style="text-align:right">119.764999</td>
<td style="text-align:right">116.400002</td>
<td style="text-align:right">2203313</td>
<td style="text-align:right">-0.92</td>
</tr>
<tr>
<td style="text-align:right">2019-11-29</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">118.300003</td>
<td style="text-align:right">118.529999</td>
<td style="text-align:right">118.690002</td>
<td style="text-align:right">117.599998</td>
<td style="text-align:right">1917004</td>
<td style="text-align:right">-0.82</td>
</tr>
<tr>
<td style="text-align:right">2019-11-27</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">119.180000</td>
<td style="text-align:right">119.510002</td>
<td style="text-align:right">119.839996</td>
<td style="text-align:right">118.440002</td>
<td style="text-align:right">2341070</td>
<td style="text-align:right">0.77</td>
</tr>
<tr>
<td style="text-align:right">2019-11-26</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">120.010002</td>
<td style="text-align:right">118.599998</td>
<td style="text-align:right">120.440002</td>
<td style="text-align:right">118.099998</td>
<td style="text-align:right">3813176</td>
<td style="text-align:right">-1.43</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>index</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DatetimeIndex([<span style="color:#e6db74">&#39;2019-12-03&#39;</span>, <span style="color:#e6db74">&#39;2019-12-02&#39;</span>, <span style="color:#e6db74">&#39;2019-11-29&#39;</span>, <span style="color:#e6db74">&#39;2019-11-27&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2019-11-26&#39;</span>, <span style="color:#e6db74">&#39;2019-11-25&#39;</span>, <span style="color:#e6db74">&#39;2019-11-22&#39;</span>, <span style="color:#e6db74">&#39;2019-11-21&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2019-11-20&#39;</span>, <span style="color:#e6db74">&#39;2019-11-19&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2019-01-15&#39;</span>, <span style="color:#e6db74">&#39;2019-01-14&#39;</span>, <span style="color:#e6db74">&#39;2019-01-11&#39;</span>, <span style="color:#e6db74">&#39;2019-01-10&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2019-01-09&#39;</span>, <span style="color:#e6db74">&#39;2019-01-08&#39;</span>, <span style="color:#e6db74">&#39;2019-01-07&#39;</span>, <span style="color:#e6db74">&#39;2019-01-04&#39;</span>,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;2019-01-03&#39;</span>, <span style="color:#e6db74">&#39;2019-01-02&#39;</span>],
</span></span><span style="display:flex;"><span>              dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime64[ns]&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;datetime&#39;</span>, length<span style="color:#f92672">=</span><span style="color:#ae81ff">227</span>, freq<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">df.sort_index(inplace=True)
df.head()</code></pre>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">code</th>
<th style="text-align:right">open</th>
<th style="text-align:right">close</th>
<th style="text-align:right">high</th>
<th style="text-align:right">low</th>
<th style="text-align:right">vol</th>
<th style="text-align:right">p_change</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">datetime</td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
<tr>
<td style="text-align:right">2019-01-02</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">156.179993</td>
<td style="text-align:right">162.250000</td>
<td style="text-align:right">164.330002</td>
<td style="text-align:right">155.490005</td>
<td style="text-align:right">2996952</td>
<td style="text-align:right">NaN</td>
</tr>
<tr>
<td style="text-align:right">2019-01-03</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">158.750000</td>
<td style="text-align:right">154.710007</td>
<td style="text-align:right">159.880005</td>
<td style="text-align:right">153.779999</td>
<td style="text-align:right">3879180</td>
<td style="text-align:right">-4.65</td>
</tr>
<tr>
<td style="text-align:right">2019-01-04</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">157.600006</td>
<td style="text-align:right">160.949997</td>
<td style="text-align:right">162.429993</td>
<td style="text-align:right">157.250000</td>
<td style="text-align:right">3847497</td>
<td style="text-align:right">4.03</td>
</tr>
<tr>
<td style="text-align:right">2019-01-07</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">162.600006</td>
<td style="text-align:right">162.600006</td>
<td style="text-align:right">164.490005</td>
<td style="text-align:right">158.509995</td>
<td style="text-align:right">3266091</td>
<td style="text-align:right">1.03</td>
</tr>
<tr>
<td style="text-align:right">2019-01-08</td>
<td style="text-align:right">BIDU</td>
<td style="text-align:right">162.190002</td>
<td style="text-align:right">163.399994</td>
<td style="text-align:right">163.889999</td>
<td style="text-align:right">158.160004</td>
<td style="text-align:right">3253361</td>
<td style="text-align:right">0.49</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h2 id="2ä½¿ç”¨pyechartsç»˜åˆ¶æŠ˜çº¿å›¾" class="pagebody-header">
    2ã€ä½¿ç”¨Pyechartsç»˜åˆ¶æŠ˜çº¿å›¾
  </h2>
</div><p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œä½¿ç”¨pip install pyechartså®‰è£…</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyecharts.charts <span style="color:#f92672">import</span> Line
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyecharts <span style="color:#f92672">import</span> options <span style="color:#66d9ef">as</span> opts</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æŠ˜çº¿å›¾</span>
</span></span><span style="display:flex;"><span>line <span style="color:#f92672">=</span> Line()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># xè½´</span>
</span></span><span style="display:flex;"><span>line<span style="color:#f92672">.</span>add_xaxis(df<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>to_list())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ¯ä¸ªyè½´</span>
</span></span><span style="display:flex;"><span>line<span style="color:#f92672">.</span>add_yaxis(<span style="color:#e6db74">&#34;å¼€ç›˜ä»·&#34;</span>, df[<span style="color:#e6db74">&#34;open&#34;</span>]<span style="color:#f92672">.</span>round(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>to_list())
</span></span><span style="display:flex;"><span>line<span style="color:#f92672">.</span>add_yaxis(<span style="color:#e6db74">&#34;æ”¶ç›˜ä»·&#34;</span>, df[<span style="color:#e6db74">&#34;close&#34;</span>]<span style="color:#f92672">.</span>round(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>to_list())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å›¾è¡¨é…ç½®</span>
</span></span><span style="display:flex;"><span>line<span style="color:#f92672">.</span>set_global_opts(
</span></span><span style="display:flex;"><span>    title_opts<span style="color:#f92672">=</span>opts<span style="color:#f92672">.</span>TitleOpts(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ç™¾åº¦è‚¡ç¥¨2019å¹´&#34;</span>),
</span></span><span style="display:flex;"><span>    tooltip_opts<span style="color:#f92672">=</span>opts<span style="color:#f92672">.</span>TooltipOpts(trigger<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;axis&#34;</span>, axis_pointer_type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cross&#34;</span>)
</span></span><span style="display:flex;"><span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>pyecharts<span style="color:#f92672">.</span>charts<span style="color:#f92672">.</span>basic_charts<span style="color:#f92672">.</span>line<span style="color:#f92672">.</span>Line at <span style="color:#ae81ff">0x201bd51d088</span><span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æ¸²æŸ“æ•°æ®</span>
</span></span><span style="display:flex;"><span>line<span style="color:#f92672">.</span>render_notebook()</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="25pandasç»“åˆsklearnå®ç°æ³°å¦å°¼å…‹å­˜æ´»ç‡é¢„æµ‹" class="pagebody-header">
    25ã€Pandasç»“åˆSklearnå®ç°æ³°å¦å°¼å…‹å­˜æ´»ç‡é¢„æµ‹
  </h1>
</div>
<div class="component-content pagebody component">
  <h3 id="å®ä¾‹ç›®æ ‡å®ç°æ³°å¦å°¼å…‹å­˜æ´»é¢„æµ‹" class="pagebody-header">
    å®ä¾‹ç›®æ ‡ï¼šå®ç°æ³°å¦å°¼å…‹å­˜æ´»é¢„æµ‹
  </h3>
</div><p class="component-content component">å¤„ç†æ­¥éª¤ï¼š
1ã€è¾“å…¥æ•°æ®ï¼šä½¿ç”¨Pandasè¯»å–è®­ç»ƒæ•°æ®(å†å²æ•°æ®ï¼Œç‰¹ç‚¹æ˜¯å·²ç»çŸ¥é“äº†è¿™ä¸ªäººæœ€åæœ‰æ²¡æœ‰æ´»ä¸‹æ¥)
2ã€è®­ç»ƒæ¨¡å‹ï¼šä½¿ç”¨Sklearnè®­ç»ƒæ¨¡å‹
3ã€ä½¿ç”¨æ¨¡å‹ï¼šå¯¹äºä¸€ä¸ªæ–°çš„ä¸çŸ¥é“å­˜æ´»çš„äººï¼Œé¢„ä¼°ä»–å­˜æ´»çš„æ¦‚ç‡</p>

<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤1è¯»å–è®­ç»ƒæ•°æ®" class="pagebody-header">
    æ­¥éª¤1ï¼šè¯»å–è®­ç»ƒæ•°æ®
  </h3>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_train <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./datas/titanic/titanic_train.csv&#34;</span>)
</span></span><span style="display:flex;"><span>df_train<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[2]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Survived</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Name</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Ticket</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Cabin</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">Braund, Mr. Owen Harris</td>
<td style="text-align:right">male</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">A/5 21171</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">Cumings, Mrs. John Bradley (Florence Briggs Th&hellip;</td>
<td style="text-align:right">female</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">PC 17599</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">C85</td>
<td style="text-align:right">C</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">Heikkinen, Miss. Laina</td>
<td style="text-align:right">female</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">STON/O2. 3101282</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
<td style="text-align:right">female</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">113803</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">C123</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">Allen, Mr. William Henry</td>
<td style="text-align:right">male</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">373450</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">S</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">*<strong>å…¶ä¸­ï¼ŒSurvived==1ä»£è¡¨è¿™ä¸ªäººæ´»ä¸‹æ¥äº†ã€==0ä»£è¡¨æ²¡æ´»ä¸‹æ¥ï¼›å…¶ä»–çš„éƒ½æ˜¯è¿™ä¸ªäººçš„ä¿¡æ¯å’Œå½“æ—¶çš„ä»“ä½ã€ç¥¨åŠ¡æƒ…å†µ*</strong></p>
<p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æˆ‘ä»¬åªæŒ‘é€‰ä¸¤åˆ—ï¼Œä½œä¸ºé¢„æµ‹éœ€è¦çš„ç‰¹å¾</span>
</span></span><span style="display:flex;"><span>feature_cols <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Pclass&#39;</span>, <span style="color:#e6db74">&#39;Parch&#39;</span>]
</span></span><span style="display:flex;"><span>X <span style="color:#f92672">=</span> df_train<span style="color:#f92672">.</span>loc[:, feature_cols]
</span></span><span style="display:flex;"><span>X<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Parch</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å•ç‹¬æå–æ˜¯å¦å­˜æ´»çš„åˆ—ï¼Œä½œä¸ºé¢„æµ‹çš„ç›®æ ‡</span>
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> df_train<span style="color:#f92672">.</span>Survived
</span></span><span style="display:flex;"><span>y<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Name: Survived, dtype: int64</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤2è®­ç»ƒæ¨¡å‹" class="pagebody-header">
    æ­¥éª¤2ï¼šè®­ç»ƒæ¨¡å‹
  </h3>
</div><p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.linear_model <span style="color:#f92672">import</span> LogisticRegression
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆ›å»ºæ¨¡å‹å¯¹è±¡</span>
</span></span><span style="display:flex;"><span>logreg <span style="color:#f92672">=</span> LogisticRegression()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å®ç°æ¨¡å‹è®­ç»ƒ</span>
</span></span><span style="display:flex;"><span>logreg<span style="color:#f92672">.</span>fit(X, y)
</span></span><span style="display:flex;"><span><span style="color:#f92672">//</span>anaconda3<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>python3<span style="color:#ae81ff">.7</span><span style="color:#f92672">/</span>site<span style="color:#f92672">-</span>packages<span style="color:#f92672">/</span>sklearn<span style="color:#f92672">/</span>linear_model<span style="color:#f92672">/</span>logistic<span style="color:#f92672">.</span>py:<span style="color:#ae81ff">432</span>: <span style="color:#a6e22e">FutureWarning</span>: Default solver will be changed to <span style="color:#e6db74">&#39;lbfgs&#39;</span> <span style="color:#f92672">in</span> <span style="color:#ae81ff">0.22</span><span style="color:#f92672">.</span> Specify a solver to silence this warning<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">FutureWarning</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>LogisticRegression(C<span style="color:#f92672">=</span><span style="color:#ae81ff">1.0</span>, class_weight<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, dual<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, fit_intercept<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,
</span></span><span style="display:flex;"><span>                   intercept_scaling<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, l1_ratio<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, max_iter<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>                   multi_class<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;warn&#39;</span>, n_jobs<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, penalty<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;l2&#39;</span>,
</span></span><span style="display:flex;"><span>                   random_state<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, solver<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;warn&#39;</span>, tol<span style="color:#f92672">=</span><span style="color:#ae81ff">0.0001</span>, verbose<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>                   warm_start<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>logreg<span style="color:#f92672">.</span>score(X, y)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ae81ff">0.6879910213243546</span></span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="æ­¥éª¤3å¯¹äºæœªçŸ¥æ•°æ®ä½¿ç”¨æ¨¡å‹" class="pagebody-header">
    æ­¥éª¤3ï¼šå¯¹äºæœªçŸ¥æ•°æ®ä½¿ç”¨æ¨¡å‹
  </h3>
</div><p class="component-content component">æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯ä½¿ç”¨æ¨¡å‹é¢„æµ‹æœªçŸ¥çš„äº‹ç‰©</p>
<p class="component-content component">æ¯”å¦‚é¢„æµ‹è‚¡ç¥¨æ˜å¤©æ˜¯æ¶¨è¿˜æ˜¯è·Œã€ä¸€å¥—æ–°çš„äºŒæ‰‹æˆ¿æˆäº¤ä»·å¤§æ¦‚å¤šå°‘é’±ã€ç”¨æˆ·æ‰“å¼€APPæœ€å¯èƒ½çœ‹é‚£äº›è§†é¢‘ç­‰é—®é¢˜</p>
<p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æ‰¾ä¸€ä¸ªå†å²æ•°æ®ä¸­ä¸å­˜åœ¨çš„æ•°æ®</span>
</span></span><span style="display:flex;"><span>X<span style="color:#f92672">.</span>drop_duplicates()<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;Pclass&#34;</span>, <span style="color:#e6db74">&#34;Parch&#34;</span>])</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[7]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Parch</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">54</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">27</td>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">438</td>
<td style="text-align:right">1</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">9</td>
<td style="text-align:right">2</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">98</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">43</td>
<td style="text-align:right">2</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">437</td>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">8</td>
<td style="text-align:right">3</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">86</td>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">167</td>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
</tr>
<tr>
<td style="text-align:right">13</td>
<td style="text-align:right">3</td>
<td style="text-align:right">5</td>
</tr>
<tr>
<td style="text-align:right">678</td>
<td style="text-align:right">3</td>
<td style="text-align:right">6</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># é¢„æµ‹è¿™ä¸ªæ•°æ®å­˜æ´»çš„æ¦‚ç‡</span>
</span></span><span style="display:flex;"><span>logreg<span style="color:#f92672">.</span>predict([[<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>]])</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array([<span style="color:#ae81ff">1</span>])</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>logreg<span style="color:#f92672">.</span>predict_proba([[<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>]])</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array([[<span style="color:#ae81ff">0.35053893</span>, <span style="color:#ae81ff">0.64946107</span>]])</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="26pandaså¤„ç†åˆ†æç½‘ç«™åŸå§‹è®¿é—®æ—¥å¿—" class="pagebody-header">
    26ã€Pandaså¤„ç†åˆ†æç½‘ç«™åŸå§‹è®¿é—®æ—¥å¿—
  </h1>
</div><p class="component-content component">ç›®æ ‡ï¼šçœŸå®é¡¹ç›®çš„å®æˆ˜ï¼Œæ¢ç´¢Pandasçš„æ•°æ®å¤„ç†ä¸åˆ†æ</p>
<p class="component-content component">å®ä¾‹ï¼š
æ•°æ®æ¥æºï¼šæŸå¤§ä½¬çš„wordpressåšå®¢http://www.crazyant.net/ çš„è®¿é—®æ—¥å¿—</p>
<p class="component-content component">å®ç°æ­¥éª¤ï¼š
1ã€è¯»å–æ•°æ®ã€æ¸…ç†ã€æ ¼å¼åŒ–
2ã€ç»Ÿè®¡çˆ¬è™«spiderçš„è®¿é—®æ¯”ä¾‹ï¼Œè¾“å‡ºæŸ±çŠ¶å›¾
3ã€ç»Ÿè®¡httpçŠ¶æ€ç çš„è®¿é—®å æ¯”ï¼Œè¾“å‡ºé¥¼å›¾
4ã€ç»Ÿè®¡æŒ‰å°æ—¶ã€æŒ‰å¤©çš„PV/UVæµé‡è¶‹åŠ¿ï¼Œè¾“å‡ºæŠ˜çº¿å›¾</p>

<div class="component-content pagebody component">
  <h3 id="1è¯»å–æ•°æ®å¹¶æ¸…ç†æ ¼å¼åŒ–" class="pagebody-header">
    1ã€è¯»å–æ•°æ®å¹¶æ¸…ç†æ ¼å¼åŒ–
  </h3>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#39;display.max_colwidth&#39;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyecharts <span style="color:#f92672">import</span> options <span style="color:#66d9ef">as</span> opts
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pyecharts.charts <span style="color:#f92672">import</span> Bar,Pie,Line</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># è¯»å–æ•´ä¸ªç›®å½•ï¼Œå°†æ‰€æœ‰çš„æ–‡ä»¶åˆå¹¶åˆ°ä¸€ä¸ªdataframe</span>
</span></span><span style="display:flex;"><span>data_dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./datas/crazyant/blog_access_log&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_list <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> fname <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>listdir(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>data_dir<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>):
</span></span><span style="display:flex;"><span>    df_list<span style="color:#f92672">.</span>append(pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>data_dir<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{</span>fname<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34; &#34;</span>, header<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, error_bad_lines<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat(df_list)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;Skipping line 2245: expected 10 fields, saw 16</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 2889: expected 10 fields, saw 14</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 2890: expected 10 fields, saw 14</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 2891: expected 10 fields, saw 13</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 2892: expected 10 fields, saw 13</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 2900: expected 10 fields, saw 11</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 2902: expected 10 fields, saw 11</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 3790: expected 10 fields, saw 14</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 3791: expected 10 fields, saw 14</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 3792: expected 10 fields, saw 13</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 3793: expected 10 fields, saw 13</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 3833: expected 10 fields, saw 11</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 3835: expected 10 fields, saw 11</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 9936: expected 10 fields, saw 16</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;Skipping line 11748: expected 10 fields, saw 11</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Skipping line 11750: expected 10 fields, saw 11</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">0</th>
<th style="text-align:right">1</th>
<th style="text-align:right">2</th>
<th style="text-align:right">3</th>
<th style="text-align:right">4</th>
<th style="text-align:right">5</th>
<th style="text-align:right">6</th>
<th style="text-align:right">7</th>
<th style="text-align:right">8</th>
<th style="text-align:right">9</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">106.11.153.226</td>
<td style="text-align:right">-</td>
<td style="text-align:right">-</td>
<td style="text-align:right">[02/Dec/2019:22:40:18</td>
<td style="text-align:right">+0800]</td>
<td style="text-align:right">GET /740.html?replytocom=1194 HTTP/1.0</td>
<td style="text-align:right">200</td>
<td style="text-align:right">13446</td>
<td style="text-align:right">-</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">42.156.254.60</td>
<td style="text-align:right">-</td>
<td style="text-align:right">-</td>
<td style="text-align:right">[02/Dec/2019:22:40:23</td>
<td style="text-align:right">+0800]</td>
<td style="text-align:right">POST /wp-json/wordpress-popular-posts/v1/popular-posts HTTP/1.0</td>
<td style="text-align:right">201</td>
<td style="text-align:right">55</td>
<td style="text-align:right"><a href="http://www.crazyant.net/740.html?replytocom=1194">http://www.crazyant.net/740.html?replytocom=1194</a></td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">106.11.159.254</td>
<td style="text-align:right">-</td>
<td style="text-align:right">-</td>
<td style="text-align:right">[02/Dec/2019:22:40:27</td>
<td style="text-align:right">+0800]</td>
<td style="text-align:right">GET /576.html HTTP/1.0</td>
<td style="text-align:right">200</td>
<td style="text-align:right">13461</td>
<td style="text-align:right">-</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">106.11.157.254</td>
<td style="text-align:right">-</td>
<td style="text-align:right">-</td>
<td style="text-align:right">[02/Dec/2019:22:40:28</td>
<td style="text-align:right">+0800]</td>
<td style="text-align:right">GET /?lwfcdw=t9n2d3&amp;oqzohc=m5e7j1&amp;oubyvq=iab6a3&amp;oudmbg=6osqd3 HTTP/1.0</td>
<td style="text-align:right">200</td>
<td style="text-align:right">10485</td>
<td style="text-align:right">-</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">42.156.137.109</td>
<td style="text-align:right">-</td>
<td style="text-align:right">-</td>
<td style="text-align:right">[02/Dec/2019:22:40:30</td>
<td style="text-align:right">+0800]</td>
<td style="text-align:right">POST /wp-json/wordpress-popular-posts/v1/popular-posts HTTP/1.0</td>
<td style="text-align:right">201</td>
<td style="text-align:right">55</td>
<td style="text-align:right"><a href="http://www.crazyant.net/576.html">http://www.crazyant.net/576.html</a></td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">9</span>]]<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[4]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">0</th>
<th style="text-align:right">3</th>
<th style="text-align:right">6</th>
<th style="text-align:right">9</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">106.11.153.226</td>
<td style="text-align:right">[02/Dec/2019:22:40:18</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">42.156.254.60</td>
<td style="text-align:right">[02/Dec/2019:22:40:23</td>
<td style="text-align:right">201</td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">106.11.159.254</td>
<td style="text-align:right">[02/Dec/2019:22:40:27</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">106.11.157.254</td>
<td style="text-align:right">[02/Dec/2019:22:40:28</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">42.156.137.109</td>
<td style="text-align:right">[02/Dec/2019:22:40:30</td>
<td style="text-align:right">201</td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;ip&#34;</span>, <span style="color:#e6db74">&#34;stime&#34;</span>, <span style="color:#e6db74">&#34;status&#34;</span>, <span style="color:#e6db74">&#34;client&#34;</span>]
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[5]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ip</th>
<th style="text-align:right">stime</th>
<th style="text-align:right">status</th>
<th style="text-align:right">client</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">106.11.153.226</td>
<td style="text-align:right">[02/Dec/2019:22:40:18</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">42.156.254.60</td>
<td style="text-align:right">[02/Dec/2019:22:40:23</td>
<td style="text-align:right">201</td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">106.11.159.254</td>
<td style="text-align:right">[02/Dec/2019:22:40:27</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">106.11.157.254</td>
<td style="text-align:right">[02/Dec/2019:22:40:28</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">42.156.137.109</td>
<td style="text-align:right">[02/Dec/2019:22:40:30</td>
<td style="text-align:right">201</td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>dtypes</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ip        object
</span></span><span style="display:flex;"><span>stime     object
</span></span><span style="display:flex;"><span>status    int64 
</span></span><span style="display:flex;"><span>client    object
</span></span><span style="display:flex;"><span>dtype: object</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="2ç»Ÿè®¡spiderçš„æ¯”ä¾‹" class="pagebody-header">
    2ã€ç»Ÿè®¡spiderçš„æ¯”ä¾‹
  </h3>
</div><p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df[<span style="color:#e6db74">&#34;is_spider&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;client&#34;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>lower()<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>contains(<span style="color:#e6db74">&#34;spider&#34;</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[7]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">ip</th>
<th style="text-align:right">stime</th>
<th style="text-align:right">status</th>
<th style="text-align:right">client</th>
<th style="text-align:right">is_spider</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">106.11.153.226</td>
<td style="text-align:right">[02/Dec/2019:22:40:18</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
<td style="text-align:right">True</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">42.156.254.60</td>
<td style="text-align:right">[02/Dec/2019:22:40:23</td>
<td style="text-align:right">201</td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
<td style="text-align:right">True</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">106.11.159.254</td>
<td style="text-align:right">[02/Dec/2019:22:40:27</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
<td style="text-align:right">True</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">106.11.157.254</td>
<td style="text-align:right">[02/Dec/2019:22:40:28</td>
<td style="text-align:right">200</td>
<td style="text-align:right">YisouSpider</td>
<td style="text-align:right">True</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">42.156.137.109</td>
<td style="text-align:right">[02/Dec/2019:22:40:30</td>
<td style="text-align:right">201</td>
<td style="text-align:right">Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 YisouSpider/5.0 Safari/537.36</td>
<td style="text-align:right">True</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_spider <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;is_spider&#34;</span>]<span style="color:#f92672">.</span>value_counts()
</span></span><span style="display:flex;"><span>df_spider</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">False</span>    <span style="color:#ae81ff">46641</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">True</span>     <span style="color:#ae81ff">3637</span> 
</span></span><span style="display:flex;"><span>Name: is_spider, dtype: int64</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>bar <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>        Bar()
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>add_xaxis([str(x) <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> df_spider<span style="color:#f92672">.</span>index])
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>add_yaxis(<span style="color:#e6db74">&#34;æ˜¯å¦Spider&#34;</span>, df_spider<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>tolist())
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>set_global_opts(title_opts<span style="color:#f92672">=</span>opts<span style="color:#f92672">.</span>TitleOpts(title<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;çˆ¬è™«è®¿é—®é‡å æ¯”&#34;</span>))
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>bar<span style="color:#f92672">.</span>render_notebook()</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h1 id="27pandasæ€æ ·æ‰¾å‡ºæœ€å½±å“ç»“æœçš„é‚£äº›ç‰¹å¾" class="pagebody-header">
    27ã€Pandasæ€æ ·æ‰¾å‡ºæœ€å½±å“ç»“æœçš„é‚£äº›ç‰¹å¾ï¼Ÿ
  </h1>
</div><p class="component-content component">åº”ç”¨åœºæ™¯ï¼š</p>
<div class="component-content component"><ul>
<li>æœºå™¨å­¦ä¹ çš„ç‰¹å¾é€‰æ‹©ï¼Œå»é™¤æ— ç”¨çš„ç‰¹å¾ï¼Œå¯ä»¥æå‡æ¨¡å‹æ•ˆæœã€é™ä½è®­ç»ƒæ—¶é—´ç­‰ç­‰</li>
<li>æ•°æ®åˆ†æé¢†åŸŸï¼Œæ‰¾å‡ºæ”¶å…¥æ³¢åŠ¨çš„æœ€å¤§å› ç´ ï¼ï¼</li>
</ul></div>

<div class="component-content pagebody component">
  <h2 id="å®ä¾‹æ¼”ç¤ºæ³°å¦å°¼å…‹æ²‰èˆ¹äº‹ä»¶ä¸­æœ€å½±å“ç”Ÿæ­»çš„å› ç´ æœ‰å“ªäº›" class="pagebody-header">
    å®ä¾‹æ¼”ç¤ºï¼šæ³°å¦å°¼å…‹æ²‰èˆ¹äº‹ä»¶ä¸­ï¼Œæœ€å½±å“ç”Ÿæ­»çš„å› ç´ æœ‰å“ªäº›ï¼Ÿ
  </h2>
</div>
<div class="component-content pagebody component">
  <h3 id="1å¯¼å…¥ç›¸å…³çš„åŒ…" class="pagebody-header">
    1ã€å¯¼å…¥ç›¸å…³çš„åŒ…
  </h3>
</div><p class="component-content component">In [1]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç‰¹å¾æœ€å½±å“ç»“æœçš„Kä¸ªç‰¹å¾</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.feature_selection <span style="color:#f92672">import</span> SelectKBest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¡æ–¹æ£€éªŒï¼Œä½œä¸ºSelectKBestçš„å‚æ•°</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.feature_selection <span style="color:#f92672">import</span> chi2</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="2å¯¼å…¥æ³°å¦å°¼å…‹å·çš„æ•°æ®" class="pagebody-header">
    2ã€å¯¼å…¥æ³°å¦å°¼å…‹å·çš„æ•°æ®
  </h3>
</div><p class="component-content component">In [2]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./datas/titanic/titanic_train.csv&#34;</span>)
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[2]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Survived</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Name</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Ticket</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Cabin</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">Braund, Mr. Owen Harris</td>
<td style="text-align:right">male</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">A/5 21171</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">Cumings, Mrs. John Bradley (Florence Briggs Th&hellip;</td>
<td style="text-align:right">female</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">PC 17599</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">C85</td>
<td style="text-align:right">C</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">Heikkinen, Miss. Laina</td>
<td style="text-align:right">female</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">STON/O2. 3101282</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
<td style="text-align:right">female</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">113803</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">C123</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">Allen, Mr. William Henry</td>
<td style="text-align:right">male</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">373450</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">NaN</td>
<td style="text-align:right">S</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [3]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> df[[<span style="color:#e6db74">&#34;PassengerId&#34;</span>, <span style="color:#e6db74">&#34;Survived&#34;</span>, <span style="color:#e6db74">&#34;Pclass&#34;</span>, <span style="color:#e6db74">&#34;Sex&#34;</span>, <span style="color:#e6db74">&#34;Age&#34;</span>, <span style="color:#e6db74">&#34;SibSp&#34;</span>, <span style="color:#e6db74">&#34;Parch&#34;</span>, <span style="color:#e6db74">&#34;Fare&#34;</span>, <span style="color:#e6db74">&#34;Embarked&#34;</span>]]<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[3]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Survived</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">male</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">female</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">C</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">female</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">female</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">male</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">S</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="3æ•°æ®æ¸…ç†å’Œè½¬æ¢" class="pagebody-header">
    3ã€æ•°æ®æ¸…ç†å’Œè½¬æ¢
  </h3>
</div>
<div class="component-content pagebody component">
  <h4 id="31-æŸ¥çœ‹æ˜¯å¦æœ‰ç©ºå€¼åˆ—" class="pagebody-header">
    3.1 æŸ¥çœ‹æ˜¯å¦æœ‰ç©ºå€¼åˆ—
  </h4>
</div><p class="component-content component">In [4]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>info()
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">pandas</span><span style="color:#f92672">.</span>core<span style="color:#f92672">.</span>frame<span style="color:#f92672">.</span>DataFrame<span style="color:#e6db74">&#39;&gt;</span>
</span></span><span style="display:flex;"><span>RangeIndex: <span style="color:#ae81ff">891</span> entries, <span style="color:#ae81ff">0</span> to <span style="color:#ae81ff">890</span>
</span></span><span style="display:flex;"><span>Data columns (total <span style="color:#ae81ff">9</span> columns):
</span></span><span style="display:flex;"><span>PassengerId    <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null int64
</span></span><span style="display:flex;"><span>Survived       <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null int64
</span></span><span style="display:flex;"><span>Pclass         <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null int64
</span></span><span style="display:flex;"><span>Sex            <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null object
</span></span><span style="display:flex;"><span>Age            <span style="color:#ae81ff">714</span> non<span style="color:#f92672">-</span>null float64
</span></span><span style="display:flex;"><span>SibSp          <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null int64
</span></span><span style="display:flex;"><span>Parch          <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null int64
</span></span><span style="display:flex;"><span>Fare           <span style="color:#ae81ff">891</span> non<span style="color:#f92672">-</span>null float64
</span></span><span style="display:flex;"><span>Embarked       <span style="color:#ae81ff">889</span> non<span style="color:#f92672">-</span>null object
</span></span><span style="display:flex;"><span>dtypes: float64(<span style="color:#ae81ff">2</span>), int64(<span style="color:#ae81ff">5</span>), object(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>memory usage: <span style="color:#ae81ff">62.8</span><span style="color:#f92672">+</span> KB</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h4 id="32-ç»™ageåˆ—å¡«å……å¹³å‡å€¼" class="pagebody-header">
    3.2 ç»™Ageåˆ—å¡«å……å¹³å‡å€¼
  </h4>
</div><p class="component-content component">In [5]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df[<span style="color:#e6db74">&#34;Age&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Age&#34;</span>]<span style="color:#f92672">.</span>fillna(df[<span style="color:#e6db74">&#34;Age&#34;</span>]<span style="color:#f92672">.</span>median())</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [6]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[6]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Survived</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">male</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">female</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">C</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">female</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">female</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">male</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">S</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h4 id="32-å°†æ€§åˆ«åˆ—å˜æˆæ•°å­—" class="pagebody-header">
    3.2 å°†æ€§åˆ«åˆ—å˜æˆæ•°å­—
  </h4>
</div><p class="component-content component">In [7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># æ€§åˆ«</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>Sex<span style="color:#f92672">.</span>unique()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[7]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array([<span style="color:#e6db74">&#39;male&#39;</span>, <span style="color:#e6db74">&#39;female&#39;</span>], dtype<span style="color:#f92672">=</span>object)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [8]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#34;Sex&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;male&#34;</span>, <span style="color:#e6db74">&#34;Sex&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#34;Sex&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;female&#34;</span>, <span style="color:#e6db74">&#34;Sex&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">In [9]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[9]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Survived</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">C</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">S</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">S</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h4 id="33-ç»™embarkedåˆ—å¡«å……ç©ºå€¼å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—" class="pagebody-header">
    3.3 ç»™Embarkedåˆ—å¡«å……ç©ºå€¼ï¼Œå­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—
  </h4>
</div><p class="component-content component">In [10]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Embarked</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>Embarked<span style="color:#f92672">.</span>unique()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[10]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>array([<span style="color:#e6db74">&#39;S&#39;</span>, <span style="color:#e6db74">&#39;C&#39;</span>, <span style="color:#e6db74">&#39;Q&#39;</span>, nan], dtype<span style="color:#f92672">=</span>object)</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [11]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># å¡«å……ç©ºå€¼</span>
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#34;Embarked&#34;</span>]<span style="color:#f92672">.</span>fillna(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å­—ç¬¦ä¸²å˜æˆæ•°å­—</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;S&#34;</span>, <span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;C&#34;</span>, <span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Q&#34;</span>, <span style="color:#e6db74">&#34;Embarked&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span></span></span></code></pre></div></div>
  
</div><p class="component-content component">In [12]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[12]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Survived</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">0</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table></div>

<div class="component-content pagebody component">
  <h3 id="4å°†ç‰¹å¾åˆ—å’Œç»“æœåˆ—æ‹†åˆ†å¼€" class="pagebody-header">
    4ã€å°†ç‰¹å¾åˆ—å’Œç»“æœåˆ—æ‹†åˆ†å¼€
  </h3>
</div><p class="component-content component">In [13]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>y <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>pop(<span style="color:#e6db74">&#34;Survived&#34;</span>)
</span></span><span style="display:flex;"><span>X <span style="color:#f92672">=</span> df</span></span></code></pre></div></div>
  
</div><p class="component-content component">In [14]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>X<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[14]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">PassengerId</th>
<th style="text-align:right">Pclass</th>
<th style="text-align:right">Sex</th>
<th style="text-align:right">Age</th>
<th style="text-align:right">SibSp</th>
<th style="text-align:right">Parch</th>
<th style="text-align:right">Fare</th>
<th style="text-align:right">Embarked</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">22.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.2500</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">2</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">38.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">71.2833</td>
<td style="text-align:right">2</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">3</td>
<td style="text-align:right">3</td>
<td style="text-align:right">1</td>
<td style="text-align:right">26.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">7.9250</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">4</td>
<td style="text-align:right">1</td>
<td style="text-align:right">1</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">1</td>
<td style="text-align:right">0</td>
<td style="text-align:right">53.1000</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5</td>
<td style="text-align:right">3</td>
<td style="text-align:right">0</td>
<td style="text-align:right">35.0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">0</td>
<td style="text-align:right">8.0500</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [15]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>y<span style="color:#f92672">.</span>head()</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[15]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Name: Survived, dtype: int64</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="5ä½¿ç”¨å¡æ–¹æ£€éªŒé€‰æ‹©topkçš„ç‰¹å¾" class="pagebody-header">
    5ã€ä½¿ç”¨å¡æ–¹æ£€éªŒé€‰æ‹©topKçš„ç‰¹å¾
  </h3>
</div><p class="component-content component">In [16]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># é€‰æ‹©æ‰€æœ‰çš„ç‰¹å¾ï¼Œç›®çš„æ˜¯çœ‹åˆ°ç‰¹å¾é‡è¦æ€§æ’åº</span>
</span></span><span style="display:flex;"><span>bestfeatures <span style="color:#f92672">=</span> SelectKBest(score_func<span style="color:#f92672">=</span>chi2, k<span style="color:#f92672">=</span>len(X<span style="color:#f92672">.</span>columns))
</span></span><span style="display:flex;"><span>fit <span style="color:#f92672">=</span> bestfeatures<span style="color:#f92672">.</span>fit(X, y)</span></span></code></pre></div></div>
  
</div>
<div class="component-content pagebody component">
  <h3 id="6æŒ‰ç…§é‡è¦æ€§é¡ºåºæ‰“å°ç‰¹å¾åˆ—è¡¨" class="pagebody-header">
    6ã€æŒ‰ç…§é‡è¦æ€§é¡ºåºæ‰“å°ç‰¹å¾åˆ—è¡¨
  </h3>
</div><p class="component-content component">In [17]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_scores <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(fit<span style="color:#f92672">.</span>scores_)
</span></span><span style="display:flex;"><span>df_scores</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[17]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">3.312934</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">30.873699</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">170.348127</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">21.649163</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">2.581865</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">10.097499</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:right">4518.319091</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:right">2.771019</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [18]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_columns <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(X<span style="color:#f92672">.</span>columns)
</span></span><span style="display:flex;"><span>df_columns</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[18]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">PassengerId</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">Pclass</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">Sex</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">Age</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">SibSp</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">Parch</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:right">Fare</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:right">Embarked</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [19]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># åˆå¹¶ä¸¤ä¸ªdf</span>
</span></span><span style="display:flex;"><span>df_feature_scores <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([df_columns,df_scores],axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆ—å</span>
</span></span><span style="display:flex;"><span>df_feature_scores<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;feature_name&#39;</span>,<span style="color:#e6db74">&#39;Score&#39;</span>]  <span style="color:#75715e">#naming the dataframe columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹</span>
</span></span><span style="display:flex;"><span>df_feature_scores</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[19]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">feature_name</th>
<th style="text-align:right">Score</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">PassengerId</td>
<td style="text-align:right">3.312934</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">Pclass</td>
<td style="text-align:right">30.873699</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">Sex</td>
<td style="text-align:right">170.348127</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">Age</td>
<td style="text-align:right">21.649163</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">SibSp</td>
<td style="text-align:right">2.581865</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">Parch</td>
<td style="text-align:right">10.097499</td>
</tr>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:right">Fare</td>
<td style="text-align:right">4518.319091</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:right">Embarked</td>
<td style="text-align:right">2.771019</td>
</tr>
</tbody>
</table></div>
<p class="component-content component">In [20]:</p>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df_feature_scores<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Score&#34;</span>, ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)</span></span></code></pre></div></div>
  
</div><p class="component-content component">Out[20]:</p>
<div class="component-content component"><table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">feature_name</th>
<th style="text-align:right">Score</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">6</td>
<td style="text-align:right">Fare</td>
<td style="text-align:right">4518.319091</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">Sex</td>
<td style="text-align:right">170.348127</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">Pclass</td>
<td style="text-align:right">30.873699</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">Age</td>
<td style="text-align:right">21.649163</td>
</tr>
<tr>
<td style="text-align:right">5</td>
<td style="text-align:right">Parch</td>
<td style="text-align:right">10.097499</td>
</tr>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">PassengerId</td>
<td style="text-align:right">3.312934</td>
</tr>
<tr>
<td style="text-align:right">7</td>
<td style="text-align:right">Embarked</td>
<td style="text-align:right">2.771019</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">SibSp</td>
<td style="text-align:right">2.581865</td>
</tr>
</tbody>
</table></div>

          </div><div class="component">
            <div class="component-content">
              <div class="article-copyright">
                <p class="content">
                  ç‰ˆæƒå£°æ˜: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed" target="_blank">ç‰ˆæƒå£°æ˜ï¼šç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0)</a>
                </p>
                <p class="content">ä½œè€…:  yuanshuai </p>
                <p class="content">å‘è¡¨æ—¥æœŸ:  2021å¹´11æœˆ26æ—¥</p>
              </div>
            </div>
          </div></article>
      </section>
  </main>

  <script>
    var script = document.createElement("script");script.src = "https://yuanshuai1122.github.io/js/initPost.js";
    document.head.appendChild(script);
  </script>

    
    <div class="footer-main ">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="foot-nav">
        <div class="foot-nav-items">
          <div class="item">
            <div class="logo"></div>
            <div class="email">Email: <a href="mailto:shuaiyuan@gmail.com">shuaiyuan@gmail.com</a></div>
          </div>

          <div class="item community">
            <div class="item-title">ç¤¾äº¤åª’ä½“</div>
            
              <a href="https://github.com/yuanshuai1122" target="_blank">Github</a>
            
          </div>

          <div class="item resources">
            <div class="item-title">å‹é“¾</div>
            
              <a href="https://yuanshuaicn.com/" target="_blank">ğŸ‘‹</a>
            
          </div>
        </div>
      </div>
      <div class="bottom">
        <div class="item copyright">
          &copy; 2023
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://github.com/floyd-li/hugo-theme-itheme" target="_blank">iTheme</a>
        </div>
      </div>
    </div>
  </div>
</div>

  </body>
    
    

    
    
</html>
