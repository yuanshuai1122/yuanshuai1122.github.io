<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº - ğŸ§€ - ä½ å¥½</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="yuanshuai" /><meta name="description" content="ç¬¬ 9 ç«  æ–¹æ³•åŒº 1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³» ä»å†…å­˜ç»“æ„æ¥çœ‹ è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ† ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹ ThreadLocalï¼šå¦‚" /><meta name="keywords" content="blog, yuanshuai, yyss" />






<meta name="generator" content="Hugo 0.119.0 with theme even" />


<link rel="canonical" href="yuanshuai1122.github.io/post/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA/" />
<link rel="apple-touch-icon" sizes="180x180" href="/yuanshuai1122.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/yuanshuai1122.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/yuanshuai1122.github.io/favicon-16x16.png">
<link rel="manifest" href="/yuanshuai1122.github.io/manifest.json">
<link rel="mask-icon" href="/yuanshuai1122.github.io/safari-pinned-tab.svg" color="#5bbad5">



<link href="/yuanshuai1122.github.io/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº" />
<meta property="og:description" content="ç¬¬ 9 ç«  æ–¹æ³•åŒº 1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³» ä»å†…å­˜ç»“æ„æ¥çœ‹ è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ† ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹ ThreadLocalï¼šå¦‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="yuanshuai1122.github.io/post/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC9%E7%AB%A0%E6%96%B9%E6%B3%95%E5%8C%BA/" /><meta property="article:section" content="post" />


<meta itemprop="name" content="JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº">
<meta itemprop="description" content="ç¬¬ 9 ç«  æ–¹æ³•åŒº 1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³» ä»å†…å­˜ç»“æ„æ¥çœ‹ è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ† ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹ ThreadLocalï¼šå¦‚">

<meta itemprop="wordCount" content="10795">
<meta itemprop="keywords" content="Java,JVM," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº"/>
<meta name="twitter:description" content="ç¬¬ 9 ç«  æ–¹æ³•åŒº 1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³» ä»å†…å­˜ç»“æ„æ¥çœ‹ è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ† ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹ ThreadLocalï¼šå¦‚"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">CNshuaiyuan</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="yuanshuai1122.github.io/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="yuanshuai1122.github.io/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="yuanshuai1122.github.io/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="yuanshuai1122.github.io/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">CNshuaiyuan</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬9ç« æ–¹æ³•åŒº</h1>

      <div class="post-meta">
        <span class="post-time"> 0001-01-01 </span>
        
          <span class="more-meta"> çº¦ 10795 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 22 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#ç¬¬-9-ç« -æ–¹æ³•åŒº">ç¬¬ 9 ç«  æ–¹æ³•åŒº</a>
      <ul>
        <li><a href="#1æ ˆ-å †-æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»">1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»</a></li>
        <li><a href="#2æ–¹æ³•åŒºçš„ç†è§£">2ã€æ–¹æ³•åŒºçš„ç†è§£</a>
          <ul>
            <li><a href="#21æ–¹æ³•åŒºçš„ä½ç½®">2.1ã€æ–¹æ³•åŒºçš„ä½ç½®</a></li>
            <li><a href="#22æ–¹æ³•åŒºçš„ç†è§£">2.2ã€æ–¹æ³•åŒºçš„ç†è§£</a></li>
            <li><a href="#23æ–¹æ³•åŒºæ¼”è¿›è¿‡ç¨‹">2.3ã€æ–¹æ³•åŒºæ¼”è¿›è¿‡ç¨‹</a></li>
          </ul>
        </li>
        <li><a href="#3è®¾ç½®æ–¹æ³•åŒºå¤§å°ä¸-oom">3ã€è®¾ç½®æ–¹æ³•åŒºå¤§å°ä¸ OOM</a>
          <ul>
            <li><a href="#31jdk7-æ°¸ä¹…ä»£">3.1ã€JDK7 æ°¸ä¹…ä»£</a></li>
            <li><a href="#32jdk8-å…ƒç©ºé—´">3.2ã€JDK8 å…ƒç©ºé—´</a></li>
            <li><a href="#33æ–¹æ³•åŒº-oom">3.3ã€æ–¹æ³•åŒº OOM</a></li>
            <li><a href="#34è§£å†³-oom">3.4ã€è§£å†³ OOM</a></li>
          </ul>
        </li>
        <li><a href="#4æ–¹æ³•åŒºçš„å†…éƒ¨ç»“æ„">4ã€æ–¹æ³•åŒºçš„å†…éƒ¨ç»“æ„</a>
          <ul>
            <li><a href="#41æ–¹æ³•åŒºç»“æ„">4.1ã€æ–¹æ³•åŒºç»“æ„</a></li>
            <li><a href="#42åŸŸä¿¡æ¯ç‰¹æ®Šæƒ…å†µ">4.2ã€åŸŸä¿¡æ¯ç‰¹æ®Šæƒ…å†µ</a></li>
            <li><a href="#43è¿è¡Œæ—¶å¸¸é‡æ± ">4.3ã€è¿è¡Œæ—¶å¸¸é‡æ± </a></li>
          </ul>
        </li>
        <li><a href="#5æ–¹æ³•åŒºçš„ä½¿ç”¨ä¸¾ä¾‹">5ã€æ–¹æ³•åŒºçš„ä½¿ç”¨ä¸¾ä¾‹</a></li>
        <li><a href="#6æ–¹æ³•åŒºæ¼”è¿›ç»†èŠ‚">6ã€æ–¹æ³•åŒºæ¼”è¿›ç»†èŠ‚</a>
          <ul>
            <li><a href="#61æ°¸ä¹…ä»£æ¼”è¿›è¿‡ç¨‹">6.1ã€æ°¸ä¹…ä»£æ¼”è¿›è¿‡ç¨‹</a></li>
            <li><a href="#62å…ƒç©ºé—´å‡ºç°åŸå› ">6.2ã€å…ƒç©ºé—´å‡ºç°åŸå› </a></li>
            <li><a href="#63å­—ç¬¦ä¸²å¸¸é‡æ± ">6.3ã€å­—ç¬¦ä¸²å¸¸é‡æ± </a></li>
            <li><a href="#64é™æ€å˜é‡ä½ç½®">6.4ã€é™æ€å˜é‡ä½ç½®</a></li>
          </ul>
        </li>
        <li><a href="#7æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶">7ã€æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶</a></li>
        <li><a href="#8è¿è¡Œæ—¶æ•°æ®åŒºæ€»ç»“">8ã€è¿è¡Œæ—¶æ•°æ®åŒºæ€»ç»“</a></li>
        <li><a href="#9å¤§åœºé¢è¯•é¢˜">9ã€å¤§åœºé¢è¯•é¢˜</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
  <div class="post-outdated">
    <div class="warn">
      <p>ã€æ³¨æ„ã€‘æœ€åæ›´æ–°äº <span class="timeago" datetime="0001-01-01T00:00:00" title="January 1, 0001">January 1, 0001</span>ï¼Œæ–‡ä¸­å†…å®¹å¯èƒ½å·²è¿‡æ—¶ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p>
    </div>
  </div>
    <div class="post-content">
      <h1 id="ç¬¬-9-ç« -æ–¹æ³•åŒº">ç¬¬ 9 ç«  æ–¹æ³•åŒº</h1>
<h2 id="1æ ˆ-å †-æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»">1ã€æ ˆ å † æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»</h2>
<blockquote>
<p><strong>ä»å†…å­˜ç»“æ„æ¥çœ‹</strong></p>
</blockquote>
<p>è¿™æ¬¡æ‰€è®²è¿°çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºçš„æœ€åä¸€ä¸ªéƒ¨åˆ†</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/150.png" alt=""></p>
<blockquote>
<p><strong>ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹</strong></p>
</blockquote>
<p>ThreadLocalï¼šå¦‚ä½•ä¿è¯å¤šä¸ªçº¿ç¨‹åœ¨å¹¶å‘ç¯å¢ƒä¸‹çš„å®‰å…¨æ€§ï¼Ÿå…¸å‹åº”ç”¨å°±æ˜¯æ•°æ®åº“è¿æ¥ç®¡ç†ï¼Œä»¥åŠç‹¬ç«‹ä¼šè¯ç®¡ç†</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/151.png" alt=""></p>
<blockquote>
<p><strong>æ ˆã€å †ã€æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»</strong></p>
</blockquote>
<p><strong>ä¸‹é¢å°±æ¶‰åŠäº†å¯¹è±¡çš„è®¿é—®å®šä½</strong></p>
<ol>
<li>Person ç±»çš„ .class ä¿¡æ¯å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­</li>
<li>person å˜é‡å­˜æ”¾åœ¨ Java æ ˆçš„å±€éƒ¨å˜é‡è¡¨ä¸­</li>
<li>çœŸæ­£çš„ person å¯¹è±¡å­˜æ”¾åœ¨ Java å †ä¸­</li>
<li>åœ¨ person å¯¹è±¡ä¸­ï¼Œæœ‰ä¸ªæŒ‡é’ˆæŒ‡å‘æ–¹æ³•åŒºä¸­çš„ person ç±»å‹æ•°æ®ï¼Œè¡¨æ˜è¿™ä¸ª person å¯¹è±¡æ˜¯ç”¨æ–¹æ³•åŒºä¸­çš„ Person ç±» new å‡ºæ¥çš„</li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/152.png" alt=""></p>
<h2 id="2æ–¹æ³•åŒºçš„ç†è§£">2ã€æ–¹æ³•åŒºçš„ç†è§£</h2>
<blockquote>
<p><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
</blockquote>
<p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.4">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.4</a></p>
<h3 id="21æ–¹æ³•åŒºçš„ä½ç½®">2.1ã€æ–¹æ³•åŒºçš„ä½ç½®</h3>
<blockquote>
<p><strong>æ–¹æ³•åŒºçš„ä½ç½®</strong></p>
</blockquote>
<ol>
<li>ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ˜ç¡®è¯´æ˜ï¼šå°½ç®¡æ‰€æœ‰çš„æ–¹æ³•åŒºåœ¨é€»è¾‘ä¸Šæ˜¯å±äºå †çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸€äº›ç®€å•çš„å®ç°å¯èƒ½ä¸ä¼šé€‰æ‹©å»è¿›è¡Œåƒåœ¾æ”¶é›†æˆ–è€…è¿›è¡Œå‹ç¼©ã€‚</li>
<li>ä½†å¯¹äºHotSpotJVMè€Œè¨€ï¼Œ<strong>æ–¹æ³•åŒºè¿˜æœ‰ä¸€ä¸ªåˆ«åå«åšNon-Heap</strong>ï¼ˆéå †ï¼‰ï¼Œç›®çš„å°±æ˜¯è¦å’Œå †åˆ†å¼€ã€‚</li>
<li>æ‰€ä»¥ï¼Œ<strong>æ–¹æ³•åŒºå¯ä»¥çœ‹ä½œæ˜¯ä¸€å—ç‹¬ç«‹äºJavaå †çš„å†…å­˜ç©ºé—´</strong>ã€‚</li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/153.png" alt=""></p>
<h3 id="22æ–¹æ³•åŒºçš„ç†è§£">2.2ã€æ–¹æ³•åŒºçš„ç†è§£</h3>
<blockquote>
<p><strong>æ–¹æ³•åŒºçš„åŸºæœ¬ç†è§£</strong></p>
</blockquote>
<p><strong>æ–¹æ³•åŒºä¸»è¦å­˜æ”¾çš„æ˜¯ Classï¼Œè€Œå †ä¸­ä¸»è¦å­˜æ”¾çš„æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡</strong></p>
<ol>
<li>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¸Javaå †ä¸€æ ·ï¼Œæ˜¯<strong>å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸ</strong></li>
<li>å¤šä¸ªçº¿ç¨‹åŒæ—¶åŠ è½½ç»Ÿä¸€ä¸ªç±»æ—¶ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½åŠ è½½è¯¥ç±»ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰ç­‰å¾…è¯¥çº¿ç¨‹åŠ è½½å®Œæ¯•ï¼Œç„¶åç›´æ¥ä½¿ç”¨è¯¥ç±»ï¼Œå³<strong>ç±»åªèƒ½åŠ è½½ä¸€æ¬¡</strong>ã€‚</li>
<li>æ–¹æ³•åŒºåœ¨JVMå¯åŠ¨çš„æ—¶å€™è¢«åˆ›å»ºï¼Œå¹¶ä¸”å®ƒçš„å®é™…çš„ç‰©ç†å†…å­˜ç©ºé—´ä¸­å’ŒJavaå †åŒºä¸€æ ·éƒ½å¯ä»¥æ˜¯ä¸è¿ç»­çš„ã€‚</li>
<li>æ–¹æ³•åŒºçš„å¤§å°ï¼Œè·Ÿå †ç©ºé—´ä¸€æ ·ï¼Œå¯ä»¥é€‰æ‹©<strong>å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•</strong>ã€‚</li>
<li>æ–¹æ³•åŒºçš„å¤§å°å†³å®šäº†ç³»ç»Ÿå¯ä»¥ä¿å­˜å¤šå°‘ä¸ªç±»ï¼Œå¦‚æœç³»ç»Ÿå®šä¹‰äº†å¤ªå¤šçš„ç±»ï¼Œå¯¼è‡´æ–¹æ³•åŒºæº¢å‡ºï¼Œè™šæ‹ŸæœºåŒæ ·ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºé”™è¯¯ï¼š
<ul>
<li>java.lang.OutofMemoryError:PermGen space</li>
<li>æˆ–è€…</li>
<li>java.lang.OutOfMemoryError:Metaspace</li>
</ul>
</li>
<li>ä¸¾ä¾‹è¯´æ˜æ–¹æ³•åŒº OOM
<ul>
<li>åŠ è½½å¤§é‡çš„ç¬¬ä¸‰æ–¹çš„jaråŒ…</li>
<li>Tomcatéƒ¨ç½²çš„å·¥ç¨‹è¿‡å¤šï¼ˆ30~50ä¸ªï¼‰</li>
<li>å¤§é‡åŠ¨æ€çš„ç”Ÿæˆåå°„ç±»</li>
</ul>
</li>
<li>å…³é—­JVMå°±ä¼šé‡Šæ”¾è¿™ä¸ªåŒºåŸŸçš„å†…å­˜ã€‚</li>
</ol>
<hr>
<p><strong>ä»£ç ä¸¾ä¾‹</strong></p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EdenSurvivorTest</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;æˆ‘åªæ˜¯æ¥æ‰“ä¸ªé…±æ²¹~&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç®€å•çš„ç¨‹åºï¼ŒåŠ è½½äº†å¥½å¤šç±»</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/154.png" alt=""></p>
<h3 id="23æ–¹æ³•åŒºæ¼”è¿›è¿‡ç¨‹">2.3ã€æ–¹æ³•åŒºæ¼”è¿›è¿‡ç¨‹</h3>
<blockquote>
<p><strong>Hotspot æ–¹æ³•åŒºçš„æ¼”è¿›è¿‡ç¨‹</strong></p>
</blockquote>
<ol>
<li><strong>åœ¨ JDK7 åŠä»¥å‰ï¼Œä¹ æƒ¯ä¸ŠæŠŠæ–¹æ³•åŒºï¼Œç§°ä¸ºæ°¸ä¹…ä»£ã€‚JDK8å¼€å§‹ï¼Œä½¿ç”¨å…ƒç©ºé—´å–ä»£äº†æ°¸ä¹…ä»£</strong>ã€‚JDK 1.8åï¼Œå…ƒç©ºé—´å­˜æ”¾åœ¨<strong>å †å¤–å†…å­˜ä¸­</strong></li>
<li>æˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•åŒºç±»æ¯”ä¸ºJavaä¸­çš„æ¥å£ï¼Œå°†æ°¸ä¹…ä»£æˆ–å…ƒç©ºé—´ç±»æ¯”ä¸ºJavaä¸­å…·ä½“çš„å®ç°ç±»</li>
<li>æœ¬è´¨ä¸Šï¼Œæ–¹æ³•åŒºå’Œæ°¸ä¹…ä»£å¹¶ä¸ç­‰ä»·ã€‚ä»…æ˜¯å¯¹Hotspotè€Œè¨€çš„å¯ä»¥çœ‹ä½œç­‰ä»·ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹å¦‚ä½•å®ç°æ–¹æ³•åŒºï¼Œä¸åšç»Ÿä¸€è¦æ±‚ã€‚ä¾‹å¦‚ï¼šBEAJRockit / IBM J9 ä¸­ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µã€‚</li>
<li>ç°åœ¨æ¥çœ‹ï¼Œå½“å¹´ä½¿ç”¨æ°¸ä¹…ä»£ï¼Œä¸æ˜¯å¥½çš„ideaã€‚å¯¼è‡´Javaç¨‹åºæ›´å®¹æ˜“OOmï¼ˆè¶…è¿‡-XX:MaxPermsizeä¸Šé™ï¼‰</li>
<li>è€Œåˆ°äº†JDK8ï¼Œç»ˆäºå®Œå…¨åºŸå¼ƒäº†æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼Œæ”¹ç”¨ä¸JRockitã€J9ä¸€æ ·åœ¨æœ¬åœ°å†…å­˜ä¸­å®ç°çš„å…ƒç©ºé—´ï¼ˆMetaspaceï¼‰æ¥ä»£æ›¿</li>
<li>å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹JVMè§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š<strong>å…ƒç©ºé—´ä¸åœ¨è™šæ‹Ÿæœºè®¾ç½®çš„å†…å­˜ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜</strong></li>
<li>æ°¸ä¹…ä»£ã€å…ƒç©ºé—´äºŒè€…å¹¶ä¸åªæ˜¯åå­—å˜äº†ï¼Œ<strong>å†…éƒ¨ç»“æ„ä¹Ÿè°ƒæ•´äº†</strong></li>
<li>æ ¹æ®ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼Œå¦‚æœæ–¹æ³•åŒºæ— æ³•æ»¡è¶³æ–°çš„å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡ºOOMå¼‚å¸¸</li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/155.png" alt=""></p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/156.png" alt=""></p>
<h2 id="3è®¾ç½®æ–¹æ³•åŒºå¤§å°ä¸-oom">3ã€è®¾ç½®æ–¹æ³•åŒºå¤§å°ä¸ OOM</h2>
<p>æ–¹æ³•åŒºçš„å¤§å°ä¸å¿…æ˜¯å›ºå®šçš„ï¼ŒJVMå¯ä»¥æ ¹æ®åº”ç”¨çš„éœ€è¦åŠ¨æ€è°ƒæ•´ã€‚</p>
<h3 id="31jdk7-æ°¸ä¹…ä»£">3.1ã€JDK7 æ°¸ä¹…ä»£</h3>
<blockquote>
<p><strong>JDK7 ä¹‹å‰ç‰ˆæœ¬è®¾ç½®æ°¸ä¹…ä»£å¤§å°</strong></p>
</blockquote>
<ol>
<li>é€šè¿‡-XX:Permsizeæ¥è®¾ç½®æ°¸ä¹…ä»£åˆå§‹åˆ†é…ç©ºé—´ã€‚é»˜è®¤å€¼æ˜¯20.75M</li>
<li>-XX:MaxPermsizeæ¥è®¾å®šæ°¸ä¹…ä»£æœ€å¤§å¯åˆ†é…ç©ºé—´ã€‚32ä½æœºå™¨é»˜è®¤æ˜¯64Mï¼Œ64ä½æœºå™¨æ¨¡å¼æ˜¯82M</li>
<li>å½“JVMåŠ è½½çš„ç±»ä¿¡æ¯å®¹é‡è¶…è¿‡äº†è¿™ä¸ªå€¼ï¼Œä¼šæŠ¥å¼‚å¸¸OutofMemoryError:PermGen spaceã€‚</li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/157.png" alt=""></p>
<h3 id="32jdk8-å…ƒç©ºé—´">3.2ã€JDK8 å…ƒç©ºé—´</h3>
<blockquote>
<p><strong>JDK8 ç‰ˆæœ¬è®¾ç½®å…ƒç©ºé—´å¤§å°</strong></p>
</blockquote>
<ol>
<li>å…ƒæ•°æ®åŒºå¤§å°å¯ä»¥ä½¿ç”¨å‚æ•° <strong>-XX:MetaspaceSize</strong> å’Œ <strong>-XX:MaxMetaspaceSize</strong> æŒ‡å®š</li>
<li>é»˜è®¤å€¼ä¾èµ–äºå¹³å°ï¼ŒWindowsä¸‹ï¼Œ-XX:MetaspaceSize çº¦ä¸º21Mï¼Œ<strong>-XX:MaxMetaspaceSizeçš„å€¼æ˜¯-1ï¼Œå³æ²¡æœ‰é™åˆ¶</strong>ã€‚</li>
<li>ä¸æ°¸ä¹…ä»£ä¸åŒï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰çš„å¯ç”¨ç³»ç»Ÿå†…å­˜ã€‚å¦‚æœå…ƒæ•°æ®åŒºå‘ç”Ÿæº¢å‡ºï¼Œè™šæ‹Ÿæœºä¸€æ ·ä¼šæŠ›å‡ºå¼‚å¸¸OutOfMemoryError:Metaspace</li>
<li>-XX:MetaspaceSizeï¼šè®¾ç½®åˆå§‹çš„å…ƒç©ºé—´å¤§å°ã€‚å¯¹äºä¸€ä¸ª 64ä½ çš„æœåŠ¡å™¨ç«¯ JVM æ¥è¯´ï¼Œå…¶é»˜è®¤çš„ -XX:MetaspaceSizeå€¼ä¸º21MBã€‚è¿™å°±æ˜¯åˆå§‹çš„é«˜æ°´ä½çº¿ï¼Œä¸€æ—¦è§¦åŠè¿™ä¸ªæ°´ä½çº¿ï¼ŒFull GCå°†ä¼šè¢«è§¦å‘å¹¶å¸è½½æ²¡ç”¨çš„ç±»ï¼ˆå³è¿™äº›ç±»å¯¹åº”çš„ç±»åŠ è½½å™¨ä¸å†å­˜æ´»ï¼‰ï¼Œ<strong>ç„¶åè¿™ä¸ªé«˜æ°´ä½çº¿å°†ä¼šé‡ç½®</strong>ã€‚æ–°çš„é«˜æ°´ä½çº¿çš„å€¼å–å†³äºGCåé‡Šæ”¾äº†å¤šå°‘å…ƒç©ºé—´ã€‚
<ul>
<li>å¦‚æœé‡Šæ”¾çš„ç©ºé—´ä¸è¶³ï¼Œé‚£ä¹ˆåœ¨ä¸è¶…è¿‡MaxMetaspaceSizeæ—¶ï¼Œé€‚å½“æé«˜è¯¥å€¼ã€‚</li>
<li>å¦‚æœé‡Šæ”¾ç©ºé—´è¿‡å¤šï¼Œåˆ™é€‚å½“é™ä½è¯¥å€¼ã€‚</li>
</ul>
</li>
<li>å¦‚æœåˆå§‹åŒ–çš„é«˜æ°´ä½çº¿è®¾ç½®è¿‡ä½ï¼Œä¸Šè¿°é«˜æ°´ä½çº¿è°ƒæ•´æƒ…å†µä¼šå‘ç”Ÿå¾ˆå¤šæ¬¡ã€‚é€šè¿‡åƒåœ¾å›æ”¶å™¨çš„æ—¥å¿—å¯ä»¥è§‚å¯Ÿåˆ°Full GCå¤šæ¬¡è°ƒç”¨ã€‚<strong>ä¸ºäº†é¿å…é¢‘ç¹åœ°GCï¼Œå»ºè®®å°†-XX:MetaspaceSizeè®¾ç½®ä¸ºä¸€ä¸ªç›¸å¯¹è¾ƒé«˜çš„å€¼</strong>ã€‚</li>
</ol>
<hr>
<p><strong>é…ç½®å…ƒç©ºé—´å¤§å°ç¤ºä¾‹</strong></p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * æµ‹è¯•è®¾ç½®æ–¹æ³•åŒºå¤§å°å‚æ•°çš„é»˜è®¤å€¼
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * jdk7åŠä»¥å‰ï¼š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * -XX:PermSize=100m -XX:MaxPermSize=100m
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * jdk8åŠä»¥åï¼š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * -XX:MetaspaceSize=100m  -XX:MaxMetaspaceSize=100m
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author shkstart  shkstart@126.com
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @create 2020  12:16
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodAreaDemo</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;start...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;end...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>JVM å‚æ•°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">-XX:MetaspaceSize=100m  -XX:MaxMetaspaceSize=100m
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>CMD å‘½ä»¤æŸ¥çœ‹è®¾ç½®çš„å…ƒç©ºé—´å¤§å°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">C:<span class="se">\U</span>sers<span class="se">\H</span>eygo&gt;jps
</span></span><span class="line"><span class="cl">C:<span class="se">\U</span>sers<span class="se">\H</span>eygo&gt;jinfo -flag MetaspaceSize pId
</span></span><span class="line"><span class="cl">C:<span class="se">\U</span>sers<span class="se">\H</span>eygo&gt;jinfo -flag MaxMetaspaceSize pId
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/158.png" alt=""></p>
<h3 id="33æ–¹æ³•åŒº-oom">3.3ã€æ–¹æ³•åŒº OOM</h3>
<blockquote>
<p><strong>æ–¹æ³•åŒº OOM ä¸¾ä¾‹</strong></p>
</blockquote>
<ul>
<li>ä»£ç ï¼šOOMTest ç±»ç»§æ‰¿ ClassLoader ç±»ï¼Œè·å¾— defineClass() æ–¹æ³•ï¼Œå¯è‡ªå·±è¿›è¡Œç±»çš„åŠ è½½</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * jdk6/7ä¸­ï¼š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * -XX:PermSize=10m -XX:MaxPermSize=10m
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * jdk8ä¸­ï¼š
</span></span></span><span class="line"><span class="cl"><span class="cm"> * -XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m
</span></span></span><span class="line"><span class="cl"><span class="cm"> *
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @author shkstart  shkstart@126.com
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @create 2020  22:24
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OOMTest</span> <span class="kd">extends</span> <span class="n">ClassLoader</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">OOMTest</span> <span class="n">test</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OOMTest</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//åˆ›å»ºClassWriterå¯¹è±¡ï¼Œç”¨äºç”Ÿæˆç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">ClassWriter</span> <span class="n">classWriter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassWriter</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//æŒ‡æ˜ç‰ˆæœ¬å·ï¼Œä¿®é¥°ç¬¦ï¼Œç±»åï¼ŒåŒ…åï¼Œçˆ¶ç±»ï¼Œæ¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">classWriter</span><span class="o">.</span><span class="na">visit</span><span class="o">(</span><span class="n">Opcodes</span><span class="o">.</span><span class="na">V1_6</span><span class="o">,</span> <span class="n">Opcodes</span><span class="o">.</span><span class="na">ACC_PUBLIC</span><span class="o">,</span> <span class="s">&#34;Class&#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="s">&#34;java/lang/Object&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//è¿”å›byte[]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="kt">byte</span><span class="o">[]</span> <span class="n">code</span> <span class="o">=</span> <span class="n">classWriter</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//ç±»çš„åŠ è½½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">test</span><span class="o">.</span><span class="na">defineClass</span><span class="o">(</span><span class="s">&#34;Class&#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">,</span> <span class="n">code</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">code</span><span class="o">.</span><span class="na">length</span><span class="o">);</span><span class="c1">//Classå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">j</span><span class="o">++;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¸è®¾ç½®å…ƒç©ºé—´çš„ä¸Šé™</strong></p>
<ul>
<li>ä½¿ç”¨é»˜è®¤çš„ JVM å‚æ•°ï¼Œå…ƒç©ºé—´ä¸è®¾ç½®ä¸Šé™</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">10000
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>è®¾ç½®å…ƒç©ºé—´çš„ä¸Šé™</strong></p>
<ul>
<li>JVM å‚æ•°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">-XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å…ƒç©ºé—´å‡ºç° OOM</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">com.atguigu.java.OOMTest
</span></span><span class="line"><span class="cl">Exception in thread &#34;main&#34; java.lang.OutOfMemoryError: Metaspace
</span></span><span class="line"><span class="cl">	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span class="line"><span class="cl">	at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
</span></span><span class="line"><span class="cl">	at java.lang.ClassLoader.defineClass(ClassLoader.java:642)
</span></span><span class="line"><span class="cl">	at com.atguigu.java.OOMTest.main(OOMTest.java:29)
</span></span><span class="line"><span class="cl">8531
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34è§£å†³-oom">3.4ã€è§£å†³ OOM</h3>
<blockquote>
<p><strong>å¦‚ä½•è§£å†³ OOMï¼Ÿ</strong></p>
</blockquote>
<ol>
<li>è¦è§£å†³OOMå¼‚å¸¸æˆ–heap spaceçš„å¼‚å¸¸ï¼Œä¸€èˆ¬çš„æ‰‹æ®µæ˜¯é¦–å…ˆé€šè¿‡å†…å­˜æ˜ åƒåˆ†æå·¥å…·ï¼ˆå¦‚Ec1ipse Memory Analyzerï¼‰å¯¹dumpå‡ºæ¥çš„å †è½¬å‚¨å¿«ç…§è¿›è¡Œåˆ†æï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œä¹Ÿå°±æ˜¯è¦å…ˆåˆ†æ¸…æ¥šåˆ°åº•æ˜¯å‡ºç°äº†å†…å­˜æ³„æ¼ï¼ˆMemory Leakï¼‰è¿˜æ˜¯å†…å­˜æº¢å‡ºï¼ˆMemory Overflowï¼‰</li>
<li><strong>å†…å­˜æ³„æ¼å°±æ˜¯æœ‰å¤§é‡çš„å¼•ç”¨æŒ‡å‘æŸäº›å¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›å¯¹è±¡ä»¥åä¸ä¼šä½¿ç”¨äº†</strong>ï¼Œä½†æ˜¯å› ä¸ºå®ƒä»¬è¿˜å’ŒGC ROOTæœ‰å…³è”ï¼Œæ‰€ä»¥å¯¼è‡´ä»¥åè¿™äº›å¯¹è±¡ä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œè¿™å°±æ˜¯å†…å­˜æ³„æ¼çš„é—®é¢˜</li>
<li>å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œå¯è¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ¥çœ‹æ³„æ¼å¯¹è±¡åˆ°GC Rootsçš„å¼•ç”¨é“¾ã€‚äºæ˜¯å°±èƒ½<strong>æ‰¾åˆ°æ³„æ¼å¯¹è±¡æ˜¯é€šè¿‡æ€æ ·çš„è·¯å¾„ä¸GC Rootsç›¸å…³è”å¹¶å¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ— æ³•è‡ªåŠ¨å›æ”¶å®ƒä»¬çš„</strong>ã€‚æŒæ¡äº†æ³„æ¼å¯¹è±¡çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠGC Rootså¼•ç”¨é“¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°å®šä½å‡ºæ³„æ¼ä»£ç çš„ä½ç½®ã€‚</li>
<li>å¦‚æœä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®éƒ½è¿˜å¿…é¡»å­˜æ´»ç€ï¼Œé‚£å°±åº”å½“æ£€æŸ¥è™šæ‹Ÿæœºçš„å †å‚æ•°ï¼ˆ-Xmxä¸-Xmsï¼‰ï¼Œä¸æœºå™¨ç‰©ç†å†…å­˜å¯¹æ¯”çœ‹æ˜¯å¦è¿˜å¯ä»¥è°ƒå¤§ï¼Œä»ä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰çŠ¶æ€æ—¶é—´è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—ã€‚</li>
</ol>
<h2 id="4æ–¹æ³•åŒºçš„å†…éƒ¨ç»“æ„">4ã€æ–¹æ³•åŒºçš„å†…éƒ¨ç»“æ„</h2>
<h3 id="41æ–¹æ³•åŒºç»“æ„">4.1ã€æ–¹æ³•åŒºç»“æ„</h3>
<blockquote>
<p><strong>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰å­˜å‚¨ä»€ä¹ˆï¼Ÿ</strong></p>
</blockquote>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/159.png" alt=""></p>
<p>ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¹¦ä¸­å¯¹æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰å­˜å‚¨å†…å®¹æè¿°å¦‚ä¸‹ï¼šå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹Ÿæœº<strong>åŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜</strong>ç­‰ã€‚</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/160.png" alt=""></p>
<blockquote>
<p><strong>ç±»å‹ä¿¡æ¯</strong></p>
</blockquote>
<p>å¯¹æ¯ä¸ªåŠ è½½çš„ç±»å‹ï¼ˆç±»classã€æ¥å£interfaceã€æšä¸¾enumã€æ³¨è§£annotationï¼‰ï¼ŒJVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­å­˜å‚¨ä»¥ä¸‹ç±»å‹ä¿¡æ¯ï¼š</p>
<ol>
<li>è¿™ä¸ªç±»å‹çš„å®Œæ•´æœ‰æ•ˆåç§°ï¼ˆå…¨å=åŒ…å.ç±»åï¼‰</li>
<li>è¿™ä¸ªç±»å‹ç›´æ¥çˆ¶ç±»çš„å®Œæ•´æœ‰æ•ˆåï¼ˆå¯¹äºinterfaceæˆ–æ˜¯java.lang.Objectï¼Œéƒ½æ²¡æœ‰çˆ¶ç±»ï¼‰</li>
<li>è¿™ä¸ªç±»å‹çš„ä¿®é¥°ç¬¦ï¼ˆpublicï¼Œabstractï¼Œfinalçš„æŸä¸ªå­é›†ï¼‰</li>
<li>è¿™ä¸ªç±»å‹ç›´æ¥æ¥å£çš„ä¸€ä¸ªæœ‰åºåˆ—è¡¨</li>
</ol>
<blockquote>
<p><strong>åŸŸï¼ˆFieldï¼‰ä¿¡æ¯</strong></p>
</blockquote>
<ol>
<li>JVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­ä¿å­˜ç±»å‹çš„æ‰€æœ‰åŸŸçš„ç›¸å…³ä¿¡æ¯ä»¥åŠåŸŸçš„å£°æ˜é¡ºåºã€‚</li>
<li>åŸŸçš„ç›¸å…³ä¿¡æ¯åŒ…æ‹¬ï¼š
<ul>
<li>åŸŸåç§°</li>
<li>åŸŸç±»å‹</li>
<li>åŸŸä¿®é¥°ç¬¦ï¼ˆpublicï¼Œprivateï¼Œprotectedï¼Œstaticï¼Œfinalï¼Œvolatileï¼Œtransientçš„æŸä¸ªå­é›†ï¼‰</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>æ–¹æ³•ï¼ˆMethodï¼‰ä¿¡æ¯</strong></p>
</blockquote>
<p>JVMå¿…é¡»ä¿å­˜æ‰€æœ‰æ–¹æ³•çš„ä»¥ä¸‹ä¿¡æ¯ï¼ŒåŒåŸŸä¿¡æ¯ä¸€æ ·åŒ…æ‹¬å£°æ˜é¡ºåºï¼š</p>
<ol>
<li>æ–¹æ³•åç§°</li>
<li>æ–¹æ³•çš„è¿”å›ç±»å‹ï¼ˆåŒ…æ‹¬ void è¿”å›ç±»å‹ï¼‰ï¼Œvoid åœ¨ Java ä¸­å¯¹åº”çš„ç±»ä¸º void.class</li>
<li>æ–¹æ³•å‚æ•°çš„æ•°é‡å’Œç±»å‹ï¼ˆæŒ‰é¡ºåºï¼‰</li>
<li>æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼ˆpublicï¼Œprivateï¼Œprotectedï¼Œstaticï¼Œfinalï¼Œsynchronizedï¼Œnativeï¼Œabstractçš„ä¸€ä¸ªå­é›†ï¼‰</li>
<li>æ–¹æ³•çš„å­—èŠ‚ç ï¼ˆbytecodesï¼‰ã€æ“ä½œæ•°æ ˆã€å±€éƒ¨å˜é‡è¡¨åŠå¤§å°ï¼ˆabstractå’Œnativeæ–¹æ³•é™¤å¤–ï¼‰</li>
<li>å¼‚å¸¸è¡¨ï¼ˆabstractå’Œnativeæ–¹æ³•é™¤å¤–ï¼‰ï¼Œå¼‚å¸¸è¡¨è®°å½•æ¯ä¸ªå¼‚å¸¸å¤„ç†çš„å¼€å§‹ä½ç½®ã€ç»“æŸä½ç½®ã€ä»£ç å¤„ç†åœ¨ç¨‹åºè®¡æ•°å™¨ä¸­çš„åç§»åœ°å€ã€è¢«æ•è·çš„å¼‚å¸¸ç±»çš„å¸¸é‡æ± ç´¢å¼•</li>
</ol>
<blockquote>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
</blockquote>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * æµ‹è¯•æ–¹æ³•åŒºçš„å†…éƒ¨æ„æˆ * * @author shkstart  shkstart@126.com * @create 2020  23:39 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodInnerStrucTest</span> <span class="kd">extends</span> <span class="n">Object</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;,</span> <span class="n">Serializable</span> <span class="o">{</span>    <span class="c1">//å±æ€§    public int num = 10;    private static String str = &#34;æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„&#34;;    //æ„é€ å™¨æ²¡å†™    //æ–¹æ³•    public void test1() {        int count = 20;        System.out.println(&#34;count = &#34; + count);    }    public static int test2(int cal) {        int result = 0;        try {            int value = 30;            result = value / cal;        } catch (Exception e) {            e.printStackTrace();        }        return result;    }    @Override    public int compareTo(String o) {        return 0;    }}
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºå€¼æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œä¾¿äºæŸ¥çœ‹</li>
<li>å‚æ•° -p ç¡®ä¿èƒ½æŸ¥çœ‹ private æƒé™ç±»å‹çš„å­—æ®µæˆ–æ–¹æ³•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">javap -v -p MethodInnerStrucTest.class &gt; Text.txt
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>ç±»å‹ä¿¡æ¯</strong></p>
<ul>
<li>æ’å¥å˜´ï¼šåœ¨è¿è¡Œæ—¶æ–¹æ³•åŒºä¸­ï¼Œç±»ä¿¡æ¯ä¸­è®°å½•äº†å“ªä¸ªåŠ è½½å™¨åŠ è½½äº†è¯¥ç±»ï¼ŒåŒæ—¶ç±»åŠ è½½å™¨ä¹Ÿè®°å½•äº†å®ƒåŠ è½½äº†å“ªäº›ç±»</li>
<li>ä»åç¼–è¯‘æ–‡ä»¶å¯ä»¥çœ‹å‡ºï¼Œå­—èŠ‚ç æ–‡ä»¶è®°å½•äº† MethodInnerStrucTest ç»§æ‰¿äº†å“ªäº›ç±»ï¼Œå®ç°äº†å“ªäº›æ–¹æ³•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">public class com.atguigu.java.MethodInnerStrucTest 	extends java.lang.Object 	implements java.lang.Comparable&lt;java.lang.String&gt;, java.io.Serializable
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>åŸŸä¿¡æ¯</strong></p>
<ol>
<li>descriptor: I è¡¨ç¤ºå­—æ®µç±»å‹ä¸º Integer</li>
<li>flags: ACC_PUBLIC è¡¨ç¤ºå­—æ®µæƒé™ä¿®é¥°ç¬¦ä¸º public</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  public int num;    descriptor: I    flags: ACC_PUBLIC  private static java.lang.String str;    descriptor: Ljava/lang/String;    flags: ACC_PRIVATE, ACC_STATIC
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>æ–¹æ³•ä¿¡æ¯</strong></p>
<ol>
<li>descriptor: ()V è¡¨ç¤ºæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸º void</li>
<li>flags: ACC_PUBLIC è¡¨ç¤ºæ–¹æ³•æƒé™ä¿®é¥°ç¬¦ä¸º public</li>
<li>stack=3 è¡¨ç¤ºæ“ä½œæ•°æ ˆæ·±åº¦ä¸º 3</li>
<li>locals=2 è¡¨ç¤ºå±€éƒ¨å˜é‡ä¸ªæ•°ä¸º 2 ä¸ªï¼ˆå®åŠ›æ–¹æ³•åŒ…å« thisï¼‰</li>
<li>test1() æ–¹æ³•è™½ç„¶æ²¡æœ‰å‚æ•°ï¼Œä½†æ˜¯å…¶ args_size=1 ï¼Œè¿™æ—¶å› ä¸ºå°† this ä½œä¸ºäº†å‚æ•°</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  public void test1();    descriptor: ()V    flags: ACC_PUBLIC    Code:      stack=3, locals=2, args_size=1         0: bipush        20         2: istore_1         3: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;         6: new           #4                  // class java/lang/StringBuilder         9: dup        10: invokespecial #5                  // Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V        13: ldc           #6                  // String count =        15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;        18: iload_1        19: invokevirtual #8                  // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;        22: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;        25: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V        28: return      LineNumberTable:        line 17: 0        line 18: 3        line 19: 28      LocalVariableTable:        Start  Length  Slot  Name   Signature            0      29     0  this   Lcom/atguigu/java/MethodInnerStrucTest;            3      26     1 count   I
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42åŸŸä¿¡æ¯ç‰¹æ®Šæƒ…å†µ">4.2ã€åŸŸä¿¡æ¯ç‰¹æ®Šæƒ…å†µ</h3>
<blockquote>
<p><strong>non-final ç±»å‹çš„ç±»å˜é‡</strong></p>
</blockquote>
<ol>
<li><strong>é™æ€å˜é‡å’Œç±»å…³è”åœ¨ä¸€èµ·ï¼Œéšç€ç±»çš„åŠ è½½è€ŒåŠ è½½</strong>ï¼Œä»–ä»¬æˆä¸ºç±»æ•°æ®åœ¨é€»è¾‘ä¸Šçš„ä¸€éƒ¨åˆ†</li>
<li>ç±»å˜é‡è¢«ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå³ä½¿æ²¡æœ‰ç±»å®ä¾‹æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¿é—®å®ƒ</li>
</ol>
<hr>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
<ol>
<li>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå³ä½¿æˆ‘ä»¬æŠŠorderè®¾ç½®ä¸ºnullï¼Œä¹Ÿä¸ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
<li>è¿™æ›´åŠ è¡¨æ˜äº† static ç±»å‹çš„å­—æ®µå’Œæ–¹æ³•éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¹¶ä¸å±äºç‰¹å®šçš„ç±»å®ä¾‹</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * non-finalçš„ç±»å˜é‡ * @author shkstart  shkstart@126.com * @create 2020  20:37 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodAreaTest</span> <span class="o">{</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>        <span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>        <span class="n">order</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">order</span><span class="o">.</span><span class="na">count</span><span class="o">);</span>    <span class="o">}}</span><span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello!&#34;</span><span class="o">);</span>    <span class="o">}}</span><span class="c1">// ç¨‹åºè¿è¡Œç»“æœhello!1
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>å…¨å±€å¸¸é‡ï¼šstatic final</strong></p>
</blockquote>
<ol>
<li>å…¨å±€å¸¸é‡å°±æ˜¯ä½¿ç”¨ static final è¿›è¡Œä¿®é¥°</li>
<li>è¢«å£°æ˜ä¸ºfinalçš„ç±»å˜é‡çš„å¤„ç†æ–¹æ³•åˆ™ä¸åŒï¼Œæ¯ä¸ªå…¨å±€å¸¸é‡åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šè¢«åˆ†é…äº†ã€‚</li>
</ol>
<hr>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * non-finalçš„ç±»å˜é‡ * @author shkstart  shkstart@126.com * @create 2020  20:37 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodAreaTest</span> <span class="o">{</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>        <span class="n">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>        <span class="n">order</span><span class="o">.</span><span class="na">hello</span><span class="o">();</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">order</span><span class="o">.</span><span class="na">count</span><span class="o">);</span>    <span class="o">}}</span><span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">number</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello!&#34;</span><span class="o">);</span>    <span class="o">}}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åç¼–è¯‘ï¼ŒæŸ¥çœ‹å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¯ä»¥å‘ç° number çš„å€¼å·²ç»å†™æ­»åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸­äº†</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  public static int count;    descriptor: I    flags: ACC_PUBLIC, ACC_STATIC  public static final int number;    descriptor: I    flags: ACC_PUBLIC, ACC_STATIC, ACC_FINAL    ConstantValue: int 2
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="43è¿è¡Œæ—¶å¸¸é‡æ± ">4.3ã€è¿è¡Œæ—¶å¸¸é‡æ± </h3>
<blockquote>
<p><strong>è¿è¡Œæ—¶å¸¸é‡æ±  VS å¸¸é‡æ± </strong></p>
</blockquote>
<p><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<p><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html</a></p>
<hr>
<ol>
<li><strong>æ–¹æ³•åŒºï¼Œå†…éƒ¨åŒ…å«äº†è¿è¡Œæ—¶å¸¸é‡æ± </strong></li>
<li><strong>å­—èŠ‚ç æ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«äº†å¸¸é‡æ± </strong></li>
<li>è¦å¼„æ¸…æ¥šæ–¹æ³•åŒºï¼Œéœ€è¦ç†è§£æ¸…æ¥šClassFileï¼Œå› ä¸ºåŠ è½½ç±»çš„ä¿¡æ¯éƒ½åœ¨æ–¹æ³•åŒºã€‚</li>
<li>è¦å¼„æ¸…æ¥šæ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œéœ€è¦ç†è§£æ¸…æ¥šClassFileä¸­çš„å¸¸é‡æ± ã€‚</li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/161.png" alt=""></p>
<blockquote>
<p><strong>å¸¸é‡æ± </strong></p>
</blockquote>
<ol>
<li>ä¸€ä¸ªæœ‰æ•ˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­é™¤äº†åŒ…å«ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ã€å­—æ®µã€æ–¹æ³•ä»¥åŠæ¥å£ç­‰æè¿°ç¬¦ä¿¡æ¯å¤–</li>
<li>è¿˜åŒ…å«ä¸€é¡¹ä¿¡æ¯å°±æ˜¯<strong>å¸¸é‡æ± è¡¨</strong>ï¼ˆ<strong>Constant Pool Table</strong>ï¼‰ï¼ŒåŒ…æ‹¬<strong>å„ç§å­—é¢é‡å’Œå¯¹ç±»å‹ã€åŸŸå’Œæ–¹æ³•çš„ç¬¦å·å¼•ç”¨</strong></li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/162.png" alt=""></p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¸¸é‡æ± ï¼Ÿ</strong></p>
</blockquote>
<ol>
<li>ä¸€ä¸ªjavaæºæ–‡ä»¶ä¸­çš„ç±»ã€æ¥å£ï¼Œç¼–è¯‘åäº§ç”Ÿä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ã€‚è€ŒJavaä¸­çš„å­—èŠ‚ç éœ€è¦æ•°æ®æ”¯æŒï¼Œé€šå¸¸è¿™ç§æ•°æ®ä¼šå¾ˆå¤§ä»¥è‡³äºä¸èƒ½ç›´æ¥å­˜åˆ°å­—èŠ‚ç é‡Œï¼Œæ¢å¦ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥å­˜åˆ°å¸¸é‡æ± </li>
<li>è¿™ä¸ªå­—èŠ‚ç åŒ…å«äº†æŒ‡å‘å¸¸é‡æ± çš„å¼•ç”¨ã€‚åœ¨åŠ¨æ€é“¾æ¥çš„æ—¶å€™ä¼šç”¨åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œä¹‹å‰æœ‰ä»‹ç»</li>
</ol>
<hr>
<p>æ¯”å¦‚ï¼šå¦‚ä¸‹çš„ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleClass</span> <span class="o">{</span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">()</span> <span class="o">{</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">);</span>    <span class="o">}}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>è™½ç„¶ä¸Šè¿°ä»£ç åªæœ‰194å­—èŠ‚ï¼Œä½†æ˜¯é‡Œé¢å´ä½¿ç”¨äº†Stringã€Systemã€PrintStreamåŠObjectç­‰ç»“æ„ã€‚</li>
<li>å¦‚æœä¸ä½¿ç”¨å¸¸é‡æ± ï¼Œå°±éœ€è¦å°†ç”¨åˆ°çš„ç±»ä¿¡æ¯ã€æ–¹æ³•ä¿¡æ¯ç­‰è®°å½•åœ¨å½“å‰çš„å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œé€ æˆæ–‡ä»¶è‡ƒè‚¿</li>
<li>æ‰€ä»¥æˆ‘ä»¬å°†æ‰€éœ€ç”¨åˆ°çš„ç»“æ„ä¿¡æ¯è®°å½•åœ¨å¸¸é‡æ± ä¸­ï¼Œå¹¶é€šè¿‡<strong>å¼•ç”¨çš„æ–¹å¼</strong>ï¼Œæ¥åŠ è½½ã€è°ƒç”¨æ‰€éœ€çš„ç»“æ„</li>
<li>è¿™é‡Œçš„ä»£ç é‡å…¶å®å¾ˆå°‘äº†ï¼Œå¦‚æœä»£ç å¤šçš„è¯ï¼Œå¼•ç”¨çš„ç»“æ„å°†ä¼šæ›´å¤šï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°å¸¸é‡æ± äº†ã€‚</li>
</ol>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/163.png" alt=""></p>
<blockquote>
<p><strong>å¸¸é‡æ± ä¸­æœ‰å•¥ï¼Ÿ</strong></p>
</blockquote>
<ol>
<li>æ•°é‡å€¼</li>
<li>å­—ç¬¦ä¸²å€¼</li>
<li>ç±»å¼•ç”¨</li>
<li>å­—æ®µå¼•ç”¨</li>
<li>æ–¹æ³•å¼•ç”¨</li>
</ol>
<blockquote>
<p><strong>å¸¸é‡æ± ä»£ç ä¸¾ä¾‹</strong></p>
</blockquote>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * æµ‹è¯•æ–¹æ³•åŒºçš„å†…éƒ¨æ„æˆ * * @author shkstart  shkstart@126.com * @create 2020  23:39 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodInnerStrucTest</span> <span class="kd">extends</span> <span class="n">Object</span> <span class="kd">implements</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;,</span> <span class="n">Serializable</span> <span class="o">{</span>    <span class="c1">//å±æ€§    public int num = 10;    private static String str = &#34;æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„&#34;;    //æ„é€ å™¨æ²¡å†™    //æ–¹æ³•    public void test1() {        int count = 20;        System.out.println(&#34;count = &#34; + count);    }    public static int test2(int cal) {        int result = 0;        try {            int value = 30;            result = value / cal;        } catch (Exception e) {            e.printStackTrace();        }        return result;    }    @Override    public int compareTo(String o) {        return 0;    }}
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ¥çœ‹ä¸‹æœ€ç®€å•çš„ test1() æ–¹æ³•ï¼Œå¸¦ # çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå°±ä½¿ç”¨äº†å¸¸é‡æ± çš„å¼•ç”¨</li>
<li>é€šè¿‡å­—èŠ‚ç æŒ‡ä»¤å¯ä»¥çœ‹å‡ºï¼Œ<strong>æ‹¼æ¥å­—ç¬¦ä¸²æ—¶ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬é€ äº†ä¸ª StringBuilder å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å…¶ append() æ–¹æ³•å®Œæˆäº†å­—ç¬¦ä¸²çš„æ‹¼æ¥</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  public void test1();    descriptor: ()V    flags: ACC_PUBLIC    Code:      stack=3, locals=2, args_size=1         0: bipush        20         2: istore_1         3: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;         6: new           #4                  // class java/lang/StringBuilder         9: dup        10: invokespecial #5                  // Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V        13: ldc           #6                  // String count =        15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;        18: iload_1        19: invokevirtual #8                  // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;        22: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;        25: invokevirtual #10                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V        28: return      LineNumberTable:        line 20: 0        line 21: 3        line 22: 28      LocalVariableTable:        Start  Length  Slot  Name   Signature            0      29     0  this   Lcom/atguigu/java/MethodInnerStrucTest;            3      26     1 count   I
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¸¸é‡æ± </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Constant pool:   #1 = Methodref          #18.#52        // java/lang/Object.&#34;&lt;init&gt;&#34;:()V   #2 = Fieldref           #17.#53        // com/atguigu/java/MethodInnerStrucTest.num:I   #3 = Fieldref           #54.#55        // java/lang/System.out:Ljava/io/PrintStream;   #4 = Class              #56            // java/lang/StringBuilder   #5 = Methodref          #4.#52         // java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V   #6 = String             #57            // count =   #7 = Methodref          #4.#58         // java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;   #8 = Methodref          #4.#59         // java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;   #9 = Methodref          #4.#60         // java/lang/StringBuilder.toString:()Ljava/lang/String;  #10 = Methodref          #61.#62        // java/io/PrintStream.println:(Ljava/lang/String;)V  #11 = Class              #63            // java/lang/Exception  #12 = Methodref          #11.#64        // java/lang/Exception.printStackTrace:()V  #13 = Class              #65            // java/lang/String  #14 = Methodref          #17.#66        // com/atguigu/java/MethodInnerStrucTest.compareTo:(Ljava/lang/String;)I  #15 = String             #67            // æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„  #16 = Fieldref           #17.#68        // com/atguigu/java/MethodInnerStrucTest.str:Ljava/lang/String;  #17 = Class              #69            // com/atguigu/java/MethodInnerStrucTest  #18 = Class              #70            // java/lang/Object  #19 = Class              #71            // java/lang/Comparable  #20 = Class              #72            // java/io/Serializable  #21 = Utf8               num  #22 = Utf8               I  #23 = Utf8               str  #24 = Utf8               Ljava/lang/String;  #25 = Utf8               &lt;init&gt;  #26 = Utf8               ()V  #27 = Utf8               Code  #28 = Utf8               LineNumberTable  #29 = Utf8               LocalVariableTable  #30 = Utf8               this  #31 = Utf8               Lcom/atguigu/java/MethodInnerStrucTest;  #32 = Utf8               test1  #33 = Utf8               count  #34 = Utf8               test2  #35 = Utf8               (I)I  #36 = Utf8               value  #37 = Utf8               e  #38 = Utf8               Ljava/lang/Exception;  #39 = Utf8               cal  #40 = Utf8               result  #41 = Utf8               StackMapTable  #42 = Class              #63            // java/lang/Exception  #43 = Utf8               compareTo  #44 = Utf8               (Ljava/lang/String;)I  #45 = Utf8               o  #46 = Utf8               (Ljava/lang/Object;)I  #47 = Utf8               &lt;clinit&gt;  #48 = Utf8               Signature  #49 = Utf8               Ljava/lang/Object;Ljava/lang/Comparable&lt;Ljava/lang/String;&gt;;Ljava/io/Serializable;  #50 = Utf8               SourceFile  #51 = Utf8               MethodInnerStrucTest.java  #52 = NameAndType        #25:#26        // &#34;&lt;init&gt;&#34;:()V  #53 = NameAndType        #21:#22        // num:I  #54 = Class              #73            // java/lang/System  #55 = NameAndType        #74:#75        // out:Ljava/io/PrintStream;  #56 = Utf8               java/lang/StringBuilder  #57 = Utf8               count =  #58 = NameAndType        #76:#77        // append:(Ljava/lang/String;)Ljava/lang/StringBuilder;  #59 = NameAndType        #76:#78        // append:(I)Ljava/lang/StringBuilder;  #60 = NameAndType        #79:#80        // toString:()Ljava/lang/String;  #61 = Class              #81            // java/io/PrintStream  #62 = NameAndType        #82:#83        // println:(Ljava/lang/String;)V  #63 = Utf8               java/lang/Exception  #64 = NameAndType        #84:#26        // printStackTrace:()V  #65 = Utf8               java/lang/String  #66 = NameAndType        #43:#44        // compareTo:(Ljava/lang/String;)I  #67 = Utf8               æµ‹è¯•æ–¹æ³•çš„å†…éƒ¨ç»“æ„  #68 = NameAndType        #23:#24        // str:Ljava/lang/String;  #69 = Utf8               com/atguigu/java/MethodInnerStrucTest  #70 = Utf8               java/lang/Object  #71 = Utf8               java/lang/Comparable  #72 = Utf8               java/io/Serializable  #73 = Utf8               java/lang/System  #74 = Utf8               out  #75 = Utf8               Ljava/io/PrintStream;  #76 = Utf8               append  #77 = Utf8               (Ljava/lang/String;)Ljava/lang/StringBuilder;  #78 = Utf8               (I)Ljava/lang/StringBuilder;  #79 = Utf8               toString  #80 = Utf8               ()Ljava/lang/String;  #81 = Utf8               java/io/PrintStream  #82 = Utf8               println  #83 = Utf8               (Ljava/lang/String;)V  #84 = Utf8               printStackTrace
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>å¸¸é‡æ± æ€»ç»“</strong></p>
</blockquote>
<p>å¸¸é‡æ± ã€å¯ä»¥çœ‹åšæ˜¯ä¸€å¼ è¡¨ï¼Œè™šæ‹ŸæœºæŒ‡ä»¤æ ¹æ®è¿™å¼ å¸¸é‡è¡¨æ‰¾åˆ°è¦æ‰§è¡Œçš„ç±»åã€æ–¹æ³•åã€å‚æ•°ç±»å‹ã€å­—é¢é‡ç­‰ç±»å‹</p>
<blockquote>
<p><strong>è¿è¡Œæ—¶å¸¸é‡æ± </strong></p>
</blockquote>
<ol>
<li><strong>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†</strong>ã€‚</li>
<li><strong>å¸¸é‡æ± è¡¨ï¼ˆConstant Pool Tableï¼‰æ˜¯Classå­—èŠ‚ç æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­</strong>ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œåœ¨åŠ è½½ç±»å’Œæ¥å£åˆ°è™šæ‹Ÿæœºåï¼Œå°±ä¼šåˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶å¸¸é‡æ± ã€‚</li>
<li><strong>JVMä¸ºæ¯ä¸ªå·²åŠ è½½çš„ç±»å‹ï¼ˆç±»æˆ–æ¥å£ï¼‰éƒ½ç»´æŠ¤ä¸€ä¸ªå¸¸é‡æ± ã€‚æ± ä¸­çš„æ•°æ®é¡¹åƒæ•°ç»„é¡¹ä¸€æ ·ï¼Œæ˜¯é€šè¿‡ç´¢å¼•è®¿é—®çš„</strong>ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ä¸­åŒ…å«å¤šç§ä¸åŒçš„å¸¸é‡ï¼ŒåŒ…æ‹¬ç¼–è¯‘æœŸå°±å·²ç»æ˜ç¡®çš„æ•°å€¼å­—é¢é‡ï¼Œä¹ŸåŒ…æ‹¬åˆ°è¿è¡ŒæœŸè§£æåæ‰èƒ½å¤Ÿè·å¾—çš„æ–¹æ³•æˆ–è€…å­—æ®µå¼•ç”¨ã€‚<strong>æ­¤æ—¶ä¸å†æ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·åœ°å€äº†ï¼Œè¿™é‡Œæ¢ä¸ºçœŸå®åœ°å€</strong>ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦ä¸€é‡è¦ç‰¹å¾æ˜¯ï¼šå…·å¤‡åŠ¨æ€æ€§ã€‚</li>
<li>è¿è¡Œæ—¶å¸¸é‡æ± ç±»ä¼¼äºä¼ ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­çš„ç¬¦å·è¡¨ï¼ˆsymbol tableï¼‰ï¼Œä½†æ˜¯å®ƒæ‰€åŒ…å«çš„æ•°æ®å´æ¯”ç¬¦å·è¡¨è¦æ›´åŠ ä¸°å¯Œä¸€äº›ã€‚</li>
<li>å½“åˆ›å»ºç±»æˆ–æ¥å£çš„è¿è¡Œæ—¶å¸¸é‡æ± æ—¶ï¼Œå¦‚æœæ„é€ è¿è¡Œæ—¶å¸¸é‡æ± æ‰€éœ€çš„å†…å­˜ç©ºé—´è¶…è¿‡äº†æ–¹æ³•åŒºæ‰€èƒ½æä¾›çš„æœ€å¤§å€¼ï¼Œåˆ™JVMä¼šæŠ›OutofMemoryErrorå¼‚å¸¸ã€‚</li>
</ol>
<h2 id="5æ–¹æ³•åŒºçš„ä½¿ç”¨ä¸¾ä¾‹">5ã€æ–¹æ³•åŒºçš„ä½¿ç”¨ä¸¾ä¾‹</h2>
<blockquote>
<p><strong>æ–¹æ³•åŒºå›¾è§£ç¤ºä¾‹</strong></p>
</blockquote>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * @author shkstart  shkstart@126.com * @create 2020  14:28 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodAreaDemo</span> <span class="o">{</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>        <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">100</span><span class="o">;</span>        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">;</span>        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>    <span class="o">}}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>å›¾è§£å­—èŠ‚ç æŒ‡ä»¤æ‰§è¡Œæµç¨‹</strong></p>
<ul>
<li>å­—èŠ‚ç æ‰§è¡Œè¿‡ç¨‹å±•ç¤ºï¼šåˆå§‹çŠ¶æ€</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/164.png" alt=""></p>
<ul>
<li>é¦–å…ˆå°†æ“ä½œæ•°500å‹å…¥æ“ä½œæ•°æ ˆä¸­</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/165.png" alt=""></p>
<ul>
<li>ç„¶åæ“ä½œæ•° 500 ä»æ“ä½œæ•°æ ˆä¸­å–å‡ºï¼Œå­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º 1 çš„ä½ç½®</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/166.png" alt=""></p>
<ul>
<li>ç„¶åæ“ä½œæ•° 100 ä»æ“ä½œæ•°æ ˆä¸­å–å‡ºï¼Œå­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º 2 çš„ä½ç½®</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/167.png" alt=""></p>
<ul>
<li>å°†æ“ä½œæ•° 100 ä»</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/168.png" alt=""></p>
<ul>
<li>è¯»å–æœ¬åœ°å˜é‡ 1 ï¼Œå‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/169.png" alt=""></p>
<ul>
<li>è¯»å–æœ¬åœ°å˜é‡ 2 ï¼Œå‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/170.png" alt=""></p>
<ul>
<li>ä¸¤æ•°ç›¸é™¤ï¼Œè®¡ç®—ç»“æœæ”¾åœ¨æ“ä½œæ•°æ ˆé¡¶ï¼Œä¹‹åæ‰§è¡Œ istore_3 æŒ‡ä»¤ï¼Œå°†è®¡ç®—ç»“æœä»æ“ä½œæ•°æ ˆä¸­å¼¹å‡ºï¼Œå­˜å…¥å±€éƒ¨å˜é‡ 3 ä¸­</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/171.png" alt=""></p>
<ul>
<li>å°†æ“ä½œæ•° 50 å‹å…¥æ“ä½œæ•°æ ˆ</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/172.png" alt=""></p>
<ul>
<li>å°†æ“ä½œæ•° 50 ä»æ ˆé¡¶å¼¹å‡ºï¼Œä¿å­˜åœ¨å±€éƒ¨å˜é‡ 4 ä¸­</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/173.png" alt=""></p>
<ul>
<li>è·å– System.out è¾“å‡ºæµçš„å¼•ç”¨ï¼ˆæˆ‘ä¸å¤ªç¡®å®šï¼‰</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/174.png" alt=""></p>
<ul>
<li>å°†æœ¬åœ°å˜é‡ 3 çš„å€¼å–å‡ºï¼Œå‹å…¥æ“ä½œæ•°æ ˆä¸­ï¼Œå‡†å¤‡è¿›è¡ŒåŠ æ³•è¿ç®—</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/175.png" alt=""></p>
<ul>
<li>æ‰§è¡ŒåŠ æ³•è¿ç®—åï¼Œå°†è®¡ç®—ç»“æœæ”¾åœ¨æ“ä½œæ•°æ ˆé¡¶</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/176.png" alt=""></p>
<ul>
<li>è°ƒç”¨é™æ€æ–¹æ³• println() ï¼Œè¾“å‡ºåŠ æ³•ç»“æœ</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/177.png" alt=""></p>
<ul>
<li>main() æ–¹æ³•æ‰§è¡Œç»“æŸ</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/178.png" alt=""></p>
<p><strong>å…³äºã€ç¬¦å·å¼•ç”¨ &ndash;&gt; ç›´æ¥é¥®ç”¨ã€‘çš„ç†è§£</strong></p>
<ol>
<li>ä¸Šé¢ä»£ç è°ƒç”¨ System.out.println() æ–¹æ³•æ—¶ï¼Œé¦–å…ˆéœ€è¦çœ‹çœ‹ System ç±»æœ‰æ²¡æœ‰åŠ è½½ï¼Œå†çœ‹çœ‹ PrintStream ç±»æœ‰æ²¡æœ‰åŠ è½½</li>
<li>å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œåˆ™æ‰§è¡ŒåŠ è½½ï¼Œ<strong>æ‰§è¡Œæ—¶ï¼Œå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨ï¼ˆå­—é¢é‡ï¼‰è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆçœŸæ­£çš„åœ°å€å€¼ï¼‰</strong></li>
</ol>
<hr>
<p><strong>å…³äºç¨‹åºè®¡æ•°å™¨çš„è¯´æ˜</strong></p>
<p>ç¨‹åºè®¡æ•°å™¨å§‹ç»ˆè®¡ç®—çš„éƒ½æ˜¯å½“å‰ä»£ç è¿è¡Œçš„ä½ç½®ï¼Œç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿è®°å½•æ–¹æ³•è°ƒç”¨åèƒ½å¤Ÿæ­£å¸¸è¿”å›ï¼Œæˆ–è€…æ˜¯è¿›è¡Œäº†CPUåˆ‡æ¢åï¼Œä¹Ÿèƒ½å›æ¥åˆ°åŸæ¥çš„ä»£ç è¿›è¡Œæ‰§è¡Œã€‚</p>
<h2 id="6æ–¹æ³•åŒºæ¼”è¿›ç»†èŠ‚">6ã€æ–¹æ³•åŒºæ¼”è¿›ç»†èŠ‚</h2>
<h3 id="61æ°¸ä¹…ä»£æ¼”è¿›è¿‡ç¨‹">6.1ã€æ°¸ä¹…ä»£æ¼”è¿›è¿‡ç¨‹</h3>
<blockquote>
<p><strong>å…³äºæ°¸ä¹…ä»£çš„è¯´æ˜</strong></p>
</blockquote>
<ol>
<li>é¦–å…ˆæ˜ç¡®ï¼šåªæœ‰Hotspotæ‰æœ‰æ°¸ä¹…ä»£ã€‚</li>
<li>BEA JRockitã€IBMJ9ç­‰æ¥è¯´ï¼Œæ˜¯ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µçš„ã€‚åŸåˆ™ä¸Šå¦‚ä½•å®ç°æ–¹æ³•åŒºå±äºè™šæ‹Ÿæœºå®ç°ç»†èŠ‚ï¼Œä¸å—ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ç®¡æŸï¼Œå¹¶ä¸è¦æ±‚ç»Ÿä¸€</li>
<li>Hotspotä¸­æ–¹æ³•åŒºçš„å˜åŒ–ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th>JDK ç‰ˆæœ¬</th>
<th>æ¼”å˜ç»†èŠ‚</th>
</tr>
</thead>
<tbody>
<tr>
<td>JDK1.6åŠä»¥å‰</td>
<td>æœ‰æ°¸ä¹…ä»£ï¼ˆpermanent generationï¼‰ï¼Œé™æ€å˜é‡å­˜å‚¨åœ¨æ°¸ä¹…ä»£ä¸Š</td>
</tr>
<tr>
<td>JDK1.7</td>
<td>æœ‰æ°¸ä¹…ä»£ï¼Œä½†å·²ç»é€æ­¥ â€œå»æ°¸ä¹…ä»£â€ï¼Œ<strong>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œé™æ€å˜é‡ç§»é™¤ï¼Œä¿å­˜åœ¨å †ä¸­</strong></td>
</tr>
<tr>
<td>JDK1.8</td>
<td>æ— æ°¸ä¹…ä»£ï¼Œç±»å‹ä¿¡æ¯ï¼Œå­—æ®µï¼Œæ–¹æ³•ï¼Œå¸¸é‡ä¿å­˜åœ¨æœ¬åœ°å†…å­˜çš„å…ƒç©ºé—´ï¼Œä½†å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ä»ç„¶åœ¨å †ä¸­ã€‚</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>JDK6</strong></p>
<p>æ–¹æ³•åŒºç”±æ°¸ä¹…ä»£å®ç°ï¼Œä½¿ç”¨ JVM è™šæ‹Ÿæœºå†…å­˜</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/179.png" alt=""></p>
<p><strong>JDK7</strong></p>
<p>æ–¹æ³•åŒºç”±æ°¸ä¹…ä»£å®ç°ï¼Œä½¿ç”¨ JVM è™šæ‹Ÿæœºå†…å­˜</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/180.png" alt=""></p>
<p><strong>JDK8</strong></p>
<p>æ–¹æ³•åŒºç”±å…ƒç©ºé—´å®ç°ï¼Œä½¿ç”¨ç‰©ç†æœºæœ¬åœ°å†…å­˜</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/181.png" alt=""></p>
<h3 id="62å…ƒç©ºé—´å‡ºç°åŸå› ">6.2ã€å…ƒç©ºé—´å‡ºç°åŸå› </h3>
<blockquote>
<p><strong>æ°¸ä¹…ä»£ä¸ºä»€ä¹ˆè¦è¢«å…ƒç©ºé—´æ›¿ä»£ï¼Ÿ</strong></p>
</blockquote>
<p><strong>å®˜æ–¹æ–‡æ¡£</strong></p>
<p><a href="http://openjdk.java.net/jeps/122">http://openjdk.java.net/jeps/122</a></p>
<hr>
<ol>
<li>å®˜æ–¹çš„ç‰µå¼ºè§£é‡Šï¼šJRockitæ˜¯å’ŒHotSpotèåˆåçš„ç»“æœï¼Œå› ä¸ºJRockitæ²¡æœ‰æ°¸ä¹…ä»£ï¼Œæ‰€ä»¥ä»–ä»¬ä¸éœ€è¦é…ç½®æ°¸ä¹…ä»£</li>
<li>éšç€Java8çš„åˆ°æ¥ï¼ŒHotSpot VMä¸­å†ä¹Ÿè§ä¸åˆ°æ°¸ä¹…ä»£äº†ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ä¹Ÿæ¶ˆå¤±äº†ã€‚è¿™äº›æ•°æ®è¢«ç§»åˆ°äº†ä¸€ä¸ªä¸å †ä¸ç›¸è¿çš„æœ¬åœ°å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸå«åšå…ƒç©ºé—´ï¼ˆMetaspaceï¼‰ã€‚</li>
</ol>
<hr>
<p><strong>ç”±äºç±»çš„å…ƒæ•°æ®åˆ†é…åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œå…ƒç©ºé—´çš„æœ€å¤§å¯åˆ†é…ç©ºé—´å°±æ˜¯ç³»ç»Ÿå¯ç”¨å†…å­˜ç©ºé—´ï¼Œè¿™é¡¹æ”¹åŠ¨æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼ŒåŸå› æœ‰ï¼š</strong></p>
<ol>
<li>ä¸ºæ°¸ä¹…ä»£è®¾ç½®ç©ºé—´å¤§å°æ˜¯å¾ˆéš¾ç¡®å®šçš„ã€‚
<ul>
<li>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœåŠ¨æ€åŠ è½½ç±»è¿‡å¤šï¼Œå®¹æ˜“äº§ç”ŸPermåŒºçš„OOMã€‚æ¯”å¦‚æŸä¸ªå®é™…Webå·¥
ç¨‹ä¸­ï¼Œå› ä¸ºåŠŸèƒ½ç‚¹æ¯”è¾ƒå¤šï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¦ä¸æ–­åŠ¨æ€åŠ è½½å¾ˆå¤šç±»ï¼Œç»å¸¸å‡ºç°è‡´å‘½é”™è¯¯ã€‚<code>Exception in thread 'dubbo client x.x connector' java.lang.OutOfMemoryError:PermGen space</code></li>
<li>è€Œå…ƒç©ºé—´å’Œæ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š<strong>å…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜</strong>ã€‚
å› æ­¤ï¼Œ<strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶</strong>ã€‚</li>
</ul>
</li>
<li>å¯¹æ°¸ä¹…ä»£è¿›è¡Œè°ƒä¼˜æ˜¯å¾ˆå›°éš¾çš„ã€‚
<ul>
<li>æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šå¸¸é‡æ± ä¸­åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ç”¨çš„ç±»å‹ï¼Œæ–¹æ³•åŒºçš„è°ƒä¼˜ä¸»è¦æ˜¯ä¸ºäº†é™ä½Full GC</li>
<li>æœ‰äº›äººè®¤ä¸ºæ–¹æ³•åŒºï¼ˆå¦‚HotSpotè™šæ‹Ÿæœºä¸­çš„å…ƒç©ºé—´æˆ–è€…æ°¸ä¹…ä»£ï¼‰æ˜¯æ²¡æœ‰åƒåœ¾æ”¶é›†è¡Œä¸ºçš„ï¼Œå…¶å®ä¸ç„¶ã€‚ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æ–¹æ³•åŒºçš„çº¦æŸæ˜¯éå¸¸å®½æ¾çš„ï¼Œæåˆ°è¿‡å¯ä»¥ä¸è¦æ±‚è™šæ‹Ÿæœºåœ¨æ–¹æ³•åŒºä¸­å®ç°åƒåœ¾æ”¶é›†ã€‚äº‹å®ä¸Šä¹Ÿç¡®å®æœ‰æœªå®ç°æˆ–æœªèƒ½å®Œæ•´å®ç°æ–¹æ³•åŒºç±»å‹å¸è½½çš„æ”¶é›†å™¨å­˜åœ¨ï¼ˆå¦‚JDK11æ—¶æœŸçš„ZGCæ”¶é›†å™¨å°±ä¸æ”¯æŒç±»å¸è½½ï¼‰ã€‚</li>
<li><strong>ä¸€èˆ¬æ¥è¯´è¿™ä¸ªåŒºåŸŸçš„å›æ”¶æ•ˆæœæ¯”è¾ƒéš¾ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»</strong>ã€‚ä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶æœ‰æ—¶åˆç¡®å®æ˜¯å¿…è¦çš„ã€‚ä»¥å‰Sunå…¬å¸çš„Bugåˆ—è¡¨ä¸­ï¼Œæ›¾å‡ºç°è¿‡çš„è‹¥å¹²ä¸ªä¸¥é‡çš„Bugå°±æ˜¯ç”±äºä½ç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºå¯¹æ­¤åŒºåŸŸæœªå®Œå…¨å›æ”¶è€Œå¯¼è‡´å†…å­˜æ³„æ¼</li>
</ul>
</li>
</ol>
<h3 id="63å­—ç¬¦ä¸²å¸¸é‡æ± ">6.3ã€å­—ç¬¦ä¸²å¸¸é‡æ± </h3>
<blockquote>
<p><strong>å­—ç¬¦ä¸²å¸¸é‡æ±  StringTable ä¸ºä»€ä¹ˆè¦è°ƒæ•´ä½ç½®ï¼Ÿ</strong></p>
</blockquote>
<ol>
<li><strong>JDK7ä¸­å°†StringTableæ”¾åˆ°äº†å †ç©ºé—´ä¸­</strong>ã€‚å› ä¸ºæ°¸ä¹…ä»£çš„å›æ”¶æ•ˆç‡å¾ˆä½ï¼Œåœ¨Full GCçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œæ°¸ä¹…ä»£çš„åƒåœ¾å›æ”¶ï¼Œè€ŒFull GCæ˜¯è€å¹´ä»£çš„ç©ºé—´ä¸è¶³ã€æ°¸ä¹…ä»£ä¸è¶³æ—¶æ‰ä¼šè§¦å‘ã€‚</li>
<li>è¿™å°±<strong>å¯¼è‡´StringTableå›æ”¶æ•ˆç‡ä¸é«˜</strong>ï¼Œè€Œæˆ‘ä»¬å¼€å‘ä¸­ä¼šæœ‰å¤§é‡çš„å­—ç¬¦ä¸²è¢«åˆ›å»ºï¼Œå›æ”¶æ•ˆç‡ä½ï¼Œå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜ä¸è¶³ã€‚<strong>æ”¾åˆ°å †é‡Œï¼Œèƒ½åŠæ—¶å›æ”¶å†…å­˜</strong>ã€‚</li>
</ol>
<h3 id="64é™æ€å˜é‡ä½ç½®">6.4ã€é™æ€å˜é‡ä½ç½®</h3>
<blockquote>
<p><strong>é™æ€å˜é‡å­˜æ”¾åœ¨é‚£é‡Œï¼Ÿ</strong></p>
</blockquote>
<p><strong>ä»£ç ç¤ºä¾‹ 1</strong></p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * ç»“è®ºï¼š *  é™æ€å˜é‡åœ¨jdk6/7å­˜åœ¨ä¸æ°¸ä¹…ä»£ä¸­ï¼Œåœ¨jdk8å­˜åœ¨äºå †ä¸­ *  é™æ€å¼•ç”¨å¯¹åº”çš„å¯¹è±¡å®ä½“å§‹ç»ˆéƒ½å­˜åœ¨å †ç©ºé—´ * * jdk7ï¼š * -Xms200m -Xmx200m -XX:PermSize=300m -XX:MaxPermSize=300m -XX:+PrintGCDetails * jdk 8ï¼š * -Xms200m -Xmx200m -XX:MetaspaceSize=300m -XX:MaxMetaspaceSize=300m -XX:+PrintGCDetails * @author shkstart  shkstart@126.com * @create 2020  21:20 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StaticFieldTest</span> <span class="o">{</span>    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">100</span><span class="o">];</span><span class="c1">//100MB    public static void main(String[] args) {        System.out.println(StaticFieldTest.arr);    }}
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è¿è¡Œç¯å¢ƒ JDK8 ï¼ŒJVM å‚æ•°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">-Xms200m -Xmx200m -XX:MetaspaceSize=300m -XX:MaxMetaspaceSize=300m -XX:+PrintGCDetails
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é€šè¿‡ GC æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼š<strong>é™æ€å˜é‡å¼•ç”¨å¯¹åº”çš„å¯¹è±¡å®ä½“å§‹ç»ˆéƒ½å­˜åœ¨å †ç©ºé—´</strong>ï¼ˆarr æ•°ç»„å¯¹è±¡ç›´æ¥æ€¼åˆ°è€å¹´åŒºå»äº†ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[B@4554617cHeap PSYoungGen      total 59904K, used 5171K [0x00000000fbd80000, 0x0000000100000000, 0x0000000100000000)  eden space 51712K, 10% used [0x00000000fbd80000,0x00000000fc28ceb0,0x00000000ff000000)  from space 8192K, 0% used [0x00000000ff800000,0x00000000ff800000,0x0000000100000000)  to   space 8192K, 0% used [0x00000000ff000000,0x00000000ff000000,0x00000000ff800000) ParOldGen       total 136704K, used 102400K [0x00000000f3800000, 0x00000000fbd80000, 0x00000000fbd80000)  object space 136704K, 74% used [0x00000000f3800000,0x00000000f9c00010,0x00000000fbd80000) Metaspace       used 3473K, capacity 4496K, committed 4864K, reserved 1056768K  class space    used 381K, capacity 388K, committed 512K, reserved 1048576K
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>ä»£ç ç¤ºä¾‹ 2</strong></p>
<ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/** * ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­çš„æ¡ˆä¾‹ï¼š * staticObjã€instanceObjã€localObjå­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ * * @author shkstart  shkstart@126.com * @create 2020  11:39 */</span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StaticObjTest</span> <span class="o">{</span>    <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>        <span class="kd">static</span> <span class="n">ObjectHolder</span> <span class="n">staticObj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectHolder</span><span class="o">();</span>        <span class="n">ObjectHolder</span> <span class="n">instanceObj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectHolder</span><span class="o">();</span>        <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>            <span class="n">ObjectHolder</span> <span class="n">localObj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectHolder</span><span class="o">();</span>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;done&#34;</span><span class="o">);</span>        <span class="o">}</span>    <span class="o">}</span>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ObjectHolder</span> <span class="o">{</span>    <span class="o">}</span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>        <span class="n">Test</span> <span class="n">test</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StaticObjTest</span><span class="o">.</span><span class="na">Test</span><span class="o">();</span>        <span class="n">test</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>    <span class="o">}}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¯ä»¥ä½¿ç”¨ JHSDB.exeï¼Œåœ¨JDK9çš„æ—¶å€™æ‰å¼•å…¥çš„</li>
<li>åˆ†æï¼šstaticObjéšç€Testçš„ç±»å‹ä¿¡æ¯å­˜æ”¾åœ¨æ–¹æ³•åŒºï¼ŒinstanceObjéšç€Testçš„å¯¹è±¡å®ä¾‹å­˜æ”¾åœ¨Javaå †ï¼ŒlocalObjectåˆ™æ˜¯å­˜æ”¾åœ¨foo()æ–¹æ³•æ ˆå¸§çš„å±€éƒ¨å˜é‡è¡¨ä¸­ã€‚</li>
<li>æµ‹è¯•å‘ç°ï¼šä¸‰ä¸ªå¯¹è±¡çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„åœ°å€éƒ½è½åœ¨EdenåŒºèŒƒå›´å†…ï¼Œæ‰€ä»¥ç»“è®ºï¼š<strong>åªè¦æ˜¯å¯¹è±¡å®ä¾‹å¿…ç„¶ä¼šåœ¨Javaå †ä¸­åˆ†é…</strong>ã€‚</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/182.png" alt=""></p>
<ul>
<li>æ¥ç€ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå¼•ç”¨è¯¥staticObjå¯¹è±¡çš„åœ°æ–¹ï¼Œæ˜¯åœ¨ä¸€ä¸ªjava.lang.Classçš„å®ä¾‹é‡Œï¼Œå¹¶ä¸”ç»™å‡ºäº†è¿™ä¸ªå®ä¾‹çš„åœ°å€ï¼Œé€šè¿‡InspectoræŸ¥çœ‹è¯¥å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥æ¸…æ¥šçœ‹åˆ°è¿™ç¡®å®æ˜¯ä¸€ä¸ªjava.lang.Classç±»å‹çš„å¯¹è±¡å®ä¾‹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåä¸ºstaticobjçš„å®ä¾‹å­—æ®µï¼š</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/183.png" alt=""></p>
<ul>
<li>ä»ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹æ‰€å®šä¹‰çš„æ¦‚å¿µæ¨¡å‹æ¥çœ‹ï¼Œæ‰€æœ‰Classç›¸å…³çš„ä¿¡æ¯éƒ½åº”è¯¥å­˜æ”¾åœ¨æ–¹æ³•åŒºä¹‹ä¸­ï¼Œä½†æ–¹æ³•åŒºè¯¥å¦‚ä½•å®ç°ï¼Œã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¹¶æœªåšå‡ºè§„å®šï¼Œè¿™å°±æˆäº†ä¸€ä»¶å…è®¸ä¸åŒè™šæ‹Ÿæœºè‡ªå·±çµæ´»æŠŠæ¡çš„äº‹æƒ…ã€‚JDK7åŠå…¶ä»¥åç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºé€‰æ‹©æŠŠé™æ€å˜é‡ä¸ç±»å‹åœ¨Javaè¯­è¨€ä¸€ç«¯çš„æ˜ å°„Classå¯¹è±¡å­˜æ”¾åœ¨ä¸€èµ·ï¼Œ<strong>å­˜å‚¨äºJavaå †ä¹‹ä¸­</strong>ï¼Œä»æˆ‘ä»¬çš„å®éªŒä¸­ä¹Ÿæ˜ç¡®éªŒè¯äº†è¿™ä¸€ç‚¹</li>
</ul>
<h2 id="7æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶">7ã€æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶</h2>
<blockquote>
<p><strong>æ–¹æ³•åŒºåƒåœ¾æ”¶é›†</strong></p>
</blockquote>
<ol>
<li>æœ‰äº›äººè®¤ä¸ºæ–¹æ³•åŒºï¼ˆå¦‚Hotspotè™šæ‹Ÿæœºä¸­çš„å…ƒç©ºé—´æˆ–è€…æ°¸ä¹…ä»£ï¼‰æ˜¯æ²¡æœ‰åƒåœ¾æ”¶é›†è¡Œä¸ºçš„ï¼Œå…¶å®ä¸ç„¶ã€‚</li>
<li>ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æ–¹æ³•åŒºçš„çº¦æŸæ˜¯éå¸¸å®½æ¾çš„ï¼Œæåˆ°è¿‡å¯ä»¥ä¸è¦æ±‚è™šæ‹Ÿæœºåœ¨æ–¹æ³•åŒºä¸­å®ç°åƒåœ¾æ”¶é›†ã€‚äº‹å®ä¸Šä¹Ÿç¡®å®æœ‰æœªå®ç°æˆ–æœªèƒ½å®Œæ•´å®ç°æ–¹æ³•åŒºç±»å‹å¸è½½çš„æ”¶é›†å™¨å­˜åœ¨ï¼ˆå¦‚JDK11æ—¶æœŸçš„ZGCæ”¶é›†å™¨å°±ä¸æ”¯æŒç±»å¸è½½ï¼‰ã€‚</li>
<li>ä¸€èˆ¬æ¥è¯´è¿™ä¸ªåŒºåŸŸçš„å›æ”¶æ•ˆæœæ¯”è¾ƒéš¾ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»ã€‚ä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶æœ‰æ—¶åˆç¡®å®æ˜¯å¿…è¦çš„ã€‚ä»¥å‰sunå…¬å¸çš„Bugåˆ—è¡¨ä¸­ï¼Œæ›¾å‡ºç°è¿‡çš„è‹¥å¹²ä¸ªä¸¥é‡çš„Bugå°±æ˜¯ç”±äºä½ç‰ˆæœ¬çš„HotSpotè™šæ‹Ÿæœºå¯¹æ­¤åŒºåŸŸæœªå®Œå…¨å›æ”¶è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li>
<li>æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼š<strong>å¸¸é‡æ± ä¸­åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ä½¿ç”¨çš„ç±»å‹</strong>ã€‚</li>
</ol>
<blockquote>
<p><strong>æ–¹æ³•åŒºå¸¸é‡çš„å›æ”¶</strong></p>
</blockquote>
<ol>
<li>å…ˆæ¥è¯´è¯´æ–¹æ³•åŒºå†…å¸¸é‡æ± ä¹‹ä¸­ä¸»è¦å­˜æ”¾çš„ä¸¤å¤§ç±»å¸¸é‡ï¼šå­—é¢é‡å’Œç¬¦å·å¼•ç”¨
<ul>
<li>å­—é¢é‡æ¯”è¾ƒæ¥è¿‘Javaè¯­è¨€å±‚æ¬¡çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€è¢«å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰</li>
<li>è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä¸‹é¢ä¸‰ç±»å¸¸é‡ï¼š
<ul>
<li>ç±»å’Œæ¥å£çš„å…¨é™å®šå</li>
<li>å­—æ®µçš„åç§°å’Œæè¿°ç¬¦</li>
<li>æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦</li>
</ul>
</li>
</ul>
</li>
<li>HotSpotè™šæ‹Ÿæœºå¯¹å¸¸é‡æ± çš„å›æ”¶ç­–ç•¥æ˜¯å¾ˆæ˜ç¡®çš„ï¼Œåªè¦å¸¸é‡æ± ä¸­çš„å¸¸é‡æ²¡æœ‰è¢«ä»»ä½•åœ°æ–¹å¼•ç”¨ï¼Œå°±å¯ä»¥è¢«å›æ”¶ã€‚</li>
<li>å›æ”¶åºŸå¼ƒå¸¸é‡ä¸å›æ”¶Javaå †ä¸­çš„å¯¹è±¡éå¸¸ç±»ä¼¼ã€‚ï¼ˆå…³äºå¸¸é‡çš„å›æ”¶æ¯”è¾ƒç®€å•ï¼Œé‡ç‚¹æ˜¯ç±»çš„å›æ”¶ï¼‰</li>
</ol>
<blockquote>
<p><strong>æ–¹æ³•åŒºç±»çš„å›æ”¶</strong></p>
</blockquote>
<p>åˆ¤å®šä¸€ä¸ªå¸¸é‡æ˜¯å¦â€œåºŸå¼ƒâ€è¿˜æ˜¯ç›¸å¯¹ç®€å•ï¼Œè€Œè¦åˆ¤å®šä¸€ä¸ªç±»å‹æ˜¯å¦å±äºâ€œä¸å†è¢«ä½¿ç”¨çš„ç±»â€çš„æ¡ä»¶å°±æ¯”è¾ƒè‹›åˆ»äº†ã€‚éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚</li>
<li>åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚</li>
<li>è¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚</li>
</ol>
<p>Javaè™šæ‹Ÿæœºè¢«å…è®¸å¯¹æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶çš„æ— ç”¨ç±»è¿›è¡Œå›æ”¶ï¼Œè¿™é‡Œè¯´çš„ä»…ä»…æ˜¯â€œè¢«å…è®¸â€ï¼Œè€Œå¹¶ä¸æ˜¯å’Œå¯¹è±¡ä¸€æ ·ï¼Œæ²¡æœ‰å¼•ç”¨äº†å°±å¿…ç„¶ä¼šå›æ”¶ã€‚å…³äºæ˜¯å¦è¦å¯¹ç±»å‹è¿›è¡Œå›æ”¶ï¼ŒHotSpotè™šæ‹Ÿæœºæä¾›äº†<code>-Xnoclassgc</code>å‚æ•°è¿›è¡Œæ§åˆ¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>-verbose:class</code> ä»¥åŠ <code>-XXï¼š+TraceClass-Loading</code>ã€<code>-XXï¼š+TraceClassUnLoading</code>æŸ¥çœ‹ç±»åŠ è½½å’Œå¸è½½ä¿¡æ¯</p>
<p>åœ¨å¤§é‡ä½¿ç”¨åå°„ã€åŠ¨æ€ä»£ç†ã€CGLibç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒåŠ¨æ€ç”ŸæˆJSPä»¥åŠOSGiè¿™ç±»é¢‘ç¹è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„åœºæ™¯ä¸­ï¼Œé€šå¸¸éƒ½éœ€è¦Javaè™šæ‹Ÿæœºå…·å¤‡ç±»å‹å¸è½½çš„èƒ½åŠ›ï¼Œä»¥ä¿è¯ä¸ä¼šå¯¹æ–¹æ³•åŒºé€ æˆè¿‡å¤§çš„å†…å­˜å‹åŠ›ã€‚</p>
<h2 id="8è¿è¡Œæ—¶æ•°æ®åŒºæ€»ç»“">8ã€è¿è¡Œæ—¶æ•°æ®åŒºæ€»ç»“</h2>
<ul>
<li>çº¿ç¨‹ç§æœ‰ç»“æ„ï¼šç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ</li>
<li>æ¯ä¸ªè™šæ‹Ÿæœºæ ˆç”±ç”±å…·ä½“çš„æ ˆå¸§ç»„æˆï¼Œåœ¨æ ˆå¸§çš„åŠ¨æ€é“¾æ¥ä¸­ï¼Œä¿å­˜è‡³å¯¹æ–¹æ³•çš„å¼•ç”¨</li>
<li>æ–¹æ³•åŒºåœ¨ JDK7 ä¹‹å‰ï¼Œä½¿ç”¨æ°¸ä¹…ä»£å®ç°ï¼Œåœ¨ JDK8 ä¹‹åï¼Œä½¿ç”¨å…ƒç©ºé—´å®ç°</li>
<li>Minor GC é’ˆå¯¹äºæ–°ç”ŸåŒºï¼ŒMajor GC é’ˆå¯¹äºè€å¹´åŒºï¼ŒFull GC é’ˆå¯¹äºæ•´ä¸ªå †ç©ºé—´å’Œæ–¹æ³•åŒº</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/jvm_first/184.png" alt=""></p>
<h2 id="9å¤§åœºé¢è¯•é¢˜">9ã€å¤§åœºé¢è¯•é¢˜</h2>
<ol>
<li>ç™¾åº¦
<ul>
<li>ä¸‰é¢ï¼šè¯´ä¸€ä¸‹JVMå†…å­˜æ¨¡å‹å§ï¼Œæœ‰å“ªäº›åŒºï¼Ÿåˆ†åˆ«å¹²ä»€ä¹ˆçš„ï¼Ÿ</li>
</ul>
</li>
<li>èš‚èšé‡‘æœï¼š
<ul>
<li>Java8çš„å†…å­˜åˆ†ä»£æ”¹è¿›</li>
<li>JVMå†…å­˜åˆ†å“ªå‡ ä¸ªåŒºï¼Œæ¯ä¸ªåŒºçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸€é¢ï¼šJVMå†…å­˜åˆ†å¸ƒ/å†…å­˜ç»“æ„ï¼Ÿæ ˆå’Œå †çš„åŒºåˆ«ï¼Ÿå †çš„ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆä¸¤ä¸ªsurvivoråŒºï¼Ÿ</li>
<li>äºŒé¢ï¼šEdenå’Œsurviorçš„æ¯”ä¾‹åˆ†é…</li>
</ul>
</li>
<li>å°ç±³ï¼š
<ul>
<li>jvmå†…å­˜åˆ†åŒºï¼Œä¸ºä»€ä¹ˆè¦æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£</li>
</ul>
</li>
<li>å­—èŠ‚è·³åŠ¨ï¼š
<ul>
<li>äºŒé¢ï¼šJavaçš„å†…å­˜åˆ†åŒº</li>
<li>äºŒé¢ï¼šè®²è®²vmè¿è¡Œæ—¶æ•°æ®åº“åŒº</li>
<li>ä»€ä¹ˆæ—¶å€™å¯¹è±¡ä¼šè¿›å…¥è€å¹´ä»£ï¼Ÿ</li>
</ul>
</li>
<li>äº¬ä¸œï¼š
<ul>
<li>JVMçš„å†…å­˜ç»“æ„ï¼ŒEdenå’ŒSurvivoræ¯”ä¾‹ã€‚</li>
<li>JVMå†…å­˜ä¸ºä»€ä¹ˆè¦åˆ†æˆæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ï¼ŒæŒä¹…ä»£ã€‚æ–°ç”Ÿä»£ä¸­ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºEdenå’Œsurvivorã€‚</li>
</ul>
</li>
<li>å¤©çŒ«ï¼š
<ul>
<li>ä¸€é¢ï¼šJvmå†…å­˜æ¨¡å‹ä»¥åŠåˆ†åŒºï¼Œéœ€è¦è¯¦ç»†åˆ°æ¯ä¸ªåŒºæ”¾ä»€ä¹ˆã€‚</li>
<li>ä¸€é¢ï¼šJVMçš„å†…å­˜æ¨¡å‹ï¼ŒJava8åšäº†ä»€ä¹ˆæ”¹</li>
</ul>
</li>
<li>æ‹¼å¤šå¤šï¼š
<ul>
<li>JVMå†…å­˜åˆ†å“ªå‡ ä¸ªåŒºï¼Œæ¯ä¸ªåŒºçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
</li>
<li>ç¾å›¢ï¼š
<ul>
<li>javaå†…å­˜åˆ†é…</li>
<li>jvmçš„æ°¸ä¹…ä»£ä¸­ä¼šå‘ç”Ÿåƒåœ¾å›æ”¶å—ï¼Ÿ</li>
<li>ä¸€é¢ï¼šjvmå†…å­˜åˆ†åŒºï¼Œä¸ºä»€ä¹ˆè¦æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Ÿ</li>
</ul>
</li>
</ol>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">yuanshuai</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        0001-01-01
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/yuanshuai1122.github.io/tags/java/">Java</a>
          <a href="/yuanshuai1122.github.io/tags/jvm/">JVM</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="yuanshuai1122.github.io/post/jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC8%E7%AB%A0%E5%A0%86-jvm%E5%86%85%E5%AD%98%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AF%87%E7%AC%AC8%E7%AB%A0%E5%A0%86/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">JVMå†…å­˜ä¸åƒåœ¾å›æ”¶ç¯‡ç¬¬8ç« å †</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="yuanshuai1122.github.io/post/linux%E4%B9%8Bvi%E5%92%8Cvim%E7%BC%96%E8%BE%91%E5%99%A8-linux%E4%B9%8Bvi%E5%92%8Cvim%E7%BC%96%E8%BE%91%E5%99%A8/">
            <span class="next-text nav-default">Linuxä¹‹viå’Œvimç¼–è¾‘å™¨</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="http://localhost:1313" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="http://localhost:1313" class="iconfont icon-twitter" title="twitter"></a>
      <a href="http://localhost:1313" class="iconfont icon-facebook" title="facebook"></a>
      <a href="http://localhost:1313" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="http://localhost:1313" class="iconfont icon-google" title="google"></a>
      <a href="http://localhost:1313" class="iconfont icon-github" title="github"></a>
      <a href="http://localhost:1313" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://localhost:1313" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://localhost:1313" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-pocket" title="pocket"></a>
      <a href="http://localhost:1313" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="http://localhost:1313" class="iconfont icon-instagram" title="instagram"></a>
      <a href="http://localhost:1313" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="yuanshuai1122.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2023<span class="heart"><i class="iconfont icon-heart"></i></span><span>yuanshuai</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script>
    var languageCode = "zh-cn".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/yuanshuai1122.github.io/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
