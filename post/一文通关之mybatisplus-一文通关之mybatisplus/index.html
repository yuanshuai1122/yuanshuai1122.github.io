<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ä¸€æ–‡é€šå…³ä¹‹MybatisPlus - ğŸ§€ - ä½ å¥½</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="yuanshuai" /><meta name="description" content="MyBatisPlus 1ã€MyBatisPlusæ¦‚è¿° éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyB" /><meta name="keywords" content="blog, yuanshuai, yyss" />






<meta name="generator" content="Hugo 0.119.0 with theme even" />


<link rel="canonical" href="yuanshuai1122.github.io/post/%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus-%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus/" />
<link rel="apple-touch-icon" sizes="180x180" href="/yuanshuai1122.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/yuanshuai1122.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/yuanshuai1122.github.io/favicon-16x16.png">
<link rel="manifest" href="/yuanshuai1122.github.io/manifest.json">
<link rel="mask-icon" href="/yuanshuai1122.github.io/safari-pinned-tab.svg" color="#5bbad5">



<link href="/yuanshuai1122.github.io/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="ä¸€æ–‡é€šå…³ä¹‹MybatisPlus" />
<meta property="og:description" content="MyBatisPlus 1ã€MyBatisPlusæ¦‚è¿° éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyB" />
<meta property="og:type" content="article" />
<meta property="og:url" content="yuanshuai1122.github.io/post/%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus-%E4%B8%80%E6%96%87%E9%80%9A%E5%85%B3%E4%B9%8Bmybatisplus/" /><meta property="article:section" content="post" />


<meta itemprop="name" content="ä¸€æ–‡é€šå…³ä¹‹MybatisPlus">
<meta itemprop="description" content="MyBatisPlus 1ã€MyBatisPlusæ¦‚è¿° éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyB">

<meta itemprop="wordCount" content="5235">
<meta itemprop="keywords" content="mybatisplus," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ä¸€æ–‡é€šå…³ä¹‹MybatisPlus"/>
<meta name="twitter:description" content="MyBatisPlus 1ã€MyBatisPlusæ¦‚è¿° éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyB"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">CNshuaiyuan</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="yuanshuai1122.github.io/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="yuanshuai1122.github.io/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="yuanshuai1122.github.io/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="yuanshuai1122.github.io/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">CNshuaiyuan</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="yuanshuai1122.github.io/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ä¸€æ–‡é€šå…³ä¹‹MybatisPlus</h1>

      <div class="post-meta">
        <span class="post-time"> 0001-01-01 </span>
        
          <span class="more-meta"> çº¦ 5235 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 11 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#mybatisplus"><strong>MyBatisPlus</strong></a>
      <ul>
        <li><a href="#1mybatisplusæ¦‚è¿°"><strong>1ã€MyBatisPlus</strong>æ¦‚è¿°</a></li>
        <li><a href="#2å¿«é€Ÿå…¥é—¨">2ã€<strong>å¿«é€Ÿå…¥é—¨</strong></a></li>
        <li><a href="#3é…ç½®æ—¥å¿—">3ã€<strong>é…ç½®æ—¥å¿—</strong></a></li>
        <li><a href="#4crudæ‰©å±•">4ã€<strong>CRUD</strong>æ‰©å±•</a>
          <ul>
            <li><a href="#41æ’å…¥æ“ä½œ">4.1ã€<strong>æ’å…¥æ“ä½œ</strong></a></li>
            <li><a href="#42ä¸»é”®ç”Ÿæˆç­–ç•¥">4.2ã€<strong>ä¸»é”®ç”Ÿæˆç­–ç•¥</strong></a></li>
            <li><a href="#43æ›´æ–°æ“ä½œ">4.3ã€<strong>æ›´æ–°æ“ä½œ</strong></a></li>
            <li><a href="#44è‡ªåŠ¨å¡«å……">4.4ã€<strong>è‡ªåŠ¨å¡«å……</strong></a></li>
            <li><a href="#45ä¹è§‚é”">4.5ã€<strong>ä¹è§‚é”</strong></a></li>
            <li><a href="#46æŸ¥è¯¢æ“ä½œ">4.6ã€<strong>æŸ¥è¯¢æ“ä½œ</strong></a></li>
            <li><a href="#47åˆ†é¡µæŸ¥è¯¢">4.7ã€<strong>åˆ†é¡µæŸ¥è¯¢</strong></a></li>
            <li><a href="#48åˆ é™¤æ“ä½œ">4.8ã€<strong>åˆ é™¤æ“ä½œ</strong></a></li>
            <li><a href="#49é€»è¾‘åˆ é™¤">4.9ã€<strong>é€»è¾‘åˆ é™¤</strong></a></li>
            <li><a href="#410æ€§èƒ½åˆ†ææ’ä»¶">4.10ã€<strong>æ€§èƒ½åˆ†ææ’ä»¶</strong></a></li>
            <li><a href="#411æ¡ä»¶æ„é€ å™¨">4.11ã€<strong>æ¡ä»¶æ„é€ å™¨</strong></a></li>
            <li><a href="#412ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨"><strong>4.12</strong>ã€ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
  <div class="post-outdated">
    <div class="warn">
      <p>ã€æ³¨æ„ã€‘æœ€åæ›´æ–°äº <span class="timeago" datetime="0001-01-01T00:00:00" title="January 1, 0001">January 1, 0001</span>ï¼Œæ–‡ä¸­å†…å®¹å¯èƒ½å·²è¿‡æ—¶ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p>
    </div>
  </div>
    <div class="post-content">
      <h1 id="mybatisplus"><strong>MyBatisPlus</strong></h1>
<h2 id="1mybatisplusæ¦‚è¿°"><strong>1ã€MyBatisPlus</strong>æ¦‚è¿°</h2>
<p>éœ€è¦çš„åŸºç¡€:æŠŠæˆ‘çš„MyBatisã€Springã€SpringMVCå°±å¯ä»¥å­¦ä¹ è¿™ä¸ªäº†! ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢?MyBatisPluså¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡å·¥ä½œæ—¶é—´ï¼Œæ‰€æœ‰çš„CRUDä»£ç å®ƒéƒ½å¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆ! JPA ã€ tk-mapperã€MyBatisPlus
å·æ‡’çš„!</p>
<blockquote>
<p>ç®€ä»‹</p>
</blockquote>
<p>æ˜¯ä»€ä¹ˆ? MyBatis æœ¬æ¥å°±æ˜¯ç®€åŒ– JDBC æ“ä½œçš„!</p>
<p>å®˜ç½‘:https://mp.baomidou.com/ MyBatis Plusï¼Œç®€åŒ– MyBatis !</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/1.png" alt=""></p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/2.png" alt=""></p>
<blockquote>
<p>ç‰¹æ€§</p>
</blockquote>
<p><strong>æ— ä¾µå…¥</strong>:åªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</p>
<p><strong>æŸè€—å°</strong>:å¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œï¼Œ BaseMapper</p>
<p><strong>å¼ºå¤§çš„</strong> <strong>CRUD</strong> <strong>æ“ä½œ</strong>:å†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚, ä»¥åç®€å•çš„CRUDæ“ä½œï¼Œå®ƒä¸ç”¨è‡ªå·±ç¼–å†™äº†!</p>
<p><strong>æ”¯æŒ</strong> <strong>Lambda</strong> <strong>å½¢å¼è°ƒç”¨</strong>:é€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</p>
<p><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>:æ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥(å†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequence)ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</p>
<p><strong>æ”¯æŒ</strong> <strong>ActiveRecord</strong> <strong>æ¨¡å¼</strong>:æ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§ çš„ CRUD æ“ä½œ</p>
<p><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>:æ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥( Write once, use anywhere )</p>
<p><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>:é‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨(è‡ªåŠ¨å¸®ä½ ç”Ÿæˆä»£ç )</p>
<p><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>:åŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒ äºæ™®é€š List æŸ¥è¯¢</p>
<p><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>:æ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€ Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</p>
<p><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>:å¯è¾“å‡º Sql è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢ æŸ¥è¯¢</p>
<p><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>:æä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯ æ“ä½œ</p>
<h2 id="2å¿«é€Ÿå…¥é—¨">2ã€<strong>å¿«é€Ÿå…¥é—¨</strong></h2>
<p>åœ°å€:https://mp.baomidou.com/guide/quick-start.html#åˆå§‹åŒ–å·¥ç¨‹</p>
<p>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶:</p>
<p>1ã€å¯¼å…¥å¯¹åº”çš„ä¾èµ–</p>
<p>2ã€ç ”ç©¶ä¾èµ–å¦‚ä½•é…ç½®</p>
<p>3ã€ä»£ç å¦‚ä½•ç¼–å†™</p>
<p>4ã€æé«˜æ‰©å±•æŠ€æœ¯èƒ½åŠ›!</p>
<blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<p>1ã€åˆ›å»ºæ•°æ®åº“ <code>mybatis_plus</code></p>
<p>2ã€åˆ›å»ºuserè¡¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="k">user</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">id</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;ä¸»é”®ID&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;å§“å&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">INT</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;å¹´é¾„&#39;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">email</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;é‚®ç®±&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Jone&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test1@baomidou.com&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Jack&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test2@baomidou.com&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Tom&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test3@baomidou.com&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Sandy&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test4@baomidou.com&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Billie&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test5@baomidou.com&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- çœŸå®å¼€å‘ä¸­ï¼Œversion(ä¹è§‚é”)ã€deleted(é€»è¾‘åˆ é™¤)ã€gmt_createã€gmt_modified
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>3ã€ç¼–å†™é¡¹ç›®ï¼Œåˆå§‹åŒ–é¡¹ç›®!ä½¿ç”¨SpringBootåˆå§‹åŒ–!</p>
<p>4ã€å¯¼å…¥ä¾èµ–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!-- æ•°æ®åº“é©±åŠ¨ --&gt;</span> <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- lombok --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- mybatis-plus --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- mybatis-plus æ˜¯è‡ªå·±å¼€å‘ï¼Œå¹¶éå®˜æ–¹çš„! --&gt;</span> <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>3.0.5<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯´æ˜:æˆ‘ä»¬ä½¿ç”¨ mybatis-plus å¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡çš„ä»£ç ï¼Œå°½é‡ä¸è¦åŒæ—¶å¯¼å…¥ mybatis å’Œ mybatis- plus!ç‰ˆæœ¬çš„å·®å¼‚!</p>
<p>5ã€è¿æ¥æ•°æ®åº“!è¿™ä¸€æ­¥å’Œ mybatis ç›¸åŒ!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"># mysql 5 é©±åŠ¨ä¸åŒ com.mysql.jdbc.Driver
</span></span><span class="line"><span class="cl"># mysql 8 é©±åŠ¨ä¸åŒcom.mysql.cj.jdbc.Driverã€éœ€è¦å¢åŠ æ—¶åŒºçš„é…ç½® serverTimezone=GMT%2B8
</span></span><span class="line"><span class="cl">spring.datasource.username=root
</span></span><span class="line"><span class="cl">spring.datasource.password=123456 spring.datasource.url=jdbc:mysql://localhost:3306/mybatis_plus? useSSL=false<span class="err">&amp;</span>useUnicode=true<span class="err">&amp;</span>characterEncoding=utf-8<span class="err">&amp;</span>serverTimezone=GMT%2B8 spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¼ ç»Ÿæ–¹å¼pojo-dao(è¿æ¥mybatisï¼Œé…ç½®mapper.xmlæ–‡ä»¶)-service-controller</p>
<p>6ã€ä½¿ç”¨äº†mybatis-plus ä¹‹å</p>
<ul>
<li>pojo</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Data</span>
</span></span><span class="line"><span class="cl"><span class="nd">@AllArgsConstructor</span>
</span></span><span class="line"><span class="cl"><span class="nd">@NoArgsConstructor</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>mapperæ¥å£</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.kuang.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.core.mapper.BaseMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.kuang.pojo.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// åœ¨å¯¹åº”çš„Mapperä¸Šé¢ç»§æ‰¿åŸºæœ¬çš„ç±» BaseMapper
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Repository</span> <span class="c1">// ä»£è¡¨æŒä¹…å±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="kd">extends</span> <span class="n">BaseMapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ‰€æœ‰çš„CRUDæ“ä½œéƒ½å·²ç»ç¼–å†™å®Œæˆäº†
</span></span></span><span class="line"><span class="cl"><span class="c1">// ä½ ä¸éœ€è¦åƒä»¥å‰çš„é…ç½®ä¸€å¤§å †æ–‡ä»¶äº†! }
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>æ³¨æ„ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»å¯åŠ¨ç±»ä¸Šå»æ‰«ææˆ‘ä»¬çš„mapperåŒ…ä¸‹çš„æ‰€æœ‰æ¥å£</p>
<p><code>@MapperScan(&quot;com.kuang.mapper&quot;)</code></p>
</li>
<li>
<p>æµ‹è¯•ç±»ä¸­æµ‹è¯•</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@SpringBootTest</span>
</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">MybatisPlusApplicationTests</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ç»§æ‰¿äº†BaseMapperï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ¥è‡ªå·±çˆ¶ç±» // æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ‰©å±•æ–¹æ³•! @Autowired
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">private</span> <span class="n">UserMapper</span> <span class="n">userMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">contextLoads</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å‚æ•°æ˜¯ä¸€ä¸ª Wrapper ï¼Œæ¡ä»¶æ„é€ å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ null // æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç»“æœ</li>
</ul>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/3.png" alt=""></p>
<blockquote>
<p>æ€è€ƒé—®é¢˜?</p>
</blockquote>
<p>1ã€SQLè°å¸®æˆ‘ä»¬å†™çš„ ? MyBatis-Plus éƒ½å†™å¥½äº†</p>
<p>2ã€æ–¹æ³•å“ªé‡Œæ¥çš„? MyBatis-Plus éƒ½å†™å¥½äº†</p>
<h2 id="3é…ç½®æ—¥å¿—">3ã€<strong>é…ç½®æ—¥å¿—</strong></h2>
<p>æˆ‘ä»¬æ‰€æœ‰çš„sqlç°åœ¨æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬å¸Œæœ›çŸ¥é“å®ƒæ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦çœ‹æ—¥å¿—!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="c1"># é…ç½®æ—¥å¿— </span>
</span></span><span class="line"><span class="cl"><span class="na">mybatis-plus.configuration.log-impl</span><span class="o">=</span><span class="s">org.apache.ibatis.logging.stdout.StdOutImpl</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/4.png" alt=""></p>
<p>é…ç½®å®Œæ¯•æ—¥å¿—ä¹‹åï¼Œåé¢çš„å­¦ä¹ å°±éœ€è¦æ³¨æ„è¿™ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„SQL.</p>
<h2 id="4crudæ‰©å±•">4ã€<strong>CRUD</strong>æ‰©å±•</h2>
<h3 id="41æ’å…¥æ“ä½œ">4.1ã€<strong>æ’å…¥æ“ä½œ</strong></h3>
<blockquote>
<p>Insert æ’å…¥</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•æ’å…¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testInsert</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">  <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;Tomcatist&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">&#34;321672102@qq.com&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆid 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span> <span class="c1">// å—å½±å“çš„è¡Œæ•° 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// å‘ç°ï¼Œidä¼šè‡ªåŠ¨å›å¡«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/5.png" alt=""></p>
<blockquote>
<p>æ•°æ®åº“æ’å…¥çš„idçš„é»˜è®¤å€¼ä¸º:å…¨å±€çš„å”¯ä¸€id</p>
</blockquote>
<h3 id="42ä¸»é”®ç”Ÿæˆç­–ç•¥">4.2ã€<strong>ä¸»é”®ç”Ÿæˆç­–ç•¥</strong></h3>
<blockquote>
<p>é»˜è®¤ ID_WORKER å…¨å±€å”¯ä¸€id</p>
</blockquote>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€idç”Ÿæˆ:https://www.cnblogs.com/haoxinyue/p/5208136.html</p>
<p><strong>é›ªèŠ±ç®—æ³•:</strong></p>
<p>snowflakeæ˜¯Twitterå¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ªlongå‹çš„IDã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯:ä½¿ç”¨41bitä½œä¸º æ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„ID(5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨ID)ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·(æ„å‘³ ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª ID)ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0ã€‚å¯ä»¥ä¿è¯å‡ ä¹å…¨çƒå”¯ ä¸€!</p>
<blockquote>
<p>ä¸»é”®è‡ªå¢</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦é…ç½®ä¸»é”®è‡ªå¢:</p>
<p>1ã€å®ä½“ç±»å­—æ®µä¸Š <code>@TableId(type = IdType.AUTO)</code></p>
<p>2ã€æ•°æ®åº“å­—æ®µä¸€å®šè¦æ˜¯è‡ªå¢!</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/6.png" alt=""></p>
<p>3ã€å†æ¬¡æµ‹è¯•æ’å…¥å³å¯!</p>
<blockquote>
<p>å…¶ä¸çš„æºç è§£é‡Š</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">IdType</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="n">AUTO</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="c1">// æ•°æ®åº“idè‡ªå¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">NONE</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="c1">// æœªè®¾ç½®ä¸»é”®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">INPUT</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="c1">// æ‰‹åŠ¨è¾“å…¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ID_WORKER</span><span class="o">(</span><span class="mi">3</span><span class="o">),</span> <span class="c1">// é»˜è®¤çš„å…¨å±€å”¯ä¸€id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">UUID</span><span class="o">(</span><span class="mi">4</span><span class="o">),</span> <span class="c1">// å…¨å±€å”¯ä¸€id uuid ID_WORKER_STR(5); //ID_WORKER å­—ç¬¦ä¸²è¡¨ç¤ºæ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="43æ›´æ–°æ“ä½œ">4.3ã€<strong>æ›´æ–°æ“ä½œ</strong></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•æ›´æ–°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testUpdate</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// é€šè¿‡æ¡ä»¶è‡ªåŠ¨æ‹¼æ¥åŠ¨æ€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">sql</span> <span class="n">user</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="mi">6L</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;Tomcatist&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">18</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ³¨æ„:updateById ä½†æ˜¯å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡! 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">updateById</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€æœ‰çš„sqléƒ½æ˜¯è‡ªåŠ¨å¸®ä½ åŠ¨æ€é…ç½®çš„!</p>
<h3 id="44è‡ªåŠ¨å¡«å……">4.4ã€<strong>è‡ªåŠ¨å¡«å……</strong></h3>
<p>åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´!è¿™äº›ä¸ªæ“ä½œä¸€ééƒ½æ˜¯è‡ªåŠ¨åŒ–å®Œæˆçš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ‰‹åŠ¨æ›´æ–°!</p>
<p>é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œ:æ‰€æœ‰çš„æ•°æ®åº“è¡¨:gmt_createã€gmt_modifiedå‡ ä¹æ‰€æœ‰çš„è¡¨éƒ½è¦é…ç½®ä¸Š!è€Œä¸”éœ€ è¦è‡ªåŠ¨åŒ–!</p>
<blockquote>
<p>æ–¹å¼ä¸€:æ•°æ®åº“çº§åˆ«(å·¥ä½œä¸­ä¸å…è®¸ä½ ä¿®æ”¹æ•°æ®åº“)</p>
</blockquote>
<p>1ã€åœ¨è¡¨ä¸­æ–°å¢å­—æ®µ create_time, update_time</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/7.png" alt=""></p>
<p>2ã€å†æ¬¡æµ‹è¯•æ’å…¥æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠå®ä½“ç±»åŒæ­¥!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="kd">private</span> <span class="n">Date</span> <span class="n">createTime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"> <span class="kd">private</span> <span class="n">Date</span> <span class="n">updateTime</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3ã€å†æ¬¡æ›´æ–°æŸ¥çœ‹ç»“æœå³å¯</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/8.png" alt=""></p>
<blockquote>
<p>æ–¹å¼äºŒ:ä»£ç çº§åˆ«</p>
</blockquote>
<p>1ã€åˆ é™¤æ•°æ®åº“çš„é»˜è®¤å€¼ã€æ›´æ–°æ“ä½œ!</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/9.png" alt=""></p>
<p>2ã€å®ä½“ç±»å­—æ®µå±æ€§ä¸Šéœ€è¦å¢åŠ æ³¨è§£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// å­—æ®µæ·»åŠ å¡«å……å†…å®¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@TableField</span><span class="o">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Date</span> <span class="n">createTime</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@TableField</span><span class="o">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT_UPDATE</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Date</span> <span class="n">updateTime</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3ã€ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªæ³¨è§£å³å¯!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.kuang.handler</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.core.handlers.MetaObjectHandler</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.reflection.MetaObject</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Slf4j</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Component</span> <span class="c1">// ä¸€å®šä¸è¦å¿˜è®°æŠŠå¤„ç†å™¨åŠ åˆ°IOCå®¹å™¨ä¸­!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMetaObjectHandler</span> <span class="kd">implements</span> <span class="n">MetaObjectHandler</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertFill</span><span class="o">(</span><span class="n">MetaObject</span> <span class="n">metaObject</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;start insert fill.....&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// setFieldValByName(String fieldName, Object fieldVal, MetaObject
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">metaObject</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">setFieldValByName</span><span class="o">(</span><span class="s">&#34;createTime&#34;</span><span class="o">,</span><span class="k">new</span> <span class="n">Date</span><span class="o">(),</span><span class="n">metaObject</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">setFieldValByName</span><span class="o">(</span><span class="s">&#34;updateTime&#34;</span><span class="o">,</span><span class="k">new</span> <span class="n">Date</span><span class="o">(),</span><span class="n">metaObject</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateFill</span><span class="o">(</span><span class="n">MetaObject</span> <span class="n">metaObject</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;start update fill.....&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">setFieldValByName</span><span class="o">(</span><span class="s">&#34;updateTime&#34;</span><span class="o">,</span><span class="k">new</span> <span class="n">Date</span><span class="o">(),</span><span class="n">metaObject</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>4ã€æµ‹è¯•æ’å…¥</p>
<p>5ã€æµ‹è¯•æ›´æ–°ã€è§‚å¯Ÿæ—¶é—´å³å¯!</p>
<h3 id="45ä¹è§‚é”">4.5ã€<strong>ä¹è§‚é”</strong></h3>
<blockquote>
<p>ä¹è§‚é” : æ•…åæ€æ„ååˆ†ä¹è§‚ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆä¸å»ä¸Šé”!å¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œ å†æ¬¡æ›´æ–°å€¼æµ‹è¯•</p>
<p>æ‚²è§‚é”:æ•…åæ€æ„ååˆ†æ‚²è§‚ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºæ€»æ˜¯å‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¼šä¸Šé”!å†å»æ“ä½œ!</p>
</blockquote>
<p>æˆ‘ä»¬è¿™é‡Œä¸»è¦è®²è§£ ä¹è§‚é”æœºåˆ¶! ä¹è§‚é”å®ç°æ–¹å¼:</p>
<ul>
<li>
<p>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version</p>
</li>
<li>
<p>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ªversion</p>
</li>
<li>
<p>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion</p>
</li>
<li>
<p>å¦‚æœversionä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nl">ä¹è§‚é”:</span><span class="mi">1</span><span class="err">ã€</span><span class="n">å…ˆæŸ¥è¯¢</span><span class="err">ï¼Œ</span><span class="n">è·å¾—ç‰ˆæœ¬å·</span> <span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">A</span>
</span></span><span class="line"><span class="cl"><span class="n">update</span> <span class="n">user</span> <span class="n">set</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;tomcatist&#34;</span><span class="o">,</span> <span class="n">version</span> <span class="o">=</span> <span class="n">version</span> <span class="o">+</span> <span class="mi">1</span> <span class="n">where</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">and</span> <span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="o">--</span> <span class="n">B</span> <span class="n">çº¿ç¨‹æŠ¢å…ˆå®Œæˆ</span><span class="err">ï¼Œ</span><span class="n">è¿™ä¸ªæ—¶å€™</span> <span class="n">version</span> <span class="o">=</span> <span class="mi">2</span><span class="err">ï¼Œ</span><span class="n">ä¼šå¯¼è‡´</span> <span class="n">A</span> <span class="n">ä¿®æ”¹å¤±è´¥</span><span class="o">!</span> <span class="n">update</span> <span class="n">user</span> <span class="n">set</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#34;tomcatist&#34;</span><span class="o">,</span> <span class="n">version</span> <span class="o">=</span> <span class="n">version</span> <span class="o">+</span> <span class="mi">1</span> <span class="n">where</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">2</span> <span class="n">and</span> <span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æµ‹è¯•ä¸€ä¸‹MPçš„ä¹è§‚é”æ’ä»¶</p>
</blockquote>
<p>1ã€ç»™æ•°æ®åº“ä¸­å¢åŠ versionå­—æ®µ!</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/10.png" alt=""></p>
<p>2ã€æˆ‘ä»¬å®ä½“ç±»åŠ å¯¹åº”çš„å­—æ®µ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="nd">@Version</span> <span class="c1">//ä¹è§‚é”Versionæ³¨è§£ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="kd">private</span> <span class="n">Integer</span> <span class="n">version</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3ã€æ³¨å†Œç»„ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æ‰«ææˆ‘ä»¬çš„ mapper æ–‡ä»¶å¤¹ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@MapperScan</span><span class="o">(</span><span class="s">&#34;com.kuang.mapper&#34;</span><span class="o">)</span> 
</span></span><span class="line"><span class="cl"><span class="nd">@EnableTransactionManagement</span> 
</span></span><span class="line"><span class="cl"><span class="nd">@Configuration</span> <span class="c1">// é…ç½®ç±»
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBatisPlusConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ³¨å†Œä¹è§‚é”æ’ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">OptimisticLockerInterceptor</span> <span class="nf">optimisticLockerInterceptor</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">OptimisticLockerInterceptor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>4ã€æµ‹è¯•ä¸€ä¸‹!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•ä¹è§‚é”æˆåŠŸ!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testOptimisticLocker</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 1ã€æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="c1">// 2ã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ user.setName(&#34;kuangshen&#34;); 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">user</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">&#34;24736743@qq.com&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 3ã€æ‰§è¡Œæ›´æ–°æ“ä½œ userMapper.updateById(user);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•ä¹è§‚é”å¤±è´¥!å¤šçº¿ç¨‹ä¸‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testOptimisticLocker2</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl"><span class="c1">// çº¿ç¨‹ 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;kuangshen111&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">&#34;24736743@qq.com&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ¨¡æ‹Ÿå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œäº†æ’é˜Ÿæ“ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;kuangshen222&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">user2</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">&#34;24736743@qq.com&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">userMapper</span><span class="o">.</span><span class="na">updateById</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è‡ªæ—‹é”æ¥å¤šæ¬¡å°è¯•æäº¤!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">userMapper</span><span class="o">.</span><span class="na">updateById</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// å¦‚æœæ²¡æœ‰ä¹è§‚é”å°±ä¼šè¦†ç›–æ’é˜Ÿçº¿ç¨‹çš„å€¼! }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/11.png" alt=""></p>
<h3 id="46æŸ¥è¯¢æ“ä½œ">4.6ã€<strong>æŸ¥è¯¢æ“ä½œ</strong></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•æŸ¥è¯¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSelectById</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•æ‰¹é‡æŸ¥è¯¢!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSelectByBatchId</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectBatchIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŒ‰æ¡ä»¶æŸ¥è¯¢ä¹‹ä¸€ä½¿ç”¨mapæ“ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSelectByBatchIds</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl"><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span> <span class="c1">// è‡ªå®šä¹‰è¦æŸ¥è¯¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="s">&#34;ç‹‚ç¥è¯´Java&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">,</span><span class="mi">3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectByMap</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="47åˆ†é¡µæŸ¥è¯¢">4.7ã€<strong>åˆ†é¡µæŸ¥è¯¢</strong></h3>
<p>1ã€åŸå§‹çš„ limit è¿›è¡Œåˆ†é¡µ</p>
<p>2ã€pageHelper ç¬¬ä¸‰æ–¹æ’ä»¶</p>
<p>3ã€MP å…¶å®ä¹Ÿå†…ç½®äº†åˆ†é¡µæ’ä»¶!</p>
<blockquote>
<p>å¦‚ä½•ä½¿ç”¨!</p>
</blockquote>
<p>1ã€é…ç½®æ‹¦æˆªå™¨ç»„ä»¶å³å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// åˆ†é¡µæ’ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">PaginationInterceptor</span> <span class="nf">paginationInterceptor</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>  <span class="k">new</span> <span class="n">PaginationInterceptor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>2ã€ç›´æ¥ä½¿ç”¨Pageå¯¹è±¡å³å¯!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•åˆ†é¡µæŸ¥è¯¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testPage</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å‚æ•°ä¸€:å½“å‰é¡µ
</span></span></span><span class="line"><span class="cl"><span class="c1">// å‚æ•°äºŒ:é¡µé¢å¤§å°
</span></span></span><span class="line"><span class="cl"><span class="c1">// ä½¿ç”¨äº†åˆ†é¡µæ’ä»¶ä¹‹åï¼Œæ‰€æœ‰çš„åˆ†é¡µæ“ä½œä¹Ÿå˜å¾—ç®€å•çš„! 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Page</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">&lt;&gt;(</span><span class="mi">2</span><span class="o">,</span><span class="mi">5</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">userMapper</span><span class="o">.</span><span class="na">selectPage</span><span class="o">(</span><span class="n">page</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="n">page</span><span class="o">.</span><span class="na">getRecords</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">page</span><span class="o">.</span><span class="na">getTotal</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="48åˆ é™¤æ“ä½œ">4.8ã€<strong>åˆ é™¤æ“ä½œ</strong></h3>
<p>1ã€æ ¹æ® id åˆ é™¤è®°å½•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æµ‹è¯•åˆ é™¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteById</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">userMapper</span><span class="o">.</span><span class="na">deleteById</span><span class="o">(</span><span class="mi">1240620674645544965L</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// é€šè¿‡idæ‰¹é‡åˆ é™¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteBatchId</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl"> 		<span class="n">userMapper</span><span class="o">.</span><span class="na">deleteBatchIds</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1240620674645544961L</span><span class="o">,</span><span class="mi">124062067464554496</span>
</span></span><span class="line"><span class="cl"><span class="mi">2L</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// é€šè¿‡mapåˆ é™¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteMap</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">  <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="s">&#34;ç‹‚ç¥è¯´Java&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">userMapper</span><span class="o">.</span><span class="na">deleteByMap</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬åœ¨å·¥ç»„ä¸­ä¼šé‡åˆ°ä¸€äº›é—®é¢˜:é€»è¾‘åˆ é™¤!</p>
<h3 id="49é€»è¾‘åˆ é™¤">4.9ã€<strong>é€»è¾‘åˆ é™¤</strong></h3>
<blockquote>
<p>ç‰©ç†åˆ é™¤ :ä»æ•°æ®åº“ä¸­ç›´æ¥ç§»é™¤
é€»è¾‘åˆ é™¤ :å†æ•°æ®åº“ä¸­æ²¡æœ‰è¢«ç§»é™¤ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå˜é‡æ¥è®©ä»–å¤±æ•ˆ! deleted = 0 =&gt; deleted = 1s</p>
</blockquote>
<p>ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹è¢«åˆ é™¤çš„è®°å½•!é˜²æ­¢æ•°æ®çš„ä¸¢å¤±ï¼Œç±»ä¼¼äºå›æ”¶ç«™!</p>
<p>æµ‹è¯•ä¸€ä¸‹:</p>
<p>1ã€åœ¨æ•°æ®è¡¨ä¸­å¢åŠ ä¸€ä¸ª deleted å­—æ®µ</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/12.png" alt=""></p>
<p>2ã€å®ä½“ç±»ä¸­å¢åŠ å±æ€§</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="nd">@TableLogic</span> <span class="c1">//é€»è¾‘åˆ é™¤ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span> <span class="kd">private</span> <span class="n">Integer</span> <span class="n">deleted</span><span class="o">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3ã€é…ç½®!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// é€»è¾‘åˆ é™¤ç»„ä»¶!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">ISqlInjector</span> <span class="nf">sqlInjector</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="n">LogicSqlInjector</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="c1"># é…ç½®é€»è¾‘åˆ é™¤ </span>
</span></span><span class="line"><span class="cl"><span class="na">mybatis-plus.global-config.db-config.logic-delete-value</span><span class="o">=</span><span class="s">1 </span>
</span></span><span class="line"><span class="cl"><span class="na">mybatis-plus.global-config.db-config.logic-not-delete-value</span><span class="o">=</span><span class="s">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>4ã€æµ‹è¯•ä¸€ä¸‹åˆ é™¤!</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/13.png" alt=""></p>
<p>è®°å½•ä¾æ—§åœ¨æ•°æ®åº“ï¼Œä½†æ˜¯å€¼ç¡®å·²ç»å˜åŒ–äº†!</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/14.png" alt=""></p>
<p>ä»¥ä¸Šçš„æ‰€æœ‰CRUDæ“ä½œåŠå…¶æ‰©å±•æ“ä½œï¼Œæˆ‘ä»¬éƒ½å¿…é¡»ç²¾é€šæŒæ¡!ä¼šå¤§å¤§æé«˜ä½ çš„å·¥ä½œå’Œå†™é¡¹ç›®çš„æ•ˆç‡!</p>
<h3 id="410æ€§èƒ½åˆ†ææ’ä»¶">4.10ã€<strong>æ€§èƒ½åˆ†ææ’ä»¶</strong></h3>
<p>æˆ‘ä»¬åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ä¸€äº›æ…¢sqlã€‚æµ‹è¯•! druid,,,,,</p>
<p>ä½œç”¨:æ€§èƒ½åˆ†ææ‹¦æˆªå™¨ï¼Œç”¨äºè¾“å‡ºæ¯æ¡ SQL è¯­å¥åŠå…¶æ‰§è¡Œæ—¶é—´ MPä¹Ÿæä¾›æ€§èƒ½åˆ†ææ’ä»¶ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±åœæ­¢è¿è¡Œ!</p>
<p>1ã€å¯¼å…¥æ’ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">* SQLæ‰§è¡Œæ•ˆç‡æ’ä»¶
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Profile</span><span class="o">({</span><span class="s">&#34;dev&#34;</span><span class="o">,</span><span class="s">&#34;test&#34;</span><span class="o">})</span><span class="c1">// è®¾ç½® dev test ç¯å¢ƒå¼€å¯ï¼Œä¿è¯æˆ‘ä»¬çš„æ•ˆç‡ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="n">PerformanceInterceptor</span> <span class="nf">performanceInterceptor</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">PerformanceInterceptor</span> <span class="n">performanceInterceptor</span> <span class="o">=</span> <span class="k">new</span>
</span></span><span class="line"><span class="cl"><span class="n">PerformanceInterceptor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">performanceInterceptor</span><span class="o">.</span><span class="na">setMaxTime</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span> <span class="c1">// msè®¾ç½®sqlæ‰§è¡Œçš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†åˆ™ä¸ æ‰§è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">performanceInterceptor</span><span class="o">.</span><span class="na">setFormat</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// æ˜¯å¦æ ¼å¼åŒ–ä»£ç 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  	<span class="k">return</span> <span class="n">performanceInterceptor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è®°ä½ï¼Œè¦åœ¨SpringBootä¸­é…ç½®ç¯å¢ƒä¸ºdevæˆ–è€… test ç¯å¢ƒ!</p>
<p>2ã€æµ‹è¯•ä½¿ç”¨!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">contextLoads</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å‚æ•°æ˜¯ä¸€ä¸ª Wrapper ï¼Œæ¡ä»¶æ„é€ å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ null 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">  <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/15.png" alt=""></p>
<p>ä½¿ç”¨æ€§èƒ½åˆ†ææ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜æ•ˆç‡!</p>
<h3 id="411æ¡ä»¶æ„é€ å™¨">4.11ã€<strong>æ¡ä»¶æ„é€ å™¨</strong></h3>
<p>ååˆ†é‡è¦:Wrapper</p>
<p>æˆ‘ä»¬å†™ä¸€äº›å¤æ‚çš„sqlå°±å¯ä»¥ä½¿ç”¨å®ƒæ¥æ›¿ä»£!</p>
<p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/16.png" alt=""></p>
<p>1ã€æµ‹è¯•ä¸€ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">contextLoads</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŸ¥è¯¢nameä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼Œå¹¶ä¸”é‚®ç®±ä¸ä¸ºç©ºçš„ç”¨æˆ·ï¼Œå¹´é¾„å¤§äºç­‰äº12 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  	<span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">    <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">isNotNull</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">isNotNull</span><span class="o">(</span><span class="s">&#34;email&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">ge</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">,</span><span class="mi">12</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">userMapper</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="n">wrapper</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span> <span class="c1">// å’Œæˆ‘ä»¬åˆšæ‰å­¦ä¹  çš„mapå¯¹æ¯”ä¸€ä¸‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>2ã€æµ‹è¯•äºŒï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">test2</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŸ¥è¯¢åå­—tom
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">  <span class="n">wrapper</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="s">&#34;tom&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectOne</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span> <span class="c1">// æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œå‡ºç°å¤šä¸ªç»“æœä½¿ç”¨Listæˆ–è€… Map 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>3ã€æµ‹è¯•ä¸‰ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">test3</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æŸ¥è¯¢å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´çš„ç”¨æˆ·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">  <span class="n">wrapper</span><span class="o">.</span><span class="na">between</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">,</span><span class="mi">20</span><span class="o">,</span><span class="mi">30</span><span class="o">);</span> <span class="c1">// åŒºé—´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">Integer</span> <span class="n">count</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectCount</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span><span class="c1">// æŸ¥è¯¢ç»“æœæ•° 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>4ã€æµ‹è¯•å››ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æ¨¡ç³ŠæŸ¥è¯¢ @Test
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">test4</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æŸ¥è¯¢å¹´é¾„åœ¨ 20 ~ 30 å²ä¹‹é—´çš„ç”¨æˆ·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">  <span class="c1">// å·¦å’Œå³ t%
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">wrapper</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">notLike</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="s">&#34;e&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">.</span><span class="na">likeRight</span><span class="o">(</span><span class="s">&#34;email&#34;</span><span class="o">,</span><span class="s">&#34;t&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;&gt;</span> <span class="n">maps</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectMaps</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">maps</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>5ã€æµ‹è¯•äº”,è®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// æ¨¡ç³ŠæŸ¥è¯¢ @Test
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">test5</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">  <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// id åœ¨å­æŸ¥è¯¢ä¸­æŸ¥å‡ºæ¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">wrapper</span><span class="o">.</span><span class="na">inSql</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">,</span><span class="s">&#34;select id from user where id&lt;3&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">objects</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectObjs</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">objects</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>6ã€æµ‹è¯•å…­ï¼Œè®°ä½æŸ¥çœ‹è¾“å‡ºçš„SQLè¿›è¡Œåˆ†æ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//æµ‹è¯•å…­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">test6</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">  <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">  <span class="c1">// é€šè¿‡idè¿›è¡Œæ’åº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">wrapper</span><span class="o">.</span><span class="na">orderByAsc</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">users</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç­‰ç­‰æµ‹è¯•éƒ½ç±»ä¼¼ï¼~</p>
<h3 id="412ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨"><strong>4.12</strong>ã€ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨</h3>
<p>daoã€pojoã€serviceã€controlleréƒ½ç»™æˆ‘è‡ªå·±å»ç¼–å†™å®Œæˆ!</p>
<p>AutoGenerator æ˜¯ MyBatis-Plus çš„ä»£ç ç”Ÿæˆå™¨ï¼Œé€šè¿‡ AutoGenerator å¯ä»¥å¿«é€Ÿç”Ÿæˆ Entityã€Mapperã€Mapper XMLã€Serviceã€Controller ç­‰å„ä¸ªæ¨¡å—çš„ä»£ç ï¼Œæå¤§çš„æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>æµ‹è¯•:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.tom</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.annotation.DbType</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.annotation.FieldFill</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.annotation.IdType</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.annotation.TableField</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.AutoGenerator</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.DataSourceConfig</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.GlobalConfig</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.PackageConfig</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.StrategyConfig</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.po.TableFill</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.rules.DateType</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.baomidou.mybatisplus.generator.config.rules.NamingStrategy</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TomCode</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">// éœ€è¦æ„å»ºä¸€ä¸ª ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨ å¯¹è±¡ AutoGenerator mpg = new AutoGenerator(); 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="c1">// é…ç½®ç­–ç•¥
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">		<span class="c1">// 1ã€å…¨å±€é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">GlobalConfig</span> <span class="n">gc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GlobalConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">String</span> <span class="n">projectPath</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;user.dir&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">gc</span><span class="o">.</span><span class="na">setOutputDir</span><span class="o">(</span><span class="n">projectPath</span><span class="o">+</span><span class="s">&#34;/src/main/java&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">gc</span><span class="o">.</span><span class="na">setAuthor</span><span class="o">(</span><span class="s">&#34;ç‹‚ç¥è¯´&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">gc</span><span class="o">.</span><span class="na">setOpen</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">gc</span><span class="o">.</span><span class="na">setFileOverride</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span> <span class="c1">// æ˜¯å¦è¦†ç›– 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">gc</span><span class="o">.</span><span class="na">setServiceName</span><span class="o">(</span><span class="s">&#34;%sService&#34;</span><span class="o">);</span> <span class="c1">// å»Serviceçš„Iå‰ç¼€ 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">gc</span><span class="o">.</span><span class="na">setIdType</span><span class="o">(</span><span class="n">IdType</span><span class="o">.</span><span class="na">ID_WORKER</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">gc</span><span class="o">.</span><span class="na">setDateType</span><span class="o">(</span><span class="n">DateType</span><span class="o">.</span><span class="na">ONLY_DATE</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">gc</span><span class="o">.</span><span class="na">setSwagger2</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">mpg</span><span class="o">.</span><span class="na">setGlobalConfig</span><span class="o">(</span><span class="n">gc</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//2ã€è®¾ç½®æ•°æ®æº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">DataSourceConfig</span> <span class="n">dsc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataSourceConfig</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">		<span class="n">dsc</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="s">&#34;jdbc:mysql://localhost:3306/kuang_community?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setDriverName</span><span class="o">(</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;123456&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setDbType</span><span class="o">(</span><span class="n">DbType</span><span class="o">.</span><span class="na">MYSQL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dsc</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//3ã€åŒ…çš„é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">PackageConfig</span> <span class="n">pc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PackageConfig</span><span class="o">();</span> 
</span></span><span class="line"><span class="cl">		<span class="n">pc</span><span class="o">.</span><span class="na">setModuleName</span><span class="o">(</span><span class="s">&#34;blog&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">pc</span><span class="o">.</span><span class="na">setParent</span><span class="o">(</span><span class="s">&#34;com.kuang&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">pc</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="s">&#34;entity&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">pc</span><span class="o">.</span><span class="na">setMapper</span><span class="o">(</span><span class="s">&#34;mapper&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">pc</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="s">&#34;service&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">pc</span><span class="o">.</span><span class="na">setController</span><span class="o">(</span><span class="s">&#34;controller&#34;</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">mpg</span><span class="o">.</span><span class="na">setPackageInfo</span><span class="o">(</span><span class="n">pc</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//4ã€ç­–ç•¥é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">StrategyConfig</span> <span class="n">strategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StrategyConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">		<span class="n">strategy</span><span class="o">.</span><span class="na">setInclude</span><span class="o">(</span><span class="s">&#34;blog_tags&#34;</span><span class="o">,</span><span class="s">&#34;course&#34;</span><span class="o">,</span><span class="s">&#34;links&#34;</span><span class="o">,</span><span class="s">&#34;sys_settings&#34;</span><span class="o">,</span><span class="s">&#34;user_record&#34;</span><span class="o">,</span><span class="s">&#34; user_say&#34;</span><span class="o">);</span> <span class="c1">// è®¾ç½®è¦æ˜ å°„çš„è¡¨å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">strategy</span><span class="o">.</span><span class="na">setNaming</span><span class="o">(</span><span class="n">NamingStrategy</span><span class="o">.</span><span class="na">underline_to_camel</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">strategy</span><span class="o">.</span><span class="na">setColumnNaming</span><span class="o">(</span><span class="n">NamingStrategy</span><span class="o">.</span><span class="na">underline_to_camel</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">strategy</span><span class="o">.</span><span class="na">setEntityLombokModel</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// è‡ªåŠ¨lombok;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">strategy</span><span class="o">.</span><span class="na">setLogicDeleteFieldName</span><span class="o">(</span><span class="s">&#34;deleted&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// è‡ªåŠ¨å¡«å……é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">TableFill</span> <span class="n">gmtCreate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TableFill</span><span class="o">(</span><span class="s">&#34;gmt_create&#34;</span><span class="o">,</span> <span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">TableFill</span> <span class="n">gmtModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TableFill</span><span class="o">(</span><span class="s">&#34;gmt_modified&#34;</span><span class="o">,</span><span class="n">FieldFill</span><span class="o">.</span><span class="na">INSERT_UPDATE</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">TableFill</span><span class="o">&gt;</span> <span class="n">tableFills</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span> 
</span></span><span class="line"><span class="cl">		<span class="n">tableFills</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">gmtCreate</span><span class="o">);</span> <span class="n">tableFills</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">gmtModified</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">strategy</span><span class="o">.</span><span class="na">setTableFillList</span><span class="o">(</span><span class="n">tableFills</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">// ä¹è§‚é”
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="n">strategy</span><span class="o">.</span><span class="na">setVersionFieldName</span><span class="o">(</span><span class="s">&#34;version&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">strategy</span><span class="o">.</span><span class="na">setRestControllerStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="n">strategy</span><span class="o">.</span><span class="na">setControllerMappingHyphenStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">//localhost:8080/hello_id_2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">		<span class="n">mpg</span><span class="o">.</span><span class="na">setStrategy</span><span class="o">(</span><span class="n">strategy</span><span class="o">);</span> 
</span></span><span class="line"><span class="cl">		<span class="n">mpg</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span> <span class="c1">//æ‰§è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://hexobbblog.oss-cn-beijing.aliyuncs.com/images/mybatis_plus/17.png" alt=""></p>
<p>è¿™æ ·å…¨éƒ¨éƒ½ä¸€é”®ç”Ÿæˆäº† ï¼</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">yuanshuai</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        0001-01-01
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/yuanshuai1122.github.io/tags/mybatisplus/">mybatisplus</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="yuanshuai1122.github.io/post/%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3tomcat%E5%92%8Cjetty%E4%B9%8B%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84-%E6%B7%B1%E5%85%A5%E6%8B%86%E8%A7%A3tomcat%E5%92%8Cjetty%E4%B9%8B%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">æ·±å…¥æ‹†è§£Tomcatå’ŒJettyä¹‹æ•´ä½“æ¶æ„</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="yuanshuai1122.github.io/post/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
            <span class="next-text nav-default">æ­£åˆ™è¡¨è¾¾å¼</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="http://localhost:1313" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="http://localhost:1313" class="iconfont icon-twitter" title="twitter"></a>
      <a href="http://localhost:1313" class="iconfont icon-facebook" title="facebook"></a>
      <a href="http://localhost:1313" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="http://localhost:1313" class="iconfont icon-google" title="google"></a>
      <a href="http://localhost:1313" class="iconfont icon-github" title="github"></a>
      <a href="http://localhost:1313" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://localhost:1313" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="http://localhost:1313" class="iconfont icon-douban" title="douban"></a>
      <a href="http://localhost:1313" class="iconfont icon-pocket" title="pocket"></a>
      <a href="http://localhost:1313" class="iconfont icon-tumblr" title="tumblr"></a>
      <a href="http://localhost:1313" class="iconfont icon-instagram" title="instagram"></a>
      <a href="http://localhost:1313" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="yuanshuai1122.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2023<span class="heart"><i class="iconfont icon-heart"></i></span><span>yuanshuai</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
  <script>
    var languageCode = "zh-cn".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
    timeago().render(document.querySelectorAll('.timeago'), languageCode);
    timeago.cancel();  
  </script>



<script type="text/javascript" src="/yuanshuai1122.github.io/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
